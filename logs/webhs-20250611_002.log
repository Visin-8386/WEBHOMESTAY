2025-06-11 08:59:09.884 +07:00 [INF] Starting database basic initialization...
2025-06-11 08:59:11.243 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 08:59:11.308 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 08:59:11.323 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 08:59:11.330 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 08:59:11.358 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 08:59:11.392 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 08:59:11.418 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 08:59:11.691 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 08:59:11.735 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 08:59:11.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 08:59:11.754 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.803 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.809 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.813 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.819 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 08:59:11.823 +07:00 [INF] Starting sample data seeding...
2025-06-11 08:59:11.825 +07:00 [INF] Starting data seeding...
2025-06-11 08:59:11.841 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 08:59:11.845 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 08:59:11.853 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 08:59:11.855 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 08:59:11.861 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 08:59:11.863 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 08:59:11.871 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 08:59:11.873 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 08:59:11.891 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 08:59:11.899 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 08:59:11.901 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 08:59:11.902 +07:00 [INF] Data seeding completed successfully
2025-06-11 08:59:11.903 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 08:59:11.904 +07:00 [INF] Database initialization completed successfully.
2025-06-11 08:59:11.931 +07:00 [INF] Background Job Service started
2025-06-11 08:59:11.982 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 08:59:12.006 +07:00 [INF] Processed 0 expired payments
2025-06-11 08:59:12.091 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 08:59:12.135 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 08:59:12.136 +07:00 [INF] Hosting environment: Development
2025-06-11 08:59:12.137 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 08:59:12.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 08:59:12.779 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:12.792 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 08:59:12.849 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 08:59:12.862 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 08:59:13.000 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 08:59:13.015 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 08:59:13.148 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 08:59:13.395 +07:00 [INF] Executed ViewResult - view Index executed in 249.8104ms.
2025-06-11 08:59:13.400 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 535.1459ms
2025-06-11 08:59:13.402 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 08:59:13.403 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 08:59:13.409 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:13.410 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:13.417 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 08:59:13.419 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:13.419 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 835.5048ms
2025-06-11 08:59:13.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 18.596ms
2025-06-11 08:59:13.422 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 08:59:13.430 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 08:59:13.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.8014ms
2025-06-11 08:59:13.464 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.2327ms
2025-06-11 08:59:14.689 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 08:59:14.700 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:14.707 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 08:59:14.718 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 08:59:14.734 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 08:59:14.769 +07:00 [INF] Executed ViewResult - view Login executed in 36.0999ms.
2025-06-11 08:59:14.772 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 51.3136ms
2025-06-11 08:59:14.774 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 08:59:14.775 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:14.776 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 87.8369ms
2025-06-11 08:59:14.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 08:59:14.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 08:59:14.786 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.8791ms
2025-06-11 08:59:14.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.2067ms
2025-06-11 08:59:16.544 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/ExternalLogin?provider=Facebook - null null
2025-06-11 08:59:16.551 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:16.556 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.ExternalLogin (WebHS)'
2025-06-11 08:59:16.558 +07:00 [INF] Route matched with {action = "ExternalLogin", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ExternalLogin(System.String, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 08:59:16.574 +07:00 [INF] Executing ChallengeResult with authentication schemes (["Facebook"]).
2025-06-11 08:59:16.581 +07:00 [INF] AuthenticationScheme: Facebook was challenged.
2025-06-11 08:59:16.583 +07:00 [INF] Executed action WebHS.Controllers.AccountController.ExternalLogin (WebHS) in 23.0271ms
2025-06-11 08:59:16.586 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.ExternalLogin (WebHS)'
2025-06-11 08:59:16.587 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:16.589 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/ExternalLogin?provider=Facebook - 302 0 null 44.5004ms
2025-06-11 08:59:45.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 08:59:45.517 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:45.518 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 08:59:45.520 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 08:59:45.527 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 08:59:45.530 +07:00 [INF] Executed ViewResult - view Login executed in 3.4754ms.
2025-06-11 08:59:45.532 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 9.9957ms
2025-06-11 08:59:45.533 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 08:59:45.534 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:45.535 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 23.4644ms
2025-06-11 08:59:45.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 08:59:45.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6762ms
2025-06-11 08:59:46.902 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/ExternalLogin?provider=Facebook - null null
2025-06-11 08:59:46.907 +07:00 [INF] No cached response available for this request.
2025-06-11 08:59:46.908 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.ExternalLogin (WebHS)'
2025-06-11 08:59:46.909 +07:00 [INF] Route matched with {action = "ExternalLogin", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ExternalLogin(System.String, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 08:59:46.911 +07:00 [INF] Executing ChallengeResult with authentication schemes (["Facebook"]).
2025-06-11 08:59:46.912 +07:00 [INF] AuthenticationScheme: Facebook was challenged.
2025-06-11 08:59:46.913 +07:00 [INF] Executed action WebHS.Controllers.AccountController.ExternalLogin (WebHS) in 2.6911ms
2025-06-11 08:59:46.914 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.ExternalLogin (WebHS)'
2025-06-11 08:59:46.915 +07:00 [INF] The response could not be cached for this request.
2025-06-11 08:59:46.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/ExternalLogin?provider=Facebook - 302 0 null 13.5705ms
2025-06-11 09:22:26.302 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:22:26.355 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:22:26.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:22:26.362 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:22:26.377 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:22:26.391 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:22:26.466 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:28:24.601 +07:00 [INF] Starting database basic initialization...
2025-06-11 09:28:26.040 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:28:26.133 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:28:26.150 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:28:26.164 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:28:26.190 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:28:26.237 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:28:26.311 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:28:26.590 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:4dcf3a97-af46-4244-b7c3-5b4d6aecd5af
Error Number:3701,State:5,Class:11
2025-06-11 09:28:26.714 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 09:28:26.808 +07:00 [INF] Background Job Service started
2025-06-11 09:28:27.070 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 09:28:27.087 +07:00 [INF] Processed 0 expired payments
2025-06-11 09:28:27.096 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason]
FROM [BlockedDates] AS [b]
WHERE [b].[Date] < DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-06-11 09:28:27.102 +07:00 [INF] Cleaned up 0 expired blocked dates
2025-06-11 09:28:27.232 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE CONVERT(date, [b].[CreatedAt]) = @__today_0
2025-06-11 09:28:27.238 +07:00 [INF] Daily report: 0 bookings created today
2025-06-11 09:28:27.249 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 09:28:27.334 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 09:28:27.336 +07:00 [INF] Hosting environment: Development
2025-06-11 09:28:27.338 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 09:28:27.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:28:27.896 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:27.910 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 09:28:27.983 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:28:28.005 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:28:28.234 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:28.252 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:28:28.518 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:28:28.725 +07:00 [INF] Executed ViewResult - view Index executed in 218.1048ms.
2025-06-11 09:28:28.729 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 720.6268ms
2025-06-11 09:28:28.732 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:28:28.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 09:28:28.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/home.css - null null
2025-06-11 09:28:28.738 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:28.745 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:28.745 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:28.754 +07:00 [INF] The file /css/home.css was not modified
2025-06-11 09:28:28.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 1194.2897ms
2025-06-11 09:28:28.758 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:28.813 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:28.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:28.819 +07:00 [INF] Sending file. Request path: '/WebHS.styles.css'. Physical path: 'D:\WebHS\obj\Debug\net8.0\scopedcss\bundle\WebHS.styles.css'
2025-06-11 09:28:28.822 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/css/home.css - 304 null text/css 86.2933ms
2025-06-11 09:28:28.830 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:28.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 12.9044ms
2025-06-11 09:28:28.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 200 1123 text/css 107.5224ms
2025-06-11 09:28:28.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.4951ms
2025-06-11 09:28:30.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:28:30.631 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:30.639 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:28:30.648 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:28:30.663 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:28:30.698 +07:00 [INF] Executed ViewResult - view Login executed in 35.6146ms.
2025-06-11 09:28:30.700 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 50.615ms
2025-06-11 09:28:30.702 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:28:30.704 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:30.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 82.9291ms
2025-06-11 09:28:30.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:30.713 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:30.715 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1204ms
2025-06-11 09:28:30.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.2443ms
2025-06-11 09:28:32.279 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 09:28:32.284 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:28:32.285 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:28:32.292 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:28:32.297 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:28:32.340 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:28:32.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:28:32.484 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:28:32.502 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:28:32.510 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:28:32.525 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:28:32.531 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:28:32.533 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:28:32.534 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 235.9582ms
2025-06-11 09:28:32.535 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:28:32.537 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 258.0688ms
2025-06-11 09:28:32.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:28:32.543 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:32.547 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:28:32.548 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:28:32.557 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:28:32.562 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:28:32.567 +07:00 [INF] Executed ViewResult - view Index executed in 5.5462ms.
2025-06-11 09:28:32.569 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.6448ms
2025-06-11 09:28:32.570 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:28:32.571 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:32.572 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 32.6521ms
2025-06-11 09:28:32.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:32.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:32.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.1328ms
2025-06-11 09:28:32.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.9475ms
2025-06-11 09:28:33.175 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:28:33.179 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:33.193 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:28:33.209 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:28:33.256 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:28:33.270 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:33.331 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:28:33.350 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:33.355 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:33.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:33.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:33.370 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:28:33.381 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:28:33.417 +07:00 [INF] Executed ViewResult - view Index executed in 35.9173ms.
2025-06-11 09:28:33.419 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 207.8311ms
2025-06-11 09:28:33.421 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:28:33.422 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:33.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 248.3258ms
2025-06-11 09:28:33.426 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:33.427 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:33.433 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7879ms
2025-06-11 09:28:33.434 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0913ms
2025-06-11 09:28:34.523 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 09:28:34.528 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:34.542 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 09:28:34.546 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:28:34.577 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:28:34.594 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 09:28:34.678 +07:00 [INF] Executed ViewResult - view Create executed in 83.9355ms.
2025-06-11 09:28:34.680 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 132.4775ms
2025-06-11 09:28:34.681 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 09:28:34.682 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:34.683 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 159.9769ms
2025-06-11 09:28:34.686 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:34.689 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3851ms
2025-06-11 09:28:34.692 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:34.698 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5034ms
2025-06-11 09:28:41.438 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 09:28:41.443 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:41.446 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:28:41.450 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:41.481 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:28:41.506 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:41.531 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:41.549 +07:00 [INF] Executing ViewResult, running view ManageBookings.
2025-06-11 09:28:41.551 +07:00 [ERR] The view 'ManageBookings' was not found. Searched locations: ["/Views/Host/ManageBookings.cshtml","/Views/Shared/ManageBookings.cshtml"]
2025-06-11 09:28:41.557 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 101.184ms
2025-06-11 09:28:41.558 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:28:41.687 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ManageBookings' was not found. The following locations were searched:
/Views/Host/ManageBookings.cshtml
/Views/Shared/ManageBookings.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at WebHS.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\RateLimitingMiddleware.cs:line 40
   at WebHS.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\SecurityHeadersMiddleware.cs:line 31
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-11 09:28:41.711 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 500 null text/html; charset=utf-8 272.7088ms
2025-06-11 09:28:41.719 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:41.719 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:41.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4862ms
2025-06-11 09:28:41.730 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.6037ms
2025-06-11 09:28:43.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 09:28:43.010 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:43.013 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 09:28:43.014 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:28:43.019 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:28:43.021 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 09:28:43.025 +07:00 [INF] Executed ViewResult - view Create executed in 3.5064ms.
2025-06-11 09:28:43.026 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 10.1334ms
2025-06-11 09:28:43.027 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 09:28:43.028 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:43.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 22.9149ms
2025-06-11 09:28:43.032 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:43.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2669ms
2025-06-11 09:28:44.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 09:28:44.110 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:44.114 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:44.120 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:44.135 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:44.147 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 09:28:44.153 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:28:44.168 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:44.183 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 09:28:44.205 +07:00 [INF] Executed ViewResult - view Dashboard executed in 23.0326ms.
2025-06-11 09:28:44.206 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 84.2284ms
2025-06-11 09:28:44.208 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:44.209 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:44.210 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 105.0684ms
2025-06-11 09:28:44.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:44.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.2888ms
2025-06-11 09:28:44.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:44.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.595ms
2025-06-11 09:28:45.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 09:28:45.846 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:45.848 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 09:28:45.851 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:45.859 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 09:28:45.862 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 09:28:45.870 +07:00 [INF] Executed ViewResult - view Homestays executed in 8.3467ms.
2025-06-11 09:28:45.872 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 18.7237ms
2025-06-11 09:28:45.873 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 09:28:45.874 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:45.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 33.2055ms
2025-06-11 09:28:45.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:45.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:45.883 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7979ms
2025-06-11 09:28:45.884 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2329ms
2025-06-11 09:28:48.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 09:28:48.916 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:48.917 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:48.918 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:48.926 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 09:28:48.929 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:28:48.943 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:48.951 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 09:28:48.953 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9355ms.
2025-06-11 09:28:48.954 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 34.415ms
2025-06-11 09:28:48.955 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:48.956 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:48.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 44.4921ms
2025-06-11 09:28:48.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:48.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8953ms
2025-06-11 09:28:51.528 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 09:28:51.537 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:51.538 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:28:51.539 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:51.543 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:28:51.564 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:51.586 +07:00 [INF] Executing ViewResult, running view ManageBookings.
2025-06-11 09:28:51.591 +07:00 [ERR] The view 'ManageBookings' was not found. Searched locations: ["/Views/Host/ManageBookings.cshtml","/Views/Shared/ManageBookings.cshtml"]
2025-06-11 09:28:51.602 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 61.9397ms
2025-06-11 09:28:51.606 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:28:51.748 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ManageBookings' was not found. The following locations were searched:
/Views/Host/ManageBookings.cshtml
/Views/Shared/ManageBookings.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at WebHS.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\RateLimitingMiddleware.cs:line 40
   at WebHS.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\SecurityHeadersMiddleware.cs:line 31
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-11 09:28:51.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 500 null text/html; charset=utf-8 227.7105ms
2025-06-11 09:28:51.762 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:51.762 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:51.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.587ms
2025-06-11 09:28:51.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0841ms
2025-06-11 09:28:52.352 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 09:28:52.355 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:52.357 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:52.357 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:28:52.364 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 09:28:52.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:28:52.372 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:52.381 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 09:28:52.383 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.1484ms.
2025-06-11 09:28:52.384 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 25.2164ms
2025-06-11 09:28:52.385 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:28:52.386 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:52.387 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 35.5368ms
2025-06-11 09:28:52.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:52.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3027ms
2025-06-11 09:28:53.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:28:53.507 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:53.509 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:28:53.510 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:28:53.517 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:28:53.530 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:28:53.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:53.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:53.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:53.546 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:28:53.580 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:28:53.584 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:28:53.586 +07:00 [INF] Executed ViewResult - view Index executed in 2.5322ms.
2025-06-11 09:28:53.587 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 74.9051ms
2025-06-11 09:28:53.588 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:28:53.589 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:53.591 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 87.7515ms
2025-06-11 09:28:53.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:53.595 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:53.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3284ms
2025-06-11 09:28:53.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.0341ms
2025-06-11 09:28:57.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - null null
2025-06-11 09:28:57.457 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:57.461 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:57.466 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:28:57.477 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 09:28:57.504 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:57.541 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:57.553 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:28:57.571 +07:00 [INF] Executed ViewResult - view MyBookings executed in 18.4611ms.
2025-06-11 09:28:57.572 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 104.5659ms
2025-06-11 09:28:57.573 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:57.574 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:57.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - 200 null text/html; charset=utf-8 124.8475ms
2025-06-11 09:28:57.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:57.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:57.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3472ms
2025-06-11 09:28:57.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.353ms
2025-06-11 09:28:58.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=pending - null null
2025-06-11 09:28:58.515 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:58.517 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:58.518 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:28:58.527 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 09:28:58.539 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:28:58.571 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:58.578 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:28:58.583 +07:00 [INF] Executed ViewResult - view MyBookings executed in 5.1557ms.
2025-06-11 09:28:58.585 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 65.2853ms
2025-06-11 09:28:58.586 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:58.587 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:58.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=pending - 200 null text/html; charset=utf-8 77.7255ms
2025-06-11 09:28:58.590 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:58.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:58.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6954ms
2025-06-11 09:28:58.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4646ms
2025-06-11 09:28:59.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=confirmed - null null
2025-06-11 09:28:59.003 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:59.005 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.006 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:28:59.011 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 09:28:59.025 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:59.027 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:28:59.029 +07:00 [INF] Executed ViewResult - view MyBookings executed in 2.1737ms.
2025-06-11 09:28:59.031 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 22.7551ms
2025-06-11 09:28:59.032 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.033 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:59.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=confirmed - 200 null text/html; charset=utf-8 34.8646ms
2025-06-11 09:28:59.037 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:59.038 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:59.044 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7624ms
2025-06-11 09:28:59.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5495ms
2025-06-11 09:28:59.384 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=completed - null null
2025-06-11 09:28:59.388 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:59.389 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.390 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:28:59.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 09:28:59.406 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:59.408 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:28:59.410 +07:00 [INF] Executed ViewResult - view MyBookings executed in 1.6917ms.
2025-06-11 09:28:59.411 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 19.7855ms
2025-06-11 09:28:59.412 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.413 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:59.414 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=completed - 200 null text/html; charset=utf-8 29.9128ms
2025-06-11 09:28:59.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:59.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:59.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8691ms
2025-06-11 09:28:59.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7855ms
2025-06-11 09:28:59.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=cancelled - null null
2025-06-11 09:28:59.787 +07:00 [INF] No cached response available for this request.
2025-06-11 09:28:59.792 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.795 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:28:59.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 09:28:59.821 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:28:59.824 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:28:59.826 +07:00 [INF] Executed ViewResult - view MyBookings executed in 2.03ms.
2025-06-11 09:28:59.828 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 31.2976ms
2025-06-11 09:28:59.829 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:28:59.831 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:28:59.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=cancelled - 200 null text/html; charset=utf-8 50.8632ms
2025-06-11 09:28:59.835 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:28:59.838 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:28:59.844 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0169ms
2025-06-11 09:28:59.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.8003ms
2025-06-11 09:29:00.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=all - null null
2025-06-11 09:29:00.810 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:00.812 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:29:00.813 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:29:00.818 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 09:29:00.832 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:29:00.835 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:29:00.837 +07:00 [INF] Executed ViewResult - view MyBookings executed in 2.0775ms.
2025-06-11 09:29:00.839 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 24.5603ms
2025-06-11 09:29:00.840 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:29:00.842 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:00.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=all - 200 null text/html; charset=utf-8 36.6555ms
2025-06-11 09:29:00.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:00.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:00.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3605ms
2025-06-11 09:29:00.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.197ms
2025-06-11 09:29:03.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:29:03.781 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:03.782 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:29:03.783 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:29:03.788 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:29:03.791 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:29:03.793 +07:00 [INF] Executed ViewResult - view Index executed in 2.3565ms.
2025-06-11 09:29:03.795 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.4848ms
2025-06-11 09:29:03.796 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:29:03.796 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:03.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.6726ms
2025-06-11 09:29:03.800 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:03.800 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:03.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5718ms
2025-06-11 09:29:03.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6834ms
2025-06-11 09:29:04.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:29:04.480 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:04.482 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:04.484 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:29:04.490 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:29:04.587 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:29:04.596 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:04.605 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:04.610 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:04.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:04.620 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:29:04.622 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:29:04.624 +07:00 [INF] Executed ViewResult - view Index executed in 2.3913ms.
2025-06-11 09:29:04.627 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 140.863ms
2025-06-11 09:29:04.628 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:04.629 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:04.630 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 156.7347ms
2025-06-11 09:29:04.634 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:04.634 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:04.642 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.96ms
2025-06-11 09:29:04.642 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.1996ms
2025-06-11 09:29:06.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 09:29:06.164 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:06.165 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:29:06.166 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:29:06.170 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:29:06.184 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:29:06.192 +07:00 [INF] Executing ViewResult, running view ManageBookings.
2025-06-11 09:29:06.194 +07:00 [ERR] The view 'ManageBookings' was not found. Searched locations: ["/Views/Host/ManageBookings.cshtml","/Views/Shared/ManageBookings.cshtml"]
2025-06-11 09:29:06.196 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 28.9362ms
2025-06-11 09:29:06.198 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:29:06.391 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ManageBookings' was not found. The following locations were searched:
/Views/Host/ManageBookings.cshtml
/Views/Shared/ManageBookings.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at WebHS.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\RateLimitingMiddleware.cs:line 40
   at WebHS.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\SecurityHeadersMiddleware.cs:line 31
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-11 09:29:06.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 500 null text/html; charset=utf-8 256.2213ms
2025-06-11 09:29:06.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:06.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:06.427 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6342ms
2025-06-11 09:29:06.434 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.7732ms
2025-06-11 09:29:07.207 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:29:07.211 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:07.212 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:07.213 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:29:07.218 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:29:07.229 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:29:07.236 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:07.290 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:07.297 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:07.301 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:07.311 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:29:07.312 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:29:07.314 +07:00 [INF] Executed ViewResult - view Index executed in 1.7956ms.
2025-06-11 09:29:07.315 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 100.8829ms
2025-06-11 09:29:07.317 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:07.318 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:07.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 111.7711ms
2025-06-11 09:29:07.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:07.325 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7323ms
2025-06-11 09:29:10.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 09:29:10.587 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:10.588 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:29:10.589 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:29:10.597 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 09:29:10.601 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:29:10.613 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:29:10.620 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 09:29:10.621 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4086ms.
2025-06-11 09:29:10.623 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 31.2155ms
2025-06-11 09:29:10.624 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 09:29:10.625 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:10.626 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 42.5117ms
2025-06-11 09:29:10.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:10.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:10.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9934ms
2025-06-11 09:29:10.637 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6291ms
2025-06-11 09:29:13.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:29:13.453 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:13.457 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:29:13.464 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:29:13.471 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:29:13.475 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:29:13.477 +07:00 [INF] Executed ViewResult - view Index executed in 1.5646ms.
2025-06-11 09:29:13.478 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.8346ms
2025-06-11 09:29:13.479 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:29:13.480 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:13.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 38.9133ms
2025-06-11 09:29:13.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:13.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:13.491 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0732ms
2025-06-11 09:29:13.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.8826ms
2025-06-11 09:29:13.928 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:29:13.937 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:13.940 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:13.944 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:29:13.949 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:29:14.022 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:29:14.027 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:14.030 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:14.033 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:14.035 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:29:14.039 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:29:14.042 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:29:14.044 +07:00 [INF] Executed ViewResult - view Index executed in 1.8623ms.
2025-06-11 09:29:14.045 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 99.431ms
2025-06-11 09:29:14.046 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:29:14.047 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:29:14.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 119.9248ms
2025-06-11 09:29:14.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:14.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:14.058 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9894ms
2025-06-11 09:29:14.058 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.1862ms
2025-06-11 09:29:20.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 09:29:20.401 +07:00 [INF] No cached response available for this request.
2025-06-11 09:29:20.403 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:29:20.405 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 09:29:20.416 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 09:29:20.478 +07:00 [INF] Executed DbCommand (58ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:29:20.509 +07:00 [INF] Executing ViewResult, running view ManageBookings.
2025-06-11 09:29:20.510 +07:00 [ERR] The view 'ManageBookings' was not found. Searched locations: ["/Views/Host/ManageBookings.cshtml","/Views/Shared/ManageBookings.cshtml"]
2025-06-11 09:29:20.514 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 106.0561ms
2025-06-11 09:29:20.516 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 09:29:20.638 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ManageBookings' was not found. The following locations were searched:
/Views/Host/ManageBookings.cshtml
/Views/Shared/ManageBookings.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at WebHS.Middleware.RateLimitingMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\RateLimitingMiddleware.cs:line 40
   at WebHS.Middleware.SecurityHeadersMiddleware.InvokeAsync(HttpContext context) in D:\WebHS\Middleware\SecurityHeadersMiddleware.cs:line 31
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-11 09:29:20.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 500 null text/html; charset=utf-8 253.1859ms
2025-06-11 09:29:20.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:29:20.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:29:20.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.2578ms
2025-06-11 09:29:20.668 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.9964ms
2025-06-11 09:39:16.558 +07:00 [INF] Starting database basic initialization...
2025-06-11 09:39:18.169 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:39:18.215 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:39:18.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:39:18.221 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:39:18.236 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:39:18.253 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:39:18.327 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:39:18.361 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:e5e8c201-62e2-412a-b3de-3398fc306306
Error Number:3701,State:5,Class:11
2025-06-11 09:39:18.415 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 09:39:18.435 +07:00 [INF] Background Job Service started
2025-06-11 09:39:18.659 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 09:39:18.676 +07:00 [INF] Processed 0 expired payments
2025-06-11 09:39:18.685 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason]
FROM [BlockedDates] AS [b]
WHERE [b].[Date] < DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-06-11 09:39:18.690 +07:00 [INF] Cleaned up 0 expired blocked dates
2025-06-11 09:39:18.749 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 09:39:18.780 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE CONVERT(date, [b].[CreatedAt]) = @__today_0
2025-06-11 09:39:18.785 +07:00 [INF] Daily report: 0 bookings created today
2025-06-11 09:39:18.807 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 09:39:18.809 +07:00 [INF] Hosting environment: Development
2025-06-11 09:39:18.811 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 09:39:18.901 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:19.053 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:19.064 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 09:39:19.122 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:19.135 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:19.265 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:39:19.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:19.422 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:19.531 +07:00 [INF] Executed ViewResult - view Index executed in 110.3069ms.
2025-06-11 09:39:19.535 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 397.0696ms
2025-06-11 09:39:19.538 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 09:39:19.538 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:19.544 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:19.545 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:19.553 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 09:39:19.555 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 659.241ms
2025-06-11 09:39:19.555 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:19.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:19.566 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:19.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 28.935ms
2025-06-11 09:39:19.573 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2925ms
2025-06-11 09:39:19.605 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.5335ms
2025-06-11 09:39:21.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:39:21.686 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:21.690 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:21.697 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:21.710 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:39:21.744 +07:00 [INF] Executed ViewResult - view Login executed in 34.756ms.
2025-06-11 09:39:21.746 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 46.2186ms
2025-06-11 09:39:21.748 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:21.750 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:21.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 74.0929ms
2025-06-11 09:39:21.754 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:21.755 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:21.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4541ms
2025-06-11 09:39:21.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.2005ms
2025-06-11 09:39:24.252 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 09:39:24.257 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:39:24.258 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:39:24.265 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:24.270 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:24.310 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:39:24.372 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:39:24.470 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:39:24.497 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:39:24.505 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:39:24.522 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:39:24.530 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:39:24.533 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:39:24.534 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 261.6343ms
2025-06-11 09:39:24.535 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:24.536 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 284.4196ms
2025-06-11 09:39:24.539 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:24.543 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:24.548 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:24.549 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:24.557 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:24.562 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:24.568 +07:00 [INF] Executed ViewResult - view Index executed in 5.972ms.
2025-06-11 09:39:24.569 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.8822ms
2025-06-11 09:39:24.570 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:24.571 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:24.572 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 32.4409ms
2025-06-11 09:39:24.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:24.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:24.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.1582ms
2025-06-11 09:39:24.591 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.4318ms
2025-06-11 09:39:26.999 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:39:27.003 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:27.005 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:27.011 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:39:27.035 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:39:27.052 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:39:27.091 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:39:27.107 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:27.111 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:27.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:27.118 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:27.125 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:39:27.142 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:27.240 +07:00 [INF] Executed ViewResult - view Index executed in 98.7525ms.
2025-06-11 09:39:27.241 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 227.7592ms
2025-06-11 09:39:27.243 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:27.245 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:27.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 247.6757ms
2025-06-11 09:39:27.249 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:27.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:27.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.388ms
2025-06-11 09:39:27.261 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.2505ms
2025-06-11 09:39:27.921 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:27.935 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:27.945 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:27.946 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:27.950 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:27.954 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:27.956 +07:00 [INF] Executed ViewResult - view Index executed in 2.2932ms.
2025-06-11 09:39:27.957 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.5508ms
2025-06-11 09:39:27.958 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:27.959 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:27.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 39.5254ms
2025-06-11 09:39:27.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:27.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:27.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4837ms
2025-06-11 09:39:27.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3413ms
2025-06-11 09:39:28.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:39:28.785 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:28.787 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:28.788 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:39:28.795 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:39:28.838 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:39:28.842 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:28.846 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:28.849 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:28.851 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:28.855 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:39:28.857 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:28.859 +07:00 [INF] Executed ViewResult - view Index executed in 2.2959ms.
2025-06-11 09:39:28.860 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 71.0691ms
2025-06-11 09:39:28.862 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:28.862 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:28.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 82.0801ms
2025-06-11 09:39:28.868 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:28.868 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:28.870 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1288ms
2025-06-11 09:39:28.876 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9078ms
2025-06-11 09:39:31.135 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 09:39:31.140 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:39:31.141 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:39:31.143 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:39:31.147 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:31.151 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 09:39:31.153 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 09:39:31.154 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 09:39:31.155 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:39:31.156 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 7.0858ms
2025-06-11 09:39:31.157 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:39:31.158 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 22.5004ms
2025-06-11 09:39:31.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:31.166 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:31.167 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:31.168 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:31.173 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:31.177 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:31.179 +07:00 [INF] Executed ViewResult - view Index executed in 2.8792ms.
2025-06-11 09:39:31.181 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.6176ms
2025-06-11 09:39:31.182 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:31.184 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:31.185 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 23.3233ms
2025-06-11 09:39:31.187 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:31.188 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:31.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.24ms
2025-06-11 09:39:31.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5931ms
2025-06-11 09:39:32.688 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:39:32.704 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:32.711 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:32.713 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:32.715 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:39:32.717 +07:00 [INF] Executed ViewResult - view Login executed in 2.2705ms.
2025-06-11 09:39:32.718 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.7874ms
2025-06-11 09:39:32.719 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:32.720 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:32.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 33.1674ms
2025-06-11 09:39:32.723 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:32.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:32.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7298ms
2025-06-11 09:39:32.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4328ms
2025-06-11 09:39:34.735 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 09:39:34.739 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:39:34.740 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:39:34.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:34.742 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:34.749 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:39:34.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:39:34.817 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:39:34.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:39:34.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:39:34.828 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:39:34.831 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:39:34.832 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:39:34.833 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 88.2955ms
2025-06-11 09:39:34.834 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:34.835 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 99.9723ms
2025-06-11 09:39:34.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:34.844 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:34.845 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:34.846 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:34.850 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:34.853 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:34.856 +07:00 [INF] Executed ViewResult - view Index executed in 2.9963ms.
2025-06-11 09:39:34.858 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.4067ms
2025-06-11 09:39:34.860 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:34.861 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:34.862 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 22.3919ms
2025-06-11 09:39:34.866 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:34.866 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:34.868 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5259ms
2025-06-11 09:39:34.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4605ms
2025-06-11 09:39:38.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:39:38.657 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:38.659 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:38.660 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:39:38.667 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:39:38.709 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:39:38.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:38.716 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:38.719 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:38.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:38.726 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:39:38.728 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:38.730 +07:00 [INF] Executed ViewResult - view Index executed in 2.3536ms.
2025-06-11 09:39:38.731 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 69.6696ms
2025-06-11 09:39:38.733 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:38.734 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:38.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 81.9595ms
2025-06-11 09:39:38.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:38.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:38.748 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.6847ms
2025-06-11 09:39:38.749 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.8322ms
2025-06-11 09:39:39.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:39.288 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:39.290 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:39.291 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:39.296 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:39.299 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:39.300 +07:00 [INF] Executed ViewResult - view Index executed in 1.58ms.
2025-06-11 09:39:39.301 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.6426ms
2025-06-11 09:39:39.302 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:39.303 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:39.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.8015ms
2025-06-11 09:39:39.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:39.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:39.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9056ms
2025-06-11 09:39:39.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4055ms
2025-06-11 09:39:41.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:41.281 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:41.282 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:41.284 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:41.288 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:41.293 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:41.295 +07:00 [INF] Executed ViewResult - view Index executed in 2.1192ms.
2025-06-11 09:39:41.297 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.3344ms
2025-06-11 09:39:41.298 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:41.299 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:41.300 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 22.7152ms
2025-06-11 09:39:41.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:41.303 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:41.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0302ms
2025-06-11 09:39:41.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.7623ms
2025-06-11 09:39:45.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 09:39:45.282 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:45.287 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 09:39:45.291 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:45.307 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 09:39:45.309 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 09:39:45.314 +07:00 [INF] Executed ViewResult - view Profile executed in 5.1002ms.
2025-06-11 09:39:45.316 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 23.7054ms
2025-06-11 09:39:45.317 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 09:39:45.318 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:45.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 40.6867ms
2025-06-11 09:39:45.320 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:45.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:45.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2498ms
2025-06-11 09:39:45.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5894ms
2025-06-11 09:39:46.278 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 09:39:46.282 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:39:46.283 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:39:46.284 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:39:46.285 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:46.286 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 09:39:46.287 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 09:39:46.289 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 09:39:46.289 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:39:46.290 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 4.2773ms
2025-06-11 09:39:46.291 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:39:46.292 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 13.7895ms
2025-06-11 09:39:46.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:46.298 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:46.299 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:46.299 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:46.303 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:46.307 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:46.308 +07:00 [INF] Executed ViewResult - view Index executed in 1.426ms.
2025-06-11 09:39:46.309 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.6428ms
2025-06-11 09:39:46.310 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:46.311 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:46.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.2255ms
2025-06-11 09:39:46.315 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:46.315 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:46.320 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5454ms
2025-06-11 09:39:46.321 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.759ms
2025-06-11 09:39:46.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:39:46.921 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:46.923 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:46.924 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:46.925 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:39:46.927 +07:00 [INF] Executed ViewResult - view Login executed in 1.9046ms.
2025-06-11 09:39:46.928 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.5282ms
2025-06-11 09:39:46.929 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:46.930 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:46.931 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.7225ms
2025-06-11 09:39:46.934 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:46.934 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:46.940 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8934ms
2025-06-11 09:39:46.940 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3415ms
2025-06-11 09:39:48.912 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 09:39:48.915 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:39:48.916 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:39:48.917 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:48.918 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:39:48.923 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:39:48.926 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:39:48.987 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:39:48.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:39:48.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:39:48.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:39:48.999 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:39:49.000 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:39:49.001 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 81.8616ms
2025-06-11 09:39:49.002 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:39:49.003 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 91.2842ms
2025-06-11 09:39:49.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:49.009 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:49.010 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:49.011 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:49.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:49.017 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:49.019 +07:00 [INF] Executed ViewResult - view Index executed in 1.4667ms.
2025-06-11 09:39:49.020 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.7779ms
2025-06-11 09:39:49.021 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:49.022 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:49.023 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.0033ms
2025-06-11 09:39:49.026 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:49.026 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:49.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9873ms
2025-06-11 09:39:49.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7141ms
2025-06-11 09:39:49.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:39:49.704 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:49.706 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:49.707 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:39:49.710 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:39:49.722 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:39:49.726 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:49.729 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:49.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:49.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:39:49.738 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:39:49.740 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:49.742 +07:00 [INF] Executed ViewResult - view Index executed in 1.7701ms.
2025-06-11 09:39:49.743 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 34.4231ms
2025-06-11 09:39:49.744 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:39:49.745 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:49.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 45.4449ms
2025-06-11 09:39:49.749 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:49.749 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:49.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9578ms
2025-06-11 09:39:49.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9495ms
2025-06-11 09:39:50.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:50.428 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:50.429 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:50.430 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:50.433 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:50.438 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:50.439 +07:00 [INF] Executed ViewResult - view Index executed in 1.8293ms.
2025-06-11 09:39:50.441 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.0786ms
2025-06-11 09:39:50.442 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:50.443 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:50.443 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.4646ms
2025-06-11 09:39:50.446 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:50.447 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:50.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.886ms
2025-06-11 09:39:50.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9121ms
2025-06-11 09:39:50.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:39:50.832 +07:00 [INF] No cached response available for this request.
2025-06-11 09:39:50.833 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:50.834 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:39:50.838 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:39:50.841 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:39:50.843 +07:00 [INF] Executed ViewResult - view Index executed in 1.5429ms.
2025-06-11 09:39:50.844 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.8119ms
2025-06-11 09:39:50.845 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:39:50.846 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:39:50.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.7624ms
2025-06-11 09:39:50.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:39:50.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:39:50.856 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2643ms
2025-06-11 09:39:50.856 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.621ms
2025-06-11 09:42:46.247 +07:00 [INF] Starting database basic initialization...
2025-06-11 09:42:47.392 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:42:47.429 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:42:47.434 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:42:47.437 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:42:47.451 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:42:47.468 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:42:47.533 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:42:47.568 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:78e12091-1f64-44a3-ab51-ebed2f7b50fb
Error Number:3701,State:5,Class:11
2025-06-11 09:42:47.620 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 09:42:47.640 +07:00 [INF] Background Job Service started
2025-06-11 09:42:47.868 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 09:42:47.888 +07:00 [INF] Processed 0 expired payments
2025-06-11 09:42:47.895 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason]
FROM [BlockedDates] AS [b]
WHERE [b].[Date] < DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-06-11 09:42:47.898 +07:00 [INF] Cleaned up 0 expired blocked dates
2025-06-11 09:42:47.966 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 09:42:47.985 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE CONVERT(date, [b].[CreatedAt]) = @__today_0
2025-06-11 09:42:47.990 +07:00 [INF] Daily report: 0 bookings created today
2025-06-11 09:42:48.013 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 09:42:48.015 +07:00 [INF] Hosting environment: Development
2025-06-11 09:42:48.016 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 09:42:48.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:42:48.441 +07:00 [INF] No cached response available for this request.
2025-06-11 09:42:48.452 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 09:42:48.500 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:42:48.514 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:42:48.643 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:42:48.652 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:42:48.795 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:42:48.903 +07:00 [INF] Executed ViewResult - view Index executed in 109.1123ms.
2025-06-11 09:42:48.906 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 389.0167ms
2025-06-11 09:42:48.909 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:42:48.910 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 09:42:48.913 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:42:48.921 +07:00 [INF] No cached response available for this request.
2025-06-11 09:42:48.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 644.6917ms
2025-06-11 09:42:48.929 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 09:42:48.932 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:42:48.935 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:42:48.937 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:42:48.945 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 35.9952ms
2025-06-11 09:42:48.950 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 15.0893ms
2025-06-11 09:42:48.980 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.6092ms
2025-06-11 09:42:51.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 09:42:51.542 +07:00 [INF] No cached response available for this request.
2025-06-11 09:42:51.547 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:42:51.550 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:42:51.553 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 09:42:51.573 +07:00 [INF] Executed ViewResult - view About executed in 19.886ms.
2025-06-11 09:42:51.575 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 23.4962ms
2025-06-11 09:42:51.576 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:42:51.577 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:42:51.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 44.9179ms
2025-06-11 09:42:51.585 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:42:51.586 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:42:51.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0116ms
2025-06-11 09:42:51.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.3215ms
2025-06-11 09:42:59.557 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:42:59.562 +07:00 [INF] No cached response available for this request.
2025-06-11 09:42:59.566 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:42:59.576 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:42:59.607 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:42:59.623 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:42:59.670 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:42:59.728 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:42:59.742 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:42:59.762 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:42:59.772 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:42:59.795 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:42:59.812 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:42:59.847 +07:00 [INF] Executed ViewResult - view Index executed in 36.2063ms.
2025-06-11 09:42:59.849 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 271.3257ms
2025-06-11 09:42:59.850 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:42:59.852 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:42:59.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 296.4215ms
2025-06-11 09:42:59.855 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:42:59.856 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:42:59.865 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.6593ms
2025-06-11 09:42:59.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.2664ms
2025-06-11 09:43:18.631 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 09:43:18.636 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:18.639 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:43:18.640 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:43:18.642 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 09:43:18.644 +07:00 [INF] Executed ViewResult - view About executed in 1.9926ms.
2025-06-11 09:43:18.645 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.3099ms
2025-06-11 09:43:18.646 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:43:18.646 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:18.647 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 16.6853ms
2025-06-11 09:43:18.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:18.656 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:18.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2523ms
2025-06-11 09:43:18.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8243ms
2025-06-11 09:43:20.204 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:43:20.208 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:20.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:43:20.212 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:43:20.217 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:43:20.242 +07:00 [INF] Executed ViewResult - view Login executed in 25.5274ms.
2025-06-11 09:43:20.243 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 29.3262ms
2025-06-11 09:43:20.244 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:43:20.245 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:20.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 42.3678ms
2025-06-11 09:43:20.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:20.252 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5588ms
2025-06-11 09:43:20.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:20.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.136ms
2025-06-11 09:43:21.303 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 09:43:21.309 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:43:21.310 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:43:21.315 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:43:21.320 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:43:21.354 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:43:21.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:43:21.489 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:43:21.507 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:43:21.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:43:21.530 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:43:21.538 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:43:21.541 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:43:21.542 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 219.2733ms
2025-06-11 09:43:21.543 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:43:21.544 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 240.9781ms
2025-06-11 09:43:21.548 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:43:21.551 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:21.555 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:43:21.556 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:43:21.561 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:43:21.566 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:43:21.571 +07:00 [INF] Executed ViewResult - view Index executed in 5.1456ms.
2025-06-11 09:43:21.572 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.1643ms
2025-06-11 09:43:21.574 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:43:21.575 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:21.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 28.3379ms
2025-06-11 09:43:21.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:21.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:21.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.607ms
2025-06-11 09:43:21.589 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.5359ms
2025-06-11 09:43:24.982 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - null null
2025-06-11 09:43:24.986 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:24.991 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:43:24.994 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 09:43:25.015 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 09:43:25.041 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:43:25.065 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 09:43:25.114 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 09:43:25.143 +07:00 [INF] Executed ViewResult - view MyBookings executed in 29.1052ms.
2025-06-11 09:43:25.145 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 149.1776ms
2025-06-11 09:43:25.146 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 09:43:25.147 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:25.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - 200 null text/html; charset=utf-8 166.5141ms
2025-06-11 09:43:25.150 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:25.152 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:25.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.691ms
2025-06-11 09:43:25.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8342ms
2025-06-11 09:43:26.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 09:43:26.194 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:26.200 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 09:43:26.204 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:43:26.217 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 09:43:26.220 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 09:43:26.225 +07:00 [INF] Executed ViewResult - view Profile executed in 5.0399ms.
2025-06-11 09:43:26.226 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 20.4627ms
2025-06-11 09:43:26.227 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 09:43:26.228 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:26.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 38.9083ms
2025-06-11 09:43:26.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:26.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:26.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5313ms
2025-06-11 09:43:26.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3726ms
2025-06-11 09:43:27.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:43:27.488 +07:00 [INF] No cached response available for this request.
2025-06-11 09:43:27.490 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:43:27.490 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:43:27.494 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:43:27.505 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:43:27.509 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:43:27.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:43:27.513 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:43:27.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:43:27.520 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:43:27.522 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:43:27.524 +07:00 [INF] Executed ViewResult - view Index executed in 2.3203ms.
2025-06-11 09:43:27.526 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 34.0843ms
2025-06-11 09:43:27.527 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:43:27.528 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:43:27.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 44.6681ms
2025-06-11 09:43:27.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:43:27.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:43:27.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0851ms
2025-06-11 09:43:27.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5564ms
2025-06-11 09:48:42.373 +07:00 [INF] Starting database basic initialization...
2025-06-11 09:48:43.588 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:48:43.639 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:48:43.644 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:48:43.647 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:48:43.666 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:48:43.687 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:48:43.758 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:48:43.794 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:4b11a866-a09a-4ed4-b2b1-0f4bc649c83e
Error Number:3701,State:5,Class:11
2025-06-11 09:48:43.843 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 09:48:43.863 +07:00 [INF] Background Job Service started
2025-06-11 09:48:44.121 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 09:48:44.137 +07:00 [INF] Processed 0 expired payments
2025-06-11 09:48:44.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason]
FROM [BlockedDates] AS [b]
WHERE [b].[Date] < DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-06-11 09:48:44.149 +07:00 [INF] Cleaned up 0 expired blocked dates
2025-06-11 09:48:44.202 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 09:48:44.225 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE CONVERT(date, [b].[CreatedAt]) = @__today_0
2025-06-11 09:48:44.229 +07:00 [INF] Daily report: 0 bookings created today
2025-06-11 09:48:44.246 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 09:48:44.248 +07:00 [INF] Hosting environment: Development
2025-06-11 09:48:44.249 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 09:48:44.375 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:48:44.557 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:44.566 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 09:48:44.615 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:44.628 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:48:44.737 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:48:44.749 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:48:44.892 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:44.993 +07:00 [INF] Executed ViewResult - view Index executed in 102.5411ms.
2025-06-11 09:48:44.998 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 367.0419ms
2025-06-11 09:48:45.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 09:48:45.000 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:45.006 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:45.007 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:45.011 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 09:48:45.013 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:45.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 648.38ms
2025-06-11 09:48:45.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 15.2203ms
2025-06-11 09:48:45.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:45.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:45.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.8131ms
2025-06-11 09:48:45.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.7417ms
2025-06-11 09:48:46.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:48:46.555 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:46.561 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:46.570 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:48:46.583 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:48:46.617 +07:00 [INF] Executed ViewResult - view Login executed in 35.8855ms.
2025-06-11 09:48:46.619 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 46.7375ms
2025-06-11 09:48:46.620 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:46.622 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:46.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 93.3943ms
2025-06-11 09:48:46.627 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:46.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:46.630 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0237ms
2025-06-11 09:48:46.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.9773ms
2025-06-11 09:48:47.760 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 09:48:47.765 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:48:47.767 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:48:47.773 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:47.778 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:48:47.811 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:48:47.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:48:47.951 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:48:47.972 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:48:47.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:48:47.996 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:48:48.002 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:48:48.004 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:48:48.005 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 226.1837ms
2025-06-11 09:48:48.007 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:48.008 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 247.3848ms
2025-06-11 09:48:48.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:48:48.014 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:48.018 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:48.019 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:48:48.026 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:48:48.031 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:48.037 +07:00 [INF] Executed ViewResult - view Index executed in 6.6223ms.
2025-06-11 09:48:48.039 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.7972ms
2025-06-11 09:48:48.040 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:48.041 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:48.042 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 31.5176ms
2025-06-11 09:48:48.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:48.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:48.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.1341ms
2025-06-11 09:48:48.054 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2625ms
2025-06-11 09:48:49.212 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:48:49.216 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:49.219 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:48:49.224 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:48:49.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:48:49.260 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:48:49.274 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:48:49.293 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:49.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:49.305 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:49.308 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:49.317 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:48:49.329 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:49.392 +07:00 [INF] Executed ViewResult - view Index executed in 63.5519ms.
2025-06-11 09:48:49.395 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 168.8611ms
2025-06-11 09:48:49.396 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:48:49.397 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:49.400 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 187.8124ms
2025-06-11 09:48:49.401 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:49.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:49.418 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 13.8604ms
2025-06-11 09:48:49.418 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.7296ms
2025-06-11 09:48:52.072 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 09:48:52.077 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:48:52.078 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:48:52.090 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:48:52.093 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:48:52.099 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 09:48:52.101 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 09:48:52.102 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 09:48:52.103 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:48:52.104 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 8.6383ms
2025-06-11 09:48:52.105 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 09:48:52.106 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 33.6224ms
2025-06-11 09:48:52.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:48:52.113 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:52.114 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:52.115 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:48:52.121 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:48:52.126 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:52.130 +07:00 [INF] Executed ViewResult - view Index executed in 3.7914ms.
2025-06-11 09:48:52.132 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.1475ms
2025-06-11 09:48:52.134 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:52.136 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:52.137 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 27.8892ms
2025-06-11 09:48:52.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:52.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:52.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.011ms
2025-06-11 09:48:52.152 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.529ms
2025-06-11 09:48:52.699 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:48:52.703 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:52.704 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:52.705 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:48:52.707 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:48:52.710 +07:00 [INF] Executed ViewResult - view Login executed in 2.7301ms.
2025-06-11 09:48:52.711 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 4.4759ms
2025-06-11 09:48:52.713 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:52.714 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:52.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 16.3692ms
2025-06-11 09:48:52.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:52.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:52.723 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5663ms
2025-06-11 09:48:52.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.2122ms
2025-06-11 09:48:55.371 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 09:48:55.380 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:48:55.382 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:48:55.384 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:55.385 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:48:55.390 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:48:55.393 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:48:55.467 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:48:55.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:48:55.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:48:55.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:48:55.482 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:48:55.483 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:48:55.484 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 98.1484ms
2025-06-11 09:48:55.485 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:48:55.486 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 115.1994ms
2025-06-11 09:48:55.490 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:48:55.493 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:55.494 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:55.495 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:48:55.501 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:48:55.506 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:55.510 +07:00 [INF] Executed ViewResult - view Index executed in 3.9507ms.
2025-06-11 09:48:55.511 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 13.9823ms
2025-06-11 09:48:55.514 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:55.515 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:55.517 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 27.1597ms
2025-06-11 09:48:55.519 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:55.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:55.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2508ms
2025-06-11 09:48:55.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.385ms
2025-06-11 09:48:59.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:48:59.351 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:59.352 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:48:59.353 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:48:59.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:48:59.371 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:48:59.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:59.380 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:59.384 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:59.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:48:59.391 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:48:59.393 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:59.397 +07:00 [INF] Executed ViewResult - view Index executed in 3.4372ms.
2025-06-11 09:48:59.399 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 43.9518ms
2025-06-11 09:48:59.400 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:48:59.401 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:59.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 55.4237ms
2025-06-11 09:48:59.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:59.406 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:59.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9785ms
2025-06-11 09:48:59.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.6192ms
2025-06-11 09:48:59.927 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:48:59.937 +07:00 [INF] No cached response available for this request.
2025-06-11 09:48:59.940 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:59.943 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:48:59.955 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:48:59.963 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:48:59.973 +07:00 [INF] Executed ViewResult - view Index executed in 10.3572ms.
2025-06-11 09:48:59.975 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 29.6145ms
2025-06-11 09:48:59.978 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:48:59.981 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:48:59.982 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 54.7878ms
2025-06-11 09:48:59.982 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:48:59.983 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:48:59.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4809ms
2025-06-11 09:48:59.996 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.9134ms
2025-06-11 09:49:01.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:49:01.390 +07:00 [INF] No cached response available for this request.
2025-06-11 09:49:01.391 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:49:01.392 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:49:01.398 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:49:01.409 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:49:01.414 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:49:01.417 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:49:01.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:49:01.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:49:01.426 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:49:01.429 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:49:01.432 +07:00 [INF] Executed ViewResult - view Index executed in 3.0217ms.
2025-06-11 09:49:01.433 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 39.6245ms
2025-06-11 09:49:01.434 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:49:01.435 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:49:01.436 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 50.0016ms
2025-06-11 09:49:01.439 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:49:01.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:49:01.446 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3263ms
2025-06-11 09:49:01.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.0684ms
2025-06-11 09:49:01.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 09:49:01.918 +07:00 [INF] No cached response available for this request.
2025-06-11 09:49:01.919 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:49:01.921 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:49:01.924 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 09:49:01.961 +07:00 [INF] Executed ViewResult - view About executed in 37.2605ms.
2025-06-11 09:49:01.962 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 39.224ms
2025-06-11 09:49:01.964 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:49:01.966 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:49:01.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 54.8667ms
2025-06-11 09:49:01.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:49:01.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:49:01.977 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.5138ms
2025-06-11 09:49:01.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.5855ms
2025-06-11 09:57:56.258 +07:00 [INF] Starting database basic initialization...
2025-06-11 09:57:58.222 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:57:58.269 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:57:58.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 09:57:58.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 09:57:58.292 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 09:57:58.309 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 09:57:58.380 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 09:57:58.412 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:c175e07d-842e-4fe6-8cd6-c444b544f838
Error Number:3701,State:5,Class:11
2025-06-11 09:57:58.461 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 09:57:58.485 +07:00 [INF] Background Job Service started
2025-06-11 09:57:58.745 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 09:57:58.762 +07:00 [INF] Processed 0 expired payments
2025-06-11 09:57:58.771 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason]
FROM [BlockedDates] AS [b]
WHERE [b].[Date] < DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-06-11 09:57:58.780 +07:00 [INF] Cleaned up 0 expired blocked dates
2025-06-11 09:57:58.884 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 09:57:58.913 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE CONVERT(date, [b].[CreatedAt]) = @__today_0
2025-06-11 09:57:58.922 +07:00 [INF] Daily report: 0 bookings created today
2025-06-11 09:57:58.952 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 09:57:58.953 +07:00 [INF] Hosting environment: Development
2025-06-11 09:57:58.954 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 09:57:59.445 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:57:59.623 +07:00 [INF] No cached response available for this request.
2025-06-11 09:57:59.635 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 09:57:59.687 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:57:59.702 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:57:59.831 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:57:59.843 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:58:00.049 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:58:00.190 +07:00 [INF] Executed ViewResult - view Index executed in 150.8448ms.
2025-06-11 09:58:00.195 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 490.3639ms
2025-06-11 09:58:00.198 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:58:00.199 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 09:58:00.202 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:00.210 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:00.215 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 777.4236ms
2025-06-11 09:58:00.217 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 09:58:00.219 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:00.220 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:00.221 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:00.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 31.3474ms
2025-06-11 09:58:00.231 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.8105ms
2025-06-11 09:58:00.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.5802ms
2025-06-11 09:58:01.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 09:58:01.668 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:01.672 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:01.681 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:01.707 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 09:58:01.748 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:01.809 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:01.843 +07:00 [INF] Executed ViewResult - view AllReviews executed in 34.9911ms.
2025-06-11 09:58:01.846 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 163.3049ms
2025-06-11 09:58:01.847 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:01.849 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:01.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 189.977ms
2025-06-11 09:58:01.852 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:01.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:01.862 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.9371ms
2025-06-11 09:58:01.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.2515ms
2025-06-11 09:58:24.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=5&sortBy=newest - null null
2025-06-11 09:58:24.987 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:24.992 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:24.993 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:25.007 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__rating_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit) AND [b].[ReviewRating] = @__rating_Value_0
2025-06-11 09:58:25.031 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__rating_Value_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit) AND [b].[ReviewRating] = @__rating_Value_0
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:25.038 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:25.041 +07:00 [INF] Executed ViewResult - view AllReviews executed in 3.361ms.
2025-06-11 09:58:25.042 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 47.74ms
2025-06-11 09:58:25.043 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:25.044 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:25.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=5&sortBy=newest - 200 null text/html; charset=utf-8 68.4755ms
2025-06-11 09:58:25.047 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:25.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:25.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.9966ms
2025-06-11 09:58:25.068 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.5049ms
2025-06-11 09:58:28.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=newest - null null
2025-06-11 09:58:28.578 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:28.579 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:28.580 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:28.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 09:58:28.594 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:28.600 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:28.602 +07:00 [INF] Executed ViewResult - view AllReviews executed in 2.1864ms.
2025-06-11 09:58:28.603 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 21.7638ms
2025-06-11 09:58:28.604 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:28.605 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:28.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=newest - 200 null text/html; charset=utf-8 32.7656ms
2025-06-11 09:58:28.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:28.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:28.617 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.7388ms
2025-06-11 09:58:28.618 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6591ms
2025-06-11 09:58:30.748 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=highest - null null
2025-06-11 09:58:30.752 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:30.753 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:30.754 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:30.761 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 09:58:30.784 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewRating] DESC, [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewRating] DESC, [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:30.789 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:30.791 +07:00 [INF] Executed ViewResult - view AllReviews executed in 2.2415ms.
2025-06-11 09:58:30.792 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 36.1677ms
2025-06-11 09:58:30.793 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:30.794 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:30.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=highest - 200 null text/html; charset=utf-8 47.0092ms
2025-06-11 09:58:30.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:30.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:30.800 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0652ms
2025-06-11 09:58:30.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0122ms
2025-06-11 09:58:34.291 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=newest - null null
2025-06-11 09:58:34.295 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:34.296 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:34.297 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:34.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 09:58:34.306 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:34.310 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:34.312 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.7515ms.
2025-06-11 09:58:34.313 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 14.4057ms
2025-06-11 09:58:34.314 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:34.315 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:34.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews?search=&rating=&sortBy=newest - 200 null text/html; charset=utf-8 24.5695ms
2025-06-11 09:58:34.319 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:34.319 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:34.321 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0235ms
2025-06-11 09:58:34.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.243ms
2025-06-11 09:58:41.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 09:58:41.861 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:41.862 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:58:41.864 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:58:41.867 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 09:58:41.872 +07:00 [INF] Executed ViewResult - view About executed in 5.2626ms.
2025-06-11 09:58:41.873 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 7.6396ms
2025-06-11 09:58:41.874 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:58:41.875 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:41.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 20.065ms
2025-06-11 09:58:41.883 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:41.883 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:41.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.63ms
2025-06-11 09:58:41.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4667ms
2025-06-11 09:58:42.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 09:58:42.796 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:42.797 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:58:42.803 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 09:58:42.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 09:58:42.833 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 09:58:42.844 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 09:58:42.857 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:58:42.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:58:42.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:58:42.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 09:58:42.873 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 09:58:42.883 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:58:42.911 +07:00 [INF] Executed ViewResult - view Index executed in 28.7846ms.
2025-06-11 09:58:42.914 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 108.916ms
2025-06-11 09:58:42.915 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 09:58:42.916 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:42.917 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 123.8003ms
2025-06-11 09:58:42.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:42.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:42.925 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7877ms
2025-06-11 09:58:42.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8679ms
2025-06-11 09:58:43.562 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:58:43.566 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:43.566 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:58:43.567 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:58:43.571 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:58:43.575 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:58:43.579 +07:00 [INF] Executed ViewResult - view Index executed in 3.587ms.
2025-06-11 09:58:43.580 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.9649ms
2025-06-11 09:58:43.581 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:58:43.582 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:43.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 21.1175ms
2025-06-11 09:58:43.585 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:43.586 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:43.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.1656ms
2025-06-11 09:58:43.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2788ms
2025-06-11 09:58:44.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 09:58:44.741 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:44.743 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:58:44.746 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:58:44.749 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 09:58:44.771 +07:00 [INF] Executed ViewResult - view Login executed in 22.7155ms.
2025-06-11 09:58:44.773 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 25.8753ms
2025-06-11 09:58:44.774 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:58:44.776 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:44.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 39.1393ms
2025-06-11 09:58:44.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:44.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.224ms
2025-06-11 09:58:44.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:44.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2338ms
2025-06-11 09:58:45.885 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 09:58:45.890 +07:00 [INF] CORS policy execution failed.
2025-06-11 09:58:45.892 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 09:58:45.896 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:58:45.900 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 09:58:45.923 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 09:58:45.933 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 09:58:46.021 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 09:58:46.037 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:46.046 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 09:58:46.061 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 09:58:46.068 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 09:58:46.070 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 09:58:46.071 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 169.3964ms
2025-06-11 09:58:46.072 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 09:58:46.073 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 188.31ms
2025-06-11 09:58:46.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 09:58:46.081 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:46.085 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:58:46.086 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:58:46.089 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 09:58:46.094 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:58:46.099 +07:00 [INF] Executed ViewResult - view Index executed in 5.4955ms.
2025-06-11 09:58:46.100 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 13.6336ms
2025-06-11 09:58:46.102 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 09:58:46.103 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:46.104 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 26.7003ms
2025-06-11 09:58:46.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:46.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:46.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0543ms
2025-06-11 09:58:46.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.1406ms
2025-06-11 09:58:47.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 09:58:47.486 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:47.488 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:47.488 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 09:58:47.492 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 09:58:47.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 09:58:47.499 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 09:58:47.503 +07:00 [INF] Executed ViewResult - view AllReviews executed in 3.6648ms.
2025-06-11 09:58:47.504 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 14.6197ms
2025-06-11 09:58:47.505 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 09:58:47.506 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:47.507 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 24.6876ms
2025-06-11 09:58:47.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:47.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:47.513 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9059ms
2025-06-11 09:58:47.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.03ms
2025-06-11 09:58:47.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 09:58:47.972 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:47.981 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:58:47.982 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 09:58:47.984 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 09:58:47.986 +07:00 [INF] Executed ViewResult - view About executed in 1.7704ms.
2025-06-11 09:58:47.987 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.9938ms
2025-06-11 09:58:47.988 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 09:58:47.989 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:47.989 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 20.8925ms
2025-06-11 09:58:47.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:47.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:47.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3236ms
2025-06-11 09:58:48.005 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.1764ms
2025-06-11 09:58:49.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:58:49.478 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:49.484 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:58:49.487 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:58:49.495 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:58:49.500 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:58:49.503 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:58:49.514 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:58:49.521 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:58:49.529 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:58:49.542 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:58:49.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:58:49.568 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:58:49.584 +07:00 [INF] Executed ViewResult - view Index executed in 16.9938ms.
2025-06-11 09:58:49.587 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 98.8065ms
2025-06-11 09:58:49.588 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:58:49.589 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:49.590 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 115.28ms
2025-06-11 09:58:49.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:49.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2413ms
2025-06-11 09:58:49.595 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:49.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7815ms
2025-06-11 09:58:54.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 09:58:54.469 +07:00 [INF] No cached response available for this request.
2025-06-11 09:58:54.471 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 09:58:54.474 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:58:54.485 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:58:54.494 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 09:58:54.497 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.500 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.502 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.504 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.510 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.513 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:58:54.542 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 09:58:54.551 +07:00 [INF] Executed ViewResult - view Users executed in 9.3098ms.
2025-06-11 09:58:54.554 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 78.0513ms
2025-06-11 09:58:54.555 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 09:58:54.556 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:58:54.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 92.4204ms
2025-06-11 09:58:54.559 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:58:54.560 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:58:54.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7485ms
2025-06-11 09:58:54.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9121ms
2025-06-11 09:59:00.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:59:00.678 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:00.680 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:00.681 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:00.691 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:00.698 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:00.703 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:00.707 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:59:00.712 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:59:00.716 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:59:00.724 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:00.732 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:59:00.734 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:59:00.736 +07:00 [INF] Executed ViewResult - view Index executed in 1.9203ms.
2025-06-11 09:59:00.738 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 54.0214ms
2025-06-11 09:59:00.739 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:00.740 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:00.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 67.2411ms
2025-06-11 09:59:00.745 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:00.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9657ms
2025-06-11 09:59:01.498 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 09:59:01.502 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:01.505 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 09:59:01.506 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:01.514 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:01.517 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 09:59:01.520 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.523 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.525 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.527 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.530 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.532 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 09:59:01.539 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 09:59:01.541 +07:00 [INF] Executed ViewResult - view Users executed in 1.8332ms.
2025-06-11 09:59:01.542 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 34.7025ms
2025-06-11 09:59:01.543 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 09:59:01.544 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:01.545 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 46.1427ms
2025-06-11 09:59:01.547 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:01.547 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:01.553 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6194ms
2025-06-11 09:59:01.553 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7742ms
2025-06-11 09:59:03.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:59:03.070 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:03.071 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:03.072 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:03.081 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:03.085 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:03.089 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:03.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:59:03.095 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:59:03.098 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:59:03.104 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:03.109 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:59:03.111 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:59:03.113 +07:00 [INF] Executed ViewResult - view Index executed in 1.9347ms.
2025-06-11 09:59:03.114 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 39.773ms
2025-06-11 09:59:03.115 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:03.116 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:03.117 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 51.431ms
2025-06-11 09:59:03.120 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:03.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3101ms
2025-06-11 09:59:03.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 09:59:03.900 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:03.902 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 09:59:03.906 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:03.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:03.928 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 09:59:03.932 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 09:59:03.961 +07:00 [INF] Executed ViewResult - view Homestays executed in 29.9287ms.
2025-06-11 09:59:03.963 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 55.6689ms
2025-06-11 09:59:03.965 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 09:59:03.966 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:03.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 70.1781ms
2025-06-11 09:59:03.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - null null
2025-06-11 09:59:03.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:03.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:03.972 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:03.979 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.0712ms
2025-06-11 09:59:03.979 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.0661ms
2025-06-11 09:59:03.981 +07:00 [INF] The file /uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png was not modified
2025-06-11 09:59:03.988 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:03.989 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - 304 null image/png 20.1547ms
2025-06-11 09:59:06.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:59:06.141 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:06.142 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:06.143 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:06.151 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:06.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:06.158 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:06.161 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:59:06.163 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:59:06.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:59:06.168 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:06.178 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:59:06.180 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:59:06.181 +07:00 [INF] Executed ViewResult - view Index executed in 1.469ms.
2025-06-11 09:59:06.183 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 36.3174ms
2025-06-11 09:59:06.184 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:06.185 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:06.187 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 48.6464ms
2025-06-11 09:59:06.189 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:06.191 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9836ms
2025-06-11 09:59:07.110 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 09:59:07.120 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:07.121 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:07.132 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:07.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:07.175 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:07.185 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 09:59:07.194 +07:00 [INF] Executed ViewResult - view Bookings executed in 10.0119ms.
2025-06-11 09:59:07.196 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 56.9436ms
2025-06-11 09:59:07.197 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:07.198 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:07.199 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 88.2813ms
2025-06-11 09:59:07.201 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:07.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:07.208 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7992ms
2025-06-11 09:59:07.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5772ms
2025-06-11 09:59:15.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:59:15.900 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:15.901 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:15.902 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:15.904 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:15.907 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:15.909 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:15.911 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:59:15.914 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:59:15.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:59:15.919 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:15.922 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:59:15.924 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:59:15.925 +07:00 [INF] Executed ViewResult - view Index executed in 1.4271ms.
2025-06-11 09:59:15.926 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 23.1126ms
2025-06-11 09:59:15.927 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:15.928 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:15.929 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 34.0477ms
2025-06-11 09:59:15.932 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:15.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0647ms
2025-06-11 09:59:16.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 09:59:16.822 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:16.825 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:16.828 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:16.837 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:16.841 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:16.846 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 09:59:16.849 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.6938ms.
2025-06-11 09:59:16.850 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 18.8246ms
2025-06-11 09:59:16.852 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:16.853 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:16.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 35.899ms
2025-06-11 09:59:16.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:16.858 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:16.865 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9978ms
2025-06-11 09:59:16.866 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.8911ms
2025-06-11 09:59:18.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 09:59:18.574 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:18.575 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:18.576 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:18.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 09:59:18.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:18.584 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:18.586 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 09:59:18.589 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 09:59:18.591 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 09:59:18.593 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:18.596 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 09:59:18.599 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 09:59:18.600 +07:00 [INF] Executed ViewResult - view Index executed in 1.7049ms.
2025-06-11 09:59:18.601 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 24.5569ms
2025-06-11 09:59:18.602 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 09:59:18.603 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:18.604 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 34.172ms
2025-06-11 09:59:18.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:18.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.965ms
2025-06-11 09:59:19.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 09:59:19.381 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:19.383 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:19.386 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:19.393 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:19.399 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:19.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:19.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:19.425 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 09:59:19.450 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] = 3)
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] = 3) DESC
2025-06-11 09:59:19.453 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 09:59:19.479 +07:00 [INF] Executed ViewResult - view Reports executed in 26.4792ms.
2025-06-11 09:59:19.482 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 94.724ms
2025-06-11 09:59:19.483 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:19.485 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:19.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 107.9791ms
2025-06-11 09:59:19.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:19.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:19.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7854ms
2025-06-11 09:59:19.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5391ms
2025-06-11 09:59:52.090 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 09:59:52.094 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:52.098 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:52.099 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:52.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 09:59:52.106 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 09:59:52.109 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 09:59:52.111 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.3087ms.
2025-06-11 09:59:52.113 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.3848ms
2025-06-11 09:59:52.114 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 09:59:52.115 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:52.115 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.6483ms
2025-06-11 09:59:52.118 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:52.118 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:52.126 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.2539ms
2025-06-11 09:59:52.128 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.1141ms
2025-06-11 09:59:56.548 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 09:59:56.553 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:56.554 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:56.555 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:56.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:56.560 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:56.562 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:56.565 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:56.567 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 09:59:56.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] = 3)
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] = 3) DESC
2025-06-11 09:59:56.571 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 09:59:56.573 +07:00 [INF] Executed ViewResult - view Reports executed in 1.6797ms.
2025-06-11 09:59:56.574 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 18.06ms
2025-06-11 09:59:56.575 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:56.576 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:56.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 28.7808ms
2025-06-11 09:59:56.580 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:56.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8665ms
2025-06-11 09:59:57.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 09:59:57.597 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:57.598 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 09:59:57.599 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:57.602 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 09:59:57.606 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 09:59:57.609 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 09:59:57.611 +07:00 [INF] Executed ViewResult - view Homestays executed in 2.0851ms.
2025-06-11 09:59:57.612 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 11.8401ms
2025-06-11 09:59:57.613 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 09:59:57.615 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:57.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 22.1899ms
2025-06-11 09:59:57.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:57.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 09:59:57.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3265ms
2025-06-11 09:59:57.629 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9575ms
2025-06-11 09:59:59.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 09:59:59.864 +07:00 [INF] No cached response available for this request.
2025-06-11 09:59:59.865 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:59.866 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 09:59:59.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:59.872 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:59.874 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 09:59:59.877 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 09:59:59.879 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 09:59:59.881 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] = 3)
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] = 3) DESC
2025-06-11 09:59:59.883 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 09:59:59.885 +07:00 [INF] Executed ViewResult - view Reports executed in 1.8975ms.
2025-06-11 09:59:59.886 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 19.1383ms
2025-06-11 09:59:59.887 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 09:59:59.888 +07:00 [INF] The response could not be cached for this request.
2025-06-11 09:59:59.889 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 32.1205ms
2025-06-11 09:59:59.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 09:59:59.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9252ms
2025-06-11 10:00:01.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 10:00:01.469 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:01.470 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 10:00:01.471 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:00:01.475 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:00:01.477 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 10:00:01.479 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:00:01.482 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 10:00:01.484 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 10:00:01.486 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 10:00:01.489 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:00:01.492 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 10:00:01.493 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:01.495 +07:00 [INF] Executed ViewResult - view Index executed in 1.5135ms.
2025-06-11 10:00:01.496 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 23.6255ms
2025-06-11 10:00:01.497 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 10:00:01.498 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:01.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 33.6902ms
2025-06-11 10:00:01.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:01.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:01.506 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5793ms
2025-06-11 10:00:01.513 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3109ms
2025-06-11 10:00:03.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:00:03.438 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:03.440 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:03.441 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:03.443 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:00:03.445 +07:00 [INF] Executed ViewResult - view About executed in 1.5652ms.
2025-06-11 10:00:03.446 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.1436ms
2025-06-11 10:00:03.447 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:03.448 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:03.448 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.8897ms
2025-06-11 10:00:03.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:03.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:03.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4758ms
2025-06-11 10:00:03.464 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0623ms
2025-06-11 10:00:04.432 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:00:04.436 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:04.437 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:04.438 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:00:04.447 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:00:04.459 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:00:04.464 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:00:04.465 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.9524ms.
2025-06-11 10:00:04.467 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 26.9703ms
2025-06-11 10:00:04.468 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:04.469 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:04.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 38.048ms
2025-06-11 10:00:04.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:04.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:04.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4415ms
2025-06-11 10:00:04.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4333ms
2025-06-11 10:00:05.545 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:00:05.549 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:05.550 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:05.551 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:00:05.556 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:00:05.567 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:00:05.572 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:05.575 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:05.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:05.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:05.585 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:00:05.587 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:05.590 +07:00 [INF] Executed ViewResult - view Index executed in 2.3589ms.
2025-06-11 10:00:05.591 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 38.2996ms
2025-06-11 10:00:05.592 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:05.593 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:05.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 49.5966ms
2025-06-11 10:00:05.598 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:05.599 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:05.606 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0657ms
2025-06-11 10:00:05.606 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.8394ms
2025-06-11 10:00:06.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:00:06.456 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:06.457 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:06.458 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:06.462 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:00:06.466 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:06.468 +07:00 [INF] Executed ViewResult - view Index executed in 2.0156ms.
2025-06-11 10:00:06.469 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.0092ms
2025-06-11 10:00:06.470 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:06.471 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:06.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.9929ms
2025-06-11 10:00:06.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:06.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:06.477 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1076ms
2025-06-11 10:00:06.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2684ms
2025-06-11 10:00:09.655 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:00:09.658 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:00:09.659 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:00:09.660 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:00:09.663 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:09.668 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:00:09.669 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:00:09.670 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:00:09.671 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:00:09.672 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.8983ms
2025-06-11 10:00:09.673 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:00:09.674 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.7725ms
2025-06-11 10:00:09.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:00:09.679 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:09.680 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:09.681 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:09.691 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:00:09.694 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:09.695 +07:00 [INF] Executed ViewResult - view Index executed in 1.4697ms.
2025-06-11 10:00:09.696 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 13.5243ms
2025-06-11 10:00:09.697 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:09.699 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:09.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 23.593ms
2025-06-11 10:00:09.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:09.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:09.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5017ms
2025-06-11 10:00:09.713 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7773ms
2025-06-11 10:00:10.771 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:00:10.775 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:10.776 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:10.777 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:10.779 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:00:10.781 +07:00 [INF] Executed ViewResult - view Login executed in 2.2172ms.
2025-06-11 10:00:10.783 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 4.7817ms
2025-06-11 10:00:10.785 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:10.786 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:10.787 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 15.9712ms
2025-06-11 10:00:10.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:10.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:10.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.327ms
2025-06-11 10:00:10.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.5334ms
2025-06-11 10:00:13.006 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:00:13.010 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:00:13.010 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:00:13.011 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:13.012 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:13.022 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:00:13.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:00:13.086 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:00:13.090 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:00:13.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:00:13.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:00:13.098 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:00:13.099 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:00:13.100 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 85.7394ms
2025-06-11 10:00:13.100 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:13.101 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 95.6737ms
2025-06-11 10:00:13.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:00:13.106 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:13.107 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:13.108 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:13.111 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:00:13.115 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:13.117 +07:00 [INF] Executed ViewResult - view Index executed in 1.9618ms.
2025-06-11 10:00:13.118 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.0771ms
2025-06-11 10:00:13.120 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:13.121 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:13.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.3947ms
2025-06-11 10:00:13.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:13.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:13.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0031ms
2025-06-11 10:00:13.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2389ms
2025-06-11 10:00:13.961 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:00:13.965 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:13.966 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:13.967 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:13.969 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:00:13.970 +07:00 [INF] Executed ViewResult - view About executed in 1.3124ms.
2025-06-11 10:00:13.972 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.6973ms
2025-06-11 10:00:13.973 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:13.974 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:13.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 14.0459ms
2025-06-11 10:00:13.984 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:13.984 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:13.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3346ms
2025-06-11 10:00:13.991 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9846ms
2025-06-11 10:00:14.866 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:00:14.869 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:14.870 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:14.871 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:00:14.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:00:14.886 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:00:14.889 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:14.892 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:14.894 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:14.896 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:14.901 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:00:14.902 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:14.904 +07:00 [INF] Executed ViewResult - view Index executed in 1.9384ms.
2025-06-11 10:00:14.905 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 33.0258ms
2025-06-11 10:00:14.906 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:14.907 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:14.908 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 42.2429ms
2025-06-11 10:00:14.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:14.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:14.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1447ms
2025-06-11 10:00:14.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6442ms
2025-06-11 10:00:16.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:00:16.945 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:16.946 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:16.948 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:00:16.952 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:00:16.961 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:00:16.965 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:00:16.967 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.4528ms.
2025-06-11 10:00:16.968 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 18.2349ms
2025-06-11 10:00:16.969 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:16.970 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:16.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 30.2048ms
2025-06-11 10:00:16.973 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:16.973 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:16.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9349ms
2025-06-11 10:00:16.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9755ms
2025-06-11 10:00:18.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking - null null
2025-06-11 10:00:18.768 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:18.770 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:00:18.773 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:00:18.782 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 10:00:18.798 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:00:18.818 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:00:18.830 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:18.838 +07:00 [INF] Executed ViewResult - view Index executed in 8.5964ms.
2025-06-11 10:00:18.840 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 65.5667ms
2025-06-11 10:00:18.841 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:00:18.842 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:18.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking - 200 null text/html; charset=utf-8 78.6965ms
2025-06-11 10:00:18.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:18.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:18.851 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9949ms
2025-06-11 10:00:18.852 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7615ms
2025-06-11 10:00:26.283 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/19 - null null
2025-06-11 10:00:26.287 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:26.288 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:00:26.291 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:00:26.311 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 10:00:26.314 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:00:26.319 +07:00 [INF] Executed ViewResult - view Details executed in 6.1389ms.
2025-06-11 10:00:26.321 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 27.3353ms
2025-06-11 10:00:26.322 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:00:26.322 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:26.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/19 - 200 null text/html; charset=utf-8 40.4118ms
2025-06-11 10:00:26.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:26.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:26.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1999ms
2025-06-11 10:00:26.334 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9926ms
2025-06-11 10:00:28.866 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:00:28.869 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:00:28.870 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:00:28.871 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:00:28.872 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:28.873 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:00:28.874 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:00:28.875 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:00:28.876 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:00:28.877 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 4.0016ms
2025-06-11 10:00:28.878 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:00:28.879 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 13.6294ms
2025-06-11 10:00:28.881 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:00:28.884 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:28.885 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:28.886 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:28.888 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:00:28.893 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:28.894 +07:00 [INF] Executed ViewResult - view Index executed in 1.7152ms.
2025-06-11 10:00:28.895 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.4931ms
2025-06-11 10:00:28.897 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:28.897 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:28.898 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.7512ms
2025-06-11 10:00:28.901 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:28.901 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:28.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0235ms
2025-06-11 10:00:28.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9725ms
2025-06-11 10:00:29.953 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:00:29.956 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:29.957 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:29.958 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:29.960 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:00:29.962 +07:00 [INF] Executed ViewResult - view Login executed in 1.8358ms.
2025-06-11 10:00:29.963 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.2268ms
2025-06-11 10:00:29.964 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:29.965 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:29.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 12.7501ms
2025-06-11 10:00:29.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:29.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:29.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6891ms
2025-06-11 10:00:29.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.172ms
2025-06-11 10:00:32.581 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:00:32.585 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:00:32.586 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:00:32.587 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:32.587 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:00:32.590 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:00:32.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:00:32.655 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:00:32.659 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:00:32.661 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:00:32.663 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:00:32.665 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:00:32.666 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:00:32.667 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 77.9071ms
2025-06-11 10:00:32.668 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:00:32.668 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 87.0939ms
2025-06-11 10:00:32.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:00:32.674 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:32.675 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:32.676 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:32.678 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:00:32.682 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:32.685 +07:00 [INF] Executed ViewResult - view Index executed in 2.4101ms.
2025-06-11 10:00:32.686 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.7324ms
2025-06-11 10:00:32.687 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:00:32.688 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:32.689 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.8145ms
2025-06-11 10:00:32.692 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:32.692 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:32.694 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3485ms
2025-06-11 10:00:32.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.1219ms
2025-06-11 10:00:33.467 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:00:33.470 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:33.470 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:33.471 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:00:33.472 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:00:33.475 +07:00 [INF] Executed ViewResult - view About executed in 2.6199ms.
2025-06-11 10:00:33.476 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.7677ms
2025-06-11 10:00:33.477 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:00:33.478 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:33.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 11.8286ms
2025-06-11 10:00:33.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:33.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:33.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3503ms
2025-06-11 10:00:33.496 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9647ms
2025-06-11 10:00:34.201 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:00:34.205 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:34.206 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:34.207 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:00:34.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:00:34.214 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:00:34.218 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:00:34.219 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.354ms.
2025-06-11 10:00:34.220 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 11.6252ms
2025-06-11 10:00:34.221 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:00:34.222 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:34.223 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 21.7582ms
2025-06-11 10:00:34.227 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:34.227 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:34.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3798ms
2025-06-11 10:00:34.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.6841ms
2025-06-11 10:00:34.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:00:34.844 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:34.845 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:34.846 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:00:34.849 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:00:34.852 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:00:34.855 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:34.858 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:34.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:34.863 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:00:34.869 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:00:34.871 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:00:34.873 +07:00 [INF] Executed ViewResult - view Index executed in 1.9796ms.
2025-06-11 10:00:34.874 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 26.7752ms
2025-06-11 10:00:34.875 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:00:34.876 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:34.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 36.8073ms
2025-06-11 10:00:34.881 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:34.881 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:34.884 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4114ms
2025-06-11 10:00:34.890 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4636ms
2025-06-11 10:00:36.016 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 10:00:36.020 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:36.021 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:00:36.024 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:00:36.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:00:36.033 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 10:00:36.112 +07:00 [INF] Executed ViewResult - view Create executed in 80.2047ms.
2025-06-11 10:00:36.115 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:36.115 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:36.116 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 90.0925ms
2025-06-11 10:00:36.117 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4688ms
2025-06-11 10:00:36.121 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:00:36.123 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.5904ms
2025-06-11 10:00:36.131 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:36.133 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 117.3082ms
2025-06-11 10:00:37.362 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:00:37.366 +07:00 [INF] No cached response available for this request.
2025-06-11 10:00:37.367 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:00:37.370 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:00:37.379 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:00:37.394 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:00:37.415 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:00:37.425 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:00:37.433 +07:00 [INF] Executed ViewResult - view Bookings executed in 8.6977ms.
2025-06-11 10:00:37.434 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 62.4256ms
2025-06-11 10:00:37.435 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:00:37.436 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:00:37.436 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 74.2224ms
2025-06-11 10:00:37.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:00:37.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:00:37.442 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0906ms
2025-06-11 10:00:37.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2669ms
2025-06-11 10:03:14.083 +07:00 [INF] Starting database basic initialization...
2025-06-11 10:03:15.183 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:03:15.229 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:03:15.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:03:15.236 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:03:15.252 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 10:03:15.268 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 10:03:15.352 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 10:03:15.386 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:809109db-5487-4247-b037-b3ce592eacbe
Error Number:3701,State:5,Class:11
2025-06-11 10:03:15.447 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 10:03:15.476 +07:00 [INF] Background Job Service started
2025-06-11 10:03:15.707 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 10:03:15.722 +07:00 [INF] Processed 0 expired payments
2025-06-11 10:03:15.786 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 10:03:15.819 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 10:03:15.824 +07:00 [INF] Hosting environment: Development
2025-06-11 10:03:15.825 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 10:03:16.107 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:03:16.263 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:16.270 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 10:03:16.306 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:03:16.320 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:03:16.445 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:03:16.460 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:03:16.615 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:03:16.711 +07:00 [INF] Executed ViewResult - view Index executed in 98.2256ms.
2025-06-11 10:03:16.715 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 392.7247ms
2025-06-11 10:03:16.717 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:03:16.718 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:03:16.721 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:16.728 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:16.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 631.2549ms
2025-06-11 10:03:16.735 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:03:16.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:16.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:16.744 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:16.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 32.8714ms
2025-06-11 10:03:16.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.8523ms
2025-06-11 10:03:16.779 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.0829ms
2025-06-11 10:03:18.337 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:03:18.346 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:18.350 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:03:18.361 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:03:18.426 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:03:18.444 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:03:18.458 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:03:18.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:03:18.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:03:18.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:03:18.491 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:03:18.499 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:03:18.511 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:03:18.549 +07:00 [INF] Executed ViewResult - view Index executed in 38.2449ms.
2025-06-11 10:03:18.551 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 188.1577ms
2025-06-11 10:03:18.553 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:03:18.554 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:18.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 219.5359ms
2025-06-11 10:03:18.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:18.560 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:18.569 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.8153ms
2025-06-11 10:03:18.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.2845ms
2025-06-11 10:03:19.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:03:19.302 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:19.306 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:03:19.309 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:03:19.313 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:03:19.337 +07:00 [INF] Executed ViewResult - view Login executed in 24.2769ms.
2025-06-11 10:03:19.339 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 29.3541ms
2025-06-11 10:03:19.341 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:03:19.342 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:19.343 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 46.4202ms
2025-06-11 10:03:19.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:19.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:19.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.565ms
2025-06-11 10:03:19.366 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.281ms
2025-06-11 10:03:20.411 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:03:20.417 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:03:20.418 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:03:20.421 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:03:20.426 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:03:20.462 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:03:20.510 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:03:20.599 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:03:20.621 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:03:20.629 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:03:20.645 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:03:20.652 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:03:20.656 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:03:20.658 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 230.1058ms
2025-06-11 10:03:20.660 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:03:20.661 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 249.9526ms
2025-06-11 10:03:20.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:03:20.670 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:20.676 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:03:20.677 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:03:20.684 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:03:20.692 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:03:20.700 +07:00 [INF] Executed ViewResult - view Index executed in 7.741ms.
2025-06-11 10:03:20.702 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 22.8559ms
2025-06-11 10:03:20.704 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:03:20.705 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:20.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 41.301ms
2025-06-11 10:03:20.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:20.710 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:20.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0358ms
2025-06-11 10:03:20.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0945ms
2025-06-11 10:03:22.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:03:22.404 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:22.411 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:03:22.414 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:03:22.429 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:03:22.457 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:03:22.482 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:03:22.501 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:03:22.560 +07:00 [INF] Executed ViewResult - view Bookings executed in 59.9879ms.
2025-06-11 10:03:22.562 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 146.1006ms
2025-06-11 10:03:22.563 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:03:22.564 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:22.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 165.0435ms
2025-06-11 10:03:22.567 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:22.569 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:22.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8286ms
2025-06-11 10:03:22.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.9027ms
2025-06-11 10:03:31.192 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:03:31.197 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:31.202 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:03:31.206 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:03:31.221 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:03:31.248 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:03:31.258 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:03:31.283 +07:00 [INF] Executed ViewResult - view AllReviews executed in 25.5281ms.
2025-06-11 10:03:31.286 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 78.9892ms
2025-06-11 10:03:31.288 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:03:31.289 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:31.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:31.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 98.0078ms
2025-06-11 10:03:31.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:31.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0319ms
2025-06-11 10:03:31.302 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.419ms
2025-06-11 10:03:33.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 10:03:33.671 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:33.673 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:03:33.676 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:03:33.712 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:03:33.740 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 10:03:33.765 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:03:33.769 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:03:33.778 +07:00 [INF] Executed ViewResult - view Details executed in 9.5913ms.
2025-06-11 10:03:33.780 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 102.5416ms
2025-06-11 10:03:33.781 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:03:33.782 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:33.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 115.9772ms
2025-06-11 10:03:33.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:03:33.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1429ms
2025-06-11 10:03:33.791 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:03:33.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9241ms
2025-06-11 10:03:33.835 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 10:03:33.835 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 10:03:33.838 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:33.840 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:33.842 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:03:33.843 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:03:33.846 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:03:33.846 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:03:33.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 10:03:33.852 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:33.855 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:03:33.859 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:03:33.861 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:03:33.865 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:03:33.867 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:03:33.873 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:03:33.875 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 26.3783ms
2025-06-11 10:03:33.876 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:03:33.877 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:33.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 43.4172ms
2025-06-11 10:03:33.944 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 10:03:33.945 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 10:03:33.948 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:03:33.951 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:03:33.953 +07:00 [INF] No cached response available for this request.
2025-06-11 10:03:33.956 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:03:33.957 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 94.4916ms
2025-06-11 10:03:33.959 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:03:33.959 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:03:33.959 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:33.961 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 10:03:33.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 112.1277ms
2025-06-11 10:03:33.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:03:33.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:03:33.973 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:03:33.977 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:03:33.978 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:03:33.987 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 140.575ms
2025-06-11 10:03:33.990 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:03:33.991 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:33.992 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 156.7872ms
2025-06-11 10:03:34.270 +07:00 [INF] Received HTTP response headers after 285.7451ms - 401
2025-06-11 10:03:34.274 +07:00 [INF] End processing HTTP request after 302.9843ms - 401
2025-06-11 10:03:34.276 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 10:03:34.281 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:03:34.291 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 328.0857ms
2025-06-11 10:03:34.293 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:03:34.294 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:03:34.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 349.7412ms
2025-06-11 10:04:58.349 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:04:58.355 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:04:58.356 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:04:58.359 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:04:58.362 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:04:58.371 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:04:58.372 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:04:58.373 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:04:58.375 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:04:58.376 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 12.2194ms
2025-06-11 10:04:58.377 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:04:58.378 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 29.1598ms
2025-06-11 10:04:58.380 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:04:58.383 +07:00 [INF] No cached response available for this request.
2025-06-11 10:04:58.384 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:04:58.385 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:04:58.394 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:04:58.397 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:04:58.399 +07:00 [INF] Executed ViewResult - view Index executed in 2.1071ms.
2025-06-11 10:04:58.401 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 14.7432ms
2025-06-11 10:04:58.402 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:04:58.403 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:04:58.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 23.2501ms
2025-06-11 10:04:58.407 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:04:58.407 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:04:58.414 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.491ms
2025-06-11 10:04:58.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.2702ms
2025-06-11 10:04:59.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:04:59.197 +07:00 [INF] No cached response available for this request.
2025-06-11 10:04:59.199 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:04:59.200 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:04:59.202 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:04:59.205 +07:00 [INF] Executed ViewResult - view Login executed in 3.0863ms.
2025-06-11 10:04:59.207 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 5.6058ms
2025-06-11 10:04:59.208 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:04:59.210 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:04:59.211 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 17.2802ms
2025-06-11 10:04:59.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:04:59.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:04:59.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2008ms
2025-06-11 10:04:59.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.4468ms
2025-06-11 10:05:01.213 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 10:05:01.217 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:05:01.218 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:05:01.219 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:05:01.220 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:05:01.231 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:05:01.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:05:01.338 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:05:01.345 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:01.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:05:01.354 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:05:01.357 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:05:01.358 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:05:01.359 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 137.0158ms
2025-06-11 10:05:01.360 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:05:01.361 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 147.2555ms
2025-06-11 10:05:01.363 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:05:01.367 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:01.368 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:05:01.369 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:05:01.372 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:05:01.376 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:05:01.380 +07:00 [INF] Executed ViewResult - view Index executed in 3.3883ms.
2025-06-11 10:05:01.381 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.8413ms
2025-06-11 10:05:01.382 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:05:01.383 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:01.384 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 20.5008ms
2025-06-11 10:05:01.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:01.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:01.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4716ms
2025-06-11 10:05:01.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.3429ms
2025-06-11 10:05:03.032 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 10:05:03.036 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:03.037 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:05:03.042 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:05:03.049 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:05:03.058 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 10:05:03.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.063 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.068 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.074 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.077 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.080 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:05:03.085 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 10:05:03.096 +07:00 [INF] Executed ViewResult - view Users executed in 11.4107ms.
2025-06-11 10:05:03.097 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 54.1629ms
2025-06-11 10:05:03.099 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:05:03.099 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:03.100 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 68.4608ms
2025-06-11 10:05:03.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:03.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:03.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.1994ms
2025-06-11 10:05:03.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8751ms
2025-06-11 10:05:04.335 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 10:05:04.339 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:04.341 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 10:05:04.344 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:05:04.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:05:04.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 10:05:04.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:05:04.370 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3
2025-06-11 10:05:04.377 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 10:05:04.382 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 10:05:04.395 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:05:04.418 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 10:05:04.424 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:05:04.440 +07:00 [INF] Executed ViewResult - view Index executed in 16.6827ms.
2025-06-11 10:05:04.443 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 96.4962ms
2025-06-11 10:05:04.444 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 10:05:04.445 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:04.446 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 110.6417ms
2025-06-11 10:05:04.447 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:04.449 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:04.455 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5819ms
2025-06-11 10:05:04.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.16ms
2025-06-11 10:05:06.809 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 10:05:06.813 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:06.815 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:05:06.819 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:05:06.825 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 10:05:06.840 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 10:05:06.844 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:05:06.857 +07:00 [INF] Executed ViewResult - view Homestays executed in 13.6803ms.
2025-06-11 10:05:06.859 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 38.7356ms
2025-06-11 10:05:06.860 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:05:06.861 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:06.862 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 53.32ms
2025-06-11 10:05:06.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:06.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:06.872 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7626ms
2025-06-11 10:05:06.872 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3333ms
2025-06-11 10:05:09.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:05:09.648 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:09.651 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:05:09.659 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:05:09.665 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:05:09.685 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:05:09.692 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:05:09.703 +07:00 [INF] Executed ViewResult - view Bookings executed in 11.5631ms.
2025-06-11 10:05:09.705 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 44.4009ms
2025-06-11 10:05:09.707 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:05:09.708 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:09.709 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 66.9392ms
2025-06-11 10:05:09.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:09.713 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:09.722 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.272ms
2025-06-11 10:05:09.728 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.2851ms
2025-06-11 10:05:13.081 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 10:05:13.088 +07:00 [INF] No cached response available for this request.
2025-06-11 10:05:13.090 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 10:05:13.095 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:05:13.107 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 10:05:13.113 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 10:05:13.119 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 10:05:13.126 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 10:05:13.141 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 10:05:13.163 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] = 3)
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] = 3) DESC
2025-06-11 10:05:13.167 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 10:05:13.205 +07:00 [INF] Executed ViewResult - view Reports executed in 37.6401ms.
2025-06-11 10:05:13.207 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 109.7558ms
2025-06-11 10:05:13.209 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 10:05:13.210 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:05:13.212 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 130.2845ms
2025-06-11 10:05:13.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:05:13.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:05:13.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.9821ms
2025-06-11 10:05:13.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.8981ms
2025-06-11 10:09:22.551 +07:00 [INF] Starting database basic initialization...
2025-06-11 10:09:24.503 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:09:24.545 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:09:24.550 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:09:24.553 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:09:24.568 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 10:09:24.584 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 10:09:24.647 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 10:09:24.680 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:2de4b5bb-5e4f-4521-b27a-8a4d80d8d8ce
Error Number:3701,State:5,Class:11
2025-06-11 10:09:24.734 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 10:09:24.756 +07:00 [INF] Background Job Service started
2025-06-11 10:09:25.052 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 10:09:25.080 +07:00 [INF] Processed 0 expired payments
2025-06-11 10:09:25.142 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 10:09:25.176 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 10:09:25.184 +07:00 [INF] Hosting environment: Development
2025-06-11 10:09:25.185 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 10:09:25.509 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:09:25.714 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:25.727 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 10:09:25.775 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:25.785 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:09:25.910 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:09:25.921 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:09:26.063 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:09:26.261 +07:00 [INF] Executed ViewResult - view Index executed in 200.2998ms.
2025-06-11 10:09:26.264 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 476.9712ms
2025-06-11 10:09:26.267 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:26.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:09:26.270 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:26.276 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:26.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 780.9529ms
2025-06-11 10:09:26.280 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:09:26.286 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:26.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:26.288 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 20.5034ms
2025-06-11 10:09:26.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:26.299 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 12.2761ms
2025-06-11 10:09:26.334 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.8884ms
2025-06-11 10:09:28.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:09:28.602 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:28.608 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:28.615 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:09:28.628 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:09:28.663 +07:00 [INF] Executed ViewResult - view Login executed in 36.5077ms.
2025-06-11 10:09:28.665 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 48.1225ms
2025-06-11 10:09:28.666 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:28.667 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:28.669 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 76.5047ms
2025-06-11 10:09:28.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:28.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:28.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.6855ms
2025-06-11 10:09:28.706 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3818ms
2025-06-11 10:09:30.097 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 10:09:30.114 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:09:30.115 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:09:30.122 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:30.128 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:09:30.182 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:09:30.232 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:09:30.326 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:09:30.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:30.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:09:30.368 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:09:30.376 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:09:30.378 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:09:30.379 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 249.8856ms
2025-06-11 10:09:30.380 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:30.381 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 284.3771ms
2025-06-11 10:09:30.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:09:30.389 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:30.393 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:30.394 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:09:30.401 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:09:30.406 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:09:30.412 +07:00 [INF] Executed ViewResult - view Index executed in 6.6381ms.
2025-06-11 10:09:30.414 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.1278ms
2025-06-11 10:09:30.415 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:30.416 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:30.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 32.1202ms
2025-06-11 10:09:30.419 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:30.420 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:30.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.4037ms
2025-06-11 10:09:30.433 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.352ms
2025-06-11 10:09:32.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 10:09:32.068 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:32.076 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:09:32.082 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:09:32.131 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:09:32.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 10:09:32.148 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.151 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.155 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.161 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.163 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.169 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:32.199 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 10:09:32.215 +07:00 [INF] Executed ViewResult - view Users executed in 16.8507ms.
2025-06-11 10:09:32.218 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 130.8944ms
2025-06-11 10:09:32.220 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:09:32.221 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:32.223 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 165.5216ms
2025-06-11 10:09:32.224 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:32.226 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:32.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1637ms
2025-06-11 10:09:32.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.6144ms
2025-06-11 10:09:34.934 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 10:09:34.938 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:34.950 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:09:34.951 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:09:34.957 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:09:34.960 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 10:09:34.963 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.965 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.968 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.971 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.979 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:09:34.983 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 10:09:34.985 +07:00 [INF] Executed ViewResult - view Users executed in 2.7442ms.
2025-06-11 10:09:34.987 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 33.8577ms
2025-06-11 10:09:34.988 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:09:34.989 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:34.990 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 55.8832ms
2025-06-11 10:09:34.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:34.993 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:34.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1969ms
2025-06-11 10:09:34.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.217ms
2025-06-11 10:09:36.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 10:09:36.391 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:36.394 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:09:36.397 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:09:36.407 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 10:09:36.427 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 10:09:36.435 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:09:36.475 +07:00 [INF] Executed ViewResult - view Homestays executed in 39.9164ms.
2025-06-11 10:09:36.476 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 77.4786ms
2025-06-11 10:09:36.478 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:09:36.479 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:36.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 94.2923ms
2025-06-11 10:09:36.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:36.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:36.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.3324ms
2025-06-11 10:09:36.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.3189ms
2025-06-11 10:09:38.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:09:38.980 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:38.981 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:09:38.988 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:09:38.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:09:39.035 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:09:39.047 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:09:39.067 +07:00 [INF] Executed ViewResult - view Bookings executed in 19.7685ms.
2025-06-11 10:09:39.069 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 78.251ms
2025-06-11 10:09:39.071 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:09:39.075 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:39.076 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 100.5347ms
2025-06-11 10:09:39.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:39.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:39.083 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.3628ms
2025-06-11 10:09:39.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.1182ms
2025-06-11 10:09:47.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:09:47.635 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:47.637 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:09:47.643 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:09:47.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:09:47.668 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:09:47.681 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:09:47.696 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:09:47.701 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:09:47.705 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:09:47.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:09:47.717 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:09:47.729 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:09:47.769 +07:00 [INF] Executed ViewResult - view Index executed in 40.9388ms.
2025-06-11 10:09:47.771 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 127.0789ms
2025-06-11 10:09:47.773 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:09:47.774 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:47.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 144.7058ms
2025-06-11 10:09:47.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:47.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:47.786 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7365ms
2025-06-11 10:09:47.786 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.216ms
2025-06-11 10:09:49.804 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:09:49.808 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:09:49.808 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:09:49.810 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:09:49.813 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:09:49.818 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:09:49.820 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:09:49.821 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:09:49.822 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:09:49.823 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 7.6536ms
2025-06-11 10:09:49.824 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:09:49.825 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 21.3392ms
2025-06-11 10:09:49.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:09:49.832 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:49.833 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:49.834 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:09:49.839 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:09:49.842 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:09:49.844 +07:00 [INF] Executed ViewResult - view Index executed in 2.3449ms.
2025-06-11 10:09:49.846 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.5096ms
2025-06-11 10:09:49.847 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:09:49.849 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:49.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 22.2139ms
2025-06-11 10:09:49.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:49.854 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:49.861 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2719ms
2025-06-11 10:09:49.861 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.272ms
2025-06-11 10:09:52.896 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:09:52.900 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:52.901 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:52.902 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:09:52.904 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:09:52.906 +07:00 [INF] Executed ViewResult - view Login executed in 2.283ms.
2025-06-11 10:09:52.907 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.6982ms
2025-06-11 10:09:52.908 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:09:52.909 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:52.910 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.3237ms
2025-06-11 10:09:52.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:52.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:52.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0411ms
2025-06-11 10:09:52.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4018ms
2025-06-11 10:09:53.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:09:53.662 +07:00 [INF] No cached response available for this request.
2025-06-11 10:09:53.663 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:09:53.665 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:09:53.667 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:09:53.672 +07:00 [INF] Executed ViewResult - view About executed in 5.308ms.
2025-06-11 10:09:53.673 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 6.955ms
2025-06-11 10:09:53.674 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:09:53.675 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:09:53.676 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 18.43ms
2025-06-11 10:09:53.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:09:53.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:09:53.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4283ms
2025-06-11 10:09:53.697 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.1799ms
2025-06-11 10:10:08.226 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:10:08.230 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:08.231 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:08.232 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:10:08.234 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:10:08.237 +07:00 [INF] Executed ViewResult - view Login executed in 2.475ms.
2025-06-11 10:10:08.238 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.8494ms
2025-06-11 10:10:08.239 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:08.239 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:08.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.863ms
2025-06-11 10:10:08.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:08.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:08.249 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3683ms
2025-06-11 10:10:08.249 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4326ms
2025-06-11 10:10:10.943 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:10:10.947 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:10.948 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:10.951 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:10:10.968 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:10:10.993 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:10:11.001 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:10:11.014 +07:00 [INF] Executed ViewResult - view AllReviews executed in 14.4585ms.
2025-06-11 10:10:11.016 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 63.9198ms
2025-06-11 10:10:11.018 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:11.019 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:11.020 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 76.4164ms
2025-06-11 10:10:11.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:11.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:11.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - null null
2025-06-11 10:10:11.025 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1231ms
2025-06-11 10:10:11.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7211ms
2025-06-11 10:10:11.030 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:11.036 +07:00 [INF] The file /images/placeholder-homestay.svg was not modified
2025-06-11 10:10:11.037 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:11.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - 304 null image/svg+xml 15.2353ms
2025-06-11 10:10:11.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:10:11.516 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:11.517 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:11.519 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:11.521 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:10:11.522 +07:00 [INF] Executed ViewResult - view About executed in 1.3538ms.
2025-06-11 10:10:11.523 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.9055ms
2025-06-11 10:10:11.524 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:11.526 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:11.527 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 14.6095ms
2025-06-11 10:10:11.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:11.535 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:11.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1579ms
2025-06-11 10:10:11.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3847ms
2025-06-11 10:10:12.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:10:12.547 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:12.549 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:12.550 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:10:12.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:10:12.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:10:12.562 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:10:12.563 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.6596ms.
2025-06-11 10:10:12.565 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 13.6204ms
2025-06-11 10:10:12.566 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:12.567 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:12.568 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 24.1967ms
2025-06-11 10:10:12.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:12.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:12.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1358ms
2025-06-11 10:10:12.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.3313ms
2025-06-11 10:10:19.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:10:19.331 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:19.332 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:19.333 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:10:19.335 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:10:19.336 +07:00 [INF] Executed ViewResult - view Login executed in 1.8203ms.
2025-06-11 10:10:19.338 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.5099ms
2025-06-11 10:10:19.339 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:19.340 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:19.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.5238ms
2025-06-11 10:10:19.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:19.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:19.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.453ms
2025-06-11 10:10:19.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3695ms
2025-06-11 10:10:20.629 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 10:10:20.633 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:10:20.633 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:10:20.634 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:20.635 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:10:20.641 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:10:20.644 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:10:20.706 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:10:20.709 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:20.712 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:10:20.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:10:20.717 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:10:20.718 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:10:20.718 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 81.173ms
2025-06-11 10:10:20.719 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:10:20.721 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 91.5421ms
2025-06-11 10:10:20.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:10:20.727 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:20.728 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:10:20.728 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:20.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:10:20.735 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:10:20.737 +07:00 [INF] Executed ViewResult - view Index executed in 1.8508ms.
2025-06-11 10:10:20.738 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.4859ms
2025-06-11 10:10:20.740 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:10:20.740 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:20.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.7168ms
2025-06-11 10:10:20.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:20.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:20.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6973ms
2025-06-11 10:10:20.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.885ms
2025-06-11 10:10:23.463 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:10:23.467 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:23.468 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:23.469 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:23.472 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:10:23.474 +07:00 [INF] Executed ViewResult - view About executed in 2.3496ms.
2025-06-11 10:10:23.475 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.7337ms
2025-06-11 10:10:23.476 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:23.477 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:23.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 15.0788ms
2025-06-11 10:10:23.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:23.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:23.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1198ms
2025-06-11 10:10:23.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2715ms
2025-06-11 10:10:25.592 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 10:10:25.596 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:25.597 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:10:25.598 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:10:25.602 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 10:10:25.606 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 10:10:25.609 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.611 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.616 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.618 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.622 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.626 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:10:25.628 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 10:10:25.630 +07:00 [INF] Executed ViewResult - view Users executed in 1.8145ms.
2025-06-11 10:10:25.631 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 31.7467ms
2025-06-11 10:10:25.632 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 10:10:25.633 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:25.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 42.0461ms
2025-06-11 10:10:25.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:25.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:25.640 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3385ms
2025-06-11 10:10:25.646 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3887ms
2025-06-11 10:10:27.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 10:10:27.423 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:27.427 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:10:27.432 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:10:27.451 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 10:10:27.470 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 10:10:27.478 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:10:27.483 +07:00 [INF] Executed ViewResult - view Homestays executed in 4.9855ms.
2025-06-11 10:10:27.486 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 47.0861ms
2025-06-11 10:10:27.488 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 10:10:27.489 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:27.490 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 74.7602ms
2025-06-11 10:10:27.493 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:27.494 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:27.501 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5552ms
2025-06-11 10:10:27.502 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.7482ms
2025-06-11 10:10:29.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:10:29.106 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:29.107 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:10:29.108 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:10:29.112 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:10:29.119 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:10:29.123 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:10:29.125 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8568ms.
2025-06-11 10:10:29.126 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 16.3361ms
2025-06-11 10:10:29.127 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:10:29.128 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:29.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 26.4367ms
2025-06-11 10:10:29.131 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:29.132 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:29.139 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5525ms
2025-06-11 10:10:29.141 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3028ms
2025-06-11 10:10:31.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 10:10:31.556 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:31.557 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 10:10:31.561 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:10:31.569 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 10:10:31.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 10:10:31.586 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 10:10:31.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] = 3 AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 10:10:31.603 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 10:10:31.629 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] = 3)
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] = 3) DESC
2025-06-11 10:10:31.633 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 10:10:31.662 +07:00 [INF] Executed ViewResult - view Reports executed in 29.5355ms.
2025-06-11 10:10:31.663 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 101.6015ms
2025-06-11 10:10:31.665 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 10:10:31.666 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:31.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 114.9147ms
2025-06-11 10:10:31.669 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:31.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:31.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.176ms
2025-06-11 10:10:31.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5487ms
2025-06-11 10:10:42.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:10:42.242 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:42.243 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:42.244 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:10:42.249 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:10:42.260 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:10:42.264 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:42.266 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:42.269 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:42.271 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:42.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:10:42.276 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:10:42.279 +07:00 [INF] Executed ViewResult - view Index executed in 2.1003ms.
2025-06-11 10:10:42.280 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 34.8079ms
2025-06-11 10:10:42.281 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:42.282 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:42.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 45.0831ms
2025-06-11 10:10:42.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:42.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:42.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1909ms
2025-06-11 10:10:42.296 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4411ms
2025-06-11 10:10:51.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:10:51.244 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:51.246 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:10:51.248 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:51.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:10:51.256 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:10:51.257 +07:00 [INF] Executed ViewResult - view Index executed in 1.7679ms.
2025-06-11 10:10:51.259 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.3996ms
2025-06-11 10:10:51.260 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:10:51.262 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:51.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 23.3111ms
2025-06-11 10:10:51.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:51.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:51.271 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8759ms
2025-06-11 10:10:51.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.8576ms
2025-06-11 10:10:51.767 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:10:51.771 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:51.773 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:51.774 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:10:51.779 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:10:51.784 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:10:51.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:51.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:51.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:51.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:51.800 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:10:51.803 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:10:51.805 +07:00 [INF] Executed ViewResult - view Index executed in 2.4125ms.
2025-06-11 10:10:51.807 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 31.7273ms
2025-06-11 10:10:51.808 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:51.809 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:51.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 45.1684ms
2025-06-11 10:10:51.815 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:51.817 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:51.823 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3283ms
2025-06-11 10:10:51.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.1621ms
2025-06-11 10:10:52.679 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:10:52.683 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:52.684 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:52.685 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:10:52.688 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:10:52.692 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:10:52.697 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:10:52.699 +07:00 [INF] Executed ViewResult - view AllReviews executed in 2.0208ms.
2025-06-11 10:10:52.701 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 13.8128ms
2025-06-11 10:10:52.702 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:52.703 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:52.704 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 24.9219ms
2025-06-11 10:10:52.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:52.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:52.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4664ms
2025-06-11 10:10:52.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.0599ms
2025-06-11 10:10:53.585 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:10:53.589 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:53.590 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:53.590 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:53.592 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:10:53.594 +07:00 [INF] Executed ViewResult - view About executed in 1.6768ms.
2025-06-11 10:10:53.595 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.1617ms
2025-06-11 10:10:53.596 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:53.597 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:53.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.2775ms
2025-06-11 10:10:53.605 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:53.605 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:53.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4469ms
2025-06-11 10:10:53.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3891ms
2025-06-11 10:10:55.838 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:10:55.842 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:55.844 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:55.845 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:10:55.847 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:10:55.848 +07:00 [INF] Executed ViewResult - view About executed in 1.7106ms.
2025-06-11 10:10:55.850 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.1499ms
2025-06-11 10:10:55.851 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:10:55.852 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:55.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 15.162ms
2025-06-11 10:10:55.861 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:55.862 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:55.864 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.3093ms
2025-06-11 10:10:55.871 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0143ms
2025-06-11 10:10:56.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:10:56.467 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:56.469 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:56.470 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:10:56.473 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:10:56.478 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:10:56.481 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:10:56.483 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.4342ms.
2025-06-11 10:10:56.484 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 12.0526ms
2025-06-11 10:10:56.485 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:10:56.486 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:56.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 22.4441ms
2025-06-11 10:10:56.489 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:56.489 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:56.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2283ms
2025-06-11 10:10:56.497 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6987ms
2025-06-11 10:10:57.095 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:10:57.099 +07:00 [INF] No cached response available for this request.
2025-06-11 10:10:57.100 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:57.101 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:10:57.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:10:57.110 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:10:57.115 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:57.117 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:57.120 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:57.122 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:10:57.125 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:10:57.127 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:10:57.129 +07:00 [INF] Executed ViewResult - view Index executed in 2.094ms.
2025-06-11 10:10:57.131 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 27.8412ms
2025-06-11 10:10:57.132 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:10:57.133 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:10:57.134 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 39.1649ms
2025-06-11 10:10:57.137 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:10:57.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:10:57.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.1923ms
2025-06-11 10:10:57.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5546ms
2025-06-11 10:11:01.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - null null
2025-06-11 10:11:01.452 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:01.454 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 10:11:01.457 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:11:01.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 10:11:01.484 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:11:01.506 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:11:01.514 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 10:11:01.530 +07:00 [INF] Executed ViewResult - view MyBookings executed in 16.7212ms.
2025-06-11 10:11:01.531 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 72.2309ms
2025-06-11 10:11:01.532 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 10:11:01.533 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:01.534 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - 200 null text/html; charset=utf-8 86.1806ms
2025-06-11 10:11:01.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:01.537 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:01.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7972ms
2025-06-11 10:11:01.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5523ms
2025-06-11 10:11:03.081 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:11:03.085 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:11:03.085 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:11:03.086 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:11:03.087 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:11:03.089 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:11:03.090 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:11:03.091 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:11:03.092 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:11:03.093 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 4.7378ms
2025-06-11 10:11:03.094 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:11:03.095 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 14.5598ms
2025-06-11 10:11:03.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:11:03.102 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:03.102 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:11:03.103 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:11:03.110 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:11:03.113 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:11:03.115 +07:00 [INF] Executed ViewResult - view Index executed in 1.7464ms.
2025-06-11 10:11:03.116 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.0983ms
2025-06-11 10:11:03.117 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:11:03.118 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:03.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 20.452ms
2025-06-11 10:11:03.122 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:03.122 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:03.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6611ms
2025-06-11 10:11:03.131 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3883ms
2025-06-11 10:11:04.776 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:11:04.779 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:04.780 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:11:04.781 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:11:04.783 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:11:04.784 +07:00 [INF] Executed ViewResult - view Login executed in 1.5226ms.
2025-06-11 10:11:04.785 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.1921ms
2025-06-11 10:11:04.786 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:11:04.787 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:04.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 12.2409ms
2025-06-11 10:11:04.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:04.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:04.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.6894ms
2025-06-11 10:11:04.802 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6887ms
2025-06-11 10:11:07.579 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:11:07.582 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:11:07.583 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:11:07.584 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:11:07.585 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:11:07.595 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:11:07.597 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:11:07.660 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:11:07.663 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:11:07.665 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:11:07.668 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:11:07.670 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:11:07.671 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:11:07.672 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 85.6392ms
2025-06-11 10:11:07.673 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:11:07.674 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 95.3898ms
2025-06-11 10:11:07.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:11:07.680 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:07.681 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:11:07.682 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:11:07.687 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:11:07.691 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:11:07.693 +07:00 [INF] Executed ViewResult - view Index executed in 2.6525ms.
2025-06-11 10:11:07.695 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.4434ms
2025-06-11 10:11:07.696 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:11:07.697 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:07.698 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 21.2335ms
2025-06-11 10:11:07.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:07.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:07.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8616ms
2025-06-11 10:11:07.708 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0578ms
2025-06-11 10:11:09.312 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 10:11:09.315 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:09.317 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:11:09.320 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:11:09.326 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:11:09.330 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 10:11:09.393 +07:00 [INF] Executed ViewResult - view Create executed in 63.8319ms.
2025-06-11 10:11:09.396 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 74.9046ms
2025-06-11 10:11:09.398 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:11:09.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:09.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:09.399 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:09.401 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1772ms
2025-06-11 10:11:09.405 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 93.2616ms
2025-06-11 10:11:09.408 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.1919ms
2025-06-11 10:11:13.699 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:11:13.702 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:13.704 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:11:13.708 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:11:13.715 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:11:13.730 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:11:13.753 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:11:13.766 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:11:13.775 +07:00 [INF] Executed ViewResult - view Bookings executed in 9.8296ms.
2025-06-11 10:11:13.777 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 67.6196ms
2025-06-11 10:11:13.778 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:11:13.778 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:13.779 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 79.9587ms
2025-06-11 10:11:13.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:13.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:13.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.102ms
2025-06-11 10:11:13.790 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.032ms
2025-06-11 10:11:27.263 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:11:27.270 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:27.271 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:11:27.272 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:11:27.276 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:11:27.287 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:11:27.295 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:11:27.296 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.626ms.
2025-06-11 10:11:27.298 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 24.0974ms
2025-06-11 10:11:27.299 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:11:27.300 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:27.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 38.2651ms
2025-06-11 10:11:27.306 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:27.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:27.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.2673ms
2025-06-11 10:11:27.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3388ms
2025-06-11 10:11:28.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:11:28.226 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:28.227 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:11:28.228 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:11:28.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:11:28.242 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:11:28.250 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:11:28.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:11:28.255 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:11:28.257 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:11:28.259 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:11:28.261 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:11:28.263 +07:00 [INF] Executed ViewResult - view Index executed in 1.6827ms.
2025-06-11 10:11:28.264 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 34.7221ms
2025-06-11 10:11:28.266 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:11:28.267 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:28.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 45.3379ms
2025-06-11 10:11:28.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:28.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:28.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9977ms
2025-06-11 10:11:28.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3716ms
2025-06-11 10:11:29.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:11:29.554 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:29.556 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:11:29.557 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:11:29.558 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:11:29.559 +07:00 [INF] Executed ViewResult - view About executed in 1.1751ms.
2025-06-11 10:11:29.561 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.1121ms
2025-06-11 10:11:29.562 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:11:29.563 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:29.564 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 12.7393ms
2025-06-11 10:11:29.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:29.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:29.573 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5089ms
2025-06-11 10:11:29.578 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3949ms
2025-06-11 10:11:33.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:11:33.388 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:33.389 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:11:33.391 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:11:33.393 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:11:33.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:11:33.402 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:11:33.403 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.3136ms.
2025-06-11 10:11:33.404 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 12.1258ms
2025-06-11 10:11:33.405 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:11:33.406 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:33.407 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 21.9855ms
2025-06-11 10:11:33.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:33.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:33.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9997ms
2025-06-11 10:11:33.418 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8274ms
2025-06-11 10:11:39.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:11:39.355 +07:00 [INF] No cached response available for this request.
2025-06-11 10:11:39.358 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:11:39.359 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:11:39.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:11:39.368 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:11:39.375 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:11:39.377 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.5062ms.
2025-06-11 10:11:39.378 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 17.9649ms
2025-06-11 10:11:39.379 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:11:39.380 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:11:39.381 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 30.2211ms
2025-06-11 10:11:39.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:11:39.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:11:39.387 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9868ms
2025-06-11 10:11:39.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9558ms
2025-06-11 10:12:20.634 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:12:20.641 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:20.646 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:12:20.646 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:12:20.648 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:12:20.649 +07:00 [INF] Executed ViewResult - view About executed in 1.5232ms.
2025-06-11 10:12:20.651 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.6921ms
2025-06-11 10:12:20.652 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:12:20.652 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:20.653 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 19.2607ms
2025-06-11 10:12:20.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:20.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:20.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3767ms
2025-06-11 10:12:20.676 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.2118ms
2025-06-11 10:12:22.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 10:12:22.730 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:22.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:12:22.734 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:12:22.745 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:12:22.747 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 10:12:22.753 +07:00 [INF] Executed ViewResult - view Create executed in 5.6821ms.
2025-06-11 10:12:22.754 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 18.6024ms
2025-06-11 10:12:22.755 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 10:12:22.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:22.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 29.9595ms
2025-06-11 10:12:22.759 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:22.760 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:22.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7668ms
2025-06-11 10:12:22.766 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4609ms
2025-06-11 10:12:37.182 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:12:37.186 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:37.187 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:12:37.188 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:12:37.194 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:12:37.197 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:12:37.198 +07:00 [INF] Executed ViewResult - view Index executed in 1.4406ms.
2025-06-11 10:12:37.199 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.2082ms
2025-06-11 10:12:37.200 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:12:37.201 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:37.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.4273ms
2025-06-11 10:12:37.206 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:37.206 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:37.208 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0052ms
2025-06-11 10:12:37.214 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7655ms
2025-06-11 10:12:44.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/1 - null null
2025-06-11 10:12:44.207 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:44.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:12:44.212 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:12:44.234 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:12:44.259 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 10:12:44.279 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:12:44.283 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:12:44.293 +07:00 [INF] Executed ViewResult - view Details executed in 10.3105ms.
2025-06-11 10:12:44.295 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 81.2105ms
2025-06-11 10:12:44.296 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:12:44.297 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:44.298 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/1 - 200 null text/html; charset=utf-8 95.1318ms
2025-06-11 10:12:44.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:44.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:44.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4607ms
2025-06-11 10:12:44.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5947ms
2025-06-11 10:12:44.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=1&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 10:12:44.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=1&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 10:12:44.345 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:44.345 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/1 - null null
2025-06-11 10:12:44.347 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:44.349 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:12:44.349 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:44.350 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:12:44.352 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:12:44.353 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:12:44.355 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:12:44.355 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:12:44.371 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:12:44.371 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=11.9404&longitude=108.4583 - null null
2025-06-11 10:12:44.377 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:12:44.380 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:44.436 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:12:44.455 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:12:44.454 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 10:12:44.485 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:12:44.497 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 10:12:44.498 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:12:44.498 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:12:44.502 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 146.9712ms
2025-06-11 10:12:44.506 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:12:44.507 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:44.508 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 149.6373ms
2025-06-11 10:12:44.509 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=1&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 166.4319ms
2025-06-11 10:12:44.511 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:12:44.510 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=11.9404&lon=108.4583&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:12:44.516 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:44.519 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:12:44.519 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=11.9404&lon=108.4583&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:12:44.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/1 - 200 null application/json; charset=utf-8 173.4687ms
2025-06-11 10:12:44.527 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:12:44.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:12:44.540 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:12:44.543 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:12:44.546 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 189.4887ms
2025-06-11 10:12:44.547 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:12:44.548 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:44.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=1&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 206.3132ms
2025-06-11 10:12:44.961 +07:00 [INF] Received HTTP response headers after 437.2453ms - 401
2025-06-11 10:12:44.963 +07:00 [INF] End processing HTTP request after 457.2184ms - 401
2025-06-11 10:12:44.964 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 10:12:44.968 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:12:44.971 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 468.9526ms
2025-06-11 10:12:44.972 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:12:44.973 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:44.973 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=11.9404&longitude=108.4583 - 200 null application/json; charset=utf-8 602.4195ms
2025-06-11 10:12:52.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:12:52.010 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:52.011 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:12:52.014 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:12:52.025 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:12:52.033 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:12:52.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:12:52.052 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:12:52.064 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:12:52.077 +07:00 [INF] Executed ViewResult - view Dashboard executed in 12.654ms.
2025-06-11 10:12:52.078 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 62.7708ms
2025-06-11 10:12:52.079 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:12:52.080 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:52.081 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 74.8514ms
2025-06-11 10:12:52.084 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:52.084 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:52.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6375ms
2025-06-11 10:12:52.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9693ms
2025-06-11 10:12:53.998 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 10:12:54.002 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:54.004 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:12:54.008 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:12:54.012 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:12:54.016 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:12:54.025 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:12:54.027 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6229ms.
2025-06-11 10:12:54.028 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 18.5522ms
2025-06-11 10:12:54.029 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:12:54.030 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:54.031 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 32.4057ms
2025-06-11 10:12:54.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:54.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:54.036 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1953ms
2025-06-11 10:12:54.042 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3247ms
2025-06-11 10:12:58.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:12:58.056 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:58.057 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:12:58.058 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:12:58.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:12:58.065 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:12:58.068 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:12:58.076 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:12:58.077 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.6038ms.
2025-06-11 10:12:58.079 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 19.0768ms
2025-06-11 10:12:58.080 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:12:58.081 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:58.082 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 29.8662ms
2025-06-11 10:12:58.084 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:58.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2485ms
2025-06-11 10:12:58.983 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 10:12:58.986 +07:00 [INF] No cached response available for this request.
2025-06-11 10:12:58.988 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:12:58.989 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:12:58.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:12:58.996 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:12:59.003 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:12:59.005 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.4789ms.
2025-06-11 10:12:59.006 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 16.0646ms
2025-06-11 10:12:59.007 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:12:59.008 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:12:59.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 25.8393ms
2025-06-11 10:12:59.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:12:59.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:12:59.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0684ms
2025-06-11 10:12:59.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5931ms
2025-06-11 10:13:01.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:13:01.348 +07:00 [INF] No cached response available for this request.
2025-06-11 10:13:01.349 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:13:01.349 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:13:01.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:13:01.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:13:01.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:13:01.366 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:13:01.368 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9659ms.
2025-06-11 10:13:01.370 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 18.8281ms
2025-06-11 10:13:01.371 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:13:01.371 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:13:01.372 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 28.2852ms
2025-06-11 10:13:01.375 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:13:01.377 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9677ms
2025-06-11 10:13:02.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:13:02.218 +07:00 [INF] No cached response available for this request.
2025-06-11 10:13:02.219 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:13:02.222 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:13:02.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:13:02.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:13:02.234 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:13:02.245 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:13:02.252 +07:00 [INF] Executed ViewResult - view Revenue executed in 8.2996ms.
2025-06-11 10:13:02.254 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 30.4608ms
2025-06-11 10:13:02.255 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:13:02.256 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:13:02.256 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 42.3123ms
2025-06-11 10:13:02.259 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:13:02.259 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:13:02.261 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8986ms
2025-06-11 10:13:02.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4009ms
2025-06-11 10:13:23.695 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:13:23.699 +07:00 [INF] No cached response available for this request.
2025-06-11 10:13:23.700 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:13:23.701 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:13:23.717 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:13:23.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:13:23.735 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:13:23.742 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:13:23.743 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3184ms.
2025-06-11 10:13:23.744 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 41.8595ms
2025-06-11 10:13:23.746 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:13:23.746 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:13:23.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 52.0905ms
2025-06-11 10:13:23.751 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:13:23.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1315ms
2025-06-11 10:14:12.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:14:12.924 +07:00 [INF] No cached response available for this request.
2025-06-11 10:14:12.925 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:14:12.926 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:14:12.932 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:14:12.939 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:14:12.942 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:14:12.950 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:14:12.951 +07:00 [INF] Executed ViewResult - view Revenue executed in 1.7296ms.
2025-06-11 10:14:12.952 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 23.654ms
2025-06-11 10:14:12.953 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:14:12.954 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:14:12.955 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 36.5325ms
2025-06-11 10:14:12.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:14:12.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:14:12.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0164ms
2025-06-11 10:14:12.970 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.8631ms
2025-06-11 10:14:18.899 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:14:18.902 +07:00 [INF] No cached response available for this request.
2025-06-11 10:14:18.903 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:14:18.904 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:14:18.907 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:14:18.911 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:14:18.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:14:18.921 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:14:18.923 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3676ms.
2025-06-11 10:14:18.924 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 18.5453ms
2025-06-11 10:14:18.925 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:14:18.926 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:14:18.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 28.017ms
2025-06-11 10:14:18.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:14:18.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9561ms
2025-06-11 10:14:20.175 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 10:14:20.178 +07:00 [INF] No cached response available for this request.
2025-06-11 10:14:20.179 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:14:20.180 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:14:20.183 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:14:20.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:14:20.194 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:14:20.196 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.5221ms.
2025-06-11 10:14:20.197 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 15.3752ms
2025-06-11 10:14:20.198 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:14:20.199 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:14:20.199 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 24.7421ms
2025-06-11 10:14:20.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:14:20.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:14:20.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:14:20.205 +07:00 [INF] No cached response available for this request.
2025-06-11 10:14:20.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.9512ms
2025-06-11 10:14:20.211 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:14:20.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.3746ms
2025-06-11 10:14:20.222 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:14:20.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 22.0807ms
2025-06-11 10:17:56.319 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:17:56.351 +07:00 [INF] No cached response available for this request.
2025-06-11 10:17:56.355 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:17:56.356 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:17:56.378 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:17:56.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:17:56.405 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:17:56.414 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:17:56.416 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.581ms.
2025-06-11 10:17:56.417 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 58.2495ms
2025-06-11 10:17:56.418 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:17:56.419 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:17:56.420 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 101.8045ms
2025-06-11 10:17:56.423 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:17:56.426 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9677ms
2025-06-11 10:17:59.016 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 10:17:59.019 +07:00 [INF] No cached response available for this request.
2025-06-11 10:17:59.021 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:17:59.024 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:17:59.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:17:59.033 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:17:59.037 +07:00 [INF] Executed ViewResult - view Homestays executed in 4.9169ms.
2025-06-11 10:17:59.038 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 12.2817ms
2025-06-11 10:17:59.039 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:17:59.040 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:17:59.041 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 25.2195ms
2025-06-11 10:17:59.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:17:59.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:17:59.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9834ms
2025-06-11 10:17:59.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9367ms
2025-06-11 10:18:00.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:00.737 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:00.738 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:00.739 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:00.742 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:00.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:00.750 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:00.758 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:00.759 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4316ms.
2025-06-11 10:18:00.760 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.4854ms
2025-06-11 10:18:00.761 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:00.762 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:00.763 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.3692ms
2025-06-11 10:18:00.766 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:00.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0379ms
2025-06-11 10:18:01.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 10:18:01.521 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:01.522 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:18:01.523 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:01.526 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:01.530 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:01.537 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:18:01.538 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.2003ms.
2025-06-11 10:18:01.540 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 15.0483ms
2025-06-11 10:18:01.541 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:18:01.542 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:01.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 25.1292ms
2025-06-11 10:18:01.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:01.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:01.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0481ms
2025-06-11 10:18:01.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5791ms
2025-06-11 10:18:03.983 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:03.987 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:03.988 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:03.989 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:03.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:03.996 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:03.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:04.006 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:04.008 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.665ms.
2025-06-11 10:18:04.009 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 18.6736ms
2025-06-11 10:18:04.010 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:04.011 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:04.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 28.6951ms
2025-06-11 10:18:04.015 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:04.017 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9472ms
2025-06-11 10:18:05.070 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:18:05.074 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:05.075 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:18:05.076 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:05.079 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:05.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:05.086 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:05.094 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:18:05.095 +07:00 [INF] Executed ViewResult - view Revenue executed in 1.6184ms.
2025-06-11 10:18:05.096 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 19.2677ms
2025-06-11 10:18:05.097 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:18:05.098 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:05.099 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 29.1186ms
2025-06-11 10:18:05.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:05.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:05.104 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0257ms
2025-06-11 10:18:05.111 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3602ms
2025-06-11 10:18:06.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:06.867 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:06.870 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:06.873 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:06.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:06.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:06.892 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:06.906 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:06.909 +07:00 [INF] Executed ViewResult - view Dashboard executed in 4.3475ms.
2025-06-11 10:18:06.911 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 35.4776ms
2025-06-11 10:18:06.913 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:06.914 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:06.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 55.9714ms
2025-06-11 10:18:06.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:06.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9233ms
2025-06-11 10:18:08.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:18:08.965 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:08.966 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:08.970 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:18:08.985 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:18:08.995 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:18:09.000 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:18:09.001 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 29.3865ms
2025-06-11 10:18:09.002 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:09.003 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:09.004 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 42.6153ms
2025-06-11 10:18:10.762 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:18:10.767 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:10.770 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:10.772 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:18:10.777 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:18:10.781 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:18:10.783 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 7.9857ms
2025-06-11 10:18:10.785 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:10.786 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:10.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 25.8925ms
2025-06-11 10:18:11.973 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:11.978 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:11.980 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:11.982 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:11.989 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:11.995 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:12.000 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:12.016 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:12.019 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.4222ms.
2025-06-11 10:18:12.023 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 38.6934ms
2025-06-11 10:18:12.025 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:12.027 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:12.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 55.4058ms
2025-06-11 10:18:12.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:12.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.62ms
2025-06-11 10:18:13.208 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 10:18:13.212 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:13.213 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:18:13.215 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:13.217 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 10:18:13.218 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 1.1253ms
2025-06-11 10:18:13.220 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:18:13.221 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:13.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 14.7117ms
2025-06-11 10:18:13.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 10:18:13.229 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:13.230 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:18:13.233 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:18:13.245 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:18:13.248 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 10:18:13.252 +07:00 [INF] Executed ViewResult - view Profile executed in 5.0368ms.
2025-06-11 10:18:13.254 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 20.0156ms
2025-06-11 10:18:13.256 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:18:13.257 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:13.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 32.8159ms
2025-06-11 10:18:13.261 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:13.261 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:13.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7378ms
2025-06-11 10:18:13.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.9949ms
2025-06-11 10:18:14.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:14.242 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:14.243 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:14.244 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:14.247 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:14.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:14.255 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:14.262 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:14.263 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.2788ms.
2025-06-11 10:18:14.264 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 19.606ms
2025-06-11 10:18:14.266 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:14.267 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:14.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 29.9149ms
2025-06-11 10:18:14.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:14.274 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4104ms
2025-06-11 10:18:14.863 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:18:14.866 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:14.867 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:14.868 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:18:14.871 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:18:14.874 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:18:14.875 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 5.1134ms
2025-06-11 10:18:14.876 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:18:14.877 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:14.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 15.2887ms
2025-06-11 10:18:17.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:18:17.535 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:17.536 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:17.537 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:17.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:18:17.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:17.550 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:17.559 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:18:17.561 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3205ms.
2025-06-11 10:18:17.562 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 23.0515ms
2025-06-11 10:18:17.563 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:18:17.564 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:17.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 33.972ms
2025-06-11 10:18:17.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:17.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.5135ms
2025-06-11 10:18:22.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 10:18:22.225 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:22.227 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:18:22.228 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:18:22.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:18:22.236 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:18:22.243 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:18:22.244 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.1843ms.
2025-06-11 10:18:22.245 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 16.22ms
2025-06-11 10:18:22.246 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:18:22.247 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:22.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 26.1715ms
2025-06-11 10:18:22.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:22.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:22.254 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9648ms
2025-06-11 10:18:22.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2033ms
2025-06-11 10:18:38.071 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:18:38.076 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:18:38.077 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:18:38.080 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:18:38.081 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:18:38.084 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:18:38.085 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:18:38.087 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:18:38.088 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:18:38.088 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 5.1092ms
2025-06-11 10:18:38.090 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:18:38.091 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 19.619ms
2025-06-11 10:18:38.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:18:38.099 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:38.100 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:18:38.101 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:18:38.107 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:18:38.111 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:18:38.114 +07:00 [INF] Executed ViewResult - view Index executed in 3.1076ms.
2025-06-11 10:18:38.116 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 13.1581ms
2025-06-11 10:18:38.119 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:18:38.120 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:38.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 26.7486ms
2025-06-11 10:18:38.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:38.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:38.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.6762ms
2025-06-11 10:18:38.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.7195ms
2025-06-11 10:18:41.114 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:18:41.139 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:41.142 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:18:41.146 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:18:41.159 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:18:41.168 +07:00 [INF] Executed ViewResult - view Login executed in 9.147ms.
2025-06-11 10:18:41.183 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 24.4472ms
2025-06-11 10:18:41.197 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:18:41.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:41.199 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:41.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:41.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.7244ms
2025-06-11 10:18:41.203 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 89.2908ms
2025-06-11 10:18:41.215 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.3948ms
2025-06-11 10:18:43.402 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:18:43.406 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:18:43.406 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:18:43.408 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:18:43.409 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:18:43.419 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:18:43.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:18:43.580 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:18:43.607 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:18:43.621 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:18:43.627 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:18:43.641 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:18:43.650 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:18:43.652 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 241.9172ms
2025-06-11 10:18:43.654 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:18:43.656 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 253.7521ms
2025-06-11 10:18:43.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:18:43.683 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:43.684 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:18:43.686 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:18:43.692 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:18:43.698 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:18:43.700 +07:00 [INF] Executed ViewResult - view Index executed in 2.066ms.
2025-06-11 10:18:43.702 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 14.4824ms
2025-06-11 10:18:43.704 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:18:43.706 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:43.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 40.5331ms
2025-06-11 10:18:43.710 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:43.711 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:43.719 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8498ms
2025-06-11 10:18:43.719 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.0009ms
2025-06-11 10:18:45.119 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:18:45.124 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:45.125 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:45.127 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:18:45.134 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:18:45.151 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:18:45.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:45.160 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:45.164 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:45.167 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:45.172 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:18:45.175 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:18:45.178 +07:00 [INF] Executed ViewResult - view Index executed in 3.527ms.
2025-06-11 10:18:45.181 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 50.891ms
2025-06-11 10:18:45.182 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:45.184 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:45.185 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 65.8673ms
2025-06-11 10:18:45.189 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:45.189 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:45.197 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2671ms
2025-06-11 10:18:45.198 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.7963ms
2025-06-11 10:18:48.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:18:48.061 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:48.063 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:48.064 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:18:48.072 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:18:48.089 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:18:48.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:48.097 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:48.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:48.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:48.107 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:18:48.109 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:18:48.111 +07:00 [INF] Executed ViewResult - view Index executed in 1.6431ms.
2025-06-11 10:18:48.112 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 46.8601ms
2025-06-11 10:18:48.114 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:48.115 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:48.116 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 58.1674ms
2025-06-11 10:18:48.120 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:48.120 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:48.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5136ms
2025-06-11 10:18:48.130 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.9451ms
2025-06-11 10:18:48.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/favicon.ico - null null
2025-06-11 10:18:48.171 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:48.172 +07:00 [INF] The file /favicon.ico was not modified
2025-06-11 10:18:48.173 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:48.174 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/favicon.ico - 304 null image/x-icon 7.0373ms
2025-06-11 10:18:53.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay?SearchModel.Location=&SearchModel.CheckInDate=&__Invariant=SearchModel.CheckInDate&SearchModel.CheckOutDate=&__Invariant=SearchModel.CheckOutDate&SearchModel.NumberOfGuests=1 - null null
2025-06-11 10:18:53.769 +07:00 [INF] No cached response available for this request.
2025-06-11 10:18:53.770 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:53.771 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:18:53.777 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:18:53.781 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:18:53.785 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:53.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:53.791 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:53.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:18:53.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:18:53.799 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:18:53.801 +07:00 [INF] Executed ViewResult - view Index executed in 2.0453ms.
2025-06-11 10:18:53.802 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 29.3064ms
2025-06-11 10:18:53.804 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:18:53.805 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:18:53.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay?SearchModel.Location=&SearchModel.CheckInDate=&__Invariant=SearchModel.CheckInDate&SearchModel.CheckOutDate=&__Invariant=SearchModel.CheckOutDate&SearchModel.NumberOfGuests=1 - 200 null text/html; charset=utf-8 40.6705ms
2025-06-11 10:18:53.810 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:18:53.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:18:53.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4292ms
2025-06-11 10:18:53.819 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7913ms
2025-06-11 10:19:00.502 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 10:19:00.505 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:00.507 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:19:00.507 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:00.525 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 10:19:00.534 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:00.536 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:19:00.538 +07:00 [INF] Executed ViewResult - view Details executed in 1.989ms.
2025-06-11 10:19:00.540 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 31.2129ms
2025-06-11 10:19:00.542 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:19:00.543 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:00.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 42.2619ms
2025-06-11 10:19:00.547 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:00.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1481ms
2025-06-11 10:19:00.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:00.559 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3488ms
2025-06-11 10:19:00.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 10:19:00.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 10:19:00.610 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:00.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 10:19:00.613 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:00.614 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:00.617 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:00.618 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:00.619 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:00.620 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:19:00.621 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:00.624 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:00.628 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:19:00.676 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 10:19:00.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 10:19:00.680 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:00.683 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:00.688 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:00.691 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:00.694 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:00.698 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 63.4059ms
2025-06-11 10:19:00.698 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:00.699 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 71.5442ms
2025-06-11 10:19:00.700 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:19:00.701 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:19:00.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:00.705 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:00.706 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 10:19:00.707 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:00.711 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:00.711 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:00.714 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:19:00.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 102.5934ms
2025-06-11 10:19:00.716 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:00.717 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 109.9764ms
2025-06-11 10:19:00.719 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:19:00.723 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 100.4615ms
2025-06-11 10:19:00.731 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:00.732 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:00.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 125.9788ms
2025-06-11 10:19:00.962 +07:00 [INF] Received HTTP response headers after 234.1195ms - 401
2025-06-11 10:19:00.963 +07:00 [INF] End processing HTTP request after 249.5128ms - 401
2025-06-11 10:19:00.965 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 10:19:00.966 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:00.968 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 254.5994ms
2025-06-11 10:19:00.970 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:19:00.971 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:00.972 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 296.0273ms
2025-06-11 10:19:11.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 10:19:11.088 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 10:19:11.090 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:11.093 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:11.094 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:11.095 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:11.095 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:11.096 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:11.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:19:11.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:11.106 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:11.106 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:11.108 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:11.109 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 8.6131ms
2025-06-11 10:19:11.111 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:11.112 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:11.114 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:11.115 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:11.117 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:11.117 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 29.8145ms
2025-06-11 10:19:11.120 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 22.6137ms
2025-06-11 10:19:11.124 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:11.124 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:11.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 37.7521ms
2025-06-11 10:19:13.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - null null
2025-06-11 10:19:13.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-28&checkOut=2025-06-29 - null null
2025-06-11 10:19:13.427 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:13.430 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:13.431 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:13.432 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:13.433 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:13.433 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:13.445 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:19:13.448 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:13.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:13.463 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:13.463 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:13.465 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:13.476 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:13.476 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 30.1115ms
2025-06-11 10:19:13.480 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:13.481 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:13.483 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:13.483 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:13.487 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 51.7089ms
2025-06-11 10:19:13.491 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-28&checkOut=2025-06-29 - 200 null application/json; charset=utf-8 73.0828ms
2025-06-11 10:19:13.495 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:13.499 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:13.500 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - 200 null application/json; charset=utf-8 82.17ms
2025-06-11 10:19:14.758 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Booking/Create - application/x-www-form-urlencoded 324
2025-06-11 10:19:14.762 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:19:14.763 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:19:14.765 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-11 10:19:14.770 +07:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(WebHS.ViewModels.BookingViewModel) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:14.779 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:14.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:14.790 +07:00 [INF] Creating booking for user 6a64425a-4abd-447a-8868-e574987d2f5a, homestay 3
2025-06-11 10:19:14.792 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:14.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:14.811 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_HomestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__model_HomestayId_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0]
2025-06-11 10:19:14.814 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:14.816 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:14.942 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-11 10:19:14.966 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 1000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 1000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-06-11 10:19:14.992 +07:00 [INF] Booking 21 created successfully for user 6a64425a-4abd-447a-8868-e574987d2f5a
2025-06-11 10:19:14.995 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:19:15.009 +07:00 [INF] Confirmation email sent for booking 21
2025-06-11 10:19:15.011 +07:00 [INF] Executing RedirectResult, redirecting to /Payment/Checkout?bookingId=21.
2025-06-11 10:19:15.012 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Create (WebHS) in 240.2953ms
2025-06-11 10:19:15.013 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-11 10:19:15.014 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Booking/Create - 302 0 null 255.751ms
2025-06-11 10:19:15.018 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=21 - null null
2025-06-11 10:19:15.021 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:15.022 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-11 10:19:15.025 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-11 10:19:15.036 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-11 10:19:15.039 +07:00 [INF] Executing ViewResult, running view Checkout.
2025-06-11 10:19:15.050 +07:00 [INF] Executed ViewResult - view Checkout executed in 11.6279ms.
2025-06-11 10:19:15.052 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 25.6588ms
2025-06-11 10:19:15.053 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-11 10:19:15.054 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:15.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=21 - 200 null text/html; charset=utf-8 37.6275ms
2025-06-11 10:19:15.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:15.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:15.065 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5573ms
2025-06-11 10:19:15.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6446ms
2025-06-11 10:19:17.256 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - application/x-www-form-urlencoded 467
2025-06-11 10:19:17.261 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:19:17.262 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:19:17.264 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-11 10:19:17.268 +07:00 [INF] Route matched with {action = "ProcessPayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessPayment(Int32, System.String) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-11 10:19:17.285 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-11 10:19:17.293 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[BookingId] = @__bookingId_0 AND [p].[Status] = 0
2025-06-11 10:19:17.328 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [BookingId], [CompletedAt], [CreatedAt], [Notes], [PaymentMethod], [Status], [TransactionId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-06-11 10:19:17.353 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p5='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [Status] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Payments] SET [CompletedAt] = @p2, [Status] = @p3, [TransactionId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-06-11 10:19:17.358 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType26`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:17.361 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.ProcessPayment (WebHS) in 91.3573ms
2025-06-11 10:19:17.362 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-11 10:19:17.363 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - 200 null application/json; charset=utf-8 106.5811ms
2025-06-11 10:19:18.837 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=21 - null null
2025-06-11 10:19:18.841 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:18.842 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-11 10:19:18.843 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-11 10:19:18.846 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-11 10:19:18.850 +07:00 [INF] Executing RedirectResult, redirecting to /Booking/Details/21.
2025-06-11 10:19:18.851 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 6.7767ms
2025-06-11 10:19:18.852 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-11 10:19:18.853 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:18.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=21 - 302 0 null 16.7172ms
2025-06-11 10:19:18.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 10:19:18.860 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:18.861 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:19:18.864 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:18.886 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 10:19:18.889 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:19:18.897 +07:00 [INF] Executed ViewResult - view Details executed in 7.9587ms.
2025-06-11 10:19:18.899 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 33.2952ms
2025-06-11 10:19:18.900 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:19:18.902 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:18.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 200 null text/html; charset=utf-8 46.3338ms
2025-06-11 10:19:18.907 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:18.910 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9996ms
2025-06-11 10:19:24.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 10:19:24.928 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:24.930 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:19:24.931 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:24.935 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 10:19:24.942 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:24.944 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 10:19:24.946 +07:00 [INF] Executed ViewResult - view Details executed in 1.8731ms.
2025-06-11 10:19:24.948 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 14.9885ms
2025-06-11 10:19:24.949 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 10:19:24.950 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:24.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 26.7102ms
2025-06-11 10:19:24.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:24.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:24.958 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2492ms
2025-06-11 10:19:24.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6332ms
2025-06-11 10:19:24.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 10:19:24.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 10:19:24.995 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 10:19:24.996 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:24.999 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:25.001 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:25.002 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:25.003 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:25.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 10:19:25.004 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:19:25.004 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:25.005 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:19:25.008 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:25.015 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 10:19:25.023 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:19:25.022 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 10:19:25.009 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:19:25.026 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 10:19:25.033 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:25.025 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType12`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:25.063 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:19:25.063 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 10:19:25.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:25.067 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 56.6143ms
2025-06-11 10:19:25.069 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 10:19:25.075 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:25.079 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 10:19:25.079 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 10:19:25.085 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 51.5595ms
2025-06-11 10:19:25.088 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 10:19:25.089 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:25.090 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 10:19:25.092 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType22`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:25.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 99.1297ms
2025-06-11 10:19:25.094 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:25.095 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 78.886ms
2025-06-11 10:19:25.099 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 104.401ms
2025-06-11 10:19:25.100 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 10:19:25.104 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:25.105 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 111.4182ms
2025-06-11 10:19:25.117 +07:00 [INF] Received HTTP response headers after 35.0659ms - 401
2025-06-11 10:19:25.118 +07:00 [INF] End processing HTTP request after 55.1905ms - 401
2025-06-11 10:19:25.119 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 10:19:25.120 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 10:19:25.121 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 71.6436ms
2025-06-11 10:19:25.123 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 10:19:25.124 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:25.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 121.1781ms
2025-06-11 10:19:28.087 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:19:28.092 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:19:28.092 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:19:28.094 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:19:28.095 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:19:28.097 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:19:28.098 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:19:28.099 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:19:28.100 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:19:28.101 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 5.1204ms
2025-06-11 10:19:28.102 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:19:28.103 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 16.189ms
2025-06-11 10:19:28.107 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:19:28.110 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:28.111 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:19:28.112 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:19:28.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:19:28.120 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:19:28.122 +07:00 [INF] Executed ViewResult - view Index executed in 1.3854ms.
2025-06-11 10:19:28.123 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.5005ms
2025-06-11 10:19:28.124 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:19:28.125 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:28.126 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.5116ms
2025-06-11 10:19:28.131 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:28.131 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:28.133 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2401ms
2025-06-11 10:19:28.139 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.821ms
2025-06-11 10:19:30.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:19:30.107 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:30.108 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:19:30.109 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:19:30.111 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:19:30.115 +07:00 [INF] Executed ViewResult - view Login executed in 3.6196ms.
2025-06-11 10:19:30.117 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 5.6574ms
2025-06-11 10:19:30.118 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:19:30.119 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:30.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 17.629ms
2025-06-11 10:19:30.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:30.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:30.131 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3251ms
2025-06-11 10:19:30.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.3087ms
2025-06-11 10:19:32.470 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:19:32.474 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:19:32.475 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:19:32.476 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:19:32.478 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:19:32.484 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:19:32.488 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:19:32.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:19:32.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:19:32.571 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:19:32.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:19:32.576 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:19:32.577 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:19:32.579 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 98.7017ms
2025-06-11 10:19:32.580 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:19:32.581 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 111.438ms
2025-06-11 10:19:32.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:19:32.587 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:32.588 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:19:32.589 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:19:32.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:19:32.597 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:19:32.599 +07:00 [INF] Executed ViewResult - view Index executed in 1.6656ms.
2025-06-11 10:19:32.600 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.5592ms
2025-06-11 10:19:32.601 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:19:32.602 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:32.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.7519ms
2025-06-11 10:19:32.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:32.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:32.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.758ms
2025-06-11 10:19:32.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.2034ms
2025-06-11 10:19:34.446 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:19:34.450 +07:00 [INF] No cached response available for this request.
2025-06-11 10:19:34.451 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:19:34.452 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:19:34.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:19:34.473 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:19:34.483 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:19:34.485 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.2449ms.
2025-06-11 10:19:34.486 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 31.8816ms
2025-06-11 10:19:34.487 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:19:34.488 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:19:34.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 42.8267ms
2025-06-11 10:19:34.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:19:34.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:19:34.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9569ms
2025-06-11 10:19:34.501 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.1792ms
2025-06-11 10:20:03.230 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:20:03.237 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:03.238 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:20:03.239 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:20:03.249 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:20:03.253 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:20:03.254 +07:00 [INF] Executed ViewResult - view Index executed in 1.6629ms.
2025-06-11 10:20:03.255 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 14.7627ms
2025-06-11 10:20:03.257 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:20:03.258 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:03.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 28.4874ms
2025-06-11 10:20:03.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:03.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5191ms
2025-06-11 10:20:04.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:20:04.803 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:04.804 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:20:04.806 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:20:04.810 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:20:04.827 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:20:04.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:20:04.837 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:20:04.841 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:20:04.844 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:20:04.850 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:20:04.853 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:20:04.855 +07:00 [INF] Executed ViewResult - view Index executed in 2.4535ms.
2025-06-11 10:20:04.857 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 49.4635ms
2025-06-11 10:20:04.859 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:20:04.860 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:04.861 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 63.7728ms
2025-06-11 10:20:04.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:04.867 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:20:04.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:20:04.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.3576ms
2025-06-11 10:20:04.878 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:04.887 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.8112ms
2025-06-11 10:20:04.894 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:20:04.899 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:04.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 33.117ms
2025-06-11 10:20:08.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:20:08.737 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:08.738 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:20:08.739 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:20:08.743 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:20:08.755 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:20:08.759 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:20:08.761 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.5984ms.
2025-06-11 10:20:08.762 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 21.3867ms
2025-06-11 10:20:08.763 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:20:08.764 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:08.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 32.2441ms
2025-06-11 10:20:08.769 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:08.769 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:20:08.772 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.707ms
2025-06-11 10:20:08.779 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.822ms
2025-06-11 10:20:13.494 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:20:13.497 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:13.499 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:20:13.500 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:20:13.503 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:20:13.504 +07:00 [INF] Executed ViewResult - view About executed in 1.5454ms.
2025-06-11 10:20:13.505 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.6998ms
2025-06-11 10:20:13.506 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:20:13.507 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:13.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 14.1355ms
2025-06-11 10:20:13.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:13.518 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:20:13.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7567ms
2025-06-11 10:20:13.526 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6665ms
2025-06-11 10:20:14.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:20:14.969 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:14.970 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:20:14.971 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:20:14.976 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:20:14.991 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:20:15.000 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:20:15.001 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.4485ms.
2025-06-11 10:20:15.003 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 29.7496ms
2025-06-11 10:20:15.004 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:20:15.005 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:15.006 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 40.7078ms
2025-06-11 10:20:15.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:20:15.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:15.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8593ms
2025-06-11 10:20:15.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.583ms
2025-06-11 10:20:18.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:20:18.785 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:18.786 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:20:18.787 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:20:18.794 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:20:18.798 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:20:18.803 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:20:18.810 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:20:18.812 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3061ms.
2025-06-11 10:20:18.814 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 25.5876ms
2025-06-11 10:20:18.816 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:20:18.817 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:18.818 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 37.4346ms
2025-06-11 10:20:18.822 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:18.822 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:20:18.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9074ms
2025-06-11 10:20:18.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.0293ms
2025-06-11 10:20:19.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:20:19.899 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:19.900 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:20:19.900 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:20:19.906 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:20:19.908 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:20:19.910 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 7.8843ms
2025-06-11 10:20:19.911 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:20:19.912 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:19.913 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 18.3016ms
2025-06-11 10:20:23.784 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:20:23.789 +07:00 [INF] No cached response available for this request.
2025-06-11 10:20:23.790 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:20:23.791 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:20:23.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:20:23.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:20:23.804 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:20:23.815 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:20:23.817 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.6926ms.
2025-06-11 10:20:23.818 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 25.4604ms
2025-06-11 10:20:23.819 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:20:23.820 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:20:23.821 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 36.9238ms
2025-06-11 10:20:23.849 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:20:23.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.7532ms
2025-06-11 10:27:36.059 +07:00 [INF] Starting database basic initialization...
2025-06-11 10:27:37.151 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:27:37.212 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:27:37.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:27:37.224 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:27:37.249 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 10:27:37.270 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 10:27:37.356 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 10:27:37.393 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:6fbc9dae-a7a4-401d-aa4f-c2e974ef12dc
Error Number:3701,State:5,Class:11
2025-06-11 10:27:37.448 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 10:27:37.473 +07:00 [INF] Background Job Service started
2025-06-11 10:27:37.717 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 10:27:37.739 +07:00 [INF] Processed 0 expired payments
2025-06-11 10:27:37.837 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 10:27:37.872 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 10:27:37.878 +07:00 [INF] Hosting environment: Development
2025-06-11 10:27:37.879 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 10:27:38.242 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:27:38.399 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:38.410 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 10:27:38.452 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:38.468 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:27:38.613 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:27:38.625 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:27:38.773 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:27:38.873 +07:00 [INF] Executed ViewResult - view Index executed in 101.7617ms.
2025-06-11 10:27:38.877 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 404.716ms
2025-06-11 10:27:38.879 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:38.880 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:27:38.882 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:38.887 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:38.891 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 655.4974ms
2025-06-11 10:27:38.893 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:27:38.897 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:38.898 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 18.4737ms
2025-06-11 10:27:38.901 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:38.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:38.910 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.0178ms
2025-06-11 10:27:38.939 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.2239ms
2025-06-11 10:27:43.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:27:43.262 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:43.265 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:43.266 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:27:43.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:27:43.281 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:27:43.287 +07:00 [INF] Executed ViewResult - view Index executed in 6.2815ms.
2025-06-11 10:27:43.288 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 21.2826ms
2025-06-11 10:27:43.290 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:43.291 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:43.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 39.7718ms
2025-06-11 10:27:43.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:43.296 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:43.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.337ms
2025-06-11 10:27:43.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.5188ms
2025-06-11 10:27:45.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:27:45.146 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:45.151 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:27:45.159 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:27:45.169 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:27:45.195 +07:00 [INF] Executed ViewResult - view Login executed in 26.9945ms.
2025-06-11 10:27:45.198 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 36.5968ms
2025-06-11 10:27:45.199 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:27:45.200 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:45.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 60.7433ms
2025-06-11 10:27:45.205 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:45.206 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:45.208 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5223ms
2025-06-11 10:27:45.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.8339ms
2025-06-11 10:27:46.246 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:27:46.250 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:27:46.251 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:27:46.255 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:27:46.260 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:27:46.313 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:27:46.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:27:46.576 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:27:46.593 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:27:46.600 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:27:46.615 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:27:46.622 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:27:46.624 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:27:46.625 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 363.3514ms
2025-06-11 10:27:46.626 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:27:46.627 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 381.566ms
2025-06-11 10:27:46.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:27:46.633 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:46.637 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:46.638 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:27:46.644 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:27:46.648 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:27:46.654 +07:00 [INF] Executed ViewResult - view Index executed in 5.3938ms.
2025-06-11 10:27:46.655 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.0814ms
2025-06-11 10:27:46.656 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:27:46.657 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:46.658 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 27.8428ms
2025-06-11 10:27:46.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:46.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:46.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.568ms
2025-06-11 10:27:46.668 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.8222ms
2025-06-11 10:27:48.645 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:27:48.649 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:48.654 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:27:48.658 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:27:48.687 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:27:48.752 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:27:48.834 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:27:48.898 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:27:48.970 +07:00 [INF] Executed ViewResult - view Bookings executed in 72.9274ms.
2025-06-11 10:27:48.972 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 312.4211ms
2025-06-11 10:27:48.973 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:27:48.975 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:48.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 330.9261ms
2025-06-11 10:27:48.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:48.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:48.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4826ms
2025-06-11 10:27:48.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5708ms
2025-06-11 10:27:51.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:27:51.284 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:51.298 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:51.301 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:27:51.314 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:27:51.323 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:27:51.329 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:27:51.343 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:27:51.358 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:27:51.379 +07:00 [INF] Executed ViewResult - view Dashboard executed in 21.772ms.
2025-06-11 10:27:51.382 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 78.6557ms
2025-06-11 10:27:51.383 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:51.384 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:51.386 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 108.7693ms
2025-06-11 10:27:51.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:51.391 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:27:51.392 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3837ms
2025-06-11 10:27:51.398 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6464ms
2025-06-11 10:27:52.439 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:27:52.447 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:52.457 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:52.461 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:27:52.488 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:27:52.499 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:27:52.504 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:27:52.505 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 42.9873ms
2025-06-11 10:27:52.507 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:52.507 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:52.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 69.2061ms
2025-06-11 10:27:53.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:27:53.983 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:53.985 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:53.986 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:27:53.993 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:27:53.996 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:27:53.996 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 8.9115ms
2025-06-11 10:27:53.997 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:53.998 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:53.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 20.8081ms
2025-06-11 10:27:55.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:27:55.014 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:55.015 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:55.016 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:27:55.025 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:27:55.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:27:55.043 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:27:55.051 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:27:55.054 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.3036ms.
2025-06-11 10:27:55.055 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 36.7841ms
2025-06-11 10:27:55.056 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:55.057 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:55.058 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 48.38ms
2025-06-11 10:27:55.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:55.079 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3571ms
2025-06-11 10:27:55.861 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:27:55.867 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:55.869 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:55.871 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:27:55.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:27:55.893 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:27:55.895 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 17.7409ms
2025-06-11 10:27:55.901 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:55.905 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:55.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 44.8966ms
2025-06-11 10:27:56.993 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:27:57.000 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:57.008 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:57.015 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:27:57.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:27:57.042 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:27:57.047 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:27:57.074 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:27:57.077 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9009ms.
2025-06-11 10:27:57.079 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 55.307ms
2025-06-11 10:27:57.081 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:27:57.082 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:57.083 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 89.987ms
2025-06-11 10:27:57.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:27:57.115 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.5433ms
2025-06-11 10:27:58.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:27:58.505 +07:00 [INF] No cached response available for this request.
2025-06-11 10:27:58.507 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:58.508 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:27:58.517 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:27:58.520 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:27:58.521 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 10.7273ms
2025-06-11 10:27:58.522 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:27:58.523 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:27:58.524 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 22.7956ms
2025-06-11 10:28:01.796 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/1 - null null
2025-06-11 10:28:01.800 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:01.802 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:01.803 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:28:01.812 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:28:01.814 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:28:01.815 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 9.7846ms
2025-06-11 10:28:01.816 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:01.817 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:01.818 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/1 - 404 0 null 21.5524ms
2025-06-11 10:28:06.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/2 - null null
2025-06-11 10:28:06.246 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:06.248 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:06.249 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:28:06.261 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:28:06.263 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:28:06.269 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 18.5915ms
2025-06-11 10:28:06.270 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:06.271 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:06.272 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/2 - 404 0 null 33.8192ms
2025-06-11 10:28:09.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:28:09.219 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:09.220 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:09.221 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:09.229 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:09.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:09.248 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:09.257 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:28:09.259 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9711ms.
2025-06-11 10:28:09.261 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 37.5486ms
2025-06-11 10:28:09.262 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:09.263 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:09.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 49.8769ms
2025-06-11 10:28:09.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:09.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3781ms
2025-06-11 10:28:10.357 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 10:28:10.362 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:10.364 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:28:10.365 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:10.367 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 10:28:10.368 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 1.0817ms
2025-06-11 10:28:10.369 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:28:10.370 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:10.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 12.9167ms
2025-06-11 10:28:10.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 10:28:10.376 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:10.377 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:28:10.380 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:28:10.393 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:28:10.396 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 10:28:10.401 +07:00 [INF] Executed ViewResult - view Profile executed in 5.4583ms.
2025-06-11 10:28:10.402 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 20.5229ms
2025-06-11 10:28:10.403 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:28:10.404 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:10.405 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 31.8191ms
2025-06-11 10:28:10.408 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:10.408 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:10.410 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9613ms
2025-06-11 10:28:10.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.9251ms
2025-06-11 10:28:13.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking - null null
2025-06-11 10:28:13.194 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:13.195 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:13.199 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:13.207 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 10:28:13.223 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:28:13.243 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:13.247 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:13.255 +07:00 [INF] Executed ViewResult - view Index executed in 7.8906ms.
2025-06-11 10:28:13.256 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 55.2634ms
2025-06-11 10:28:13.257 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:13.259 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:13.260 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking - 200 null text/html; charset=utf-8 69.3148ms
2025-06-11 10:28:13.261 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:13.263 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:13.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3308ms
2025-06-11 10:28:13.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7326ms
2025-06-11 10:28:14.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Pending - null null
2025-06-11 10:28:14.446 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:14.448 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:14.449 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:14.457 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:14.470 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:28:14.488 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:14.491 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:14.493 +07:00 [INF] Executed ViewResult - view Index executed in 2.1015ms.
2025-06-11 10:28:14.494 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 44.1417ms
2025-06-11 10:28:14.496 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:14.497 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:14.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Pending - 200 null text/html; charset=utf-8 55.7071ms
2025-06-11 10:28:14.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:14.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:14.506 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3864ms
2025-06-11 10:28:14.507 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8518ms
2025-06-11 10:28:15.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - null null
2025-06-11 10:28:15.218 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:15.219 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:15.220 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:15.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:15.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:15.230 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:15.232 +07:00 [INF] Executed ViewResult - view Index executed in 1.9412ms.
2025-06-11 10:28:15.233 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 11.9084ms
2025-06-11 10:28:15.234 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:15.235 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:15.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - 200 null text/html; charset=utf-8 21.9374ms
2025-06-11 10:28:15.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:15.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:15.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0788ms
2025-06-11 10:28:15.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5792ms
2025-06-11 10:28:15.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedOut - null null
2025-06-11 10:28:15.798 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:15.800 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:15.801 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:15.804 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:15.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:15.810 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:15.812 +07:00 [INF] Executed ViewResult - view Index executed in 1.8714ms.
2025-06-11 10:28:15.813 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 11.0091ms
2025-06-11 10:28:15.814 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:15.815 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:15.816 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedOut - 200 null text/html; charset=utf-8 22.8623ms
2025-06-11 10:28:15.819 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:15.819 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:15.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5786ms
2025-06-11 10:28:15.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9205ms
2025-06-11 10:28:16.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Confirmed - null null
2025-06-11 10:28:16.568 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:16.569 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:16.570 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:16.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:16.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:16.580 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:16.581 +07:00 [INF] Executed ViewResult - view Index executed in 1.5092ms.
2025-06-11 10:28:16.582 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 11.1356ms
2025-06-11 10:28:16.584 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:16.584 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:16.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Confirmed - 200 null text/html; charset=utf-8 20.7408ms
2025-06-11 10:28:16.588 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:16.588 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:16.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5613ms
2025-06-11 10:28:16.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.198ms
2025-06-11 10:28:16.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Pending - null null
2025-06-11 10:28:16.998 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:16.999 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:17.000 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:17.003 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:17.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:17.009 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:17.011 +07:00 [INF] Executed ViewResult - view Index executed in 1.6875ms.
2025-06-11 10:28:17.013 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 11.1722ms
2025-06-11 10:28:17.014 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:17.015 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:17.016 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Pending - 200 null text/html; charset=utf-8 21.9014ms
2025-06-11 10:28:17.018 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:17.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:17.025 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9464ms
2025-06-11 10:28:17.025 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0615ms
2025-06-11 10:28:20.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Confirmed - null null
2025-06-11 10:28:20.414 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:20.415 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:20.416 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:20.419 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:20.423 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:20.425 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:20.426 +07:00 [INF] Executed ViewResult - view Index executed in 1.3653ms.
2025-06-11 10:28:20.427 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 10.0336ms
2025-06-11 10:28:20.428 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:20.429 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:20.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Confirmed - 200 null text/html; charset=utf-8 19.9923ms
2025-06-11 10:28:20.433 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:20.433 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:20.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8937ms
2025-06-11 10:28:20.440 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2269ms
2025-06-11 10:28:20.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - null null
2025-06-11 10:28:20.785 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:20.786 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:20.787 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:20.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:20.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:20.796 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:20.798 +07:00 [INF] Executed ViewResult - view Index executed in 1.4025ms.
2025-06-11 10:28:20.799 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 10.6619ms
2025-06-11 10:28:20.800 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:20.801 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:20.802 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - 200 null text/html; charset=utf-8 20.1408ms
2025-06-11 10:28:20.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:20.805 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:20.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.9216ms
2025-06-11 10:28:20.814 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.5692ms
2025-06-11 10:28:21.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Cancelled - null null
2025-06-11 10:28:21.408 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:21.409 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:21.410 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:21.414 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:21.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:21.420 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:21.422 +07:00 [INF] Executed ViewResult - view Index executed in 1.3349ms.
2025-06-11 10:28:21.423 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 10.1627ms
2025-06-11 10:28:21.424 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:21.425 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:21.425 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Cancelled - 200 null text/html; charset=utf-8 20.9345ms
2025-06-11 10:28:21.428 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:21.429 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:21.434 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.732ms
2025-06-11 10:28:21.434 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9326ms
2025-06-11 10:28:21.876 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=all - null null
2025-06-11 10:28:21.880 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:21.881 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:21.882 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:21.885 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 10:28:21.889 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:21.891 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:21.892 +07:00 [INF] Executed ViewResult - view Index executed in 1.2965ms.
2025-06-11 10:28:21.893 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 9.919ms
2025-06-11 10:28:21.894 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:21.895 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:21.896 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=all - 200 null text/html; charset=utf-8 20.4821ms
2025-06-11 10:28:21.899 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:21.899 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:21.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6284ms
2025-06-11 10:28:21.905 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7163ms
2025-06-11 10:28:22.822 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=Cancelled - null null
2025-06-11 10:28:22.826 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:22.828 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:22.829 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:22.831 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:22.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:22.837 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:22.839 +07:00 [INF] Executed ViewResult - view Index executed in 1.4118ms.
2025-06-11 10:28:22.840 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 10.0346ms
2025-06-11 10:28:22.841 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:22.842 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:22.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=Cancelled - 200 null text/html; charset=utf-8 21.2172ms
2025-06-11 10:28:22.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:22.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9035ms
2025-06-11 10:28:23.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - null null
2025-06-11 10:28:23.440 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:23.441 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:23.442 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:28:23.445 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 10:28:23.449 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:23.451 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:28:23.452 +07:00 [INF] Executed ViewResult - view Index executed in 1.6416ms.
2025-06-11 10:28:23.454 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 10.1833ms
2025-06-11 10:28:23.455 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-11 10:28:23.456 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:23.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking?status=CheckedIn - 200 null text/html; charset=utf-8 21.6316ms
2025-06-11 10:28:23.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:23.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3389ms
2025-06-11 10:28:27.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:28:27.328 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:27.329 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:28:27.330 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:27.333 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:27.339 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:27.348 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:28:27.349 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.7029ms.
2025-06-11 10:28:27.350 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 18.7363ms
2025-06-11 10:28:27.352 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:28:27.353 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:27.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 30.1895ms
2025-06-11 10:28:27.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:27.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:27.362 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9006ms
2025-06-11 10:28:27.362 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6589ms
2025-06-11 10:28:31.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:28:31.504 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:31.506 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:31.507 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:31.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:31.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:31.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:31.527 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:28:31.528 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4818ms.
2025-06-11 10:28:31.530 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.5328ms
2025-06-11 10:28:31.531 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:31.531 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:31.532 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 32.5949ms
2025-06-11 10:28:31.535 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:31.535 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:31.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8625ms
2025-06-11 10:28:31.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6801ms
2025-06-11 10:28:33.493 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:28:33.497 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:33.498 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:33.499 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:28:33.502 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:28:33.505 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:28:33.506 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 6.4745ms
2025-06-11 10:28:33.507 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:33.508 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:33.509 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 16.2741ms
2025-06-11 10:28:34.648 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:28:34.653 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:34.654 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:34.656 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:34.660 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:34.664 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:34.668 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:34.678 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:28:34.679 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.68ms.
2025-06-11 10:28:34.681 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 23.1132ms
2025-06-11 10:28:34.682 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:34.683 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:34.684 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 35.8397ms
2025-06-11 10:28:34.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:34.706 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6776ms
2025-06-11 10:28:35.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:28:35.943 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:35.944 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:28:35.947 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:35.951 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:35.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:35.959 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:35.970 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:28:35.990 +07:00 [INF] Executed ViewResult - view Revenue executed in 20.0622ms.
2025-06-11 10:28:35.992 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 43.4218ms
2025-06-11 10:28:35.993 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:28:35.994 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:35.995 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 54.9783ms
2025-06-11 10:28:35.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:35.998 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:36.003 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7686ms
2025-06-11 10:28:36.003 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4557ms
2025-06-11 10:28:39.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-11 10:28:39.656 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:39.659 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:39.659 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 5.6418ms
2025-06-11 10:28:39.663 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-11 10:28:45.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:28:45.854 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:45.856 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:45.857 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:45.872 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:45.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:28:45.890 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:28:45.898 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:28:45.899 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.484ms.
2025-06-11 10:28:45.901 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 42.556ms
2025-06-11 10:28:45.902 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:28:45.903 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:45.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 53.7274ms
2025-06-11 10:28:45.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:45.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:45.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3536ms
2025-06-11 10:28:45.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7428ms
2025-06-11 10:28:48.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 10:28:48.703 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:48.705 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:28:48.708 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:28:48.711 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:28:48.715 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:28:48.720 +07:00 [INF] Executed ViewResult - view Homestays executed in 5.664ms.
2025-06-11 10:28:48.722 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 12.1427ms
2025-06-11 10:28:48.723 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:28:48.723 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:48.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 24.5101ms
2025-06-11 10:28:48.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:48.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:48.729 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9764ms
2025-06-11 10:28:48.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5893ms
2025-06-11 10:28:56.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/5 - null null
2025-06-11 10:28:56.294 +07:00 [INF] No cached response available for this request.
2025-06-11 10:28:56.295 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:56.296 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:28:56.302 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:28:56.308 +07:00 [INF] Executing ViewResult, running view Calendar.
2025-06-11 10:28:56.318 +07:00 [INF] Executed ViewResult - view Calendar executed in 10.2296ms.
2025-06-11 10:28:56.319 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 22.0969ms
2025-06-11 10:28:56.320 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:28:56.321 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:28:56.322 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/5 - 200 null text/html; charset=utf-8 31.5894ms
2025-06-11 10:28:56.325 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:28:56.325 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:28:56.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5698ms
2025-06-11 10:28:56.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6768ms
2025-06-11 10:29:03.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 10:29:03.182 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:03.183 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:03.184 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:03.190 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:03.193 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:29:03.194 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.6255ms.
2025-06-11 10:29:03.196 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 10.491ms
2025-06-11 10:29:03.197 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:03.198 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:03.199 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 21.5727ms
2025-06-11 10:29:03.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:03.204 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0931ms
2025-06-11 10:29:06.209 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings?homestayId=3 - null null
2025-06-11 10:29:06.216 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:06.217 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:29:06.222 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:06.229 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:29:06.249 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:29:06.266 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:29:06.268 +07:00 [INF] Executed ViewResult - view Bookings executed in 3.0011ms.
2025-06-11 10:29:06.271 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 46.645ms
2025-06-11 10:29:06.273 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 10:29:06.274 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:06.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings?homestayId=3 - 200 null text/html; charset=utf-8 66.059ms
2025-06-11 10:29:06.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:29:06.280 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:06.287 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8378ms
2025-06-11 10:29:06.287 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.9728ms
2025-06-11 10:29:07.595 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 10:29:07.599 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:07.600 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:07.600 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:07.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:07.606 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:29:07.608 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.68ms.
2025-06-11 10:29:07.609 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.4818ms
2025-06-11 10:29:07.610 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:07.611 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:07.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 16.8793ms
2025-06-11 10:29:07.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:07.617 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8582ms
2025-06-11 10:29:08.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/3 - null null
2025-06-11 10:29:08.515 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:08.516 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:08.517 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:29:08.523 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:29:08.527 +07:00 [INF] Executing ViewResult, running view Calendar.
2025-06-11 10:29:08.529 +07:00 [INF] Executed ViewResult - view Calendar executed in 2.6191ms.
2025-06-11 10:29:08.530 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 11.7927ms
2025-06-11 10:29:08.531 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:08.532 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:08.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/3 - 200 null text/html; charset=utf-8 21.2313ms
2025-06-11 10:29:08.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:29:08.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:08.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4252ms
2025-06-11 10:29:08.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.281ms
2025-06-11 10:29:09.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 10:29:09.782 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:09.783 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:09.784 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:09.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:09.790 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 10:29:09.792 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.3012ms.
2025-06-11 10:29:09.793 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.2023ms
2025-06-11 10:29:09.794 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 10:29:09.795 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:09.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.9562ms
2025-06-11 10:29:09.799 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:09.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9613ms
2025-06-11 10:29:10.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:29:10.455 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:10.456 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:10.457 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:10.460 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:10.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:29:10.467 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:29:10.475 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:29:10.476 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3083ms.
2025-06-11 10:29:10.477 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 18.8769ms
2025-06-11 10:29:10.478 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:10.479 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:10.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 28.6677ms
2025-06-11 10:29:10.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:10.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3925ms
2025-06-11 10:29:12.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:29:12.503 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:12.504 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:12.505 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:29:12.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:29:12.511 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:29:12.512 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 5.2221ms
2025-06-11 10:29:12.513 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:12.513 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:12.514 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 14.3344ms
2025-06-11 10:29:13.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:29:13.868 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:13.869 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:13.870 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:13.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:13.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:29:13.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:29:13.890 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:29:13.892 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.463ms.
2025-06-11 10:29:13.893 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.2071ms
2025-06-11 10:29:13.894 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:13.895 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:13.896 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.5101ms
2025-06-11 10:29:13.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:13.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2217ms
2025-06-11 10:29:15.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:29:15.464 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:15.465 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:15.466 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:29:15.468 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:29:15.471 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:29:15.472 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 4.8852ms
2025-06-11 10:29:15.473 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:29:15.474 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:15.475 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 14.1599ms
2025-06-11 10:29:16.864 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:29:16.869 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:16.870 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:16.871 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:16.874 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:16.879 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:29:16.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:29:16.891 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:29:16.892 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.6603ms.
2025-06-11 10:29:16.894 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.3014ms
2025-06-11 10:29:16.895 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:29:16.896 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:16.897 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 32.6296ms
2025-06-11 10:29:16.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:16.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2389ms
2025-06-11 10:29:18.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:29:18.711 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:18.712 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:29:18.713 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:29:18.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:29:18.719 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:29:18.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:29:18.742 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:29:18.743 +07:00 [INF] Executed ViewResult - view Revenue executed in 1.7216ms.
2025-06-11 10:29:18.744 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 30.3698ms
2025-06-11 10:29:18.745 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:29:18.746 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:18.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 39.5664ms
2025-06-11 10:29:18.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:29:18.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:29:18.755 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4273ms
2025-06-11 10:29:18.755 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4383ms
2025-06-11 10:29:27.664 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-11 10:29:27.666 +07:00 [INF] No cached response available for this request.
2025-06-11 10:29:27.668 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:29:27.668 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 4.1545ms
2025-06-11 10:29:27.672 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-11 10:36:08.716 +07:00 [INF] Starting database basic initialization...
2025-06-11 10:36:10.715 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:36:10.764 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:36:10.769 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:36:10.773 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:36:10.790 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 10:36:10.809 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 10:36:10.883 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 10:36:10.924 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 241
ClientConnectionId:c2b0a21b-efb5-4636-8e6c-8606777b08fd
Error Number:3701,State:5,Class:11
2025-06-11 10:36:11.027 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 10:36:11.095 +07:00 [INF] Background Job Service started
2025-06-11 10:36:11.348 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 10:36:11.367 +07:00 [INF] Processed 0 expired payments
2025-06-11 10:36:11.440 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 10:36:11.500 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 10:36:11.518 +07:00 [INF] Hosting environment: Development
2025-06-11 10:36:11.525 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 10:36:11.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:36:11.965 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:11.977 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 10:36:12.042 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:12.054 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:36:12.249 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:36:12.273 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:36:12.437 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:36:12.586 +07:00 [INF] Executed ViewResult - view Index executed in 152.4544ms.
2025-06-11 10:36:12.590 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 533.7575ms
2025-06-11 10:36:12.593 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:12.597 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:36:12.598 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:12.606 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:12.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 845.7296ms
2025-06-11 10:36:12.613 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:36:12.619 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:12.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 26.0578ms
2025-06-11 10:36:12.623 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:12.632 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:12.637 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 14.3306ms
2025-06-11 10:36:12.682 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.8716ms
2025-06-11 10:36:25.206 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:36:25.215 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:25.219 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:36:25.229 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:36:25.277 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:36:25.346 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:36:25.408 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:36:25.445 +07:00 [INF] Executed ViewResult - view AllReviews executed in 37.3647ms.
2025-06-11 10:36:25.447 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 216.3863ms
2025-06-11 10:36:25.448 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:36:25.449 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:25.451 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 244.5949ms
2025-06-11 10:36:25.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:25.454 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:25.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.017ms
2025-06-11 10:36:25.475 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.7863ms
2025-06-11 10:36:26.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:36:26.880 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:26.884 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:36:26.886 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:36:26.890 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:36:26.896 +07:00 [INF] Executed ViewResult - view About executed in 7.6996ms.
2025-06-11 10:36:26.898 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 10.8182ms
2025-06-11 10:36:26.899 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:36:26.900 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:26.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 26.5173ms
2025-06-11 10:36:26.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:26.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:26.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.234ms
2025-06-11 10:36:26.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.0799ms
2025-06-11 10:36:27.690 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:36:27.694 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:27.696 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:27.698 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:27.702 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:36:27.727 +07:00 [INF] Executed ViewResult - view Login executed in 25.4653ms.
2025-06-11 10:36:27.729 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 30.1377ms
2025-06-11 10:36:27.730 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:27.732 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:27.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 42.6169ms
2025-06-11 10:36:27.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:27.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:27.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3068ms
2025-06-11 10:36:27.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3593ms
2025-06-11 10:36:29.494 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:36:29.499 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:36:29.500 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:36:29.504 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:29.509 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:29.547 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:36:29.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:36:29.646 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:36:29.660 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:36:29.668 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:36:29.683 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:36:29.689 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:36:29.692 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:36:29.692 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 182.1044ms
2025-06-11 10:36:29.693 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:29.695 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 200.2953ms
2025-06-11 10:36:29.698 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:36:29.701 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:29.705 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:29.707 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:36:29.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:36:29.720 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:36:29.725 +07:00 [INF] Executed ViewResult - view Index executed in 5.552ms.
2025-06-11 10:36:29.727 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.2554ms
2025-06-11 10:36:29.728 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:29.729 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:29.729 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 31.7946ms
2025-06-11 10:36:29.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:29.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:29.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5668ms
2025-06-11 10:36:29.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0643ms
2025-06-11 10:36:31.946 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 10:36:31.950 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:31.957 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:36:31.960 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:31.970 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:31.997 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:36:32.023 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:32.039 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:36:32.096 +07:00 [INF] Executed ViewResult - view Bookings executed in 57.3604ms.
2025-06-11 10:36:32.098 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 136.5672ms
2025-06-11 10:36:32.100 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 10:36:32.101 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:32.101 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 155.631ms
2025-06-11 10:36:32.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:32.104 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:32.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1562ms
2025-06-11 10:36:32.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.596ms
2025-06-11 10:36:34.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:36:34.054 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:34.061 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:34.064 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:34.076 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:36:34.084 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:36:34.089 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:34.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:34.109 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:36:34.129 +07:00 [INF] Executed ViewResult - view Dashboard executed in 19.8948ms.
2025-06-11 10:36:34.132 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 66.3194ms
2025-06-11 10:36:34.133 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:34.134 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:34.135 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 85.1591ms
2025-06-11 10:36:34.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:34.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8901ms
2025-06-11 10:36:34.142 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:34.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.2065ms
2025-06-11 10:36:35.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 10:36:35.790 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:35.793 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:36:35.796 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 10:36:35.811 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:36:35.820 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 10:36:35.824 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:36:35.825 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 27.2031ms
2025-06-11 10:36:35.826 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 10:36:35.827 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:35.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 41.3539ms
2025-06-11 10:36:36.528 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:36:36.532 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:36.534 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:36.535 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:36.540 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:36:36.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:36.550 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:36.560 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:36:36.561 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9288ms.
2025-06-11 10:36:36.563 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 25.2972ms
2025-06-11 10:36:36.564 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:36.564 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:36.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 37.5985ms
2025-06-11 10:36:36.590 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:36.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4864ms
2025-06-11 10:36:37.235 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 10:36:37.239 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:37.240 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:36:37.242 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:37.243 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 10:36:37.244 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 1.0874ms
2025-06-11 10:36:37.245 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:36:37.246 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:37.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 11.6023ms
2025-06-11 10:36:37.249 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 10:36:37.252 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:37.254 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:36:37.257 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:37.270 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:36:37.273 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 10:36:37.277 +07:00 [INF] Executed ViewResult - view Profile executed in 5.0315ms.
2025-06-11 10:36:37.278 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 20.2858ms
2025-06-11 10:36:37.280 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:36:37.281 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:37.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 32.8537ms
2025-06-11 10:36:37.284 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:37.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:37.291 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2238ms
2025-06-11 10:36:37.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4043ms
2025-06-11 10:36:39.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:36:39.897 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:39.898 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:39.899 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:39.903 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:36:39.907 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:39.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:39.920 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:36:39.922 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.0833ms.
2025-06-11 10:36:39.923 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 22.3944ms
2025-06-11 10:36:39.924 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:39.925 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:39.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 32.6864ms
2025-06-11 10:36:39.928 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:39.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8898ms
2025-06-11 10:36:40.795 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:36:40.799 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:40.800 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:36:40.803 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:40.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:36:40.812 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:40.815 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:40.828 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:36:40.838 +07:00 [INF] Executed ViewResult - view Revenue executed in 10.7378ms.
2025-06-11 10:36:40.839 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 34.1876ms
2025-06-11 10:36:40.840 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:36:40.841 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:40.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 47.2064ms
2025-06-11 10:36:40.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:40.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:40.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.036ms
2025-06-11 10:36:40.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6873ms
2025-06-11 10:36:49.573 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:36:49.577 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:49.578 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:49.579 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:36:49.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:36:49.586 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:36:49.590 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:36:49.598 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:36:49.600 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9281ms.
2025-06-11 10:36:49.601 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.3431ms
2025-06-11 10:36:49.602 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:36:49.603 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:49.604 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.5145ms
2025-06-11 10:36:49.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:49.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1133ms
2025-06-11 10:36:51.238 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:36:51.243 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:36:51.243 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:36:51.245 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:36:51.248 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:51.252 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:36:51.254 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:36:51.255 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:36:51.255 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:36:51.256 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.3335ms
2025-06-11 10:36:51.257 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:36:51.258 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 19.7872ms
2025-06-11 10:36:51.261 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:36:51.264 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:51.265 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:51.266 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:36:51.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:36:51.273 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:36:51.275 +07:00 [INF] Executed ViewResult - view Index executed in 1.897ms.
2025-06-11 10:36:51.276 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.3489ms
2025-06-11 10:36:51.277 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:51.278 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:51.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.7174ms
2025-06-11 10:36:51.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:51.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:51.284 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9883ms
2025-06-11 10:36:51.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2927ms
2025-06-11 10:36:52.801 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:36:52.805 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:52.806 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:52.807 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:52.808 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:36:52.811 +07:00 [INF] Executed ViewResult - view Login executed in 2.2649ms.
2025-06-11 10:36:52.812 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.6539ms
2025-06-11 10:36:52.813 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:52.814 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:52.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.6732ms
2025-06-11 10:36:52.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:52.821 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1885ms
2025-06-11 10:36:52.823 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:52.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6078ms
2025-06-11 10:36:55.286 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 10:36:55.290 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:36:55.290 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:36:55.291 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:55.292 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:36:55.296 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:36:55.300 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:36:55.364 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:36:55.367 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:36:55.370 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:36:55.372 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:36:55.374 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:36:55.375 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:36:55.376 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 82.2421ms
2025-06-11 10:36:55.377 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:36:55.378 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 91.6163ms
2025-06-11 10:36:55.381 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:36:55.384 +07:00 [INF] No cached response available for this request.
2025-06-11 10:36:55.385 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:55.386 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:36:55.389 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:36:55.392 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:36:55.396 +07:00 [INF] Executed ViewResult - view Index executed in 3.2477ms.
2025-06-11 10:36:55.397 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.9636ms
2025-06-11 10:36:55.398 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:36:55.399 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:36:55.400 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.1672ms
2025-06-11 10:36:55.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:36:55.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:36:55.405 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0582ms
2025-06-11 10:36:55.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0735ms
2025-06-11 10:37:00.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:37:00.446 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:00.448 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:37:00.450 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:37:00.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:37:00.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:37:00.460 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:37:00.464 +07:00 [INF] Executed ViewResult - view AllReviews executed in 4.3153ms.
2025-06-11 10:37:00.466 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 14.4723ms
2025-06-11 10:37:00.467 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:37:00.468 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:00.469 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 26.6378ms
2025-06-11 10:37:00.471 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:37:00.471 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:00.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.257ms
2025-06-11 10:37:00.477 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3891ms
2025-06-11 10:37:08.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:37:08.350 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:08.352 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:37:08.353 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:37:08.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:37:08.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:37:08.364 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:37:08.366 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.8152ms.
2025-06-11 10:37:08.367 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 13.0933ms
2025-06-11 10:37:08.368 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:37:08.369 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:08.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 23.5009ms
2025-06-11 10:37:08.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:08.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:37:08.375 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2196ms
2025-06-11 10:37:08.381 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5305ms
2025-06-11 10:37:08.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:37:08.854 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:08.855 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:37:08.860 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:37:08.872 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:37:08.882 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:37:08.897 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:37:08.909 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:37:08.912 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:37:08.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:37:08.918 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:37:08.927 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:37:08.936 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:37:08.964 +07:00 [INF] Executed ViewResult - view Index executed in 27.9821ms.
2025-06-11 10:37:08.966 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 103.648ms
2025-06-11 10:37:08.967 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:37:08.968 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:08.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 118.1428ms
2025-06-11 10:37:08.971 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:37:08.971 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:08.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5105ms
2025-06-11 10:37:08.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.6037ms
2025-06-11 10:37:09.554 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:37:09.557 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:09.559 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:37:09.560 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:37:09.562 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:37:09.563 +07:00 [INF] Executed ViewResult - view About executed in 1.5838ms.
2025-06-11 10:37:09.565 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.8963ms
2025-06-11 10:37:09.566 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:37:09.567 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:09.567 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.5869ms
2025-06-11 10:37:09.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:09.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:37:09.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4726ms
2025-06-11 10:37:09.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9988ms
2025-06-11 10:37:11.370 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:37:11.374 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:11.375 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:11.379 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:37:11.386 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:37:11.402 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:37:11.406 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:37:11.418 +07:00 [INF] Executed ViewResult - view Bookings executed in 12.7263ms.
2025-06-11 10:37:11.420 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 39.4608ms
2025-06-11 10:37:11.421 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:11.422 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:11.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 52.8006ms
2025-06-11 10:37:11.425 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:37:11.426 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:11.431 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5937ms
2025-06-11 10:37:11.431 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.2722ms
2025-06-11 10:37:15.380 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/19 - null null
2025-06-11 10:37:15.385 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:15.387 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:15.393 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:37:15.422 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 10:37:15.425 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:37:15.426 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 31.1149ms
2025-06-11 10:37:15.428 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:15.429 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:15.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/19 - 404 0 null 50.0432ms
2025-06-11 10:37:17.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:37:17.328 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:17.331 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:17.332 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:37:17.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:37:17.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:37:17.343 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:37:17.345 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8802ms.
2025-06-11 10:37:17.346 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.9635ms
2025-06-11 10:37:17.347 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:17.349 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:17.350 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.8499ms
2025-06-11 10:37:17.354 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:17.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6559ms
2025-06-11 10:37:22.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 10:37:22.318 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:22.320 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:22.321 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:37:22.329 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 10:37:22.339 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:37:22.342 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 19.2601ms
2025-06-11 10:37:22.348 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:22.352 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:22.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 40.1582ms
2025-06-11 10:37:25.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:37:25.634 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:25.635 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:25.636 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:37:25.645 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:37:25.658 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:37:25.663 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:37:25.666 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.5004ms.
2025-06-11 10:37:25.667 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 29.4178ms
2025-06-11 10:37:25.669 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:25.670 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:25.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 41.6534ms
2025-06-11 10:37:25.675 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:25.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6747ms
2025-06-11 10:37:27.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 10:37:27.421 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:27.422 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:27.423 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 10:37:27.438 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 10:37:27.440 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 10:37:27.440 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 16.21ms
2025-06-11 10:37:27.441 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 10:37:27.442 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:27.443 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 26.1265ms
2025-06-11 10:37:29.527 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 10:37:29.532 +07:00 [INF] No cached response available for this request.
2025-06-11 10:37:29.534 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:29.536 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 10:37:29.544 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 10:37:29.560 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 10:37:29.564 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 10:37:29.566 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.7644ms.
2025-06-11 10:37:29.567 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 29.546ms
2025-06-11 10:37:29.569 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 10:37:29.570 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:37:29.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 44.2186ms
2025-06-11 10:37:29.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:37:29.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8283ms
2025-06-11 10:52:05.296 +07:00 [INF] Starting database basic initialization...
2025-06-11 10:52:07.108 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:52:07.153 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:52:07.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 10:52:07.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 10:52:07.180 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 10:52:07.198 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 10:52:07.274 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 10:52:07.313 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 271
ClientConnectionId:06f7601e-39f7-42e0-8228-e2997a46e09c
Error Number:3701,State:5,Class:11
2025-06-11 10:52:07.371 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 10:52:07.392 +07:00 [INF] Background Job Service started
2025-06-11 10:52:07.616 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 10:52:07.634 +07:00 [INF] Processed 0 expired payments
2025-06-11 10:52:07.708 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 10:52:07.742 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 10:52:07.749 +07:00 [INF] Hosting environment: Development
2025-06-11 10:52:07.750 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 10:52:08.363 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:52:08.561 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:08.629 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 10:52:08.704 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:08.721 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:08.914 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:52:08.927 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:52:09.192 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:09.385 +07:00 [INF] Executed ViewResult - view Index executed in 194.9612ms.
2025-06-11 10:52:09.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:09.416 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 690.7356ms
2025-06-11 10:52:09.423 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:09.423 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:09.433 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:09.427 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:09.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:09.446 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 13.089ms
2025-06-11 10:52:09.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 1098.0249ms
2025-06-11 10:52:09.501 +07:00 [INF] Sending file. Request path: '/WebHS.styles.css'. Physical path: 'D:\WebHS\obj\Debug\net8.0\scopedcss\bundle\WebHS.styles.css'
2025-06-11 10:52:09.506 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:09.509 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 200 1123 text/css 112.5859ms
2025-06-11 10:52:09.525 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.9581ms
2025-06-11 10:52:11.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 10:52:11.512 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:11.535 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:11.548 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:11.566 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:52:11.613 +07:00 [INF] Executed ViewResult - view Login executed in 48.3811ms.
2025-06-11 10:52:11.615 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 64.535ms
2025-06-11 10:52:11.617 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:11.619 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:11.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 141.8849ms
2025-06-11 10:52:11.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:11.632 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:11.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.8157ms
2025-06-11 10:52:11.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.6906ms
2025-06-11 10:52:14.392 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:52:14.415 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:52:14.417 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:52:14.467 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:14.533 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:14.826 +07:00 [INF] Executed DbCommand (163ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:52:14.890 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:52:15.097 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:52:15.122 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:52:15.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:52:15.149 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:52:15.156 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:52:15.159 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:52:15.160 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 619.73ms
2025-06-11 10:52:15.161 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:15.163 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 770.9458ms
2025-06-11 10:52:15.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:52:15.171 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:15.175 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:15.177 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:15.189 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:52:15.196 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:15.204 +07:00 [INF] Executed ViewResult - view Index executed in 8.4674ms.
2025-06-11 10:52:15.207 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 27.3986ms
2025-06-11 10:52:15.209 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:15.210 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:15.212 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 45.6303ms
2025-06-11 10:52:15.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:15.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:15.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:15.320 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 105.6665ms
2025-06-11 10:52:15.327 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:15.335 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:52:15.338 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:15.339 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.5003ms
2025-06-11 10:52:15.340 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 122.9753ms
2025-06-11 10:52:19.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:52:19.792 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:19.807 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:52:19.815 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:52:19.837 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:52:19.856 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:52:19.889 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:52:19.926 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:52:19.962 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:52:19.990 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:52:20.015 +07:00 [INF] Executed ViewResult - view Dashboard executed in 25.5375ms.
2025-06-11 10:52:20.017 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 199.6926ms
2025-06-11 10:52:20.018 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:52:20.020 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:20.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 236.931ms
2025-06-11 10:52:20.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:20.025 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:20.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.4828ms
2025-06-11 10:52:20.030 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:20.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:20.034 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:52:20.039 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:20.041 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 15.7596ms
2025-06-11 10:52:20.042 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7538ms
2025-06-11 10:52:24.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 10:52:24.174 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:24.185 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:52:24.187 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:52:24.189 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 10:52:24.190 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 1.2086ms
2025-06-11 10:52:24.191 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 10:52:24.191 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:24.192 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 22.4451ms
2025-06-11 10:52:24.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 10:52:24.204 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:24.206 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:52:24.213 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:24.235 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:52:24.238 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 10:52:24.242 +07:00 [INF] Executed ViewResult - view Profile executed in 5.184ms.
2025-06-11 10:52:24.244 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 23.0914ms
2025-06-11 10:52:24.245 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 10:52:24.245 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:24.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 52.0258ms
2025-06-11 10:52:24.249 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:24.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:24.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.6446ms
2025-06-11 10:52:24.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.9266ms
2025-06-11 10:52:25.174 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:52:25.178 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:25.180 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:52:25.181 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:52:25.190 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:52:25.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:52:25.211 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:52:25.224 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 10:52:25.226 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.3128ms.
2025-06-11 10:52:25.227 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 45.2448ms
2025-06-11 10:52:25.229 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 10:52:25.230 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:25.231 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 56.9528ms
2025-06-11 10:52:25.235 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:25.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9583ms
2025-06-11 10:52:25.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 10:52:25.778 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:25.779 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:52:25.783 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 10:52:25.792 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 10:52:25.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 10:52:25.809 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 10:52:25.822 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 10:52:25.845 +07:00 [INF] Executed ViewResult - view Revenue executed in 23.1514ms.
2025-06-11 10:52:25.847 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 62.601ms
2025-06-11 10:52:25.848 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 10:52:25.850 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:25.851 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 76.6391ms
2025-06-11 10:52:25.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:25.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:25.854 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:25.857 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.0232ms
2025-06-11 10:52:25.869 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:25.869 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.9159ms
2025-06-11 10:52:25.872 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:52:25.877 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:25.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 23.2419ms
2025-06-11 10:52:28.040 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 10:52:28.048 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:52:28.057 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:52:28.059 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:52:28.062 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:28.068 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 10:52:28.069 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 10:52:28.071 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 10:52:28.071 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:52:28.072 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 8.3574ms
2025-06-11 10:52:28.073 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 10:52:28.075 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 34.1442ms
2025-06-11 10:52:28.078 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:52:28.081 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:28.083 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:28.085 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:28.090 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:52:28.095 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:28.097 +07:00 [INF] Executed ViewResult - view Index executed in 2.2411ms.
2025-06-11 10:52:28.098 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.9585ms
2025-06-11 10:52:28.100 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:28.101 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:28.102 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 24.4519ms
2025-06-11 10:52:28.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:28.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:28.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0991ms
2025-06-11 10:52:28.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.9692ms
2025-06-11 10:52:30.284 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:52:30.288 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:30.290 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Host)
2025-06-11 10:52:30.293 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-06-11 10:52:30.294 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:30.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 302 0 null 10.2288ms
2025-06-11 10:52:30.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login?returnUrl=%2FHost%2FDashboard - null null
2025-06-11 10:52:30.301 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:30.302 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:30.303 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:30.308 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 10:52:30.310 +07:00 [INF] Executed ViewResult - view Login executed in 2.2642ms.
2025-06-11 10:52:30.311 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 6.5137ms
2025-06-11 10:52:30.312 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:30.313 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:30.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login?returnUrl=%2FHost%2FDashboard - 200 null text/html; charset=utf-8 16.3367ms
2025-06-11 10:52:30.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:30.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:30.320 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.452ms
2025-06-11 10:52:30.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3814ms
2025-06-11 10:52:36.070 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 10:52:36.074 +07:00 [INF] CORS policy execution failed.
2025-06-11 10:52:36.074 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 10:52:36.075 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:36.076 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 10:52:36.082 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 10:52:36.085 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 10:52:36.147 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 10:52:36.150 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 10:52:36.153 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 10:52:36.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 10:52:36.158 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 10:52:36.158 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 10:52:36.159 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 81.5177ms
2025-06-11 10:52:36.160 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 10:52:36.161 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 91.3512ms
2025-06-11 10:52:36.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:52:36.167 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:36.168 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:36.169 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:36.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:52:36.176 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:36.177 +07:00 [INF] Executed ViewResult - view Index executed in 1.7105ms.
2025-06-11 10:52:36.178 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.0275ms
2025-06-11 10:52:36.179 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:36.180 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:36.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.9193ms
2025-06-11 10:52:36.184 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:36.185 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:36.185 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:36.187 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:36.188 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.7492ms
2025-06-11 10:52:36.192 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:52:36.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2042ms
2025-06-11 10:52:36.197 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:36.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 15.0802ms
2025-06-11 10:52:39.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 10:52:39.674 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:39.676 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Host)
2025-06-11 10:52:39.678 +07:00 [INF] AuthenticationScheme: Identity.Application was forbidden.
2025-06-11 10:52:39.680 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:39.681 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 302 0 null 10.107ms
2025-06-11 10:52:39.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/AccessDenied?returnUrl=%2FHost%2FDashboard - null null
2025-06-11 10:52:39.686 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:39.687 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.AccessDenied (WebHS)'
2025-06-11 10:52:39.690 +07:00 [INF] Route matched with {action = "AccessDenied", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AccessDenied(System.String) on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:39.736 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 10:52:39.740 +07:00 [WRN] Access denied for user 6a64425a-4abd-447a-8868-e574987d2f5a (user1@webhs.com) to /Host/Dashboard. Reason: Bạn không có quyền truy cập vào trang này.
2025-06-11 10:52:39.743 +07:00 [INF] Executing ViewResult, running view AccessDenied.
2025-06-11 10:52:39.770 +07:00 [INF] Executed ViewResult - view AccessDenied executed in 27.6979ms.
2025-06-11 10:52:39.772 +07:00 [INF] Executed action WebHS.Controllers.HomeController.AccessDenied (WebHS) in 80.4439ms
2025-06-11 10:52:39.773 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.AccessDenied (WebHS)'
2025-06-11 10:52:39.774 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:39.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/AccessDenied?returnUrl=%2FHost%2FDashboard - 200 null text/html; charset=utf-8 91.7113ms
2025-06-11 10:52:39.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:39.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:39.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4144ms
2025-06-11 10:52:39.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9432ms
2025-06-11 10:52:45.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 10:52:45.346 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:45.347 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:45.348 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:45.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 10:52:45.355 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:45.357 +07:00 [INF] Executed ViewResult - view Index executed in 1.7759ms.
2025-06-11 10:52:45.358 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.5153ms
2025-06-11 10:52:45.359 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 10:52:45.360 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:45.361 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.905ms
2025-06-11 10:52:45.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:45.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:45.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 10:52:45.366 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0397ms
2025-06-11 10:52:45.372 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5453ms
2025-06-11 10:52:45.372 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:45.378 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 10:52:45.379 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:45.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 16.2367ms
2025-06-11 10:52:47.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 10:52:47.025 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:47.027 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:52:47.032 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 10:52:47.045 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 10:52:47.054 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 10:52:47.071 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 10:52:47.085 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:52:47.088 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:52:47.090 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:52:47.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 10:52:47.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 10:52:47.113 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 10:52:47.140 +07:00 [INF] Executed ViewResult - view Index executed in 27.3963ms.
2025-06-11 10:52:47.143 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 109.1427ms
2025-06-11 10:52:47.144 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 10:52:47.146 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:47.146 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 124.6227ms
2025-06-11 10:52:47.148 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:47.149 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:47.155 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8196ms
2025-06-11 10:52:47.155 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0455ms
2025-06-11 10:52:47.415 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 10:52:47.419 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:47.420 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:52:47.423 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 10:52:47.433 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 10:52:47.456 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 10:52:47.465 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 10:52:47.479 +07:00 [INF] Executed ViewResult - view AllReviews executed in 14.6916ms.
2025-06-11 10:52:47.481 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 56.3888ms
2025-06-11 10:52:47.482 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 10:52:47.483 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:47.484 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 69.4782ms
2025-06-11 10:52:47.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:47.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:47.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0735ms
2025-06-11 10:52:47.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9514ms
2025-06-11 10:52:48.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 10:52:48.011 +07:00 [INF] No cached response available for this request.
2025-06-11 10:52:48.014 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:52:48.015 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 10:52:48.017 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 10:52:48.022 +07:00 [INF] Executed ViewResult - view About executed in 4.8689ms.
2025-06-11 10:52:48.023 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 6.1369ms
2025-06-11 10:52:48.024 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 10:52:48.025 +07:00 [INF] The response could not be cached for this request.
2025-06-11 10:52:48.026 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 18.6172ms
2025-06-11 10:52:48.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 10:52:48.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 10:52:48.035 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.453ms
2025-06-11 10:52:48.041 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8404ms
2025-06-11 11:03:59.570 +07:00 [INF] Starting database basic initialization...
2025-06-11 11:04:01.998 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 11:04:02.049 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 11:04:02.058 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 11:04:02.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 11:04:02.088 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 11:04:02.110 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 11:04:02.200 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 11:04:02.241 +07:00 [ERR] An error occurred during database initialization
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot drop the table 'Wards', because it does not exist or you do not have permission.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__208_1(IAsyncResult result)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IEnumerable`1 migrationCommands, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\WebHS\Program.cs:line 271
ClientConnectionId:0627c354-8723-4277-a21f-b25a87a7187d
Error Number:3701,State:5,Class:11
2025-06-11 11:04:02.315 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 11:04:02.348 +07:00 [INF] Background Job Service started
2025-06-11 11:04:02.718 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 11:04:02.743 +07:00 [INF] Processed 0 expired payments
2025-06-11 11:04:02.835 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 11:04:02.879 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 11:04:02.888 +07:00 [INF] Hosting environment: Development
2025-06-11 11:04:02.890 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 11:04:03.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 11:04:03.592 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:03.606 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 11:04:03.675 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 11:04:03.695 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 11:04:03.878 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 11:04:03.901 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 11:04:04.116 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 11:04:04.283 +07:00 [INF] Executed ViewResult - view Index executed in 169.5144ms.
2025-06-11 11:04:04.289 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 587.5961ms
2025-06-11 11:04:04.293 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 11:04:04.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 11:04:04.300 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:04.308 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:04.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 961.8856ms
2025-06-11 11:04:04.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 11:04:04.339 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 11:04:04.343 +07:00 [INF] Sending file. Request path: '/WebHS.styles.css'. Physical path: 'D:\WebHS\obj\Debug\net8.0\scopedcss\bundle\WebHS.styles.css'
2025-06-11 11:04:04.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 20.0218ms
2025-06-11 11:04:04.360 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:04.378 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 200 1123 text/css 83.3587ms
2025-06-11 11:04:04.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.9196ms
2025-06-11 11:04:09.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 11:04:09.604 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:09.613 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 11:04:09.624 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 11:04:09.638 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 11:04:09.690 +07:00 [INF] Executed ViewResult - view Login executed in 52.7245ms.
2025-06-11 11:04:09.694 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 66.6616ms
2025-06-11 11:04:09.698 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 11:04:09.700 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:09.701 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 11:04:09.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 11:04:09.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 112.0197ms
2025-06-11 11:04:09.706 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:09.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.6671ms
2025-06-11 11:04:09.719 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 11:04:09.721 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 11:04:09.735 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:09.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 38.0919ms
2025-06-11 11:04:09.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.73ms
2025-06-11 11:04:10.954 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 11:04:10.963 +07:00 [INF] CORS policy execution failed.
2025-06-11 11:04:10.965 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 11:04:10.976 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 11:04:10.984 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 11:04:11.108 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 11:04:11.175 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 11:04:11.311 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 11:04:11.388 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 11:04:11.418 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 11:04:11.458 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 11:04:11.469 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 11:04:11.474 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 11:04:11.476 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 488.5236ms
2025-06-11 11:04:11.479 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 11:04:11.481 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 527.1137ms
2025-06-11 11:04:11.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 11:04:11.492 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:11.497 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 11:04:11.498 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 11:04:11.511 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 11:04:11.520 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 11:04:11.526 +07:00 [INF] Executed ViewResult - view Index executed in 6.3635ms.
2025-06-11 11:04:11.528 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 28.1974ms
2025-06-11 11:04:11.530 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 11:04:11.532 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:11.534 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 46.4525ms
2025-06-11 11:04:11.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 11:04:11.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 11:04:11.550 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.6311ms
2025-06-11 11:04:11.550 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.8261ms
2025-06-11 11:04:12.569 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 11:04:12.578 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:12.583 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 11:04:12.588 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 11:04:12.628 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 11:04:12.680 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 11:04:12.707 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 11:04:12.752 +07:00 [INF] Executed ViewResult - view AllReviews executed in 46.1247ms.
2025-06-11 11:04:12.756 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 165.0237ms
2025-06-11 11:04:12.757 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 11:04:12.760 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:12.761 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 11:04:12.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 192.9155ms
2025-06-11 11:04:12.763 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 11:04:12.766 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:12.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 11:04:12.777 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 11:04:12.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.529ms
2025-06-11 11:04:12.783 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 11.7456ms
2025-06-11 11:04:12.786 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:12.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 37.2613ms
2025-06-11 11:04:13.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 11:04:13.295 +07:00 [INF] No cached response available for this request.
2025-06-11 11:04:13.312 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 11:04:13.317 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 11:04:13.322 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 11:04:13.329 +07:00 [INF] Executed ViewResult - view About executed in 8.1292ms.
2025-06-11 11:04:13.331 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 12.7724ms
2025-06-11 11:04:13.334 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 11:04:13.336 +07:00 [INF] The response could not be cached for this request.
2025-06-11 11:04:13.338 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 51.6448ms
2025-06-11 11:04:13.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 11:04:13.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 11:04:13.352 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.1992ms
2025-06-11 11:04:13.368 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.5587ms
2025-06-11 20:47:10.339 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:47:10.397 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:47:10.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:47:10.404 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:47:10.419 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:47:10.433 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:47:10.509 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:51:09.634 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:51:09.694 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:51:09.708 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:51:22.756 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:51:22.808 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:51:22.819 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:51:40.732 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:51:40.780 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:51:40.784 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:51:40.785 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:51:40.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:51:40.808 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:51:40.869 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:52:46.724 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:52:46.779 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:52:46.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:52:46.785 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:52:46.798 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:52:46.809 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:52:46.892 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:53:48.193 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:53:48.253 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:53:48.267 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:54:10.309 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:54:10.359 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:54:10.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:54:10.366 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:54:10.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:54:10.391 +07:00 [INF] Reverting migration '20250610113906_RemoveAddressTables'.
2025-06-11 20:54:10.462 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Countries] (
    [Id] int NOT NULL IDENTITY,
    [Code] nvarchar(10) NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Countries] PRIMARY KEY ([Id])
);
2025-06-11 20:54:10.468 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Provinces] (
    [Id] int NOT NULL IDENTITY,
    [Code] nvarchar(10) NOT NULL,
    [CountryId] int NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Provinces] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Provinces_Countries_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [Countries] ([Id]) ON DELETE CASCADE
);
2025-06-11 20:54:10.471 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Districts] (
    [Id] int NOT NULL IDENTITY,
    [Code] nvarchar(10) NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [ProvinceId] int NOT NULL,
    CONSTRAINT [PK_Districts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Districts_Provinces_ProvinceId] FOREIGN KEY ([ProvinceId]) REFERENCES [Provinces] ([Id]) ON DELETE CASCADE
);
2025-06-11 20:54:10.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wards] (
    [Id] int NOT NULL IDENTITY,
    [Code] nvarchar(10) NOT NULL,
    [DistrictId] int NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Wards] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Wards_Districts_DistrictId] FOREIGN KEY ([DistrictId]) REFERENCES [Districts] ([Id]) ON DELETE CASCADE
);
2025-06-11 20:54:10.480 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [__EFMigrationsHistory]
WHERE [MigrationId] = N'20250610113906_RemoveAddressTables';
2025-06-11 20:56:27.255 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:56:27.307 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:56:27.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:56:27.313 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:56:27.328 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:56:27.340 +07:00 [INF] Applying migration '20250610113906_RemoveAddressTables'.
2025-06-11 20:56:27.435 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
                IF EXISTS (SELECT * FROM sys.foreign_keys WHERE name = 'FK_Districts_Provinces_ProvinceId')
                    ALTER TABLE Districts DROP CONSTRAINT FK_Districts_Provinces_ProvinceId;
                IF EXISTS (SELECT * FROM sys.foreign_keys WHERE name = 'FK_Provinces_Countries_CountryId')
                    ALTER TABLE Provinces DROP CONSTRAINT FK_Provinces_Countries_CountryId;
                IF EXISTS (SELECT * FROM sys.foreign_keys WHERE name = 'FK_Wards_Districts_DistrictId')
                    ALTER TABLE Wards DROP CONSTRAINT FK_Wards_Districts_DistrictId;
2025-06-11 20:56:27.442 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID('Wards', 'U') IS NOT NULL DROP TABLE Wards;
2025-06-11 20:56:27.445 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID('Districts', 'U') IS NOT NULL DROP TABLE Districts;
2025-06-11 20:56:27.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID('Provinces', 'U') IS NOT NULL DROP TABLE Provinces;
2025-06-11 20:56:27.450 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID('Countries', 'U') IS NOT NULL DROP TABLE Countries;
2025-06-11 20:56:27.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250610113906_RemoveAddressTables', N'8.0.0');
2025-06-11 20:56:27.460 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:56:27.504 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:57:40.306 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:57:40.375 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:57:40.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:57:40.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:57:40.405 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:57:40.422 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:57:40.516 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:58:14.500 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:58:14.558 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:58:14.579 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:58:34.281 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:58:34.337 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:58:34.341 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:58:34.343 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:58:34.354 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 20:58:34.372 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 20:58:34.442 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 20:59:42.188 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 20:59:42.239 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 20:59:42.251 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:00:49.573 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:00:49.634 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:00:49.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:00:49.640 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:00:49.655 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:00:49.666 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 21:00:49.724 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Wards];
2025-06-11 21:01:48.975 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:01:49.032 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:01:49.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:01:49.039 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:01:49.051 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:01:49.064 +07:00 [INF] Applying migration '20250611022120_AddUserNotificationTable'.
2025-06-11 21:01:49.133 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserNotifications] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Message] nvarchar(1000) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [IsRead] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_UserNotifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserNotifications_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2025-06-11 21:01:49.140 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserNotifications_UserId] ON [UserNotifications] ([UserId]);
2025-06-11 21:01:49.144 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250611022120_AddUserNotificationTable', N'8.0.0');
2025-06-11 21:01:49.149 +07:00 [INF] Applying migration '20250611140026_AddMessagingSystem'.
2025-06-11 21:01:49.207 +07:00 [ERR] Failed executing DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [Id] int NOT NULL IDENTITY,
    [User1Id] nvarchar(450) NOT NULL,
    [User2Id] nvarchar(450) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [LastMessageAt] datetime2 NOT NULL,
    [LastMessage] nvarchar(max) NULL,
    [LastMessageSenderId] nvarchar(450) NULL,
    [IsArchived] bit NOT NULL,
    [HomestayId] int NULL,
    [BookingId] int NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Conversations_AspNetUsers_LastMessageSenderId] FOREIGN KEY ([LastMessageSenderId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Conversations_AspNetUsers_User1Id] FOREIGN KEY ([User1Id]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Conversations_AspNetUsers_User2Id] FOREIGN KEY ([User2Id]) REFERENCES [AspNetUsers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Conversations_Bookings_BookingId] FOREIGN KEY ([BookingId]) REFERENCES [Bookings] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Conversations_Homestays_HomestayId] FOREIGN KEY ([HomestayId]) REFERENCES [Homestays] ([Id]) ON DELETE SET NULL
);
2025-06-11 21:03:18.129 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:03:18.191 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:03:18.195 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:03:18.197 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:03:18.213 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:03:18.226 +07:00 [INF] Applying migration '20250611140026_AddMessagingSystem'.
2025-06-11 21:03:18.305 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [Id] int NOT NULL IDENTITY,
    [User1Id] nvarchar(450) NOT NULL,
    [User2Id] nvarchar(450) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [LastMessageAt] datetime2 NOT NULL,
    [LastMessage] nvarchar(max) NULL,
    [LastMessageSenderId] nvarchar(450) NULL,
    [IsArchived] bit NOT NULL,
    [HomestayId] int NULL,
    [BookingId] int NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Conversations_AspNetUsers_LastMessageSenderId] FOREIGN KEY ([LastMessageSenderId]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Conversations_AspNetUsers_User1Id] FOREIGN KEY ([User1Id]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Conversations_AspNetUsers_User2Id] FOREIGN KEY ([User2Id]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Conversations_Bookings_BookingId] FOREIGN KEY ([BookingId]) REFERENCES [Bookings] ([Id]),
    CONSTRAINT [FK_Conversations_Homestays_HomestayId] FOREIGN KEY ([HomestayId]) REFERENCES [Homestays] ([Id])
);
2025-06-11 21:03:18.311 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] nvarchar(450) NOT NULL,
    [ReceiverId] nvarchar(450) NOT NULL,
    [Content] nvarchar(1000) NOT NULL,
    [SentAt] datetime2 NOT NULL,
    [IsRead] bit NOT NULL,
    [ReadAt] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Type] int NOT NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [AttachmentFileName] nvarchar(max) NULL,
    [HomestayId] int NULL,
    [BookingId] int NULL,
    [ConversationId] int NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_AspNetUsers_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Messages_AspNetUsers_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [AspNetUsers] ([Id]),
    CONSTRAINT [FK_Messages_Bookings_BookingId] FOREIGN KEY ([BookingId]) REFERENCES [Bookings] ([Id]),
    CONSTRAINT [FK_Messages_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Homestays_HomestayId] FOREIGN KEY ([HomestayId]) REFERENCES [Homestays] ([Id])
);
2025-06-11 21:03:18.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Conversations_BookingId] ON [Conversations] ([BookingId]);
2025-06-11 21:03:18.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Conversations_HomestayId] ON [Conversations] ([HomestayId]);
2025-06-11 21:03:18.318 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Conversations_LastMessageAt] ON [Conversations] ([LastMessageAt]);
2025-06-11 21:03:18.320 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Conversations_LastMessageSenderId] ON [Conversations] ([LastMessageSenderId]);
2025-06-11 21:03:18.324 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Conversations_User1Id_User2Id] ON [Conversations] ([User1Id], [User2Id]);
2025-06-11 21:03:18.327 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Conversations_User2Id] ON [Conversations] ([User2Id]);
2025-06-11 21:03:18.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_BookingId] ON [Messages] ([BookingId]);
2025-06-11 21:03:18.332 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ConversationId] ON [Messages] ([ConversationId]);
2025-06-11 21:03:18.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_HomestayId] ON [Messages] ([HomestayId]);
2025-06-11 21:03:18.336 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_IsRead] ON [Messages] ([IsRead]);
2025-06-11 21:03:18.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReceiverId] ON [Messages] ([ReceiverId]);
2025-06-11 21:03:18.340 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId_ReceiverId] ON [Messages] ([SenderId], [ReceiverId]);
2025-06-11 21:03:18.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SentAt] ON [Messages] ([SentAt]);
2025-06-11 21:03:18.345 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250611140026_AddMessagingSystem', N'8.0.0');
2025-06-11 21:09:20.200 +07:00 [INF] Starting database basic initialization...
2025-06-11 21:09:21.388 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:09:21.425 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:09:21.430 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:09:21.433 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:09:21.448 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:09:21.466 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:09:21.490 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 21:09:21.738 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:09:21.776 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:09:21.780 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:09:21.793 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.849 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.853 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.856 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.860 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.863 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.865 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:09:21.868 +07:00 [INF] Starting sample data seeding...
2025-06-11 21:09:21.869 +07:00 [INF] Starting data seeding...
2025-06-11 21:09:21.883 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:09:21.887 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 21:09:21.894 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:09:21.897 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 21:09:21.903 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:09:21.905 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 21:09:21.912 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:09:21.915 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 21:09:21.928 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 21:09:21.935 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:09:21.937 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 21:09:21.938 +07:00 [INF] Data seeding completed successfully
2025-06-11 21:09:21.938 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 21:09:21.939 +07:00 [INF] Database initialization completed successfully.
2025-06-11 21:09:21.977 +07:00 [INF] Background Job Service started
2025-06-11 21:09:22.011 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 21:09:22.022 +07:00 [INF] Processed 0 expired payments
2025-06-11 21:09:22.054 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 21:09:22.056 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 21:09:22.057 +07:00 [INF] Hosting environment: Development
2025-06-11 21:09:22.058 +07:00 [INF] Content root path: d:\WebHS
2025-06-11 21:09:33.383 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749650973346 - null null
2025-06-11 21:09:33.410 +07:00 [INF] No cached response available for this request.
2025-06-11 21:09:33.416 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 21:09:33.462 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:09:33.471 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:09:33.579 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:09:33.598 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:09:33.701 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:09:33.778 +07:00 [INF] Executed ViewResult - view Index executed in 77.9329ms.
2025-06-11 21:09:33.782 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 308.3387ms
2025-06-11 21:09:33.784 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:09:33.786 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:09:33.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749650973346 - 200 null text/html; charset=utf-8 409.9257ms
2025-06-11 21:20:35.751 +07:00 [INF] Starting database basic initialization...
2025-06-11 21:20:37.116 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:20:37.168 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:20:37.175 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:20:37.178 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:20:37.195 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:20:37.212 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:20:37.239 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 21:20:37.479 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:20:37.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:20:37.528 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:20:37.542 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.600 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.604 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.606 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.609 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.615 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:37.617 +07:00 [INF] Starting sample data seeding...
2025-06-11 21:20:37.619 +07:00 [INF] Starting data seeding...
2025-06-11 21:20:37.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:20:37.634 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 21:20:37.640 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:20:37.641 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 21:20:37.647 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:20:37.649 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 21:20:37.657 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:20:37.659 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 21:20:37.678 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 21:20:37.685 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:20:37.687 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 21:20:37.688 +07:00 [INF] Data seeding completed successfully
2025-06-11 21:20:37.688 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 21:20:37.689 +07:00 [INF] Database initialization completed successfully.
2025-06-11 21:20:37.726 +07:00 [INF] Background Job Service started
2025-06-11 21:20:37.760 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 21:20:37.771 +07:00 [INF] Processed 0 expired payments
2025-06-11 21:20:37.898 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 21:20:37.940 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 21:20:37.947 +07:00 [INF] Hosting environment: Development
2025-06-11 21:20:37.949 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 21:20:38.596 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:20:38.799 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:38.810 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 21:20:38.867 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:20:38.883 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:20:39.013 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:20:39.023 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:20:39.145 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:20:39.264 +07:00 [INF] Executed ViewResult - view Index executed in 123.0894ms.
2025-06-11 21:20:39.267 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 381.2906ms
2025-06-11 21:20:39.269 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:20:39.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 21:20:39.279 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/home.css - null null
2025-06-11 21:20:39.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-06-11 21:20:39.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/site.css?v=pAGv4ietcJNk_EwsQZ5BN9-K4MuNYS2a9wl4Jw-q9D0 - null null
2025-06-11 21:20:39.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - null null
2025-06-11 21:20:39.285 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.290 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.290 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.291 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.293 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.296 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.307 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 21:20:39.307 +07:00 [INF] The file /css/home.css was not modified
2025-06-11 21:20:39.307 +07:00 [INF] The file /css/site.css was not modified
2025-06-11 21:20:39.307 +07:00 [INF] The file /images/placeholder-homestay.svg was not modified
2025-06-11 21:20:39.307 +07:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2025-06-11 21:20:39.309 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.309 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.310 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 721.2643ms
2025-06-11 21:20:39.311 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.312 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 39.8865ms
2025-06-11 21:20:39.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/css/home.css - 304 null text/css 33.9241ms
2025-06-11 21:20:39.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/css/site.css?v=pAGv4ietcJNk_EwsQZ5BN9-K4MuNYS2a9wl4Jw-q9D0 - 304 null text/css 41.3278ms
2025-06-11 21:20:39.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - 304 null image/svg+xml 37.6101ms
2025-06-11 21:20:39.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery/dist/jquery.min.js - null null
2025-06-11 21:20:39.325 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-06-11 21:20:39.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:20:39.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 45.6987ms
2025-06-11 21:20:39.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-06-11 21:20:39.333 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.335 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.339 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 17.0034ms
2025-06-11 21:20:39.340 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:20:39.343 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:39.344 +07:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2025-06-11 21:20:39.345 +07:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2025-06-11 21:20:39.351 +07:00 [INF] The file /js/site.js was not modified
2025-06-11 21:20:39.353 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.354 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.361 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery/dist/jquery.min.js - 304 null text/javascript 43.3365ms
2025-06-11 21:20:39.355 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:39.363 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 38.2879ms
2025-06-11 21:20:39.367 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 304 null text/javascript 39.5095ms
2025-06-11 21:20:39.422 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.1378ms
2025-06-11 21:20:43.317 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:20:43.323 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:43.331 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:20:43.338 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:20:43.352 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:20:43.387 +07:00 [INF] Executed ViewResult - view Login executed in 36.2454ms.
2025-06-11 21:20:43.389 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 49.0821ms
2025-06-11 21:20:43.391 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:20:43.393 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:43.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 78.2461ms
2025-06-11 21:20:43.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-06-11 21:20:43.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-06-11 21:20:43.399 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:20:43.402 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:43.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:20:43.405 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:43.418 +07:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2025-06-11 21:20:43.426 +07:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js was not modified
2025-06-11 21:20:43.432 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:43.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 18.3532ms
2025-06-11 21:20:43.434 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:43.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.9679ms
2025-06-11 21:20:43.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery-validation/dist/jquery.validate.min.js - 304 null text/javascript 38.3082ms
2025-06-11 21:20:43.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 304 null text/javascript 56.5068ms
2025-06-11 21:20:44.620 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 21:20:44.627 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:20:44.633 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:20:44.657 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:20:44.686 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:20:44.723 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:20:44.743 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:20:44.853 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:20:44.877 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:20:44.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:20:44.893 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:20:44.902 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:20:44.905 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:20:44.907 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 218.2788ms
2025-06-11 21:20:44.909 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:20:44.910 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 290.5505ms
2025-06-11 21:20:44.915 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:20:44.919 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:44.925 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:20:44.927 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:20:44.934 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:20:44.944 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:20:44.953 +07:00 [INF] Executed ViewResult - view Index executed in 9.3411ms.
2025-06-11 21:20:44.955 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 26.6908ms
2025-06-11 21:20:44.958 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:20:44.959 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:44.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 46.3165ms
2025-06-11 21:20:44.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:20:44.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:20:44.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 12.515ms
2025-06-11 21:20:44.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.3527ms
2025-06-11 21:20:45.023 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:20:45.028 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:45.037 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:20:45.046 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:20:45.083 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:20:45.091 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:20:45.097 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 47.4628ms
2025-06-11 21:20:45.099 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:20:45.100 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:45.100 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 77.6892ms
2025-06-11 21:20:46.366 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:20:46.378 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:46.410 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:20:46.423 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:20:46.519 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:20:46.526 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:20:46.529 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:20:46.538 +07:00 [INF] Executed ViewResult - view Index executed in 9.8689ms.
2025-06-11 21:20:46.540 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 106.3156ms
2025-06-11 21:20:46.542 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:20:46.543 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:46.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 178.0074ms
2025-06-11 21:20:46.548 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:20:46.548 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:20:46.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4566ms
2025-06-11 21:20:46.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.9657ms
2025-06-11 21:20:46.583 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:20:46.587 +07:00 [INF] No cached response available for this request.
2025-06-11 21:20:46.594 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:20:46.596 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:20:46.602 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:20:46.607 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:20:46.608 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.4043ms
2025-06-11 21:20:46.610 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:20:46.612 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:20:46.613 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.7631ms
2025-06-11 21:21:16.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:21:16.618 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:16.619 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:16.620 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:21:16.629 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:21:16.631 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:16.632 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.9062ms
2025-06-11 21:21:16.633 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:16.633 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:16.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 32.5063ms
2025-06-11 21:21:30.350 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 21:21:30.358 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:30.360 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:21:30.365 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 21:21:30.377 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 21:21:30.407 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 21:21:30.425 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 21:21:30.454 +07:00 [INF] Executed ViewResult - view AllReviews executed in 29.601ms.
2025-06-11 21:21:30.456 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 89.8396ms
2025-06-11 21:21:30.458 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:21:30.459 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:30.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 110.229ms
2025-06-11 21:21:30.461 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:21:30.463 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:21:30.469 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4827ms
2025-06-11 21:21:30.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.6428ms
2025-06-11 21:21:41.036 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:21:41.041 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:41.042 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:21:41.047 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:21:41.064 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 21:21:41.073 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:21:41.084 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 21:21:41.100 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:21:41.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:21:41.107 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:21:41.109 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:21:41.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 21:21:41.127 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:21:41.152 +07:00 [INF] Executed ViewResult - view Index executed in 26.07ms.
2025-06-11 21:21:41.155 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 105.9761ms
2025-06-11 21:21:41.156 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:21:41.158 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:41.159 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 122.9637ms
2025-06-11 21:21:41.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:21:41.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:21:41.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8712ms
2025-06-11 21:21:41.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8131ms
2025-06-11 21:21:41.193 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:21:41.195 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:41.196 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:41.198 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:21:41.201 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:21:41.204 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:41.206 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1286ms
2025-06-11 21:21:41.207 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:41.208 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:41.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.5312ms
2025-06-11 21:21:42.516 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - null null
2025-06-11 21:21:42.520 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.522 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:21:42.526 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:21:42.548 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:21:42.570 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 21:21:42.585 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:21:42.589 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 21:21:42.599 +07:00 [INF] Executed ViewResult - view Details executed in 11.3804ms.
2025-06-11 21:21:42.601 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 74.1756ms
2025-06-11 21:21:42.602 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:21:42.604 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.604 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - 200 null text/html; charset=utf-8 88.0777ms
2025-06-11 21:21:42.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:21:42.608 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.jpg - null null
2025-06-11 21:21:42.610 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7578ms
2025-06-11 21:21:42.612 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:21:42.615 +07:00 [INF] The file /images/default-avatar.jpg was not modified
2025-06-11 21:21:42.618 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.jpg - 304 null image/jpeg 11.8871ms
2025-06-11 21:21:42.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7389ms
2025-06-11 21:21:42.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 21:21:42.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 21:21:42.660 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.662 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.664 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:21:42.664 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:21:42.668 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:21:42.668 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:21:42.675 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - null null
2025-06-11 21:21:42.677 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.679 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:21:42.683 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:21:42.687 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:21:42.690 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:21:42.695 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:21:42.702 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:42.704 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 32.4286ms
2025-06-11 21:21:42.706 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - null null
2025-06-11 21:21:42.706 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:21:42.711 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.712 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.712 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 21:21:42.714 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:21:42.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 56.7887ms
2025-06-11 21:21:42.795 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 21:21:42.807 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:21:42.801 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 21:21:42.800 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:21:42.839 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:42.845 +07:00 [INF] No cached response available for this request.
2025-06-11 21:21:42.847 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:42.847 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:21:42.848 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:21:42.848 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 161.9777ms
2025-06-11 21:21:42.849 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:21:42.853 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:21:42.853 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:21:42.856 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:21:42.857 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:42.858 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:21:42.861 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.9618ms
2025-06-11 21:21:42.865 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:21:42.865 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:21:42.862 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - 200 null application/json; charset=utf-8 186.8696ms
2025-06-11 21:21:42.870 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:42.870 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.876 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 75.8569ms
2025-06-11 21:21:42.881 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 211.473ms
2025-06-11 21:21:42.882 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:21:42.883 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:42.884 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 226.8007ms
2025-06-11 21:21:43.046 +07:00 [INF] Received HTTP response headers after 183.8522ms - 401
2025-06-11 21:21:43.048 +07:00 [INF] End processing HTTP request after 201.5487ms - 401
2025-06-11 21:21:43.049 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 21:21:43.053 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:21:43.057 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 214.5391ms
2025-06-11 21:21:43.058 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:21:43.058 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:21:43.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - 200 null application/json; charset=utf-8 353.5296ms
2025-06-11 21:22:12.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:22:12.730 +07:00 [INF] No cached response available for this request.
2025-06-11 21:22:12.731 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:22:12.732 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:22:12.741 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:22:12.743 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:22:12.744 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.8873ms
2025-06-11 21:22:12.745 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:22:12.746 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:22:12.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.1778ms
2025-06-11 21:22:42.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:22:42.724 +07:00 [INF] No cached response available for this request.
2025-06-11 21:22:42.725 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:22:42.726 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:22:42.731 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:22:42.733 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:22:42.734 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.005ms
2025-06-11 21:22:42.735 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:22:42.736 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:22:42.737 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.9514ms
2025-06-11 21:23:12.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:12.738 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:12.743 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:12.749 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:12.771 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:12.776 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:12.779 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 25.0945ms
2025-06-11 21:23:12.780 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:12.781 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:12.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 52.085ms
2025-06-11 21:23:16.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:23:16.314 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:16.315 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:23:16.317 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:16.332 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:23:16.336 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:16.338 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:23:16.340 +07:00 [INF] Executed ViewResult - view Index executed in 1.7986ms.
2025-06-11 21:23:16.341 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 23.0331ms
2025-06-11 21:23:16.343 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:23:16.344 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:16.345 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 38.0905ms
2025-06-11 21:23:16.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:16.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:16.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.7445ms
2025-06-11 21:23:16.364 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.9775ms
2025-06-11 21:23:16.379 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:16.382 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:16.383 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:16.384 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:16.388 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:16.391 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:16.393 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.7647ms
2025-06-11 21:23:16.394 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:16.395 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:16.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.4427ms
2025-06-11 21:23:17.949 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 21:23:17.953 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:23:17.953 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:23:17.955 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:23:17.957 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:23:17.962 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 21:23:17.963 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 21:23:17.964 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 21:23:17.965 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:23:17.966 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.3496ms
2025-06-11 21:23:17.967 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:23:17.967 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.3451ms
2025-06-11 21:23:17.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:23:17.973 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:17.973 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:23:17.975 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:23:17.979 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:23:17.983 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:23:17.985 +07:00 [INF] Executed ViewResult - view Index executed in 1.8822ms.
2025-06-11 21:23:17.986 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.6079ms
2025-06-11 21:23:17.987 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:23:17.988 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:17.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.6658ms
2025-06-11 21:23:17.991 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:17.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:17.997 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5959ms
2025-06-11 21:23:17.997 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9434ms
2025-06-11 21:23:19.628 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:23:19.632 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:19.633 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:23:19.634 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:23:19.636 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:23:19.638 +07:00 [INF] Executed ViewResult - view Login executed in 2.3409ms.
2025-06-11 21:23:19.639 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.6767ms
2025-06-11 21:23:19.640 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:23:19.642 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:19.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.1609ms
2025-06-11 21:23:19.646 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:19.646 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:19.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9867ms
2025-06-11 21:23:19.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.724ms
2025-06-11 21:23:21.381 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 21:23:21.385 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:23:21.386 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:23:21.387 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:23:21.388 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:23:21.394 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:23:21.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:23:21.460 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:23:21.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:23:21.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:23:21.469 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:23:21.471 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:23:21.472 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:23:21.473 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 83.6365ms
2025-06-11 21:23:21.474 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:23:21.475 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 94.1711ms
2025-06-11 21:23:21.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:23:21.481 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:21.482 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:23:21.483 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:23:21.485 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:23:21.489 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:23:21.492 +07:00 [INF] Executed ViewResult - view Index executed in 2.9131ms.
2025-06-11 21:23:21.493 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.2774ms
2025-06-11 21:23:21.494 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:23:21.495 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:21.496 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.0357ms
2025-06-11 21:23:21.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:21.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:21.504 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3717ms
2025-06-11 21:23:21.504 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6763ms
2025-06-11 21:23:21.527 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:21.529 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:21.531 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:21.532 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:21.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:21.539 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:21.540 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1894ms
2025-06-11 21:23:21.541 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:21.543 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:21.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.9174ms
2025-06-11 21:23:22.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:23:22.982 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:22.983 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:23:22.984 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:22.987 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:23:22.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:22.994 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:23:22.996 +07:00 [INF] Executed ViewResult - view Index executed in 1.9319ms.
2025-06-11 21:23:22.997 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 11.7296ms
2025-06-11 21:23:22.998 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:23:22.999 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:23.000 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 21.3335ms
2025-06-11 21:23:23.002 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:23.002 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:23.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2513ms
2025-06-11 21:23:23.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8433ms
2025-06-11 21:23:23.030 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:23.033 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:23.034 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:23.035 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:23.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:23.042 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:23.043 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.3707ms
2025-06-11 21:23:23.044 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:23.046 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:23.046 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.1284ms
2025-06-11 21:23:24.986 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 21:23:24.990 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:24.993 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:23:24.994 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 21:23:24.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 21:23:25.009 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 21:23:25.013 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 21:23:25.016 +07:00 [INF] Executed ViewResult - view AllReviews executed in 2.9062ms.
2025-06-11 21:23:25.017 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 21.591ms
2025-06-11 21:23:25.018 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:23:25.019 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:25.020 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 34.0931ms
2025-06-11 21:23:25.023 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:25.023 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:25.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5048ms
2025-06-11 21:23:25.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0939ms
2025-06-11 21:23:32.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 21:23:32.966 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:32.969 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:32.972 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:32.983 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:23:32.992 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:23:33.004 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:23:33.025 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:23:33.047 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:23:33.067 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 21:23:33.081 +07:00 [INF] Executed ViewResult - view Dashboard executed in 14.6003ms.
2025-06-11 21:23:33.083 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 109.244ms
2025-06-11 21:23:33.084 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:33.085 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:33.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 123.2613ms
2025-06-11 21:23:33.088 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:33.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - null null
2025-06-11 21:23:33.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0555ms
2025-06-11 21:23:33.093 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:33.096 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:33.097 +07:00 [INF] The file /uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png was not modified
2025-06-11 21:23:33.100 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:33.101 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - 304 null image/png 11.9084ms
2025-06-11 21:23:33.102 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9355ms
2025-06-11 21:23:33.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:33.143 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:33.145 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:33.146 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:33.149 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:33.152 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:33.153 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.8649ms
2025-06-11 21:23:33.155 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:33.156 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:33.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.5117ms
2025-06-11 21:23:34.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 21:23:34.734 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:34.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:23:34.740 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:34.744 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:23:34.748 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 21:23:34.755 +07:00 [INF] Executed ViewResult - view Homestays executed in 7.1568ms.
2025-06-11 21:23:34.756 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 14.4796ms
2025-06-11 21:23:34.757 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:23:34.758 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:34.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 28.6706ms
2025-06-11 21:23:34.761 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:34.762 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:34.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9237ms
2025-06-11 21:23:34.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.751ms
2025-06-11 21:23:36.401 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 21:23:36.404 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:36.406 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:36.406 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:36.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:23:36.414 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:23:36.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:23:36.426 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 21:23:36.428 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9333ms.
2025-06-11 21:23:36.429 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.4837ms
2025-06-11 21:23:36.430 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:36.431 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:36.432 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.1166ms
2025-06-11 21:23:36.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:36.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9502ms
2025-06-11 21:23:36.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:36.473 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:36.474 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:36.475 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:36.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:36.482 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:36.483 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.5369ms
2025-06-11 21:23:36.485 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:36.486 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:36.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.9477ms
2025-06-11 21:23:37.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 21:23:37.808 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:37.809 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 21:23:37.812 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:37.837 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:23:37.842 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:23:37.879 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 21:23:37.897 +07:00 [INF] Executed ViewResult - view Bookings executed in 18.6553ms.
2025-06-11 21:23:37.900 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 86.2338ms
2025-06-11 21:23:37.901 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 21:23:37.902 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:37.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 99.4027ms
2025-06-11 21:23:37.905 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:37.906 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:37.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8278ms
2025-06-11 21:23:37.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8147ms
2025-06-11 21:23:37.935 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:37.938 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:37.939 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:37.940 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:37.943 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:37.946 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:37.947 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.2705ms
2025-06-11 21:23:37.948 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:37.949 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:37.950 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.5797ms
2025-06-11 21:23:47.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 21:23:47.879 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:47.880 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:47.881 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:47.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:23:47.889 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:23:47.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:23:47.900 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 21:23:47.902 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9578ms.
2025-06-11 21:23:47.903 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.7801ms
2025-06-11 21:23:47.904 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:23:47.905 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:47.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.5233ms
2025-06-11 21:23:47.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:47.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6454ms
2025-06-11 21:23:47.948 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:47.951 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:47.953 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:47.954 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:47.958 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:47.960 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:47.961 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.9313ms
2025-06-11 21:23:47.962 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:47.963 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:47.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.7389ms
2025-06-11 21:23:52.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 21:23:52.525 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:52.526 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 21:23:52.527 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:23:52.530 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:23:52.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:23:52.543 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 21:23:52.545 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6898ms.
2025-06-11 21:23:52.546 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 17.127ms
2025-06-11 21:23:52.547 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 21:23:52.548 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:52.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 27.3086ms
2025-06-11 21:23:52.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:23:52.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:23:52.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3852ms
2025-06-11 21:23:52.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6507ms
2025-06-11 21:23:52.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:23:52.582 +07:00 [INF] No cached response available for this request.
2025-06-11 21:23:52.583 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:52.585 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:23:52.588 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:23:52.591 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:23:52.592 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.1588ms
2025-06-11 21:23:52.593 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:23:52.594 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:23:52.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.1033ms
2025-06-11 21:24:22.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:24:22.725 +07:00 [INF] No cached response available for this request.
2025-06-11 21:24:22.726 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:24:22.727 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:24:22.739 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:24:22.741 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:24:22.742 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.7267ms
2025-06-11 21:24:22.743 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:24:22.744 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:24:22.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.9936ms
2025-06-11 21:24:52.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:24:52.740 +07:00 [INF] No cached response available for this request.
2025-06-11 21:24:52.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:24:52.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:24:52.745 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:24:52.750 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:24:52.751 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0471ms
2025-06-11 21:24:52.752 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:24:52.753 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:24:52.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.7375ms
2025-06-11 21:25:22.725 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:25:22.728 +07:00 [INF] No cached response available for this request.
2025-06-11 21:25:22.729 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:25:22.730 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:25:22.740 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:25:22.741 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:25:22.742 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.943ms
2025-06-11 21:25:22.743 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:25:22.744 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:25:22.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.5148ms
2025-06-11 21:25:52.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:25:52.740 +07:00 [INF] No cached response available for this request.
2025-06-11 21:25:52.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:25:52.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:25:52.755 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:25:52.756 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:25:52.757 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.1797ms
2025-06-11 21:25:52.759 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:25:52.759 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:25:52.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.4559ms
2025-06-11 21:26:22.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:26:22.735 +07:00 [INF] No cached response available for this request.
2025-06-11 21:26:22.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:26:22.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:26:22.741 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:26:22.746 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:26:22.746 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.9208ms
2025-06-11 21:26:22.747 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:26:22.748 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:26:22.749 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.6421ms
2025-06-11 21:27:25.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:27:25.735 +07:00 [INF] No cached response available for this request.
2025-06-11 21:27:25.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:27:25.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:27:25.750 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:27:25.752 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:27:25.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.3377ms
2025-06-11 21:27:25.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:27:25.754 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:27:25.755 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.6313ms
2025-06-11 21:28:25.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:28:25.732 +07:00 [INF] No cached response available for this request.
2025-06-11 21:28:25.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:28:25.734 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:28:25.739 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:28:25.740 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:28:25.741 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1085ms
2025-06-11 21:28:25.742 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:28:25.743 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:28:25.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.829ms
2025-06-11 21:29:25.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:29:25.739 +07:00 [INF] No cached response available for this request.
2025-06-11 21:29:25.740 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:29:25.741 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:29:25.748 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:29:25.750 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:29:25.751 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.4764ms
2025-06-11 21:29:25.752 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:29:25.753 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:29:25.754 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.4424ms
2025-06-11 21:30:25.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:30:25.735 +07:00 [INF] No cached response available for this request.
2025-06-11 21:30:25.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:30:25.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:30:25.787 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:30:25.795 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:30:25.797 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 52.6026ms
2025-06-11 21:30:25.802 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:30:25.805 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:30:25.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 75.8804ms
2025-06-11 21:39:20.045 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:39:20.107 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:39:20.112 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:39:20.114 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:39:20.129 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:39:20.142 +07:00 [INF] Applying migration '20250611143829_UpdateUserNotificationForMessaging'.
2025-06-11 21:39:20.216 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [AcceptedAt] datetime2 NULL;
2025-06-11 21:39:20.222 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [AcceptedBy] nvarchar(max) NULL;
2025-06-11 21:39:20.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [ConversationId] int NULL;
2025-06-11 21:39:20.240 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [IsAccepted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-06-11 21:39:20.244 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [RequesterEmail] nvarchar(max) NULL;
2025-06-11 21:39:20.248 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [RequesterId] nvarchar(max) NULL;
2025-06-11 21:39:20.252 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] ADD [RequesterName] nvarchar(max) NULL;
2025-06-11 21:39:20.258 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250611143829_UpdateUserNotificationForMessaging', N'8.0.0');
2025-06-11 21:46:56.948 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:46:57.005 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:46:57.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:46:57.012 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:46:57.024 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:46:57.034 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:48:41.582 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:48:41.638 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:48:41.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:48:41.645 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:48:41.657 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:48:41.669 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:56:33.564 +07:00 [INF] Starting database basic initialization...
2025-06-11 21:56:35.669 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:56:35.762 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:56:35.766 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:56:35.769 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:56:35.784 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:56:35.800 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:56:35.820 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 21:56:36.066 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:56:36.108 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:56:36.112 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:56:36.127 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.191 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.205 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:36.208 +07:00 [INF] Starting sample data seeding...
2025-06-11 21:56:36.210 +07:00 [INF] Starting data seeding...
2025-06-11 21:56:36.224 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:56:36.227 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 21:56:36.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:56:36.235 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 21:56:36.242 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:56:36.243 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 21:56:36.250 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:56:36.252 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 21:56:36.269 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 21:56:36.276 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:56:36.278 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 21:56:36.279 +07:00 [INF] Data seeding completed successfully
2025-06-11 21:56:36.280 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 21:56:36.280 +07:00 [INF] Database initialization completed successfully.
2025-06-11 21:56:36.312 +07:00 [INF] Background Job Service started
2025-06-11 21:56:36.347 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 21:56:36.365 +07:00 [INF] Processed 0 expired payments
2025-06-11 21:56:36.474 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 21:56:36.511 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 21:56:36.516 +07:00 [INF] Hosting environment: Development
2025-06-11 21:56:36.517 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 21:56:37.130 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:56:37.297 +07:00 [INF] No cached response available for this request.
2025-06-11 21:56:37.306 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 21:56:37.370 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:56:37.386 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:56:37.511 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:56:37.520 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:56:37.633 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:56:37.745 +07:00 [INF] Executed ViewResult - view Index executed in 112.8206ms.
2025-06-11 21:56:37.749 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 359.9565ms
2025-06-11 21:56:37.752 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:56:37.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:56:37.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 647.1809ms
2025-06-11 21:56:37.771 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:56:37.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:56:37.785 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 11.29ms
2025-06-11 21:56:37.807 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.1015ms
2025-06-11 21:56:51.946 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:56:51.958 +07:00 [INF] No cached response available for this request.
2025-06-11 21:56:51.963 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:56:51.971 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:56:51.981 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:56:52.009 +07:00 [INF] Executed ViewResult - view Login executed in 29.4448ms.
2025-06-11 21:56:52.012 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 39.3716ms
2025-06-11 21:56:52.013 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:56:52.015 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:56:52.016 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 70.2732ms
2025-06-11 21:56:52.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:56:52.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:56:52.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4985ms
2025-06-11 21:56:52.039 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.843ms
2025-06-11 21:56:54.941 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 21:56:54.946 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:56:54.948 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:56:54.954 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:56:54.959 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:56:54.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:56:54.995 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:56:55.081 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:56:55.099 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:56:55.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:56:55.110 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:56:55.118 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:56:55.120 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:56:55.121 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 160.6567ms
2025-06-11 21:56:55.122 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:56:55.123 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 182.5924ms
2025-06-11 21:56:55.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:56:55.153 +07:00 [INF] No cached response available for this request.
2025-06-11 21:56:55.157 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:56:55.158 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:56:55.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:56:55.168 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:56:55.173 +07:00 [INF] Executed ViewResult - view Index executed in 5.2955ms.
2025-06-11 21:56:55.174 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.0286ms
2025-06-11 21:56:55.175 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:56:55.176 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:56:55.178 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 51.1036ms
2025-06-11 21:56:55.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:56:55.181 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:56:55.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4828ms
2025-06-11 21:56:55.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.0805ms
2025-06-11 21:56:55.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:56:55.220 +07:00 [INF] No cached response available for this request.
2025-06-11 21:56:55.227 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:56:55.231 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:56:55.262 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:56:55.270 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:56:55.276 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 42.3512ms
2025-06-11 21:56:55.277 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:56:55.278 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:56:55.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 61.472ms
2025-06-11 21:57:08.270 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/RequestAdminMessage - application/json 19
2025-06-11 21:57:08.272 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:57:08.273 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:57:08.283 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS)'
2025-06-11 21:57:08.286 +07:00 [INF] Route matched with {action = "RequestAdminMessage", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestAdminMessage(WebHS.Controllers.AdminMessageRequestModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:08.310 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:57:08.320 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-06-11 21:57:08.331 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:57:08.451 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserNotifications] ([AcceptedAt], [AcceptedBy], [ConversationId], [CreatedAt], [IsAccepted], [IsRead], [Message], [RequesterEmail], [RequesterId], [RequesterName], [Type], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-11 21:57:08.470 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:08.474 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS) in 186.1742ms
2025-06-11 21:57:08.475 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS)'
2025-06-11 21:57:08.476 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/RequestAdminMessage - 200 null application/json; charset=utf-8 205.7087ms
2025-06-11 21:57:14.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:57:14.615 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:14.616 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:57:14.622 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:14.637 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 21:57:14.650 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:57:14.663 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 21:57:14.677 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:14.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:14.684 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:14.687 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:14.694 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 21:57:14.704 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:57:14.735 +07:00 [INF] Executed ViewResult - view Index executed in 31.6725ms.
2025-06-11 21:57:14.738 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 114.894ms
2025-06-11 21:57:14.739 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:57:14.740 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:14.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 129.8338ms
2025-06-11 21:57:14.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:57:14.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:57:14.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.3476ms
2025-06-11 21:57:14.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.4152ms
2025-06-11 21:57:14.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:57:14.784 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:14.786 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:14.788 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:14.797 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:14.799 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:14.801 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.6327ms
2025-06-11 21:57:14.802 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:14.803 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:14.803 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.9995ms
2025-06-11 21:57:15.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - null null
2025-06-11 21:57:15.696 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:15.698 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:57:15.701 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:15.725 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:57:15.748 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 21:57:15.766 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:15.769 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 21:57:15.780 +07:00 [INF] Executed ViewResult - view Details executed in 11.4585ms.
2025-06-11 21:57:15.782 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 79.6737ms
2025-06-11 21:57:15.783 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:57:15.784 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:15.785 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - 200 null text/html; charset=utf-8 93.7841ms
2025-06-11 21:57:15.788 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:57:15.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:57:15.790 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3243ms
2025-06-11 21:57:15.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6067ms
2025-06-11 21:57:15.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 21:57:15.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 21:57:15.848 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:15.850 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:15.852 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:57:15.852 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:57:15.855 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:57:15.856 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:15.858 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - null null
2025-06-11 21:57:15.861 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:15.864 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:57:15.867 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:57:15.873 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:15.877 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:57:15.881 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:15.885 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:15.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - null null
2025-06-11 21:57:15.895 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 21:57:15.897 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:15.968 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 21:57:15.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:57:15.990 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:57:15.970 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:57:15.894 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 37.1787ms
2025-06-11 21:57:16.019 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:16.021 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:16.025 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:57:16.028 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:16.028 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:57:16.029 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 21:57:16.029 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:16.030 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 160.7797ms
2025-06-11 21:57:16.030 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:16.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 188.9906ms
2025-06-11 21:57:16.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:57:16.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:57:16.048 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:16.047 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:57:16.052 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:16.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:57:16.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - 200 null application/json; charset=utf-8 195.4083ms
2025-06-11 21:57:16.055 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:57:16.056 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:16.058 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:16.062 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 25.0049ms
2025-06-11 21:57:16.065 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:16.067 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:16.069 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 99.7851ms
2025-06-11 21:57:16.073 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 213.9816ms
2025-06-11 21:57:16.074 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:57:16.075 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:16.076 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 231.051ms
2025-06-11 21:57:16.223 +07:00 [INF] Received HTTP response headers after 160.3635ms - 401
2025-06-11 21:57:16.226 +07:00 [INF] End processing HTTP request after 188.2149ms - 401
2025-06-11 21:57:16.228 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 21:57:16.231 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:16.233 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 199.9217ms
2025-06-11 21:57:16.234 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:57:16.235 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:16.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - 200 null application/json; charset=utf-8 341.8078ms
2025-06-11 21:57:21.341 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/StartHostConversation - application/json 64
2025-06-11 21:57:21.344 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:57:21.345 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:57:21.347 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.StartHostConversation (WebHS)'
2025-06-11 21:57:21.350 +07:00 [INF] Route matched with {action = "StartHostConversation", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StartHostConversation(WebHS.Controllers.HostConversationModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:21.378 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450), @__hostId_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
WHERE [c].[HomestayId] = @__homestayId_0 AND (([c].[User1Id] = @__userId_1 AND [c].[User2Id] = @__hostId_2) OR ([c].[User1Id] = @__hostId_2 AND [c].[User2Id] = @__userId_1))
2025-06-11 21:57:21.411 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450), @p7='?' (Size = 450), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Conversations] ([BookingId], [CreatedAt], [HomestayId], [IsArchived], [LastMessage], [LastMessageAt], [LastMessageSenderId], [User1Id], [User2Id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-11 21:57:21.434 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
WHERE [c].[Id] = @__conversation_Id_0
2025-06-11 21:57:21.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:21.446 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversation_Id_0 AND [m].[ReceiverId] = @__currentUserId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:21.449 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:21.451 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.StartHostConversation (WebHS) in 99.906ms
2025-06-11 21:57:21.452 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.StartHostConversation (WebHS)'
2025-06-11 21:57:21.453 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/StartHostConversation - 200 null application/json; charset=utf-8 111.8279ms
2025-06-11 21:57:21.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - null null
2025-06-11 21:57:21.463 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:21.464 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:57:21.467 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:21.512 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:57:21.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:21.522 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:57:21.526 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:21.546 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:57:21.549 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:21.555 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:21.562 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:21.584 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:57:21.592 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:21.595 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:57:21.603 +07:00 [INF] Executed ViewResult - view Index executed in 8.77ms.
2025-06-11 21:57:21.605 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 135.813ms
2025-06-11 21:57:21.606 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:57:21.607 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:21.608 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - 200 null text/html; charset=utf-8 148.4524ms
2025-06-11 21:57:21.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:57:21.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:57:21.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:57:21.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8524ms
2025-06-11 21:57:21.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.681ms
2025-06-11 21:57:21.621 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:21.630 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:21.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 19.6793ms
2025-06-11 21:57:21.635 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:57:21.640 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:57:21.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:57:21.643 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:57:21.647 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:21.648 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:57:21.649 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:21.650 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:57:21.651 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:21.655 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:21.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:21.662 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:21.663 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.4746ms
2025-06-11 21:57:21.665 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:21.666 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:21.668 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.5887ms
2025-06-11 21:57:21.669 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:57:21.675 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:21.677 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 17.4101ms
2025-06-11 21:57:21.678 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:57:21.680 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 39.7597ms
2025-06-11 21:57:29.736 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/SendMessage - application/json 126
2025-06-11 21:57:29.739 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:57:29.740 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:57:29.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.SendMessage (WebHS)'
2025-06-11 21:57:29.744 +07:00 [INF] Route matched with {action = "SendMessage", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessage(WebHS.ViewModels.SendMessageViewModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:29.777 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:57:29.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:57:29.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:29.785 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:29.798 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderedUser1Id_0='?' (Size = 450), @__orderedUser2Id_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
WHERE [c].[User1Id] = @__orderedUser1Id_0 AND [c].[User2Id] = @__orderedUser2Id_1
2025-06-11 21:57:29.807 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450), @p7='?' (Size = 450), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Conversations] ([BookingId], [CreatedAt], [HomestayId], [IsArchived], [LastMessage], [LastMessageAt], [LastMessageSenderId], [User1Id], [User2Id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-11 21:57:29.819 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
WHERE [c].[Id] = @__conversation_Id_0
2025-06-11 21:57:29.822 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:57:29.876 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 1000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 450), @p14='?' (Size = 450), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Conversations] SET [LastMessage] = @p0, [LastMessageAt] = @p1, [LastMessageSenderId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Messages] ([AttachmentFileName], [AttachmentUrl], [BookingId], [Content], [ConversationId], [HomestayId], [IsDeleted], [IsRead], [ReadAt], [ReceiverId], [SenderId], [SentAt], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-06-11 21:57:29.890 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[WebHS.ViewModels.MessageViewModel, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-11 21:57:29.901 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.SendMessage (WebHS) in 155.3142ms
2025-06-11 21:57:29.902 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.SendMessage (WebHS)'
2025-06-11 21:57:29.904 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/SendMessage - 200 null application/json; charset=utf-8 167.4792ms
2025-06-11 21:57:50.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:57:50.678 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:50.680 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:57:50.680 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:50.688 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 21:57:50.702 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 21:57:50.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:50.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:50.711 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:50.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:57:50.718 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 21:57:50.720 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:57:50.722 +07:00 [INF] Executed ViewResult - view Index executed in 2.4776ms.
2025-06-11 21:57:50.723 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 40.8854ms
2025-06-11 21:57:50.724 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:57:50.725 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:50.726 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 51.5603ms
2025-06-11 21:57:50.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:57:50.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:57:50.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5431ms
2025-06-11 21:57:50.737 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8865ms
2025-06-11 21:57:50.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:57:50.759 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:50.760 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:50.762 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:50.785 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:50.787 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:50.788 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 25.1702ms
2025-06-11 21:57:50.790 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:50.790 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:50.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 34.2879ms
2025-06-11 21:57:59.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 21:57:59.256 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.257 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:57:59.258 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:59.274 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 21:57:59.284 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:59.286 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 21:57:59.301 +07:00 [INF] Executed ViewResult - view Details executed in 14.6341ms.
2025-06-11 21:57:59.304 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 44.2803ms
2025-06-11 21:57:59.305 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:57:59.306 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.307 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 54.0785ms
2025-06-11 21:57:59.320 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:57:59.320 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:57:59.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8088ms
2025-06-11 21:57:59.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 21:57:59.337 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 21:57:59.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 21:57:59.334 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.6304ms
2025-06-11 21:57:59.340 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.340 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:57:59.342 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.344 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 21:57:59.348 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:57:59.350 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.351 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:57:59.352 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:57:59.354 +07:00 [INF] No cached response available for this request.
2025-06-11 21:57:59.355 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:57:59.356 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:59.357 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:57:59.361 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:57:59.363 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:57:59.358 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 21:57:59.360 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:57:59.368 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 21:57:59.374 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:59.416 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:57:59.419 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 59.5239ms
2025-06-11 21:57:59.418 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 21:57:59.376 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 21:57:59.421 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:57:59.421 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:59.422 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 21:57:59.426 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:59.427 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:57:59.430 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 63.7673ms
2025-06-11 21:57:59.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:57:59.431 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.434 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:57:59.432 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 56.6557ms
2025-06-11 21:57:59.437 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 21:57:59.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 110.0743ms
2025-06-11 21:57:59.440 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.442 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 21:57:59.433 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 21:57:59.444 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 21:57:59.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 106.4506ms
2025-06-11 21:57:59.448 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.452 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:59.455 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 127.2661ms
2025-06-11 21:57:59.456 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 91.9338ms
2025-06-11 21:57:59.459 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 21:57:59.460 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 123.8115ms
2025-06-11 21:57:59.480 +07:00 [INF] Received HTTP response headers after 31.8384ms - 401
2025-06-11 21:57:59.481 +07:00 [INF] End processing HTTP request after 53.8854ms - 401
2025-06-11 21:57:59.482 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 21:57:59.483 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:57:59.484 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 57.4649ms
2025-06-11 21:57:59.485 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 21:57:59.486 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:57:59.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 140.3507ms
2025-06-11 21:58:01.829 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/StartHostConversation - application/json 64
2025-06-11 21:58:01.831 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:01.832 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:01.833 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.StartHostConversation (WebHS)'
2025-06-11 21:58:01.834 +07:00 [INF] Route matched with {action = "StartHostConversation", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StartHostConversation(WebHS.Controllers.HostConversationModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:01.846 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450), @__hostId_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
WHERE [c].[HomestayId] = @__homestayId_0 AND (([c].[User1Id] = @__userId_1 AND [c].[User2Id] = @__hostId_2) OR ([c].[User1Id] = @__hostId_2 AND [c].[User2Id] = @__userId_1))
2025-06-11 21:58:01.853 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450), @p7='?' (Size = 450), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Conversations] ([BookingId], [CreatedAt], [HomestayId], [IsArchived], [LastMessage], [LastMessageAt], [LastMessageSenderId], [User1Id], [User2Id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-11 21:58:01.859 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
WHERE [c].[Id] = @__conversation_Id_0
2025-06-11 21:58:01.863 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:01.868 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversation_Id_0 AND [m].[ReceiverId] = @__currentUserId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:01.869 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:01.870 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.StartHostConversation (WebHS) in 34.834ms
2025-06-11 21:58:01.871 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.StartHostConversation (WebHS)'
2025-06-11 21:58:01.872 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/StartHostConversation - 200 null application/json; charset=utf-8 43.4215ms
2025-06-11 21:58:01.879 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - null null
2025-06-11 21:58:01.883 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:01.884 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:01.885 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:01.904 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:01.907 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:01.912 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:01.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:01.917 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:01.920 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:01.922 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:01.924 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:01.931 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:01.934 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:01.937 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:01.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:01.949 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:01.953 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:01.955 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:01.957 +07:00 [INF] Executed ViewResult - view Index executed in 2.0772ms.
2025-06-11 21:58:01.958 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 71.6538ms
2025-06-11 21:58:01.959 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:01.960 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:01.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - 200 null text/html; charset=utf-8 81.8629ms
2025-06-11 21:58:01.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:01.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:01.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:01.967 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:01.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.6233ms
2025-06-11 21:58:01.973 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:01.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4514ms
2025-06-11 21:58:01.977 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 12.274ms
2025-06-11 21:58:01.983 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:01.992 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:01.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:01.995 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:01.997 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:01.998 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:01.999 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:02.000 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:02.000 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:02.002 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:02.005 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:02.010 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:02.012 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:02.014 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:02.015 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.4274ms
2025-06-11 21:58:02.016 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 8.9551ms
2025-06-11 21:58:02.017 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:02.018 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:02.019 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:02.019 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 27.6381ms
2025-06-11 21:58:02.020 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.7285ms
2025-06-11 21:58:05.927 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/SendMessage - application/json 126
2025-06-11 21:58:05.929 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:05.930 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:05.931 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.SendMessage (WebHS)'
2025-06-11 21:58:05.932 +07:00 [INF] Route matched with {action = "SendMessage", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessage(WebHS.ViewModels.SendMessageViewModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:05.936 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:58:05.939 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:58:05.942 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:05.945 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:05.950 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderedUser1Id_0='?' (Size = 450), @__orderedUser2Id_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
WHERE [c].[User1Id] = @__orderedUser1Id_0 AND [c].[User2Id] = @__orderedUser2Id_1
2025-06-11 21:58:05.952 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:05.958 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 1000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 450), @p14='?' (Size = 450), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Conversations] SET [LastMessage] = @p0, [LastMessageAt] = @p1, [LastMessageSenderId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Messages] ([AttachmentFileName], [AttachmentUrl], [BookingId], [Content], [ConversationId], [HomestayId], [IsDeleted], [IsRead], [ReadAt], [ReceiverId], [SenderId], [SentAt], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-06-11 21:58:05.965 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[WebHS.ViewModels.MessageViewModel, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-11 21:58:05.966 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.SendMessage (WebHS) in 32.7415ms
2025-06-11 21:58:05.967 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.SendMessage (WebHS)'
2025-06-11 21:58:05.968 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/SendMessage - 200 null application/json; charset=utf-8 41.7799ms
2025-06-11 21:58:09.731 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=2 - null null
2025-06-11 21:58:09.735 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:09.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:09.737 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:09.745 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:09.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:09.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:09.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:09.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:09.760 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:09.762 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:09.765 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:09.767 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:09.770 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:09.772 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:09.774 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:09.778 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:09.782 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:09.784 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:09.785 +07:00 [INF] Executed ViewResult - view Index executed in 1.7358ms.
2025-06-11 21:58:09.786 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 47.6282ms
2025-06-11 21:58:09.788 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:09.789 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:09.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=2 - 200 null text/html; charset=utf-8 58.1155ms
2025-06-11 21:58:09.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:09.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:09.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:09.795 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:09.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.8233ms
2025-06-11 21:58:09.802 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:09.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.1488ms
2025-06-11 21:58:09.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 13.0659ms
2025-06-11 21:58:09.812 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:09.821 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:09.821 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:09.823 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:09.826 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:09.827 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:09.828 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:09.829 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:09.830 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:09.831 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:09.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:09.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:09.841 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:09.843 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:09.844 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.3333ms
2025-06-11 21:58:09.845 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 8.8915ms
2025-06-11 21:58:09.846 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:09.847 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:09.848 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:09.848 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 27.2953ms
2025-06-11 21:58:09.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.8631ms
2025-06-11 21:58:10.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - null null
2025-06-11 21:58:10.346 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:10.347 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:10.348 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:10.357 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:10.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:10.364 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:10.366 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:10.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:10.371 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:10.373 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:10.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:10.378 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:10.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:10.383 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:10.386 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:10.388 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:10.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:10.393 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:10.395 +07:00 [INF] Executed ViewResult - view Index executed in 1.9997ms.
2025-06-11 21:58:10.397 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 47.4413ms
2025-06-11 21:58:10.398 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:10.399 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:10.400 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - 200 null text/html; charset=utf-8 58.6745ms
2025-06-11 21:58:10.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:10.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:10.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:10.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0603ms
2025-06-11 21:58:10.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2171ms
2025-06-11 21:58:10.413 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:10.420 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:10.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 17.8855ms
2025-06-11 21:58:10.424 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:10.430 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:10.430 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:10.433 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:10.436 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:10.437 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:10.438 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:10.439 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:10.440 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:10.441 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:10.445 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:10.449 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:10.451 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:10.453 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:10.453 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.7247ms
2025-06-11 21:58:10.454 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.698ms
2025-06-11 21:58:10.455 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:10.456 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:10.457 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:10.459 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 28.6286ms
2025-06-11 21:58:10.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.4077ms
2025-06-11 21:58:11.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - null null
2025-06-11 21:58:11.022 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:11.023 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:11.024 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:11.030 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:11.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:11.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:11.039 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:11.041 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:11.045 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:11.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:11.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:11.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:11.056 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:11.059 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:11.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:11.064 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:11.066 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:11.068 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:11.070 +07:00 [INF] Executed ViewResult - view Index executed in 1.4776ms.
2025-06-11 21:58:11.071 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 44.7762ms
2025-06-11 21:58:11.072 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:11.073 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:11.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - 200 null text/html; charset=utf-8 54.9307ms
2025-06-11 21:58:11.076 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:11.076 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:11.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:11.079 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2312ms
2025-06-11 21:58:11.084 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8809ms
2025-06-11 21:58:11.085 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:11.091 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:11.092 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 15.6117ms
2025-06-11 21:58:11.095 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:11.103 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:11.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:11.105 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:11.107 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:11.107 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:11.109 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:11.109 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:11.110 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:11.111 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:11.115 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:11.119 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:11.120 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:11.122 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:11.123 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.7513ms
2025-06-11 21:58:11.124 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 6.6121ms
2025-06-11 21:58:11.125 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:11.126 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:11.126 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:11.127 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 24.7714ms
2025-06-11 21:58:11.128 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.2925ms
2025-06-11 21:58:12.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - null null
2025-06-11 21:58:12.935 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:12.937 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:12.938 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:12.946 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:12.952 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:12.955 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:12.959 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:12.962 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:12.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:12.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:12.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:12.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:12.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:12.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:12.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:12.990 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:12.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:12.996 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:12.998 +07:00 [INF] Executed ViewResult - view Index executed in 1.8436ms.
2025-06-11 21:58:12.999 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 58.8112ms
2025-06-11 21:58:13.001 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:13.002 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:13.003 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=1 - 200 null text/html; charset=utf-8 73.1798ms
2025-06-11 21:58:13.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:13.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:13.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:13.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.9795ms
2025-06-11 21:58:13.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.0914ms
2025-06-11 21:58:13.020 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:13.032 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:13.033 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 25.0292ms
2025-06-11 21:58:13.037 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:13.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:13.045 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:13.048 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:13.050 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:13.052 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:13.052 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:13.053 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:13.054 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:13.057 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:13.059 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:13.062 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:13.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:13.067 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.4829ms
2025-06-11 21:58:13.070 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:13.071 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:13.072 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.5958ms
2025-06-11 21:58:13.073 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:13.074 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:13.075 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 30.2625ms
2025-06-11 21:58:13.076 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 30.9514ms
2025-06-11 21:58:18.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - null null
2025-06-11 21:58:18.422 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:18.424 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:18.426 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:18.431 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:18.435 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:18.437 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:18.439 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:18.442 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:18.444 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:18.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:18.449 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:18.451 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:18.453 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:18.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:18.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:18.461 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:18.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:18.465 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:18.467 +07:00 [INF] Executed ViewResult - view Index executed in 1.4139ms.
2025-06-11 21:58:18.468 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 40.8091ms
2025-06-11 21:58:18.469 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:18.470 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:18.471 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - 200 null text/html; charset=utf-8 52.4419ms
2025-06-11 21:58:18.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:18.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:18.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:18.476 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:18.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.1168ms
2025-06-11 21:58:18.482 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:18.485 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.5692ms
2025-06-11 21:58:18.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 13.6512ms
2025-06-11 21:58:18.493 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:18.501 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:18.502 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:18.504 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:18.507 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:18.508 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:18.509 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:18.509 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:18.510 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:18.511 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:18.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:18.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:18.520 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:18.522 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:18.523 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.3286ms
2025-06-11 21:58:18.524 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.2882ms
2025-06-11 21:58:18.525 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:18.526 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:18.527 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:18.527 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 26.0057ms
2025-06-11 21:58:18.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.4342ms
2025-06-11 21:58:19.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=2 - null null
2025-06-11 21:58:19.735 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:19.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:19.737 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:19.743 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:19.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:19.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:19.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:19.753 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:19.756 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:19.759 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:19.761 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:19.764 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 21:58:19.766 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:19.768 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:19.770 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:19.773 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:19.776 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:19.778 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:19.779 +07:00 [INF] Executed ViewResult - view Index executed in 1.3695ms.
2025-06-11 21:58:19.780 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 41.8112ms
2025-06-11 21:58:19.781 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:19.782 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:19.783 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=2 - 200 null text/html; charset=utf-8 52.5934ms
2025-06-11 21:58:19.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:19.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:19.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:19.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0412ms
2025-06-11 21:58:19.790 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:19.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.4121ms
2025-06-11 21:58:19.798 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:19.802 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 16.3984ms
2025-06-11 21:58:19.805 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:19.806 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:19.808 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:19.810 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:19.811 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:19.813 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:19.814 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:19.815 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:19.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:19.821 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:19.822 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:19.823 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:19.824 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.0057ms
2025-06-11 21:58:19.827 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:19.828 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:19.830 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:19.832 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:19.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.4361ms
2025-06-11 21:58:19.834 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.8321ms
2025-06-11 21:58:19.837 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:19.838 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 28.1933ms
2025-06-11 21:58:21.229 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 21:58:21.233 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:21.233 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:21.234 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:58:21.237 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:21.242 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 21:58:21.244 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 21:58:21.245 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 21:58:21.246 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:58:21.247 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.936ms
2025-06-11 21:58:21.248 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:58:21.249 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 20.163ms
2025-06-11 21:58:21.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:58:21.255 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:21.256 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:21.257 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:58:21.260 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:58:21.263 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:21.265 +07:00 [INF] Executed ViewResult - view Index executed in 1.8725ms.
2025-06-11 21:58:21.266 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.266ms
2025-06-11 21:58:21.267 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:21.268 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:21.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.3948ms
2025-06-11 21:58:21.273 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:21.273 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:21.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0205ms
2025-06-11 21:58:21.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6039ms
2025-06-11 21:58:22.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:58:22.456 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:22.457 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:22.458 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:22.459 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:58:22.462 +07:00 [INF] Executed ViewResult - view Login executed in 2.3157ms.
2025-06-11 21:58:22.463 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.598ms
2025-06-11 21:58:22.464 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:22.465 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:22.465 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.8037ms
2025-06-11 21:58:22.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:22.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:22.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.067ms
2025-06-11 21:58:22.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3107ms
2025-06-11 21:58:25.027 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 21:58:25.031 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:25.032 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:25.033 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:25.033 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:25.038 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:58:25.041 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:58:25.104 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:58:25.108 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:25.110 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:58:25.114 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:58:25.116 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:58:25.117 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:58:25.118 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 83.3205ms
2025-06-11 21:58:25.119 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:25.120 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 93.1071ms
2025-06-11 21:58:25.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:58:25.126 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:25.127 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:25.128 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:58:25.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:58:25.135 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:25.138 +07:00 [INF] Executed ViewResult - view Index executed in 3.1586ms.
2025-06-11 21:58:25.139 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.8918ms
2025-06-11 21:58:25.140 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:25.141 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:25.142 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.1416ms
2025-06-11 21:58:25.145 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:25.145 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:25.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8448ms
2025-06-11 21:58:25.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2029ms
2025-06-11 21:58:25.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:25.180 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:25.182 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:25.184 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:25.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:25.193 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:25.195 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.1053ms
2025-06-11 21:58:25.197 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:25.199 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:25.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.8725ms
2025-06-11 21:58:27.477 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:58:27.481 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:27.482 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:27.483 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:27.490 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:27.494 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:27.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 21:58:27.498 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:27.500 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:58:27.503 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 21:58:27.506 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:27.523 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Messages] SET [IsRead] = @p0, [ReadAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-06-11 21:58:27.526 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:27.528 +07:00 [INF] Executed ViewResult - view Index executed in 1.6185ms.
2025-06-11 21:58:27.529 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 44.4334ms
2025-06-11 21:58:27.530 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:27.531 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:27.532 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 54.8162ms
2025-06-11 21:58:27.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:27.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:27.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 21:58:27.536 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5259ms
2025-06-11 21:58:27.542 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0042ms
2025-06-11 21:58:27.542 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:27.549 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:27.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 15.0813ms
2025-06-11 21:58:27.552 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 21:58:27.558 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 21:58:27.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:27.560 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:27.563 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:27.563 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:27.564 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:27.565 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:27.566 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:27.567 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:27.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:27.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 21:58:27.576 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:27.578 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:27.579 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.5227ms
2025-06-11 21:58:27.580 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.7588ms
2025-06-11 21:58:27.581 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:27.582 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 21:58:27.582 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:27.583 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 25.6006ms
2025-06-11 21:58:27.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.0431ms
2025-06-11 21:58:35.740 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/RequestAdminMessage - application/json 15
2025-06-11 21:58:35.743 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:35.743 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:35.744 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS)'
2025-06-11 21:58:35.745 +07:00 [INF] Route matched with {action = "RequestAdminMessage", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RequestAdminMessage(WebHS.Controllers.AdminMessageRequestModel) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:35.754 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 21:58:35.757 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-06-11 21:58:35.761 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:58:35.765 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 50), @p11='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserNotifications] ([AcceptedAt], [AcceptedBy], [ConversationId], [CreatedAt], [IsAccepted], [IsRead], [Message], [RequesterEmail], [RequesterId], [RequesterName], [Type], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-11 21:58:35.768 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:35.769 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS) in 22.8866ms
2025-06-11 21:58:35.770 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.RequestAdminMessage (WebHS)'
2025-06-11 21:58:35.771 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/RequestAdminMessage - 200 null application/json; charset=utf-8 30.8143ms
2025-06-11 21:58:39.525 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 21:58:39.539 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:39.542 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:39.546 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:58:39.549 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:39.558 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 21:58:39.560 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 21:58:39.563 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 21:58:39.567 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:58:39.571 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 14.0331ms
2025-06-11 21:58:39.575 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 21:58:39.580 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 55.537ms
2025-06-11 21:58:39.587 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:58:39.591 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:39.592 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:39.593 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:58:39.598 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:58:39.602 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:39.604 +07:00 [INF] Executed ViewResult - view Index executed in 1.7105ms.
2025-06-11 21:58:39.605 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.5025ms
2025-06-11 21:58:39.607 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:39.608 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:39.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 22.08ms
2025-06-11 21:58:39.612 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:39.612 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:39.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9168ms
2025-06-11 21:58:39.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.7736ms
2025-06-11 21:58:41.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:58:41.112 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:41.113 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:41.114 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:41.116 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:58:41.118 +07:00 [INF] Executed ViewResult - view Login executed in 2.226ms.
2025-06-11 21:58:41.119 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.7535ms
2025-06-11 21:58:41.120 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:41.121 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:41.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.2287ms
2025-06-11 21:58:41.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:41.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:41.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1876ms
2025-06-11 21:58:41.133 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.5087ms
2025-06-11 21:58:44.776 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 21:58:44.784 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:58:44.785 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:58:44.787 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:44.789 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:58:44.795 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:58:44.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:58:44.866 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:58:44.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:58:44.872 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:58:44.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:58:44.876 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:58:44.877 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:58:44.878 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 87.4516ms
2025-06-11 21:58:44.879 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:58:44.880 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 104.5115ms
2025-06-11 21:58:44.883 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:58:44.886 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:44.887 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:44.888 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:58:44.891 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:58:44.895 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:44.899 +07:00 [INF] Executed ViewResult - view Index executed in 3.8735ms.
2025-06-11 21:58:44.900 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.457ms
2025-06-11 21:58:44.901 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:44.902 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:44.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.7547ms
2025-06-11 21:58:44.906 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:44.906 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:44.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1485ms
2025-06-11 21:58:44.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9608ms
2025-06-11 21:58:44.937 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:44.938 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:44.940 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:44.943 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:44.946 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:44.946 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:44.948 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:44.952 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:44.954 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:44.959 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:44.983 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 31.0343ms
2025-06-11 21:58:44.985 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:44.986 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:44.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 50.3256ms
2025-06-11 21:58:44.997 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:45.000 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:45.034 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 77.4682ms
2025-06-11 21:58:45.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:45.037 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:45.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 100.2382ms
2025-06-11 21:58:47.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:58:47.272 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:47.273 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:47.274 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:47.292 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:47.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:47.297 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:47.299 +07:00 [INF] Executed ViewResult - view Index executed in 1.9213ms.
2025-06-11 21:58:47.300 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 24.7012ms
2025-06-11 21:58:47.301 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:47.302 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:47.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 34.6061ms
2025-06-11 21:58:47.305 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:47.306 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:47.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1652ms
2025-06-11 21:58:47.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9152ms
2025-06-11 21:58:47.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:47.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:47.334 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:47.336 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:47.337 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:47.338 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:47.338 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:47.339 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:47.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:47.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:47.348 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:47.350 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:47.351 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.4842ms
2025-06-11 21:58:47.352 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.9228ms
2025-06-11 21:58:47.353 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:47.354 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:47.355 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:47.356 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:47.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.7298ms
2025-06-11 21:58:47.358 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.2224ms
2025-06-11 21:58:49.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 21:58:49.934 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:49.935 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:49.936 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:49.941 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 21:58:49.944 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:49.946 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:49.947 +07:00 [INF] Executed ViewResult - view Index executed in 1.3843ms.
2025-06-11 21:58:49.949 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 11.789ms
2025-06-11 21:58:49.950 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 21:58:49.951 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:49.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 21.4284ms
2025-06-11 21:58:49.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:49.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:49.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.82ms
2025-06-11 21:58:49.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.168ms
2025-06-11 21:58:49.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:49.980 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:49.982 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:49.984 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:49.985 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:49.985 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:49.986 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:49.987 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:49.990 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:49.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:49.997 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:49.999 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:49.999 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.5112ms
2025-06-11 21:58:50.000 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.7389ms
2025-06-11 21:58:50.001 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:50.002 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:50.003 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:50.004 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:50.004 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.197ms
2025-06-11 21:58:50.005 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.1837ms
2025-06-11 21:58:52.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:58:52.477 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:52.478 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:52.479 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:58:52.481 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:58:52.485 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:58:52.487 +07:00 [INF] Executed ViewResult - view Index executed in 1.46ms.
2025-06-11 21:58:52.488 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.721ms
2025-06-11 21:58:52.489 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:58:52.490 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:52.490 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.9065ms
2025-06-11 21:58:52.493 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:52.493 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:52.496 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2221ms
2025-06-11 21:58:52.501 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7263ms
2025-06-11 21:58:52.527 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:52.527 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:52.530 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:52.532 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:52.534 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:52.535 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:52.536 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:52.537 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:52.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:52.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:52.546 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:52.548 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:52.549 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.6905ms
2025-06-11 21:58:52.550 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.0707ms
2025-06-11 21:58:52.551 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:52.552 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:52.552 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:52.553 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:52.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.9307ms
2025-06-11 21:58:52.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.2904ms
2025-06-11 21:58:56.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/AdminRequests - null null
2025-06-11 21:58:56.678 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:56.680 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.AdminRequests (WebHS)'
2025-06-11 21:58:56.682 +07:00 [INF] Route matched with {action = "AdminRequests", controller = "Messaging"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AdminRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:56.684 +07:00 [INF] Executing ViewResult, running view AdminRequests.
2025-06-11 21:58:56.686 +07:00 [INF] Executed ViewResult - view AdminRequests executed in 3.1724ms.
2025-06-11 21:58:56.688 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.AdminRequests (WebHS) in 4.807ms
2025-06-11 21:58:56.689 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.AdminRequests (WebHS)'
2025-06-11 21:58:56.690 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:56.691 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/AdminRequests - 200 null text/html; charset=utf-8 16.3877ms
2025-06-11 21:58:56.693 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:58:56.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:58:56.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7427ms
2025-06-11 21:58:56.701 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.356ms
2025-06-11 21:58:56.720 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:58:56.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:56.723 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:56.725 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:56.726 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:56.727 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:56.727 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:56.728 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:56.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:58:56.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:56.738 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:56.739 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:56.740 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.489ms
2025-06-11 21:58:56.741 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.1737ms
2025-06-11 21:58:56.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:58:56.742 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:58:56.744 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:56.746 +07:00 [INF] No cached response available for this request.
2025-06-11 21:58:56.747 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:56.749 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:56.750 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:56.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.716ms
2025-06-11 21:58:56.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.8608ms
2025-06-11 21:58:56.752 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:58:56.763 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:58:56.766 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:58:56.767 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 6.1699ms
2025-06-11 21:58:56.768 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:58:56.768 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:58:56.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.2118ms
2025-06-11 21:59:06.014 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/AcceptAdminMessageRequest - application/x-www-form-urlencoded 16
2025-06-11 21:59:06.017 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:59:06.018 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:59:06.019 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.AcceptAdminMessageRequest (WebHS)'
2025-06-11 21:59:06.022 +07:00 [INF] Route matched with {action = "AcceptAdminMessageRequest", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptAdminMessageRequest(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:06.032 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_notificationId_0='?' (DbType = Int32), @__8__locals1_adminId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Id] = @__8__locals1_notificationId_0 AND [u].[UserId] = @__8__locals1_adminId_1
2025-06-11 21:59:06.042 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__notification_RequesterId_0='?' (Size = 4000), @__8__locals1_notificationId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[RequesterId] = @__notification_RequesterId_0 AND [u].[Id] <> @__8__locals1_notificationId_1 AND [u].[IsAccepted] = CAST(0 AS bit)
2025-06-11 21:59:06.047 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderedUser1Id_0='?' (Size = 450), @__orderedUser2Id_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
WHERE [c].[User1Id] = @__orderedUser1Id_0 AND [c].[User2Id] = @__orderedUser2Id_1
2025-06-11 21:59:06.054 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450), @p7='?' (Size = 450), @p8='?' (Size = 450), @p13='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Conversations] ([BookingId], [CreatedAt], [HomestayId], [IsArchived], [LastMessage], [LastMessageAt], [LastMessageSenderId], [User1Id], [User2Id])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [UserNotifications] SET [AcceptedAt] = @p9, [AcceptedBy] = @p10, [IsAccepted] = @p11, [IsRead] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-06-11 21:59:06.059 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
WHERE [c].[Id] = @__conversation_Id_0
2025-06-11 21:59:06.063 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:06.067 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserNotifications] SET [ConversationId] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-06-11 21:59:06.069 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:06.069 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.AcceptAdminMessageRequest (WebHS) in 45.7169ms
2025-06-11 21:59:06.070 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.AcceptAdminMessageRequest (WebHS)'
2025-06-11 21:59:06.071 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/AcceptAdminMessageRequest - 200 null application/json; charset=utf-8 57.3386ms
2025-06-11 21:59:06.375 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:59:06.379 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:06.380 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:06.381 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:06.387 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:59:06.389 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:06.390 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.2245ms
2025-06-11 21:59:06.391 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:06.392 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:06.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 17.6564ms
2025-06-11 21:59:09.605 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 21:59:09.610 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:09.611 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:59:09.614 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 21:59:09.622 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 21:59:09.644 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 21:59:09.651 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 21:59:09.678 +07:00 [INF] Executed ViewResult - view AllReviews executed in 26.9985ms.
2025-06-11 21:59:09.681 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 64.9731ms
2025-06-11 21:59:09.682 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:59:09.683 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:09.684 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 78.4187ms
2025-06-11 21:59:09.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:09.687 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:09.693 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5103ms
2025-06-11 21:59:09.693 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.475ms
2025-06-11 21:59:10.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:59:10.534 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:10.535 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:59:10.536 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:59:10.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 21:59:10.549 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 21:59:10.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:10.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:10.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:10.560 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:10.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 21:59:10.565 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:59:10.567 +07:00 [INF] Executed ViewResult - view Index executed in 2.0683ms.
2025-06-11 21:59:10.568 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 30.8163ms
2025-06-11 21:59:10.569 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:59:10.570 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:10.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 40.075ms
2025-06-11 21:59:10.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:10.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:10.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4553ms
2025-06-11 21:59:10.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.9996ms
2025-06-11 21:59:10.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:10.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:59:10.609 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:10.611 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:10.612 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:10.613 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:10.614 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:10.615 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:10.618 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:10.622 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:59:10.626 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:10.628 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:10.629 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.1499ms
2025-06-11 21:59:10.630 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.4154ms
2025-06-11 21:59:10.631 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:10.631 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:10.632 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:10.633 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:10.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.7994ms
2025-06-11 21:59:10.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.3764ms
2025-06-11 21:59:12.392 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 21:59:12.396 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:12.397 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 21:59:12.399 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 21:59:12.407 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 21:59:12.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 21:59:12.415 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 21:59:12.425 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 21:59:12.430 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 21:59:12.435 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 21:59:12.447 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 21:59:12.469 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 21:59:12.475 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:59:12.489 +07:00 [INF] Executed ViewResult - view Index executed in 14.307ms.
2025-06-11 21:59:12.491 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 89.7012ms
2025-06-11 21:59:12.492 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 21:59:12.492 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:12.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 101.2333ms
2025-06-11 21:59:12.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:12.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1489ms
2025-06-11 21:59:12.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:12.507 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2232ms
2025-06-11 21:59:12.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:12.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:59:12.545 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:12.547 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:12.548 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:12.549 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:12.550 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:12.551 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:12.556 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:12.560 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 21:59:12.561 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:12.563 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:12.564 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.8988ms
2025-06-11 21:59:12.566 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.6167ms
2025-06-11 21:59:12.567 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:12.568 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 21:59:12.569 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:12.570 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:12.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.9982ms
2025-06-11 21:59:12.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.5067ms
2025-06-11 21:59:13.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 21:59:13.671 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:13.673 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 21:59:13.677 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 21:59:13.691 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 21:59:13.699 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 21:59:13.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.712 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.717 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.719 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:13.763 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 21:59:13.776 +07:00 [INF] Executed ViewResult - view Users executed in 12.7291ms.
2025-06-11 21:59:13.778 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 99.0203ms
2025-06-11 21:59:13.780 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 21:59:13.781 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:13.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 115.3693ms
2025-06-11 21:59:13.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:13.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:13.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3576ms
2025-06-11 21:59:13.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.7861ms
2025-06-11 21:59:13.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:13.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 21:59:13.829 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:13.833 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:13.834 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:13.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 429 null null 8.0251ms
2025-06-11 21:59:13.836 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:13.845 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:13.849 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:13.850 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.5129ms
2025-06-11 21:59:13.852 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:13.853 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:13.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.548ms
2025-06-11 21:59:15.443 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 21:59:15.446 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:15.448 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 429 null null 5.6899ms
2025-06-11 21:59:18.989 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 21:59:18.993 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:18.993 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 429 null null 4.7426ms
2025-06-11 21:59:19.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 21:59:19.894 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:19.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 429 null null 5.0855ms
2025-06-11 21:59:20.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:59:20.420 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:20.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 429 null null 4.6781ms
2025-06-11 21:59:25.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 21:59:25.012 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:25.013 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 429 null null 4.5357ms
2025-06-11 21:59:25.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/AdminRequests - null null
2025-06-11 21:59:25.220 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:25.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/AdminRequests - 429 null null 12.083ms
2025-06-11 21:59:25.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:59:25.390 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 21:59:25.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 429 null null 4.4658ms
2025-06-11 21:59:33.434 +07:00 [INF] Starting database basic initialization...
2025-06-11 21:59:35.098 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:59:35.134 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:59:35.139 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 21:59:35.141 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 21:59:35.159 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 21:59:35.175 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 21:59:35.194 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 21:59:35.491 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:59:35.529 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:59:35.533 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:59:35.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.596 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.600 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.604 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.608 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.611 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:35.617 +07:00 [INF] Starting sample data seeding...
2025-06-11 21:59:35.619 +07:00 [INF] Starting data seeding...
2025-06-11 21:59:35.630 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:59:35.636 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 21:59:35.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:59:35.645 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 21:59:35.651 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:59:35.653 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 21:59:35.660 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:59:35.662 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 21:59:35.678 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 21:59:35.686 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 21:59:35.688 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 21:59:35.688 +07:00 [INF] Data seeding completed successfully
2025-06-11 21:59:35.689 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 21:59:35.689 +07:00 [INF] Database initialization completed successfully.
2025-06-11 21:59:35.714 +07:00 [INF] Background Job Service started
2025-06-11 21:59:35.748 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 21:59:35.765 +07:00 [INF] Processed 0 expired payments
2025-06-11 21:59:35.832 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 21:59:35.866 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 21:59:35.872 +07:00 [INF] Hosting environment: Development
2025-06-11 21:59:35.873 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 21:59:36.075 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:59:36.217 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:36.225 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 21:59:36.270 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:59:36.283 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:59:36.404 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:59:36.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:59:36.519 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:59:36.629 +07:00 [INF] Executed ViewResult - view Index executed in 111.288ms.
2025-06-11 21:59:36.633 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 347.0847ms
2025-06-11 21:59:36.636 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:59:36.638 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:36.646 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 577.6215ms
2025-06-11 21:59:36.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:36.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:36.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.1635ms
2025-06-11 21:59:36.684 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4159ms
2025-06-11 21:59:38.995 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 21:59:39.005 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:39.009 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:59:39.017 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:59:39.026 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 21:59:39.055 +07:00 [INF] Executed ViewResult - view Login executed in 29.9832ms.
2025-06-11 21:59:39.058 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 39.7647ms
2025-06-11 21:59:39.059 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:59:39.061 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:39.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 67.0852ms
2025-06-11 21:59:39.062 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:39.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:39.069 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4096ms
2025-06-11 21:59:39.085 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.3424ms
2025-06-11 21:59:41.320 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 21:59:41.325 +07:00 [INF] CORS policy execution failed.
2025-06-11 21:59:41.326 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 21:59:41.332 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:59:41.338 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 21:59:41.364 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 21:59:41.372 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 21:59:41.457 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 21:59:41.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 21:59:41.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 21:59:41.487 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 21:59:41.492 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 21:59:41.495 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 21:59:41.496 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 156.5432ms
2025-06-11 21:59:41.497 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 21:59:41.498 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 178.3009ms
2025-06-11 21:59:41.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 21:59:41.504 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:41.508 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:59:41.509 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:59:41.514 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 21:59:41.520 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:59:41.527 +07:00 [INF] Executed ViewResult - view Index executed in 7.0742ms.
2025-06-11 21:59:41.529 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.3956ms
2025-06-11 21:59:41.530 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 21:59:41.531 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:41.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 31.8441ms
2025-06-11 21:59:41.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:41.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:41.545 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.799ms
2025-06-11 21:59:41.555 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.5233ms
2025-06-11 21:59:41.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:41.582 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:41.590 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:41.597 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:41.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:41.639 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:41.646 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 46.3924ms
2025-06-11 21:59:41.648 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:41.650 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:41.651 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 72.4563ms
2025-06-11 21:59:42.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 21:59:42.744 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:42.752 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:59:42.756 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 21:59:42.771 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 21:59:42.818 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 21:59:42.840 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 21:59:42.876 +07:00 [INF] Executed ViewResult - view AllReviews executed in 36.4757ms.
2025-06-11 21:59:42.879 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 120.2254ms
2025-06-11 21:59:42.880 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 21:59:42.882 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:42.883 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 143.6379ms
2025-06-11 21:59:42.885 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:42.886 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:42.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2182ms
2025-06-11 21:59:42.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5998ms
2025-06-11 21:59:45.604 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 21:59:45.608 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:45.610 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:59:45.615 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:59:45.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 21:59:45.641 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:59:45.654 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 21:59:45.669 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:45.672 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:45.676 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:45.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 21:59:45.686 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 21:59:45.697 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 21:59:45.721 +07:00 [INF] Executed ViewResult - view Index executed in 24.2093ms.
2025-06-11 21:59:45.723 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 106.2773ms
2025-06-11 21:59:45.725 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 21:59:45.726 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:45.727 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 123.1329ms
2025-06-11 21:59:45.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:45.731 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:45.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.5547ms
2025-06-11 21:59:45.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2327ms
2025-06-11 21:59:45.762 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:45.765 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:45.772 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:45.773 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:45.777 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:45.781 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:45.782 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.006ms
2025-06-11 21:59:45.783 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:45.784 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:45.785 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.3579ms
2025-06-11 21:59:47.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 21:59:47.351 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:47.352 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 21:59:47.354 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 21:59:47.356 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 21:59:47.361 +07:00 [INF] Executed ViewResult - view About executed in 5.5026ms.
2025-06-11 21:59:47.362 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 7.0544ms
2025-06-11 21:59:47.363 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 21:59:47.364 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:47.365 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 18.0464ms
2025-06-11 21:59:47.371 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:47.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:47.374 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.495ms
2025-06-11 21:59:47.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4331ms
2025-06-11 21:59:49.333 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 21:59:49.336 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:49.339 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:59:49.343 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:59:49.355 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:59:49.364 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:59:49.373 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 21:59:49.398 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:59:49.420 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 21:59:49.439 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 21:59:49.455 +07:00 [INF] Executed ViewResult - view Dashboard executed in 15.6189ms.
2025-06-11 21:59:49.457 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 112.1284ms
2025-06-11 21:59:49.458 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 21:59:49.459 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:49.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 127.1772ms
2025-06-11 21:59:49.463 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:49.465 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1297ms
2025-06-11 21:59:49.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:49.473 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.923ms
2025-06-11 21:59:49.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 21:59:49.524 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:49.525 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:49.526 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 21:59:49.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 21:59:49.534 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 21:59:49.535 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.2893ms
2025-06-11 21:59:49.537 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 21:59:49.537 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:49.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.1823ms
2025-06-11 21:59:51.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 21:59:51.299 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:51.302 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:59:51.305 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:59:51.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:59:51.316 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 21:59:51.322 +07:00 [INF] Executed ViewResult - view Homestays executed in 6.7717ms.
2025-06-11 21:59:51.323 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 16.4529ms
2025-06-11 21:59:51.324 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:59:51.325 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:51.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 32.0405ms
2025-06-11 21:59:51.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 21:59:51.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:51.335 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.72ms
2025-06-11 21:59:51.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7407ms
2025-06-11 21:59:54.134 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 21:59:54.137 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:54.138 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:59:54.142 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 21:59:54.166 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 21:59:54.185 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 21:59:54.190 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 21:59:54.191 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 46.6548ms
2025-06-11 21:59:54.192 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 21:59:54.193 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:54.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 60.5676ms
2025-06-11 21:59:55.246 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 21:59:55.250 +07:00 [INF] No cached response available for this request.
2025-06-11 21:59:55.251 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:59:55.253 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 21:59:55.257 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 21:59:55.260 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 21:59:55.262 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.9266ms.
2025-06-11 21:59:55.264 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 9.29ms
2025-06-11 21:59:55.265 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 21:59:55.266 +07:00 [INF] The response could not be cached for this request.
2025-06-11 21:59:55.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 20.3207ms
2025-06-11 21:59:55.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 21:59:55.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0858ms
2025-06-11 22:00:01.678 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Edit/5 - null null
2025-06-11 22:00:01.681 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:01.683 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Edit (WebHS)'
2025-06-11 22:00:01.687 +07:00 [INF] Route matched with {action = "Edit", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Edit(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:00:01.702 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:00:01.711 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 22:00:01.726 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:00:01.739 +07:00 [INF] Executing ViewResult, running view Edit.
2025-06-11 22:00:01.821 +07:00 [INF] Executed ViewResult - view Edit executed in 82.4704ms.
2025-06-11 22:00:01.824 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Edit (WebHS) in 135.526ms
2025-06-11 22:00:01.825 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:01.825 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:00:01.826 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Edit (WebHS)'
2025-06-11 22:00:01.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.908ms
2025-06-11 22:00:01.832 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:01.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8988ms
2025-06-11 22:00:01.837 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Edit/5 - 200 null text/html; charset=utf-8 158.971ms
2025-06-11 22:00:01.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/address/countries - null null
2025-06-11 22:00:01.878 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:01.880 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:01.881 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/address/countries - 404 0 null 5.9204ms
2025-06-11 22:00:01.887 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/api/address/countries, Response status code: 404
2025-06-11 22:00:03.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:03.025 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:03.026 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:03.027 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:03.030 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:03.033 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:03.035 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.735ms.
2025-06-11 22:00:03.036 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.9335ms
2025-06-11 22:00:03.037 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:03.038 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:03.039 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.2138ms
2025-06-11 22:00:03.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:03.044 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9734ms
2025-06-11 22:00:03.987 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/5 - null null
2025-06-11 22:00:03.991 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:03.993 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:00:03.996 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 22:00:04.010 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:00:04.018 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 22:00:04.025 +07:00 [INF] Executing ViewResult, running view Calendar.
2025-06-11 22:00:04.033 +07:00 [INF] Executed ViewResult - view Calendar executed in 8.7942ms.
2025-06-11 22:00:04.034 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 37.3309ms
2025-06-11 22:00:04.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:00:04.037 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:04.037 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/5 - 200 null text/html; charset=utf-8 50.5494ms
2025-06-11 22:00:04.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:00:04.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:04.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2057ms
2025-06-11 22:00:04.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1359ms
2025-06-11 22:00:04.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:00:04.079 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:04.080 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:00:04.081 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:00:04.085 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:00:04.088 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:00:04.089 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.8656ms
2025-06-11 22:00:04.090 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:00:04.091 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:04.092 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.3647ms
2025-06-11 22:00:06.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:06.248 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:06.249 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:06.250 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:06.253 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:06.257 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:06.258 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.6004ms.
2025-06-11 22:00:06.260 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.5285ms
2025-06-11 22:00:06.261 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:06.262 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:06.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.7094ms
2025-06-11 22:00:06.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:06.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0489ms
2025-06-11 22:00:07.315 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings?homestayId=5 - null null
2025-06-11 22:00:07.320 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:07.322 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:00:07.327 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:07.335 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:00:07.343 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:00:07.353 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:00:07.365 +07:00 [INF] Executed ViewResult - view Bookings executed in 11.7121ms.
2025-06-11 22:00:07.366 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 36.2912ms
2025-06-11 22:00:07.367 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:00:07.368 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:07.369 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings?homestayId=5 - 200 null text/html; charset=utf-8 54.0923ms
2025-06-11 22:00:07.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:00:07.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:07.377 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.458ms
2025-06-11 22:00:07.378 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.1258ms
2025-06-11 22:00:07.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:00:07.407 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:07.408 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:00:07.409 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:00:07.412 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:00:07.416 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:00:07.417 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.3229ms
2025-06-11 22:00:07.418 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:00:07.419 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:07.420 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.6448ms
2025-06-11 22:00:24.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:24.325 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:24.326 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:24.327 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:24.331 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:24.334 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:24.336 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.7524ms.
2025-06-11 22:00:24.337 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.5807ms
2025-06-11 22:00:24.339 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:24.340 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:24.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.5664ms
2025-06-11 22:00:24.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:24.346 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3112ms
2025-06-11 22:00:32.037 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:00:32.040 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:32.041 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:32.042 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:00:32.045 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:00:32.049 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:00:32.049 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 6.1186ms
2025-06-11 22:00:32.050 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:32.051 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:32.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 15.2806ms
2025-06-11 22:00:34.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:34.129 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:34.130 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:34.131 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:34.135 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:34.138 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:34.140 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.7941ms.
2025-06-11 22:00:34.142 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.5876ms
2025-06-11 22:00:34.143 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:34.144 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:34.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 19.503ms
2025-06-11 22:00:34.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:34.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3309ms
2025-06-11 22:00:35.596 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:00:35.600 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:35.601 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:35.602 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:00:35.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:00:35.608 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:00:35.608 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 5.4889ms
2025-06-11 22:00:35.609 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:35.610 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:35.611 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 15.1206ms
2025-06-11 22:00:37.560 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:37.564 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:37.565 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:37.566 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:37.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:37.573 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:37.575 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.5811ms.
2025-06-11 22:00:37.576 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.4461ms
2025-06-11 22:00:37.577 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:37.580 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:37.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 21.6325ms
2025-06-11 22:00:37.612 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:37.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.768ms
2025-06-11 22:00:39.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:00:39.959 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:39.961 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:39.962 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:00:39.965 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:00:39.968 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:00:39.969 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 5.7895ms
2025-06-11 22:00:39.970 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:00:39.970 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:39.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 15.5233ms
2025-06-11 22:00:45.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:00:45.930 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:45.931 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:45.933 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:00:45.942 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:00:45.947 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:00:45.949 +07:00 [INF] Executed ViewResult - view Homestays executed in 2.5557ms.
2025-06-11 22:00:45.951 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 16.4834ms
2025-06-11 22:00:45.952 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:00:45.953 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:45.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 28.5143ms
2025-06-11 22:00:45.988 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:00:45.991 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1017ms
2025-06-11 22:00:48.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-11 22:00:48.056 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:48.058 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:48.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 5.2277ms
2025-06-11 22:00:48.062 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-11 22:00:48.083 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css.map - null null
2025-06-11 22:00:48.085 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:48.090 +07:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css.map was not modified
2025-06-11 22:00:48.092 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:48.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css.map - 304 null text/plain 10.4458ms
2025-06-11 22:00:48.429 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2025-06-11 22:00:48.431 +07:00 [INF] No cached response available for this request.
2025-06-11 22:00:48.433 +07:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js.map was not modified
2025-06-11 22:00:48.436 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:00:48.436 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 304 null text/plain 7.4696ms
2025-06-11 22:01:25.779 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:01:25.787 +07:00 [INF] No cached response available for this request.
2025-06-11 22:01:25.791 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:01:25.791 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:01:25.799 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:01:25.803 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:01:25.817 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:01:25.825 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:01:25.827 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.8926ms.
2025-06-11 22:01:25.828 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 35.5889ms
2025-06-11 22:01:25.830 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:01:25.831 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:01:25.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 52.5128ms
2025-06-11 22:01:25.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:01:25.844 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4813ms
2025-06-11 22:01:25.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:01:25.921 +07:00 [INF] No cached response available for this request.
2025-06-11 22:01:25.922 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:25.924 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:01:25.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:01:25.930 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:01:25.931 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1254ms
2025-06-11 22:01:25.933 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:25.934 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:01:25.935 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.0156ms
2025-06-11 22:01:27.643 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:01:27.647 +07:00 [INF] No cached response available for this request.
2025-06-11 22:01:27.648 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:01:27.649 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:01:27.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:01:27.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:01:27.666 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:01:27.668 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.9246ms.
2025-06-11 22:01:27.669 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 18.9514ms
2025-06-11 22:01:27.670 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:01:27.672 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:01:27.673 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 29.7944ms
2025-06-11 22:01:27.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:01:27.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:01:27.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3446ms
2025-06-11 22:01:27.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.6405ms
2025-06-11 22:01:27.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:01:27.715 +07:00 [INF] No cached response available for this request.
2025-06-11 22:01:27.716 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:27.717 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:01:27.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:01:27.725 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:01:27.726 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.4231ms
2025-06-11 22:01:27.727 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:27.728 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:01:27.729 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.4204ms
2025-06-11 22:01:57.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:01:57.740 +07:00 [INF] No cached response available for this request.
2025-06-11 22:01:57.746 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:57.750 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:01:57.756 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:01:57.758 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:01:57.759 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.8028ms
2025-06-11 22:01:57.760 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:01:57.761 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:01:57.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 37.5415ms
2025-06-11 22:02:14.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:02:14.689 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:14.690 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:14.691 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:14.705 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:14.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:14.723 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:14.731 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:02:14.733 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9544ms.
2025-06-11 22:02:14.734 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 42.2701ms
2025-06-11 22:02:14.735 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:14.736 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:14.737 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 57.2911ms
2025-06-11 22:02:14.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:14.742 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0746ms
2025-06-11 22:02:14.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:14.781 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:14.782 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:14.784 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:14.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:14.790 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:14.792 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.6436ms
2025-06-11 22:02:14.793 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:14.794 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:14.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.479ms
2025-06-11 22:02:31.427 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:02:31.431 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:31.432 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:02:31.433 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:31.436 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:31.439 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:02:31.441 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.5742ms.
2025-06-11 22:02:31.442 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.0479ms
2025-06-11 22:02:31.443 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:02:31.444 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:31.445 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 17.7731ms
2025-06-11 22:02:31.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:02:31.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:31.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2815ms
2025-06-11 22:02:31.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.3982ms
2025-06-11 22:02:32.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:02:32.815 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:32.816 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:32.816 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:32.820 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:32.824 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:32.828 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:32.836 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:02:32.837 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.46ms.
2025-06-11 22:02:32.838 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.3939ms
2025-06-11 22:02:32.839 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:32.840 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:32.841 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.4072ms
2025-06-11 22:02:32.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:32.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9786ms
2025-06-11 22:02:32.879 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:32.881 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:32.882 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:32.883 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:32.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:32.890 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:32.892 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.7194ms
2025-06-11 22:02:32.893 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:32.894 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:32.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.5479ms
2025-06-11 22:02:33.619 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 22:02:33.622 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:33.623 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:02:33.626 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:33.630 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:33.635 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:33.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:33.652 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 22:02:33.660 +07:00 [INF] Executed ViewResult - view Revenue executed in 8.9087ms.
2025-06-11 22:02:33.661 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 33.5019ms
2025-06-11 22:02:33.662 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:02:33.663 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:33.664 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 45.3411ms
2025-06-11 22:02:33.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:02:33.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:33.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3512ms
2025-06-11 22:02:33.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4584ms
2025-06-11 22:02:43.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:02:43.535 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:43.537 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:43.538 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:43.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:43.545 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:43.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:43.556 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:02:43.558 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.579ms.
2025-06-11 22:02:43.559 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 19.4517ms
2025-06-11 22:02:43.560 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:43.561 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:43.561 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.2482ms
2025-06-11 22:02:43.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:43.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9429ms
2025-06-11 22:02:43.600 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:43.603 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:43.604 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:43.605 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:43.608 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:43.611 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:43.612 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.6324ms
2025-06-11 22:02:43.614 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:43.614 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:43.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.0782ms
2025-06-11 22:02:46.477 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 22:02:46.480 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:46.481 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 22:02:46.483 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:46.485 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 22:02:46.486 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 1.0664ms
2025-06-11 22:02:46.487 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 22:02:46.488 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:46.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 12.1184ms
2025-06-11 22:02:46.491 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 22:02:46.494 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:46.495 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 22:02:46.498 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:02:46.511 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:02:46.514 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 22:02:46.518 +07:00 [INF] Executed ViewResult - view Profile executed in 4.6185ms.
2025-06-11 22:02:46.519 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 19.6667ms
2025-06-11 22:02:46.520 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 22:02:46.521 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:46.522 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 30.5315ms
2025-06-11 22:02:46.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:46.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:02:46.527 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9718ms
2025-06-11 22:02:46.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5449ms
2025-06-11 22:02:46.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:46.554 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:46.556 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:46.556 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:46.560 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:46.563 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:46.564 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.8806ms
2025-06-11 22:02:46.565 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:46.566 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:46.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.3992ms
2025-06-11 22:02:48.044 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:02:48.048 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:48.050 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:48.051 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:48.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:02:48.058 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:48.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:48.081 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:02:48.082 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4189ms.
2025-06-11 22:02:48.083 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 31.5737ms
2025-06-11 22:02:48.084 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:02:48.085 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:48.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 42.3166ms
2025-06-11 22:02:48.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:48.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9795ms
2025-06-11 22:02:48.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:48.126 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:48.127 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:48.128 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:48.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:48.135 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:48.137 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.0373ms
2025-06-11 22:02:48.138 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:48.139 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:48.139 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.9155ms
2025-06-11 22:02:56.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:02:56.711 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:56.712 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:02:56.713 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:02:56.722 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:02:56.738 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:02:56.746 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:02:56.747 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.7667ms.
2025-06-11 22:02:56.748 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 33.5824ms
2025-06-11 22:02:56.750 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:02:56.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:56.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 44.5762ms
2025-06-11 22:02:56.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:02:56.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:02:56.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4529ms
2025-06-11 22:02:56.766 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2193ms
2025-06-11 22:02:56.787 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:02:56.789 +07:00 [INF] No cached response available for this request.
2025-06-11 22:02:56.790 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:56.792 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:02:56.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:02:56.798 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:02:56.799 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.5555ms
2025-06-11 22:02:56.801 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:02:56.802 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:02:56.803 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.532ms
2025-06-11 22:03:09.651 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:03:09.655 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:09.656 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:09.657 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:03:09.671 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:03:09.675 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:03:09.689 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:03:09.697 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:03:09.699 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4695ms.
2025-06-11 22:03:09.700 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 41.0087ms
2025-06-11 22:03:09.701 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:09.702 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:09.702 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 50.7817ms
2025-06-11 22:03:09.705 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:09.707 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9137ms
2025-06-11 22:03:09.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:09.743 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:09.744 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:09.745 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:09.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:09.752 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:09.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.7917ms
2025-06-11 22:03:09.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:09.755 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:09.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.7669ms
2025-06-11 22:03:15.698 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:03:15.702 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:15.703 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:15.704 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:03:15.707 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:03:15.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:03:15.717 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:03:15.725 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:03:15.726 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5919ms.
2025-06-11 22:03:15.728 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 22.4641ms
2025-06-11 22:03:15.729 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:15.730 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:15.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 33.4224ms
2025-06-11 22:03:15.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:15.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:15.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.358ms
2025-06-11 22:03:15.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7603ms
2025-06-11 22:03:15.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:15.780 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:15.782 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:15.783 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:15.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:15.790 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:15.791 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.0341ms
2025-06-11 22:03:15.792 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:15.794 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:15.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.9834ms
2025-06-11 22:03:16.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 22:03:16.942 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:16.943 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 22:03:16.947 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:03:16.952 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:03:16.954 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 22:03:17.004 +07:00 [INF] Executed ViewResult - view Create executed in 50.5334ms.
2025-06-11 22:03:17.006 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 57.752ms
2025-06-11 22:03:17.007 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 22:03:17.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:17.008 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:17.010 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8487ms
2025-06-11 22:03:17.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 72.1278ms
2025-06-11 22:03:17.016 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:17.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5978ms
2025-06-11 22:03:18.242 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:03:18.245 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:18.246 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:18.247 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:03:18.250 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:03:18.254 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:03:18.258 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:03:18.266 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:03:18.268 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5732ms.
2025-06-11 22:03:18.269 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.4251ms
2025-06-11 22:03:18.270 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:18.271 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:18.272 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 29.9402ms
2025-06-11 22:03:18.275 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:18.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5391ms
2025-06-11 22:03:18.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:18.317 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:18.318 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:18.319 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:18.322 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:18.325 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:18.326 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.5595ms
2025-06-11 22:03:18.328 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:18.329 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:18.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.8353ms
2025-06-11 22:03:19.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 22:03:19.719 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:19.720 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:03:19.724 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:03:19.728 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:03:19.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:03:19.740 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:03:19.742 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.511ms.
2025-06-11 22:03:19.743 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 17.3789ms
2025-06-11 22:03:19.744 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:03:19.745 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:19.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 30.5496ms
2025-06-11 22:03:19.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:19.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:19.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9882ms
2025-06-11 22:03:19.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1663ms
2025-06-11 22:03:19.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:19.780 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:19.781 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:19.782 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:19.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:19.789 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:19.790 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.4168ms
2025-06-11 22:03:19.791 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:19.792 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:19.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.6747ms
2025-06-11 22:03:20.984 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:03:20.989 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:20.990 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:20.991 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:03:20.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:03:20.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:03:21.002 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:03:21.011 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:03:21.012 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5371ms.
2025-06-11 22:03:21.014 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.1785ms
2025-06-11 22:03:21.015 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:03:21.015 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:21.016 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 32.1176ms
2025-06-11 22:03:21.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:21.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1335ms
2025-06-11 22:03:21.055 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:21.058 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:21.058 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:21.059 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:21.063 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:21.066 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:21.067 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.422ms
2025-06-11 22:03:21.069 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:21.070 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:21.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.0409ms
2025-06-11 22:03:23.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 22:03:23.670 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:23.671 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:23.674 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:23.713 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 22:03:23.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:23.737 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:23.740 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:23.743 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:23.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:23.752 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:03:23.775 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 22:03:23.783 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:23.785 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:23.793 +07:00 [INF] Executed ViewResult - view Index executed in 7.9293ms.
2025-06-11 22:03:23.795 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 118.6559ms
2025-06-11 22:03:23.796 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:23.797 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:23.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 130.6451ms
2025-06-11 22:03:23.801 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 22:03:23.801 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:23.801 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:23.803 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:23.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.2734ms
2025-06-11 22:03:23.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.4954ms
2025-06-11 22:03:23.809 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:23.820 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 18.9778ms
2025-06-11 22:03:23.823 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 22:03:23.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:23.830 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 22:03:23.832 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:23.835 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:23.836 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:23.837 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:23.838 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:23.839 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:23.842 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:23.846 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:23.847 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:23.847 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.3769ms
2025-06-11 22:03:23.850 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:23.850 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:23.851 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.7893ms
2025-06-11 22:03:23.856 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 22:03:23.859 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:23.861 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 13.0757ms
2025-06-11 22:03:23.863 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:23.863 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 33.5859ms
2025-06-11 22:03:27.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - null null
2025-06-11 22:03:27.582 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:27.583 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:27.583 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:27.590 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 22:03:27.593 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:27.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:27.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:27.600 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:27.602 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:27.623 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 22:03:27.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:27.634 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:27.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:03:27.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 22:03:27.667 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:27.670 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:27.672 +07:00 [INF] Executed ViewResult - view Index executed in 1.852ms.
2025-06-11 22:03:27.673 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 88.3846ms
2025-06-11 22:03:27.675 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:27.676 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:27.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - 200 null text/html; charset=utf-8 98.4177ms
2025-06-11 22:03:27.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:27.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:27.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 22:03:27.682 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0289ms
2025-06-11 22:03:27.687 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5676ms
2025-06-11 22:03:27.688 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:27.695 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:27.696 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 16.0066ms
2025-06-11 22:03:27.698 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 22:03:27.706 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:27.706 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 22:03:27.709 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:27.711 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:27.712 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:27.713 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:27.714 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:27.715 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:27.718 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:27.719 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:27.722 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:27.724 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.7387ms
2025-06-11 22:03:27.725 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 22:03:27.728 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:27.729 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:27.730 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:27.731 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.8548ms
2025-06-11 22:03:27.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.2538ms
2025-06-11 22:03:27.732 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:27.735 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 29.0311ms
2025-06-11 22:03:28.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=4 - null null
2025-06-11 22:03:28.997 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:28.999 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:28.999 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:29.005 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 22:03:29.008 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:29.010 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:29.013 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:29.015 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:29.017 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:29.019 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 22:03:29.022 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:29.024 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:29.026 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:03:29.029 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 22:03:29.031 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:29.033 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:29.034 +07:00 [INF] Executed ViewResult - view Index executed in 1.5178ms.
2025-06-11 22:03:29.035 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 34.5077ms
2025-06-11 22:03:29.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:29.037 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:29.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=4 - 200 null text/html; charset=utf-8 43.6246ms
2025-06-11 22:03:29.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 22:03:29.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:29.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:29.043 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:29.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.5716ms
2025-06-11 22:03:29.048 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:29.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8659ms
2025-06-11 22:03:29.056 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 15.2433ms
2025-06-11 22:03:29.062 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 22:03:29.068 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:29.068 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 22:03:29.070 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:29.072 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:29.073 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:29.073 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:29.074 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:29.075 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:29.078 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:29.078 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:29.087 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:29.089 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.3107ms
2025-06-11 22:03:29.090 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:29.091 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:29.092 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.8356ms
2025-06-11 22:03:29.096 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 22:03:29.097 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:29.098 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 17.254ms
2025-06-11 22:03:29.099 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:29.100 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 31.7483ms
2025-06-11 22:03:35.947 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - null null
2025-06-11 22:03:35.951 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:35.952 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:35.953 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:35.959 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 22:03:35.962 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:35.965 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:35.967 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:35.969 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 22:03:35.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:35.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)
2025-06-11 22:03:35.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:35.979 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__currentUserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__currentUserId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:35.981 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:03:35.984 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 22:03:35.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:35.988 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:35.990 +07:00 [INF] Executed ViewResult - view Index executed in 1.4116ms.
2025-06-11 22:03:35.991 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 36.5511ms
2025-06-11 22:03:35.992 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 22:03:35.993 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:35.993 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging?conversationId=3 - 200 null text/html; charset=utf-8 46.3507ms
2025-06-11 22:03:35.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:35.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9881ms
2025-06-11 22:03:36.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:36.021 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 22:03:36.024 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:36.026 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:36.027 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:36.028 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:36.029 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:36.030 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:36.033 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:36.033 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:36.036 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:36.039 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.5317ms
2025-06-11 22:03:36.040 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 22:03:36.042 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:36.044 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType28`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:36.044 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:36.045 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 7.8717ms
2025-06-11 22:03:36.046 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.4544ms
2025-06-11 22:03:36.047 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 22:03:36.050 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 28.3495ms
2025-06-11 22:03:38.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:03:38.857 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:38.858 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:38.858 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:03:38.862 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:03:38.872 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:03:38.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:38.878 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:38.880 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:38.882 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:38.884 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:03:38.886 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:38.888 +07:00 [INF] Executed ViewResult - view Index executed in 2.6419ms.
2025-06-11 22:03:38.889 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 29.7153ms
2025-06-11 22:03:38.890 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:38.891 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:38.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 39.5865ms
2025-06-11 22:03:38.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:38.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:38.897 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0158ms
2025-06-11 22:03:38.902 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0822ms
2025-06-11 22:03:38.932 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:38.935 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:38.936 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:38.937 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:38.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:38.944 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:38.945 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.2545ms
2025-06-11 22:03:38.946 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:38.947 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:38.948 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.2932ms
2025-06-11 22:03:40.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:03:40.328 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:40.330 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:03:40.331 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 22:03:40.334 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 22:03:40.344 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 22:03:40.347 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 22:03:40.349 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.7265ms.
2025-06-11 22:03:40.350 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 18.0745ms
2025-06-11 22:03:40.351 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:03:40.352 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:40.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 29.3739ms
2025-06-11 22:03:40.357 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:40.357 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:40.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9451ms
2025-06-11 22:03:40.364 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4499ms
2025-06-11 22:03:41.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:03:41.372 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:41.373 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:41.374 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:03:41.377 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:03:41.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:03:41.384 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:41.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:41.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:41.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:41.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:03:41.398 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:41.400 +07:00 [INF] Executed ViewResult - view Index executed in 1.9077ms.
2025-06-11 22:03:41.401 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 25.3538ms
2025-06-11 22:03:41.402 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:41.403 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:41.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 34.6574ms
2025-06-11 22:03:41.408 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:41.408 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:41.411 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5855ms
2025-06-11 22:03:41.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4304ms
2025-06-11 22:03:41.439 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:41.442 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:41.443 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:41.444 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:41.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:41.451 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:41.452 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.8293ms
2025-06-11 22:03:41.453 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:41.455 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:41.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.1232ms
2025-06-11 22:03:44.811 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 22:03:44.815 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:44.816 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:44.817 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:03:44.820 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:03:44.824 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 22:03:44.825 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 22:03:44.826 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 22:03:44.827 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:03:44.828 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 5.7313ms
2025-06-11 22:03:44.829 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:03:44.829 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.5315ms
2025-06-11 22:03:44.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:03:44.835 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:44.836 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:44.837 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:03:44.840 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:03:44.843 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:44.845 +07:00 [INF] Executed ViewResult - view Index executed in 1.8045ms.
2025-06-11 22:03:44.846 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.8699ms
2025-06-11 22:03:44.847 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:44.848 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:44.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.7082ms
2025-06-11 22:03:44.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:44.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:44.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9311ms
2025-06-11 22:03:44.860 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9839ms
2025-06-11 22:03:45.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:03:45.814 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:45.815 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:03:45.816 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:03:45.818 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:03:45.821 +07:00 [INF] Executed ViewResult - view Login executed in 3.3503ms.
2025-06-11 22:03:45.822 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 4.896ms
2025-06-11 22:03:45.823 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:03:45.824 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:45.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.6826ms
2025-06-11 22:03:45.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:45.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1621ms
2025-06-11 22:03:45.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:45.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8216ms
2025-06-11 22:03:47.876 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 22:03:47.880 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:03:47.881 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:03:47.881 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:03:47.882 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:03:47.887 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:03:47.890 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:03:47.953 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:03:47.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:03:47.958 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:03:47.962 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:03:47.963 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:03:47.964 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:03:47.965 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 81.3032ms
2025-06-11 22:03:47.966 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:03:47.967 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 90.6512ms
2025-06-11 22:03:47.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:03:47.973 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:47.974 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:47.975 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:03:47.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:03:47.981 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:47.984 +07:00 [INF] Executed ViewResult - view Index executed in 3.4079ms.
2025-06-11 22:03:47.986 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.2736ms
2025-06-11 22:03:47.987 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:47.988 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:47.989 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.9807ms
2025-06-11 22:03:47.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:47.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:47.994 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0079ms
2025-06-11 22:03:47.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4732ms
2025-06-11 22:03:48.027 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:48.028 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:03:48.030 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:48.032 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:48.033 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:48.033 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:48.035 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:48.039 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:48.041 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:48.044 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:48.047 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.8654ms
2025-06-11 22:03:48.048 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:48.050 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:48.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.705ms
2025-06-11 22:03:48.057 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:03:48.076 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:48.123 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 77.1269ms
2025-06-11 22:03:48.125 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:48.126 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:48.126 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 98.5431ms
2025-06-11 22:03:49.156 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:03:49.159 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.160 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:49.161 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:03:49.163 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:03:49.167 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:49.169 +07:00 [INF] Executed ViewResult - view Index executed in 1.9926ms.
2025-06-11 22:03:49.170 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.4376ms
2025-06-11 22:03:49.171 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:03:49.172 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.3413ms
2025-06-11 22:03:49.176 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:49.176 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:49.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5179ms
2025-06-11 22:03:49.182 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8446ms
2025-06-11 22:03:49.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:49.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:03:49.213 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.215 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.216 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:49.216 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:49.217 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:49.218 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:49.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:49.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:03:49.228 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:49.230 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:49.231 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.8903ms
2025-06-11 22:03:49.231 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.9449ms
2025-06-11 22:03:49.232 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:49.233 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:49.234 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.235 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.9115ms
2025-06-11 22:03:49.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.636ms
2025-06-11 22:03:49.681 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:03:49.684 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.685 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:49.686 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:03:49.689 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:03:49.693 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:03:49.696 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:49.698 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:49.700 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:49.703 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:03:49.706 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:03:49.707 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:49.709 +07:00 [INF] Executed ViewResult - view Index executed in 1.5549ms.
2025-06-11 22:03:49.710 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 22.2666ms
2025-06-11 22:03:49.711 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:03:49.712 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.713 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 32.0074ms
2025-06-11 22:03:49.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:49.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:49.722 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.6412ms
2025-06-11 22:03:49.723 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.9703ms
2025-06-11 22:03:49.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:49.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:03:49.754 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.756 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:49.757 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:49.758 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:49.759 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:49.760 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:49.764 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:49.767 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:03:49.770 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:49.772 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:49.772 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.315ms
2025-06-11 22:03:49.774 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.9402ms
2025-06-11 22:03:49.775 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:49.776 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:03:49.777 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.778 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:49.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.1802ms
2025-06-11 22:03:49.779 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.6333ms
2025-06-11 22:03:50.746 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:03:50.750 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:50.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:03:50.752 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 22:03:50.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 22:03:50.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 22:03:50.762 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 22:03:50.765 +07:00 [INF] Executed ViewResult - view AllReviews executed in 3.1443ms.
2025-06-11 22:03:50.766 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 12.7079ms
2025-06-11 22:03:50.767 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:03:50.768 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:50.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 22.8596ms
2025-06-11 22:03:50.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:50.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:50.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9963ms
2025-06-11 22:03:50.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.1259ms
2025-06-11 22:03:52.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:03:52.045 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:52.047 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:03:52.048 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:03:52.050 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:03:52.052 +07:00 [INF] Executed ViewResult - view About executed in 1.9083ms.
2025-06-11 22:03:52.053 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.2037ms
2025-06-11 22:03:52.055 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:03:52.056 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:52.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 14.581ms
2025-06-11 22:03:52.064 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:52.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:52.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5344ms
2025-06-11 22:03:52.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0095ms
2025-06-11 22:03:53.426 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:03:53.430 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:53.431 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:03:53.434 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:03:53.441 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:03:53.445 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:03:53.449 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:03:53.459 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:03:53.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:03:53.470 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:03:53.481 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:03:53.503 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:03:53.506 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:03:53.518 +07:00 [INF] Executed ViewResult - view Index executed in 11.6911ms.
2025-06-11 22:03:53.519 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 83.7893ms
2025-06-11 22:03:53.520 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:03:53.521 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:53.522 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 95.7962ms
2025-06-11 22:03:53.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:03:53.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:03:53.530 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5573ms
2025-06-11 22:03:53.531 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8544ms
2025-06-11 22:03:53.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:03:53.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:03:53.567 +07:00 [INF] No cached response available for this request.
2025-06-11 22:03:53.570 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:03:53.570 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:53.572 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:03:53.572 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 429 null null 7.435ms
2025-06-11 22:03:53.575 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:03:53.580 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:03:53.581 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.3321ms
2025-06-11 22:03:53.582 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:03:53.583 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:03:53.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.4683ms
2025-06-11 22:03:56.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:03:56.063 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:03:56.066 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 429 null null 6.2109ms
2025-06-11 22:03:57.611 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:03:57.614 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:03:57.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 429 null null 4.5476ms
2025-06-11 22:03:58.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:03:58.439 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:03:58.440 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 429 null null 5.0718ms
2025-06-11 22:04:00.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:04:00.460 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:00.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 429 null null 3.8957ms
2025-06-11 22:04:00.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:04:00.669 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:00.670 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 429 null null 4.2881ms
2025-06-11 22:04:01.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:04:01.109 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:01.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 429 null null 5.3286ms
2025-06-11 22:04:01.770 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:01.773 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:01.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 4.2323ms
2025-06-11 22:04:02.601 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:02.604 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:02.605 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 3.9479ms
2025-06-11 22:04:03.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:03.428 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:03.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 5.194ms
2025-06-11 22:04:03.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:03.618 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:03.619 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 4.2937ms
2025-06-11 22:04:03.807 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:03.810 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:03.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 3.9885ms
2025-06-11 22:04:03.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:03.998 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:03.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 5.4019ms
2025-06-11 22:04:04.183 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:04.186 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:04.187 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 4.2025ms
2025-06-11 22:04:04.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:04.373 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:04.374 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 5.0267ms
2025-06-11 22:04:21.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:21.236 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:04:21.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 429 null null 6.8057ms
2025-06-11 22:04:31.562 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:04:32.647 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:04:32.691 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:04:32.695 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:04:32.698 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:04:32.712 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:04:32.727 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:04:32.747 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:04:32.964 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:04:33.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:04:33.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:04:33.031 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.090 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.097 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:33.101 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:04:33.103 +07:00 [INF] Starting data seeding...
2025-06-11 22:04:33.119 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:04:33.122 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:04:33.129 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:04:33.130 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:04:33.136 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:04:33.138 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:04:33.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:04:33.146 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:04:33.162 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:04:33.170 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:04:33.171 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:04:33.173 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:04:33.173 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:04:33.174 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:04:33.197 +07:00 [INF] Background Job Service started
2025-06-11 22:04:33.230 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:04:33.247 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:04:33.314 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:04:33.351 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:04:33.356 +07:00 [INF] Hosting environment: Development
2025-06-11 22:04:33.357 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 22:04:33.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:04:33.711 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:33.719 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:04:33.766 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:04:33.779 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:04:33.901 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:04:33.909 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:04:34.022 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:04:34.117 +07:00 [INF] Executed ViewResult - view Index executed in 97.1249ms.
2025-06-11 22:04:34.121 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 339.1346ms
2025-06-11 22:04:34.123 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:04:34.126 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:34.134 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 575.8096ms
2025-06-11 22:04:34.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:34.139 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:34.144 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4897ms
2025-06-11 22:04:34.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9185ms
2025-06-11 22:04:40.075 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:04:40.086 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:40.091 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:04:40.098 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:04:40.110 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:04:40.141 +07:00 [INF] Executed ViewResult - view Login executed in 32.3092ms.
2025-06-11 22:04:40.144 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 43.7103ms
2025-06-11 22:04:40.145 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:04:40.146 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:40.147 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 72.4863ms
2025-06-11 22:04:40.151 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:40.153 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:40.154 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.3624ms
2025-06-11 22:04:40.175 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.7622ms
2025-06-11 22:04:41.111 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 22:04:41.116 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:04:41.118 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:04:41.124 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:04:41.129 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:04:41.155 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:04:41.164 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:04:41.252 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:04:41.274 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:41.278 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:04:41.286 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:04:41.292 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:04:41.294 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:04:41.295 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 164.9053ms
2025-06-11 22:04:41.296 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:04:41.298 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 187.1394ms
2025-06-11 22:04:41.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:04:41.305 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:41.308 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:04:41.309 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:04:41.313 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:04:41.319 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:04:41.326 +07:00 [INF] Executed ViewResult - view Index executed in 7.4553ms.
2025-06-11 22:04:41.328 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.3396ms
2025-06-11 22:04:41.329 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:04:41.330 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:41.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 29.9612ms
2025-06-11 22:04:41.333 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:41.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:41.340 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.1321ms
2025-06-11 22:04:41.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6716ms
2025-06-11 22:04:41.368 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:04:41.368 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:04:41.371 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:41.373 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:41.380 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:41.385 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:41.388 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:41.393 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:41.411 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:04:41.429 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:04:41.435 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:41.438 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:41.440 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 51.8975ms
2025-06-11 22:04:41.441 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:41.442 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:41.443 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 75.1564ms
2025-06-11 22:04:41.490 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 93.5387ms
2025-06-11 22:04:41.492 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:41.493 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:41.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 125.5278ms
2025-06-11 22:04:42.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:04:42.735 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:42.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:04:42.739 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:04:42.743 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:04:42.763 +07:00 [INF] Executed ViewResult - view About executed in 20.5507ms.
2025-06-11 22:04:42.764 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 23.6674ms
2025-06-11 22:04:42.765 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:04:42.766 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:42.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 37.1352ms
2025-06-11 22:04:42.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:42.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:42.776 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5072ms
2025-06-11 22:04:42.785 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.1809ms
2025-06-11 22:04:44.595 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:04:44.599 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:44.602 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:04:44.605 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:04:44.614 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:04:44.620 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:04:44.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:04:44.640 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:04:44.646 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:04:44.655 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:04:44.674 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:04:44.707 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:04:44.712 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:04:44.731 +07:00 [INF] Executed ViewResult - view Index executed in 19.2331ms.
2025-06-11 22:04:44.734 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 127.5305ms
2025-06-11 22:04:44.736 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:04:44.737 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:44.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 142.4659ms
2025-06-11 22:04:44.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:44.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:44.743 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2408ms
2025-06-11 22:04:44.749 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5779ms
2025-06-11 22:04:44.803 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:04:44.803 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:04:44.806 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:44.808 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:44.809 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:44.809 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:44.810 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:44.811 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:44.816 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:04:44.821 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:04:44.822 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:44.824 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:44.824 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.5058ms
2025-06-11 22:04:44.825 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.8663ms
2025-06-11 22:04:44.826 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:44.827 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:44.828 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:44.829 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:44.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.3539ms
2025-06-11 22:04:44.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.8707ms
2025-06-11 22:04:46.524 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:04:46.529 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:46.532 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:04:46.537 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:04:46.551 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:04:46.559 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:04:46.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.566 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.572 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.576 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.579 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:04:46.610 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:04:46.621 +07:00 [INF] Executed ViewResult - view Users executed in 11.1897ms.
2025-06-11 22:04:46.622 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 82.9983ms
2025-06-11 22:04:46.623 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:04:46.624 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:46.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 100.7995ms
2025-06-11 22:04:46.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:46.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0794ms
2025-06-11 22:04:46.649 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:46.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.184ms
2025-06-11 22:04:46.701 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:04:46.701 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:04:46.705 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:46.708 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:46.709 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:46.710 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:46.711 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:46.712 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:46.718 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:04:46.722 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:04:46.724 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:46.725 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:46.726 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.8631ms
2025-06-11 22:04:46.727 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.6117ms
2025-06-11 22:04:46.728 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:46.729 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:46.730 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:46.731 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:46.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 31.4616ms
2025-06-11 22:04:46.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 32.3336ms
2025-06-11 22:04:51.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays?status=pending - null null
2025-06-11 22:04:51.736 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:51.739 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:04:51.743 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:04:51.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:04:51.771 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsApproved] = CAST(0 AS bit)
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:04:51.776 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:04:51.798 +07:00 [INF] Executed ViewResult - view Homestays executed in 22.671ms.
2025-06-11 22:04:51.800 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 55.6653ms
2025-06-11 22:04:51.802 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:04:51.803 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:51.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays?status=pending - 200 null text/html; charset=utf-8 71.83ms
2025-06-11 22:04:51.805 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:51.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:51.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.956ms
2025-06-11 22:04:51.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8178ms
2025-06-11 22:04:55.636 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:04:55.640 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:55.641 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:04:55.642 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:04:55.644 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:04:55.647 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:04:55.650 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:04:55.652 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:04:55.654 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:04:55.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:04:55.659 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:04:55.663 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:04:55.665 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:04:55.667 +07:00 [INF] Executed ViewResult - view Index executed in 2.1508ms.
2025-06-11 22:04:55.668 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 24.9207ms
2025-06-11 22:04:55.669 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:04:55.670 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:55.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 34.6063ms
2025-06-11 22:04:55.673 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:55.675 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9916ms
2025-06-11 22:04:55.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:04:55.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:04:55.711 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:55.713 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:55.714 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:55.715 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:55.715 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:55.716 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:04:55.719 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:04:55.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:04:55.724 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:55.726 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:04:55.727 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.7427ms
2025-06-11 22:04:55.728 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.4339ms
2025-06-11 22:04:55.729 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:04:55.731 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:04:55.731 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:55.732 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:55.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.1255ms
2025-06-11 22:04:55.734 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.7617ms
2025-06-11 22:04:57.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:04:57.544 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:57.546 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:04:57.550 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:04:57.556 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:04:57.574 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:04:57.579 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:04:57.589 +07:00 [INF] Executed ViewResult - view Bookings executed in 11.0763ms.
2025-06-11 22:04:57.591 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 39.4887ms
2025-06-11 22:04:57.592 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:04:57.593 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:57.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 53.667ms
2025-06-11 22:04:57.596 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:04:57.597 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:04:57.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6079ms
2025-06-11 22:04:57.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.2178ms
2025-06-11 22:04:59.886 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:04:59.890 +07:00 [INF] No cached response available for this request.
2025-06-11 22:04:59.891 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:04:59.894 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:04:59.916 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:04:59.921 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:04:59.921 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 25.7608ms
2025-06-11 22:04:59.922 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:04:59.923 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:04:59.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 38.0764ms
2025-06-11 22:05:00.999 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:05:01.004 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:01.006 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:01.007 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:01.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:01.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:01.019 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:05:01.021 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.0572ms.
2025-06-11 22:05:01.022 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.8206ms
2025-06-11 22:05:01.024 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:01.025 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:01.026 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 26.6886ms
2025-06-11 22:05:01.030 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:01.033 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5094ms
2025-06-11 22:05:03.763 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:05:03.767 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:03.768 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:03.769 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:03.771 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:03.775 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:03.777 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:03.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:05:03.782 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:05:03.785 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:05:03.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:03.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:05:03.792 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:05:03.794 +07:00 [INF] Executed ViewResult - view Index executed in 2.2575ms.
2025-06-11 22:05:03.796 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 25.826ms
2025-06-11 22:05:03.797 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:03.798 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:03.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 35.4736ms
2025-06-11 22:05:03.802 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:03.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3717ms
2025-06-11 22:05:03.873 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:03.873 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:03.875 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:03.877 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:03.879 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:03.879 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:03.880 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:03.881 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:03.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:03.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:03.889 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:03.891 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:03.892 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.0025ms
2025-06-11 22:05:03.893 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.8253ms
2025-06-11 22:05:03.894 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:03.895 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:03.896 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:03.897 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:03.898 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.2149ms
2025-06-11 22:05:03.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.6946ms
2025-06-11 22:05:09.523 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:05:09.527 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:09.528 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:09.529 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:09.535 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:09.543 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:09.546 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:05:09.548 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.96ms.
2025-06-11 22:05:09.549 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 18.4379ms
2025-06-11 22:05:09.550 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:09.551 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:09.552 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 28.8209ms
2025-06-11 22:05:09.555 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:09.555 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:09.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8827ms
2025-06-11 22:05:09.563 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2897ms
2025-06-11 22:05:15.433 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:05:15.437 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:15.438 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:15.439 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:15.450 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:15.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:15.458 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:15.462 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:05:15.465 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:05:15.469 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:05:15.475 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:15.481 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:05:15.482 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:05:15.484 +07:00 [INF] Executed ViewResult - view Index executed in 1.5507ms.
2025-06-11 22:05:15.485 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 44.2615ms
2025-06-11 22:05:15.486 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:15.487 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:15.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 54.9861ms
2025-06-11 22:05:15.491 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:15.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0411ms
2025-06-11 22:05:15.535 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:15.535 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:15.538 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:15.540 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:15.542 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:15.542 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:15.543 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:15.544 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:15.549 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:15.554 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:15.554 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:15.555 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.7618ms
2025-06-11 22:05:15.557 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:15.558 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:15.559 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.3857ms
2025-06-11 22:05:15.560 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:15.561 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:15.562 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.1779ms
2025-06-11 22:05:15.562 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:15.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.7611ms
2025-06-11 22:05:16.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:16.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:16.741 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:16.748 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:16.750 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:16.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:16.755 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:16.758 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:16.767 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:16.782 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:16.788 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:16.799 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:16.803 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 39.6355ms
2025-06-11 22:05:16.810 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 34.7877ms
2025-06-11 22:05:16.814 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:16.820 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:16.823 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:16.828 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:16.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 102.17ms
2025-06-11 22:05:16.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 102.6808ms
2025-06-11 22:05:16.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:05:16.896 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:16.898 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:16.899 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:16.902 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:16.910 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:16.914 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:05:16.915 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.5324ms.
2025-06-11 22:05:16.916 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 15.8711ms
2025-06-11 22:05:16.917 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:16.918 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:16.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 27.2602ms
2025-06-11 22:05:16.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:16.923 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:16.928 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2154ms
2025-06-11 22:05:16.928 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8956ms
2025-06-11 22:05:18.053 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:05:18.059 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:18.065 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:05:18.066 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:05:18.076 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:05:18.079 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:05:18.079 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 11.4944ms
2025-06-11 22:05:18.080 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:05:18.081 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:18.082 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 29.0262ms
2025-06-11 22:05:19.360 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:05:19.364 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:19.366 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:19.367 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:19.370 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:19.374 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:19.378 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:05:19.379 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6041ms.
2025-06-11 22:05:19.380 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.2602ms
2025-06-11 22:05:19.382 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:05:19.383 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:19.384 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 23.4804ms
2025-06-11 22:05:19.388 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:19.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5915ms
2025-06-11 22:05:20.759 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:05:20.763 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:20.764 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:20.765 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:20.768 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:20.771 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:20.774 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:20.776 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:05:20.778 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:05:20.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:05:20.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:20.786 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:05:20.788 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:05:20.790 +07:00 [INF] Executed ViewResult - view Index executed in 2.404ms.
2025-06-11 22:05:20.791 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 24.7849ms
2025-06-11 22:05:20.792 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:20.793 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:20.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 35.4362ms
2025-06-11 22:05:20.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:20.800 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5651ms
2025-06-11 22:05:20.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:20.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:20.879 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:20.881 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:20.882 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:20.883 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:20.883 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:20.885 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:20.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:20.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:20.894 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:20.896 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:20.897 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.4192ms
2025-06-11 22:05:20.899 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.2436ms
2025-06-11 22:05:20.900 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:20.901 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:20.902 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:20.903 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:20.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.3004ms
2025-06-11 22:05:20.905 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.0623ms
2025-06-11 22:05:22.874 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:05:22.878 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:22.879 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:05:22.880 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:22.883 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:22.898 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:05:22.901 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:05:22.902 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.7273ms.
2025-06-11 22:05:22.904 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 22.9ms
2025-06-11 22:05:22.905 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:05:22.906 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:22.907 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 32.2237ms
2025-06-11 22:05:22.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:22.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:22.913 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0221ms
2025-06-11 22:05:22.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4295ms
2025-06-11 22:05:27.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:05:27.376 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:27.380 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:05:27.387 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:05:27.470 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:05:27.492 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:05:27.495 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:05:27.496 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 101.8768ms
2025-06-11 22:05:27.497 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:05:27.498 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:27.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 129.2949ms
2025-06-11 22:05:33.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:05:33.857 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:33.858 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:33.859 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:33.861 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:33.865 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:33.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:33.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:05:33.872 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:05:33.874 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:05:33.876 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:33.879 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:05:33.881 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:05:33.882 +07:00 [INF] Executed ViewResult - view Index executed in 1.4426ms.
2025-06-11 22:05:33.884 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 23.3781ms
2025-06-11 22:05:33.885 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:33.886 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:33.887 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 33.4118ms
2025-06-11 22:05:33.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:33.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8807ms
2025-06-11 22:05:33.927 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:33.927 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:33.930 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:33.933 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:33.933 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:33.934 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:33.935 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:33.935 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:33.938 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:33.943 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:33.945 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:33.947 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:33.948 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.7522ms
2025-06-11 22:05:33.949 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.4779ms
2025-06-11 22:05:33.950 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:33.951 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:33.952 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:33.953 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:33.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.8289ms
2025-06-11 22:05:33.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.4058ms
2025-06-11 22:05:38.409 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:05:38.413 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:38.414 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:38.415 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:38.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:38.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:05:38.425 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.428 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.430 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.432 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.435 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.437 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.439 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.442 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:38.443 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:05:38.445 +07:00 [INF] Executed ViewResult - view Users executed in 1.8518ms.
2025-06-11 22:05:38.446 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 30.0897ms
2025-06-11 22:05:38.447 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:38.448 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:38.449 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 40.1875ms
2025-06-11 22:05:38.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:38.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:38.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9836ms
2025-06-11 22:05:38.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4903ms
2025-06-11 22:05:38.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:38.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:38.488 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:38.490 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:38.492 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:38.493 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:38.493 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:38.494 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:38.497 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:38.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:38.502 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:38.504 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:38.505 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5764ms
2025-06-11 22:05:38.506 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.6908ms
2025-06-11 22:05:38.507 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:38.508 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:38.509 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:38.510 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:38.510 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.5245ms
2025-06-11 22:05:38.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 24.6274ms
2025-06-11 22:05:39.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 22:05:39.745 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:39.746 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:39.750 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:39.764 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:05:39.768 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:39.773 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:05:39.782 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:39.788 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:05:39.796 +07:00 [INF] Executed ViewResult - view UserDetail executed in 8.2697ms.
2025-06-11 22:05:39.797 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 45.6865ms
2025-06-11 22:05:39.798 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:39.799 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:39.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 200 null text/html; charset=utf-8 59.0407ms
2025-06-11 22:05:39.803 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:39.803 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:39.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5698ms
2025-06-11 22:05:39.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5835ms
2025-06-11 22:05:41.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:05:41.970 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:41.971 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:41.972 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:41.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:41.978 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:05:41.980 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.985 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.988 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.990 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.994 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.997 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:41.999 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:05:42.001 +07:00 [INF] Executed ViewResult - view Users executed in 2.2692ms.
2025-06-11 22:05:42.002 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 29.1906ms
2025-06-11 22:05:42.004 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:42.005 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:42.006 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 39.7224ms
2025-06-11 22:05:42.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:42.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9546ms
2025-06-11 22:05:42.036 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:42.037 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:42.038 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:42.040 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:42.042 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:42.042 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:42.043 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:42.045 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:42.048 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:42.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:42.054 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:42.056 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:42.057 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.3226ms
2025-06-11 22:05:42.058 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.4387ms
2025-06-11 22:05:42.059 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:42.060 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:42.060 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:42.061 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:42.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.7991ms
2025-06-11 22:05:42.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.8697ms
2025-06-11 22:05:44.539 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/69b5406e-d4db-4155-8b73-75ac6a5427e9 - null null
2025-06-11 22:05:44.542 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:44.543 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:44.544 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:44.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:05:44.552 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:44.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:05:44.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:44.559 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:05:44.561 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.7096ms.
2025-06-11 22:05:44.562 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 16.1944ms
2025-06-11 22:05:44.563 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:44.564 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:44.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/69b5406e-d4db-4155-8b73-75ac6a5427e9 - 200 null text/html; charset=utf-8 25.9235ms
2025-06-11 22:05:44.568 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:44.568 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:44.570 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8923ms
2025-06-11 22:05:44.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.6708ms
2025-06-11 22:05:46.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:05:46.446 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:46.447 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:46.448 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:46.450 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:46.454 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:05:46.456 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.459 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.461 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.467 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.470 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.473 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.475 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:46.477 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:05:46.478 +07:00 [INF] Executed ViewResult - view Users executed in 1.4121ms.
2025-06-11 22:05:46.479 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 29.8026ms
2025-06-11 22:05:46.481 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:46.482 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:46.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 40.8729ms
2025-06-11 22:05:46.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:46.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.987ms
2025-06-11 22:05:46.514 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:46.515 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:46.517 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:46.519 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:46.520 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:46.521 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:46.522 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:46.523 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:46.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:46.529 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:46.531 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:46.533 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:46.534 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.6705ms
2025-06-11 22:05:46.535 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.7565ms
2025-06-11 22:05:46.536 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:46.537 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:46.538 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:46.539 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:46.539 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.9631ms
2025-06-11 22:05:46.540 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.3058ms
2025-06-11 22:05:46.723 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:46.723 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:46.725 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:46.726 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:46.727 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:46.728 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:46.728 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:46.729 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:46.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:46.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:46.738 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:46.739 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:46.740 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.9914ms
2025-06-11 22:05:46.741 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 6.3762ms
2025-06-11 22:05:46.742 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:46.743 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:46.743 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:46.744 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:46.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.1366ms
2025-06-11 22:05:46.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 22.7961ms
2025-06-11 22:05:50.257 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/6a64425a-4abd-447a-8868-e574987d2f5a - null null
2025-06-11 22:05:50.261 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:50.262 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:50.264 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:50.267 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:05:50.270 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:50.272 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:05:50.275 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:50.277 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:05:50.279 +07:00 [INF] Executed ViewResult - view UserDetail executed in 2.1874ms.
2025-06-11 22:05:50.280 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 15.228ms
2025-06-11 22:05:50.281 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:05:50.282 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:50.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/6a64425a-4abd-447a-8868-e574987d2f5a - 200 null text/html; charset=utf-8 25.7682ms
2025-06-11 22:05:50.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:50.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:50.291 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5373ms
2025-06-11 22:05:50.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.563ms
2025-06-11 22:05:52.379 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:05:52.383 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:52.384 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:52.385 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:52.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:52.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:05:52.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.402 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.409 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.413 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:05:52.415 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:05:52.417 +07:00 [INF] Executed ViewResult - view Users executed in 1.7275ms.
2025-06-11 22:05:52.418 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 32.1737ms
2025-06-11 22:05:52.420 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:05:52.421 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:52.422 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 43.1839ms
2025-06-11 22:05:52.426 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:52.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9374ms
2025-06-11 22:05:52.461 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:52.461 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:52.463 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:52.466 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:52.467 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:52.468 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:52.469 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:52.470 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:52.473 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:52.477 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:52.479 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:52.481 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:52.482 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.3106ms
2025-06-11 22:05:52.483 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.1107ms
2025-06-11 22:05:52.484 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:52.485 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:52.486 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:52.487 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:52.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.3325ms
2025-06-11 22:05:52.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.6689ms
2025-06-11 22:05:54.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:05:54.270 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:54.271 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:54.272 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:54.275 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:05:54.279 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:54.281 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:05:54.283 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:05:54.286 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:05:54.288 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:05:54.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:05:54.296 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:05:54.298 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:05:54.300 +07:00 [INF] Executed ViewResult - view Index executed in 1.7269ms.
2025-06-11 22:05:54.301 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 27.5198ms
2025-06-11 22:05:54.303 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:05:54.304 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:54.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 38.3064ms
2025-06-11 22:05:54.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:54.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6134ms
2025-06-11 22:05:54.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:05:54.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:05:54.346 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:54.349 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:54.350 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:54.350 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:54.351 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:54.352 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:05:54.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:05:54.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:05:54.362 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:54.364 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:05:54.365 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.7443ms
2025-06-11 22:05:54.366 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.5231ms
2025-06-11 22:05:54.368 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:05:54.369 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:05:54.370 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:54.370 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:54.371 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.203ms
2025-06-11 22:05:54.372 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.8195ms
2025-06-11 22:05:59.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:05:59.255 +07:00 [INF] No cached response available for this request.
2025-06-11 22:05:59.256 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:05:59.257 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:05:59.261 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:05:59.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:05:59.267 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:05:59.269 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.5994ms.
2025-06-11 22:05:59.270 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 10.5772ms
2025-06-11 22:05:59.271 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:05:59.272 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:05:59.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 21.263ms
2025-06-11 22:05:59.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:05:59.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:05:59.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2321ms
2025-06-11 22:05:59.285 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9472ms
2025-06-11 22:06:00.982 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:06:00.986 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:00.987 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:06:00.988 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:06:00.990 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:06:00.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:06:00.996 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:06:00.998 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:06:01.000 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:06:01.002 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:06:01.004 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:06:01.007 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:06:01.009 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:06:01.011 +07:00 [INF] Executed ViewResult - view Index executed in 1.6465ms.
2025-06-11 22:06:01.012 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 23.1952ms
2025-06-11 22:06:01.013 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:06:01.014 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:01.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 32.7957ms
2025-06-11 22:06:01.017 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:06:01.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9347ms
2025-06-11 22:06:01.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:06:01.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:06:01.056 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:01.058 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:01.059 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:01.060 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:01.061 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:01.061 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:01.064 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:06:01.069 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:06:01.070 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:01.072 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:01.072 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.6114ms
2025-06-11 22:06:01.073 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.0307ms
2025-06-11 22:06:01.074 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:01.075 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:01.077 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:01.077 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:01.078 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.085ms
2025-06-11 22:06:01.079 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.6259ms
2025-06-11 22:06:01.747 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:06:01.752 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:01.754 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:06:01.755 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:06:01.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:06:01.763 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:06:01.768 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:06:01.769 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.7259ms.
2025-06-11 22:06:01.771 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.7206ms
2025-06-11 22:06:01.772 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:06:01.773 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:01.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 26.6612ms
2025-06-11 22:06:01.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:06:01.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:06:01.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8131ms
2025-06-11 22:06:01.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.7106ms
2025-06-11 22:06:02.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:06:02.849 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:02.850 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:06:02.851 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:06:02.853 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:06:02.857 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:06:02.859 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:06:02.862 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:06:02.864 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:06:02.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:06:02.868 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:06:02.871 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:06:02.873 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:06:02.875 +07:00 [INF] Executed ViewResult - view Index executed in 1.7324ms.
2025-06-11 22:06:02.876 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 23.7282ms
2025-06-11 22:06:02.877 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:06:02.878 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:02.879 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 33.8549ms
2025-06-11 22:06:02.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:06:02.884 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9044ms
2025-06-11 22:06:02.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:06:02.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:06:02.919 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:02.921 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:02.922 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:02.922 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:02.923 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:02.924 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:02.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:06:02.931 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:06:02.932 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:02.934 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:02.935 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.7555ms
2025-06-11 22:06:02.936 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.5921ms
2025-06-11 22:06:02.937 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:02.938 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:02.939 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:02.940 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:02.941 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.2361ms
2025-06-11 22:06:02.941 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 24.8849ms
2025-06-11 22:06:06.411 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 22:06:06.415 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:06.416 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:06:06.419 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:06:06.428 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:06:06.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:06:06.436 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:06:06.441 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:06:06.452 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 22:06:06.474 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] IN (2, 3))
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] IN (2, 3)) DESC
2025-06-11 22:06:06.478 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 22:06:06.500 +07:00 [INF] Executed ViewResult - view Reports executed in 22.2482ms.
2025-06-11 22:06:06.502 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 81.4691ms
2025-06-11 22:06:06.503 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:06:06.504 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:06.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 94.3658ms
2025-06-11 22:06:06.506 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:06:06.508 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:06:06.516 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.9442ms
2025-06-11 22:06:06.516 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.792ms
2025-06-11 22:06:16.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:06:16.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:06:16.733 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:16.734 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:16.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:16.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:16.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:16.737 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:16.746 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:06:16.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:16.748 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.2888ms
2025-06-11 22:06:16.749 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:06:16.749 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:16.751 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:16.752 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:16.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.6958ms
2025-06-11 22:06:16.754 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.5665ms
2025-06-11 22:06:16.755 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:16.758 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:16.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.8587ms
2025-06-11 22:06:46.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:06:46.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:06:46.732 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:46.734 +07:00 [INF] No cached response available for this request.
2025-06-11 22:06:46.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:46.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:46.736 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:46.737 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:06:46.745 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:06:46.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:46.748 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.4971ms
2025-06-11 22:06:46.748 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:06:46.749 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:06:46.750 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:06:46.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:46.752 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.7802ms
2025-06-11 22:06:46.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.2865ms
2025-06-11 22:06:46.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:06:46.757 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:06:46.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.4734ms
2025-06-11 22:07:16.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:07:16.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:07:16.743 +07:00 [INF] No cached response available for this request.
2025-06-11 22:07:16.745 +07:00 [INF] No cached response available for this request.
2025-06-11 22:07:16.747 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:07:16.747 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:07:16.748 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:07:16.749 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:07:16.752 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:07:16.759 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:07:16.760 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:07:16.764 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:07:16.765 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.9105ms
2025-06-11 22:07:16.766 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.0905ms
2025-06-11 22:07:16.767 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:07:16.768 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:07:16.769 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:07:16.769 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:07:16.770 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 33.4596ms
2025-06-11 22:07:16.771 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 33.6113ms
2025-06-11 22:08:25.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:08:25.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:08:25.746 +07:00 [INF] No cached response available for this request.
2025-06-11 22:08:25.750 +07:00 [INF] No cached response available for this request.
2025-06-11 22:08:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:08:25.752 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:08:25.752 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:08:25.753 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:08:25.762 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:08:25.765 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:08:25.766 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:08:25.766 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.2131ms
2025-06-11 22:08:25.768 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:08:25.769 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:08:25.770 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.4425ms
2025-06-11 22:08:25.771 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:08:25.772 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:08:25.773 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 34.2192ms
2025-06-11 22:08:25.774 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:08:25.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 38.3575ms
2025-06-11 22:09:25.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:09:25.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:09:25.733 +07:00 [INF] No cached response available for this request.
2025-06-11 22:09:25.735 +07:00 [INF] No cached response available for this request.
2025-06-11 22:09:25.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:09:25.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:09:25.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:09:25.738 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:09:25.745 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:09:25.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:09:25.748 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.4018ms
2025-06-11 22:09:25.748 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:09:25.749 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:09:25.751 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:09:25.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:09:25.752 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.0323ms
2025-06-11 22:09:25.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.8235ms
2025-06-11 22:09:25.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:09:25.757 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:09:25.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.0053ms
2025-06-11 22:10:25.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:10:25.745 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:10:25.751 +07:00 [INF] No cached response available for this request.
2025-06-11 22:10:25.756 +07:00 [INF] No cached response available for this request.
2025-06-11 22:10:25.757 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:10:25.758 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:10:25.759 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:10:25.761 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:10:25.766 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:10:25.778 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:10:25.779 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:10:25.780 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 16.8388ms
2025-06-11 22:10:25.782 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:10:25.784 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:10:25.785 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 17.4349ms
2025-06-11 22:10:25.786 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:10:25.788 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:10:25.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 49.8695ms
2025-06-11 22:10:25.790 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:10:25.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 49.2703ms
2025-06-11 22:11:25.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:11:25.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:11:25.748 +07:00 [INF] No cached response available for this request.
2025-06-11 22:11:25.750 +07:00 [INF] No cached response available for this request.
2025-06-11 22:11:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:11:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:11:25.752 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:11:25.753 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:11:25.760 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:11:25.770 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:11:25.770 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:11:25.771 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 15.3805ms
2025-06-11 22:11:25.774 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:11:25.775 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:11:25.776 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 15.1025ms
2025-06-11 22:11:25.778 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:11:25.779 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:11:25.780 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 46.8145ms
2025-06-11 22:11:25.781 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:11:25.787 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 45.9816ms
2025-06-11 22:12:25.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:12:25.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:12:25.730 +07:00 [INF] No cached response available for this request.
2025-06-11 22:12:25.732 +07:00 [INF] No cached response available for this request.
2025-06-11 22:12:25.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:12:25.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:12:25.734 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:12:25.735 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:12:25.742 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:12:25.743 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:12:25.744 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.1966ms
2025-06-11 22:12:25.745 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:12:25.748 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:12:25.750 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:12:25.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:12:25.752 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.4259ms
2025-06-11 22:12:25.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.6122ms
2025-06-11 22:12:25.753 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:12:25.757 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:12:25.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.4664ms
2025-06-11 22:13:25.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:13:25.747 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:13:25.763 +07:00 [INF] No cached response available for this request.
2025-06-11 22:13:25.765 +07:00 [INF] No cached response available for this request.
2025-06-11 22:13:25.766 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:13:25.769 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:13:25.769 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:13:25.771 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:13:25.783 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:13:25.787 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:13:25.787 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:13:25.788 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.7941ms
2025-06-11 22:13:25.791 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:13:25.792 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:13:25.794 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 15.5274ms
2025-06-11 22:13:25.795 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:13:25.797 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:13:25.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 56.1812ms
2025-06-11 22:13:25.800 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:13:25.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 58.3905ms
2025-06-11 22:14:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:14:25.752 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:14:25.759 +07:00 [INF] No cached response available for this request.
2025-06-11 22:14:25.763 +07:00 [INF] No cached response available for this request.
2025-06-11 22:14:25.770 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:14:25.772 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:14:25.773 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:14:25.774 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:14:25.786 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:14:25.788 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:14:25.789 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:14:25.789 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.906ms
2025-06-11 22:14:25.792 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:14:25.794 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:14:25.796 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 16.1829ms
2025-06-11 22:14:25.797 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:14:25.799 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:14:25.800 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 57.1309ms
2025-06-11 22:14:25.801 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:14:25.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 54.1523ms
2025-06-11 22:15:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:15:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:15:25.750 +07:00 [INF] No cached response available for this request.
2025-06-11 22:15:25.752 +07:00 [INF] No cached response available for this request.
2025-06-11 22:15:25.753 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:15:25.753 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:15:25.754 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:15:25.754 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:15:25.762 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:15:25.764 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:15:25.765 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:15:25.765 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.1332ms
2025-06-11 22:15:25.767 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:15:25.768 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:15:25.769 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.6737ms
2025-06-11 22:15:25.770 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:15:25.771 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:15:25.771 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.8693ms
2025-06-11 22:15:25.772 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:15:25.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.7312ms
2025-06-11 22:16:25.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:16:25.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:16:25.747 +07:00 [INF] No cached response available for this request.
2025-06-11 22:16:25.752 +07:00 [INF] No cached response available for this request.
2025-06-11 22:16:25.753 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:16:25.753 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:16:25.754 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:16:25.755 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:16:25.766 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:16:25.767 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:16:25.768 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.0769ms
2025-06-11 22:16:25.769 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:16:25.772 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:16:25.774 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:16:25.775 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:16:25.776 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 16.7141ms
2025-06-11 22:16:25.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 38.0292ms
2025-06-11 22:16:25.778 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:16:25.781 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:16:25.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 38.9601ms
2025-06-11 22:17:25.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:17:25.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:17:25.746 +07:00 [INF] No cached response available for this request.
2025-06-11 22:17:25.748 +07:00 [INF] No cached response available for this request.
2025-06-11 22:17:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:17:25.752 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:17:25.753 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:17:25.753 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:17:25.761 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:17:25.762 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:17:25.763 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:17:25.763 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.4856ms
2025-06-11 22:17:25.765 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:17:25.766 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:17:25.767 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.0407ms
2025-06-11 22:17:25.768 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:17:25.769 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:17:25.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.1978ms
2025-06-11 22:17:25.770 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:17:25.773 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.5457ms
2025-06-11 22:18:25.725 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:18:25.725 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:18:25.732 +07:00 [INF] No cached response available for this request.
2025-06-11 22:18:25.734 +07:00 [INF] No cached response available for this request.
2025-06-11 22:18:25.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:18:25.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:18:25.736 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:18:25.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:18:25.743 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:18:25.747 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:18:25.750 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:18:25.751 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:18:25.752 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.5754ms
2025-06-11 22:18:25.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5772ms
2025-06-11 22:18:25.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:18:25.755 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:18:25.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:18:25.757 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:18:25.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 32.2183ms
2025-06-11 22:18:25.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 32.9634ms
2025-06-11 22:19:25.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:19:25.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:19:25.733 +07:00 [INF] No cached response available for this request.
2025-06-11 22:19:25.738 +07:00 [INF] No cached response available for this request.
2025-06-11 22:19:25.740 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:19:25.742 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:19:25.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:19:26.340 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:19:26.396 +07:00 [INF] Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:19:26.851 +07:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:19:26.859 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:19:26.862 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:19:26.864 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 520.1246ms
2025-06-11 22:19:26.865 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 133.339ms
2025-06-11 22:19:26.923 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:19:26.924 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:19:26.925 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:19:26.926 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:19:26.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 1198.3837ms
2025-06-11 22:19:26.928 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 1199.0352ms
2025-06-11 22:20:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:20:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:20:25.748 +07:00 [INF] No cached response available for this request.
2025-06-11 22:20:25.750 +07:00 [INF] No cached response available for this request.
2025-06-11 22:20:25.750 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:20:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:20:25.751 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:20:25.752 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:20:25.760 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:20:25.761 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:20:25.762 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.6316ms
2025-06-11 22:20:25.762 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:20:25.763 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:20:25.765 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:20:25.765 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:20:25.766 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.7999ms
2025-06-11 22:20:25.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.4766ms
2025-06-11 22:20:25.768 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:20:25.771 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:20:25.771 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.9453ms
2025-06-11 22:23:21.298 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:23:22.421 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:23:22.459 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:23:22.464 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:23:22.467 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:23:22.480 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:23:22.494 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:23:22.505 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:23:22.694 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:23:22.728 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:23:22.730 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:23:22.742 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.799 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.813 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.827 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.838 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.850 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.863 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:23:22.873 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:23:22.880 +07:00 [INF] Starting data seeding...
2025-06-11 22:23:22.909 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:23:22.919 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:23:22.942 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:23:22.949 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:23:22.966 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:23:22.971 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:23:22.982 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:23:22.984 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:23:22.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:23:23.006 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:23:23.008 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:23:23.009 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:23:23.010 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:23:23.011 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:23:23.034 +07:00 [INF] Background Job Service started
2025-06-11 22:23:23.067 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:23:23.079 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:23:23.100 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:23:23.101 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:23:23.102 +07:00 [INF] Hosting environment: Development
2025-06-11 22:23:23.103 +07:00 [INF] Content root path: d:\WebHS
2025-06-11 22:24:22.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:24:22.646 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:22.648 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:24:22.681 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:24:22.689 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:24:22.795 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:24:22.813 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:24:22.974 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:24:23.106 +07:00 [INF] Executed ViewResult - view Index executed in 132.6126ms.
2025-06-11 22:24:23.109 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 416.6844ms
2025-06-11 22:24:23.110 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:24:23.113 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.120 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 499.6341ms
2025-06-11 22:24:23.134 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-06-11 22:24:23.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 22:24:23.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/site.css?v=pAGv4ietcJNk_EwsQZ5BN9-K4MuNYS2a9wl4Jw-q9D0 - null null
2025-06-11 22:24:23.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/home.css - null null
2025-06-11 22:24:23.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - null null
2025-06-11 22:24:23.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery/dist/jquery.min.js - null null
2025-06-11 22:24:23.144 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.144 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.146 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.149 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.152 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.155 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.159 +07:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2025-06-11 22:24:23.159 +07:00 [INF] The file /css/site.css was not modified
2025-06-11 22:24:23.159 +07:00 [INF] The file /css/home.css was not modified
2025-06-11 22:24:23.159 +07:00 [INF] The file /images/placeholder-homestay.svg was not modified
2025-06-11 22:24:23.160 +07:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2025-06-11 22:24:23.161 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.162 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.163 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.164 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.164 +07:00 [INF] Sending file. Request path: '/WebHS.styles.css'. Physical path: 'd:\WebHS\obj\Debug\net8.0\scopedcss\bundle\WebHS.styles.css'
2025-06-11 22:24:23.165 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.166 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 32.0925ms
2025-06-11 22:24:23.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/css/site.css?v=pAGv4ietcJNk_EwsQZ5BN9-K4MuNYS2a9wl4Jw-q9D0 - 304 null text/css 27.0769ms
2025-06-11 22:24:23.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/css/home.css - 304 null text/css 27.875ms
2025-06-11 22:24:23.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - 304 null image/svg+xml 28.38ms
2025-06-11 22:24:23.170 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery/dist/jquery.min.js - 304 null text/javascript 29.8108ms
2025-06-11 22:24:23.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-06-11 22:24:23.183 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 200 1123 text/css 44.8265ms
2025-06-11 22:24:23.188 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-06-11 22:24:23.191 +07:00 [INF] The file /js/site.js was not modified
2025-06-11 22:24:23.194 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:23.194 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.195 +07:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2025-06-11 22:24:23.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 304 null text/javascript 15.8812ms
2025-06-11 22:24:23.197 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:23.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 9.8058ms
2025-06-11 22:24:27.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:24:27.618 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:27.622 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:24:27.649 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:24:27.693 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:24:27.711 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:24:27.728 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:24:27.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:24:27.748 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:24:27.751 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:24:27.754 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:24:27.763 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:24:27.775 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:24:27.809 +07:00 [INF] Executed ViewResult - view Index executed in 34.7607ms.
2025-06-11 22:24:27.811 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 160.4624ms
2025-06-11 22:24:27.813 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:24:27.814 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:27.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 199.9127ms
2025-06-11 22:24:29.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:24:29.535 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:29.540 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:24:29.551 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 22:24:29.593 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 22:24:29.653 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 22:24:29.665 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 22:24:29.689 +07:00 [INF] Executed ViewResult - view AllReviews executed in 24.5267ms.
2025-06-11 22:24:29.690 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 134.3864ms
2025-06-11 22:24:29.692 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:24:29.693 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:29.694 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 164.199ms
2025-06-11 22:24:30.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:24:30.217 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:30.218 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:24:30.220 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:24:30.223 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:24:30.228 +07:00 [INF] Executed ViewResult - view About executed in 4.9653ms.
2025-06-11 22:24:30.229 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 7.8651ms
2025-06-11 22:24:30.230 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:24:30.231 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:30.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 17.8078ms
2025-06-11 22:24:31.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:24:31.056 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:31.057 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:24:31.059 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:24:31.062 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:24:31.080 +07:00 [INF] Executed ViewResult - view Login executed in 18.3943ms.
2025-06-11 22:24:31.081 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 20.8377ms
2025-06-11 22:24:31.083 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:24:31.084 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:31.085 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 31.1421ms
2025-06-11 22:24:31.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-06-11 22:24:31.096 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:31.097 +07:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2025-06-11 22:24:31.098 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:31.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-06-11 22:24:31.099 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery-validation/dist/jquery.validate.min.js - 304 null text/javascript 4.8789ms
2025-06-11 22:24:31.101 +07:00 [INF] No cached response available for this request.
2025-06-11 22:24:31.105 +07:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js was not modified
2025-06-11 22:24:31.107 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:24:31.108 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 304 null text/javascript 9.6463ms
2025-06-11 22:25:07.222 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:25:09.311 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:25:09.357 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:25:09.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:25:09.366 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:25:09.387 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:25:09.409 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:25:09.435 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:25:09.683 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:25:09.735 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:25:09.738 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:25:09.759 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.826 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.830 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.836 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.838 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.841 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:25:09.843 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:25:09.844 +07:00 [INF] Starting data seeding...
2025-06-11 22:25:09.856 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:25:09.859 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:25:09.866 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:25:09.867 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:25:09.872 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:25:09.874 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:25:09.881 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:25:09.883 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:25:09.899 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:25:09.906 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:25:09.908 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:25:09.909 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:25:09.910 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:25:09.911 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:25:09.938 +07:00 [INF] Background Job Service started
2025-06-11 22:25:09.992 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:25:10.010 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:25:10.136 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:25:10.179 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:25:10.181 +07:00 [INF] Hosting environment: Development
2025-06-11 22:25:10.182 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 22:25:10.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:25:10.484 +07:00 [INF] No cached response available for this request.
2025-06-11 22:25:10.494 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:25:10.539 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:25:10.553 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:25:10.676 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:25:10.695 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:25:10.800 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:25:10.898 +07:00 [INF] Executed ViewResult - view Index executed in 98.3844ms.
2025-06-11 22:25:10.901 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 345.55ms
2025-06-11 22:25:10.903 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:25:10.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 22:25:10.906 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:25:10.912 +07:00 [INF] No cached response available for this request.
2025-06-11 22:25:10.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 615.3483ms
2025-06-11 22:25:10.917 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 22:25:10.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:25:10.925 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:25:10.926 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:25:10.931 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 27.3189ms
2025-06-11 22:25:10.933 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.3999ms
2025-06-11 22:25:10.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5754ms
2025-06-11 22:27:05.396 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:27:05.414 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:05.427 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:05.434 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:27:05.446 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:27:05.477 +07:00 [INF] Executed ViewResult - view Login executed in 31.7387ms.
2025-06-11 22:27:05.479 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 43.51ms
2025-06-11 22:27:05.481 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:05.482 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:05.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 87.3414ms
2025-06-11 22:27:05.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:05.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:05.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5722ms
2025-06-11 22:27:05.509 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.2018ms
2025-06-11 22:27:07.412 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 22:27:07.418 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:27:07.419 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:27:07.425 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:07.430 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:27:07.462 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:27:07.470 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:27:07.558 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:27:07.581 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:07.585 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:27:07.592 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:27:07.598 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:27:07.600 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:27:07.601 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 169.6793ms
2025-06-11 22:27:07.602 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:07.603 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 191.6483ms
2025-06-11 22:27:07.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:27:07.610 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:07.613 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:07.614 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:27:07.620 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:27:07.625 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:07.632 +07:00 [INF] Executed ViewResult - view Index executed in 7.3039ms.
2025-06-11 22:27:07.634 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.7593ms
2025-06-11 22:27:07.635 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:07.636 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:07.637 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 30.1829ms
2025-06-11 22:27:07.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:07.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:07.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.7752ms
2025-06-11 22:27:07.647 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3862ms
2025-06-11 22:27:07.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:07.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:07.682 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:07.685 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:07.693 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:07.694 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:07.699 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:07.699 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:07.716 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:07.739 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:07.745 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:07.745 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:07.796 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 94.9758ms
2025-06-11 22:27:07.797 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:07.798 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:07.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 118.8179ms
2025-06-11 22:27:07.799 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 96.1989ms
2025-06-11 22:27:07.803 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:07.804 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:07.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 124.7799ms
2025-06-11 22:27:10.566 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:27:10.570 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:10.578 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:10.582 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:10.599 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:10.608 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:27:10.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.615 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.620 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.626 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:10.658 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:27:10.674 +07:00 [INF] Executed ViewResult - view Users executed in 16.2573ms.
2025-06-11 22:27:10.676 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 92.4908ms
2025-06-11 22:27:10.677 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:10.678 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:10.679 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 113.0448ms
2025-06-11 22:27:10.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:10.682 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:10.688 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4075ms
2025-06-11 22:27:10.688 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0938ms
2025-06-11 22:27:10.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:10.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:10.719 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:10.721 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:10.725 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:10.725 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:10.727 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:10.728 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:10.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:10.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:10.737 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:10.739 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:10.739 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.1735ms
2025-06-11 22:27:10.740 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.3754ms
2025-06-11 22:27:10.741 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:10.742 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:10.743 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:10.744 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:10.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.79ms
2025-06-11 22:27:10.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 29.0798ms
2025-06-11 22:27:12.695 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 22:27:12.699 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:12.703 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:27:12.706 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:12.722 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:27:12.725 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:12.730 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:27:12.744 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:27:12.750 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:27:12.774 +07:00 [INF] Executed ViewResult - view UserDetail executed in 24.0314ms.
2025-06-11 22:27:12.776 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 68.4593ms
2025-06-11 22:27:12.777 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:27:12.778 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:12.779 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 200 null text/html; charset=utf-8 84.7696ms
2025-06-11 22:27:12.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:12.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:12.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2576ms
2025-06-11 22:27:12.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8358ms
2025-06-11 22:27:14.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:27:14.615 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:14.616 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:14.617 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:14.621 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:14.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:27:14.627 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.629 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.634 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.636 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.641 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.644 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:14.645 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:27:14.647 +07:00 [INF] Executed ViewResult - view Users executed in 2.0796ms.
2025-06-11 22:27:14.648 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 30.0079ms
2025-06-11 22:27:14.649 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:14.650 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:14.651 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 41.0613ms
2025-06-11 22:27:14.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:14.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.94ms
2025-06-11 22:27:14.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:14.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:14.687 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:14.689 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:14.691 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:14.691 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:14.692 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:14.693 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:14.696 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:14.700 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:14.701 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:14.703 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:14.704 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5702ms
2025-06-11 22:27:14.705 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.2026ms
2025-06-11 22:27:14.705 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:14.706 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:14.707 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:14.708 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:14.709 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.6568ms
2025-06-11 22:27:14.709 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 24.2413ms
2025-06-11 22:27:15.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:27:15.171 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:15.172 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:15.173 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:27:15.176 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:27:15.181 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:15.184 +07:00 [INF] Executed ViewResult - view Index executed in 2.8539ms.
2025-06-11 22:27:15.185 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.8008ms
2025-06-11 22:27:15.186 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:15.188 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:15.189 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 23.0245ms
2025-06-11 22:27:15.192 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:15.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9736ms
2025-06-11 22:27:15.218 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:15.218 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:15.221 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:15.223 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:15.224 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:15.224 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:15.225 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:15.226 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:15.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:15.233 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:15.235 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:15.237 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:15.238 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.0874ms
2025-06-11 22:27:15.239 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.4912ms
2025-06-11 22:27:15.239 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:15.240 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:15.241 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:15.242 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:15.242 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.8877ms
2025-06-11 22:27:15.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.4179ms
2025-06-11 22:27:16.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:27:16.168 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:16.170 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:16.171 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:27:16.173 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:27:16.175 +07:00 [INF] Executed ViewResult - view Login executed in 2.3969ms.
2025-06-11 22:27:16.176 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 4.1446ms
2025-06-11 22:27:16.177 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:16.178 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:16.179 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.4142ms
2025-06-11 22:27:16.182 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:16.184 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9513ms
2025-06-11 22:27:16.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:16.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:16.205 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:16.208 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:16.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:16.210 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:16.210 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:16.211 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:16.214 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:16.217 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:16.219 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:16.221 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:16.222 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.7368ms
2025-06-11 22:27:16.223 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.9831ms
2025-06-11 22:27:16.224 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:16.225 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:16.225 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:16.226 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:16.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.8902ms
2025-06-11 22:27:16.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 24.387ms
2025-06-11 22:27:17.608 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 295
2025-06-11 22:27:17.612 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:27:17.613 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:27:17.614 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:17.615 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:27:17.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:27:17.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:27:17.684 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:27:17.687 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:17.690 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:27:17.692 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:27:17.694 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:27:17.695 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:27:17.696 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 79.3154ms
2025-06-11 22:27:17.697 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:27:17.698 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 89.5945ms
2025-06-11 22:27:17.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:27:17.703 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:17.704 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:17.705 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:27:17.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:27:17.712 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:17.713 +07:00 [INF] Executed ViewResult - view Index executed in 1.6484ms.
2025-06-11 22:27:17.714 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.8609ms
2025-06-11 22:27:17.715 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:27:17.716 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:17.717 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.8821ms
2025-06-11 22:27:17.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:17.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:17.723 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9237ms
2025-06-11 22:27:17.728 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6054ms
2025-06-11 22:27:17.753 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:17.753 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:17.755 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:17.757 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:17.759 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:17.759 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:17.760 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:17.761 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:17.767 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:17.772 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:17.773 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:17.776 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:17.778 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 13.921ms
2025-06-11 22:27:17.779 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.5335ms
2025-06-11 22:27:17.780 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:17.782 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:17.783 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:17.784 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:17.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.9298ms
2025-06-11 22:27:17.786 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 33.0129ms
2025-06-11 22:27:19.566 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:27:19.571 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:19.573 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:19.577 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:19.583 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:19.591 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:19.596 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:27:19.615 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:27:19.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:27:19.632 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:27:19.650 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:27:19.687 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:27:19.693 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:19.714 +07:00 [INF] Executed ViewResult - view Index executed in 20.7408ms.
2025-06-11 22:27:19.716 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 138.0228ms
2025-06-11 22:27:19.718 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:19.720 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:19.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 154.9961ms
2025-06-11 22:27:19.725 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:19.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:19.728 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0434ms
2025-06-11 22:27:19.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8484ms
2025-06-11 22:27:19.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:19.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:19.809 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:19.811 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:19.812 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:19.813 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:19.814 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:19.815 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:19.820 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:19.825 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:19.828 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:19.830 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:19.831 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.2269ms
2025-06-11 22:27:19.833 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.3517ms
2025-06-11 22:27:19.834 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:19.835 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:19.837 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:19.838 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:19.839 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 33.0685ms
2025-06-11 22:27:19.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 33.786ms
2025-06-11 22:27:20.871 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:27:20.875 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:20.877 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:20.878 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:20.884 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:20.890 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:27:20.894 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.904 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.907 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.919 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.922 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:20.924 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:27:20.926 +07:00 [INF] Executed ViewResult - view Users executed in 2.3532ms.
2025-06-11 22:27:20.928 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 47.6535ms
2025-06-11 22:27:20.929 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:20.931 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:20.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 61.0448ms
2025-06-11 22:27:20.935 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:20.936 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:20.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.1558ms
2025-06-11 22:27:20.947 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.1116ms
2025-06-11 22:27:20.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:20.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:20.978 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:20.980 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:20.982 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:20.982 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:20.983 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:20.984 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:20.990 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:20.995 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:20.996 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:20.996 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.8882ms
2025-06-11 22:27:20.998 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:20.999 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:21.000 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.8328ms
2025-06-11 22:27:21.001 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:21.002 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:21.003 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.9059ms
2025-06-11 22:27:21.004 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:21.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 32.0094ms
2025-06-11 22:27:22.110 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:27:22.114 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:22.115 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:22.116 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:22.121 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:22.125 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:22.129 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:27:22.133 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:27:22.137 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:27:22.142 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:27:22.151 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:27:22.158 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:27:22.160 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:22.162 +07:00 [INF] Executed ViewResult - view Index executed in 2.3091ms.
2025-06-11 22:27:22.164 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 46.5426ms
2025-06-11 22:27:22.165 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:22.167 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:22.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 58.0881ms
2025-06-11 22:27:22.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:22.174 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.487ms
2025-06-11 22:27:22.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:22.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:22.231 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:22.235 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:22.236 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:22.236 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:22.238 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:22.239 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:22.244 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:22.249 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:22.249 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:22.250 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.1641ms
2025-06-11 22:27:22.253 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:22.253 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:22.255 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.6128ms
2025-06-11 22:27:22.255 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:22.256 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:22.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.1286ms
2025-06-11 22:27:22.258 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:22.261 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 33.2346ms
2025-06-11 22:27:22.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:27:22.979 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:22.981 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:27:22.985 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:22.992 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:23.008 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:27:23.012 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:27:23.032 +07:00 [INF] Executed ViewResult - view Homestays executed in 19.9799ms.
2025-06-11 22:27:23.035 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 47.9704ms
2025-06-11 22:27:23.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:27:23.038 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:23.039 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 64.2614ms
2025-06-11 22:27:23.040 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:23.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:23.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9953ms
2025-06-11 22:27:23.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7123ms
2025-06-11 22:27:24.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - null null
2025-06-11 22:27:24.246 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:24.247 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:27:24.253 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:24.281 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:27:24.308 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:27:24.313 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 22:27:24.321 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 8.8052ms.
2025-06-11 22:27:24.323 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 67.8571ms
2025-06-11 22:27:24.324 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:27:24.326 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:24.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - 200 null text/html; charset=utf-8 85.9959ms
2025-06-11 22:27:24.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:24.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:24.345 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.2665ms
2025-06-11 22:27:24.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.221ms
2025-06-11 22:27:49.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:27:49.053 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:49.061 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:49.065 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:49.097 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:49.118 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:49.131 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:27:49.144 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:27:49.151 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:27:49.163 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:27:49.185 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:27:49.191 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:27:49.194 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:49.196 +07:00 [INF] Executed ViewResult - view Index executed in 2.1139ms.
2025-06-11 22:27:49.197 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 123.3024ms
2025-06-11 22:27:49.198 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:49.199 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:49.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 153.8273ms
2025-06-11 22:27:49.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:49.206 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4788ms
2025-06-11 22:27:49.209 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:49.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2497ms
2025-06-11 22:27:49.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:49.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:49.292 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:49.295 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:49.296 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:49.297 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:49.298 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:49.299 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:49.304 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:49.312 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:49.313 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:49.313 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.7931ms
2025-06-11 22:27:49.316 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:49.316 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:49.317 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.657ms
2025-06-11 22:27:49.318 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:49.319 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:49.320 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 31.0523ms
2025-06-11 22:27:49.321 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:49.324 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 35.0852ms
2025-06-11 22:27:51.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:27:51.537 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:51.538 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:51.539 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:51.542 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:51.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:27:51.549 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.552 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.556 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.559 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.564 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.566 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:27:51.568 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:27:51.569 +07:00 [INF] Executed ViewResult - view Users executed in 1.4858ms.
2025-06-11 22:27:51.570 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 29.6789ms
2025-06-11 22:27:51.571 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:27:51.572 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:51.573 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 39.2982ms
2025-06-11 22:27:51.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:51.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:51.578 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9802ms
2025-06-11 22:27:51.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5112ms
2025-06-11 22:27:51.612 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:51.613 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:51.615 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:51.618 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:51.619 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:51.619 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:51.620 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:51.621 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:51.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:51.629 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:51.630 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:51.632 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:51.633 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.4754ms
2025-06-11 22:27:51.634 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.8736ms
2025-06-11 22:27:51.635 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:51.636 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:51.637 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:51.638 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:51.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.4092ms
2025-06-11 22:27:51.639 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.3939ms
2025-06-11 22:27:54.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:27:54.394 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:54.395 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:54.396 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:54.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:27:54.402 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:54.404 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:27:54.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:27:54.408 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:27:54.410 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:27:54.413 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:27:54.416 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:27:54.417 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:27:54.419 +07:00 [INF] Executed ViewResult - view Index executed in 1.4681ms.
2025-06-11 22:27:54.420 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 22.2459ms
2025-06-11 22:27:54.421 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:27:54.422 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:54.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 32.6192ms
2025-06-11 22:27:54.426 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:54.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7225ms
2025-06-11 22:27:54.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:27:54.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:27:54.471 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:54.473 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:54.474 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:54.475 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:54.476 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:54.476 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:27:54.480 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:27:54.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:27:54.485 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:54.486 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:27:54.487 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.9209ms
2025-06-11 22:27:54.488 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 6.3911ms
2025-06-11 22:27:54.489 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:27:54.490 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:27:54.491 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:54.492 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:54.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.1181ms
2025-06-11 22:27:54.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 24.7412ms
2025-06-11 22:27:55.413 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:27:55.417 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:55.418 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:27:55.419 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:55.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:27:55.430 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:27:55.433 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:27:55.434 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.7118ms.
2025-06-11 22:27:55.435 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 15.0624ms
2025-06-11 22:27:55.436 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:27:55.438 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:55.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 25.204ms
2025-06-11 22:27:55.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:55.443 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:55.444 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9927ms
2025-06-11 22:27:55.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3184ms
2025-06-11 22:27:56.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - null null
2025-06-11 22:27:56.504 +07:00 [INF] No cached response available for this request.
2025-06-11 22:27:56.506 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:27:56.508 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:27:56.527 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:27:56.546 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 22:27:56.550 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 4.1076ms.
2025-06-11 22:27:56.551 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 41.1114ms
2025-06-11 22:27:56.553 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:27:56.554 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:27:56.555 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - 200 null text/html; charset=utf-8 55.1473ms
2025-06-11 22:27:56.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:27:56.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:27:56.572 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2755ms
2025-06-11 22:27:56.578 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2436ms
2025-06-11 22:28:18.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:28:18.545 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:18.550 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:18.554 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:18.560 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:28:18.580 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:28:18.587 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:28:18.598 +07:00 [INF] Executed ViewResult - view Bookings executed in 11.8093ms.
2025-06-11 22:28:18.599 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 44.009ms
2025-06-11 22:28:18.601 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:18.602 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:18.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 61.6343ms
2025-06-11 22:28:18.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:18.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:18.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6784ms
2025-06-11 22:28:18.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3191ms
2025-06-11 22:28:20.305 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:28:20.308 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:20.310 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:28:20.313 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:28:20.333 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:28:20.337 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:28:20.338 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 24.1909ms
2025-06-11 22:28:20.339 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:28:20.340 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:20.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 35.6849ms
2025-06-11 22:28:23.423 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:28:23.426 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:23.427 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:23.428 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:23.432 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:28:23.435 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:28:23.440 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:28:23.442 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8228ms.
2025-06-11 22:28:23.443 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.9614ms
2025-06-11 22:28:23.444 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:23.445 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:23.446 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 23.2166ms
2025-06-11 22:28:23.451 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:23.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5922ms
2025-06-11 22:28:28.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings?page=2&status= - null null
2025-06-11 22:28:28.969 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:28.970 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:28.971 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:28.982 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:28:28.999 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:28:29.001 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:28:29.004 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.4717ms.
2025-06-11 22:28:29.005 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 32.4705ms
2025-06-11 22:28:29.006 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:29.007 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:29.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings?page=2&status= - 200 null text/html; charset=utf-8 42.5044ms
2025-06-11 22:28:29.010 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:29.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:29.017 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5399ms
2025-06-11 22:28:29.017 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4753ms
2025-06-11 22:28:31.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/8 - null null
2025-06-11 22:28:31.129 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:31.132 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:28:31.133 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:28:31.147 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:28:31.149 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:28:31.149 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 15.4993ms
2025-06-11 22:28:31.150 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:28:31.151 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:31.152 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/8 - 404 0 null 26.4301ms
2025-06-11 22:28:32.315 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings?page=2&status= - null null
2025-06-11 22:28:32.318 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:32.320 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:32.321 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:32.332 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:28:32.341 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:28:32.343 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:28:32.345 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6226ms.
2025-06-11 22:28:32.346 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 24.1755ms
2025-06-11 22:28:32.347 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:32.348 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:32.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings?page=2&status= - 200 null text/html; charset=utf-8 34.4008ms
2025-06-11 22:28:32.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:32.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2753ms
2025-06-11 22:28:32.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:28:32.734 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:32.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:32.736 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:32.738 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:28:32.747 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:28:32.751 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:28:32.752 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8011ms.
2025-06-11 22:28:32.754 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 16.4616ms
2025-06-11 22:28:32.755 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:28:32.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:32.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 27.0269ms
2025-06-11 22:28:32.760 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:32.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3806ms
2025-06-11 22:28:37.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 22:28:37.491 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:37.493 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:28:37.496 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:28:37.504 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:28:37.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:28:37.514 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:28:37.519 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:28:37.530 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 22:28:37.552 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] IN (2, 3))
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] IN (2, 3)) DESC
2025-06-11 22:28:37.555 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 22:28:37.577 +07:00 [INF] Executed ViewResult - view Reports executed in 21.6221ms.
2025-06-11 22:28:37.579 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 81.2143ms
2025-06-11 22:28:37.581 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:28:37.582 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:37.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 95.125ms
2025-06-11 22:28:37.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:37.585 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:37.591 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0458ms
2025-06-11 22:28:37.591 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7962ms
2025-06-11 22:28:38.717 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:28:38.721 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:38.722 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:28:38.725 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 22:28:38.733 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 22:28:38.755 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 22:28:38.763 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 22:28:38.778 +07:00 [INF] Executed ViewResult - view AllReviews executed in 15.4491ms.
2025-06-11 22:28:38.780 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 53.0581ms
2025-06-11 22:28:38.781 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:28:38.782 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:38.783 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 65.9316ms
2025-06-11 22:28:38.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:38.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:38.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5568ms
2025-06-11 22:28:38.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7127ms
2025-06-11 22:28:39.968 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:28:39.972 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:39.973 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:28:39.975 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:28:39.977 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:28:39.982 +07:00 [INF] Executed ViewResult - view About executed in 5.4358ms.
2025-06-11 22:28:39.983 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 6.7828ms
2025-06-11 22:28:39.984 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:28:39.985 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:39.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 17.9361ms
2025-06-11 22:28:39.993 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:39.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:39.996 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6312ms
2025-06-11 22:28:40.001 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7166ms
2025-06-11 22:28:40.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:28:40.801 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:40.802 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:28:40.806 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:28:40.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:28:40.828 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:28:40.839 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:28:40.846 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:28:40.848 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:28:40.851 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:28:40.854 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:28:40.860 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:28:40.863 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:28:40.887 +07:00 [INF] Executed ViewResult - view Index executed in 24.4813ms.
2025-06-11 22:28:40.889 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 81.611ms
2025-06-11 22:28:40.890 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:28:40.891 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:40.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 94.7111ms
2025-06-11 22:28:40.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:40.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:40.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2048ms
2025-06-11 22:28:40.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6179ms
2025-06-11 22:28:40.936 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:28:40.937 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:28:40.939 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:40.941 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:40.942 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:40.943 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:28:40.943 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:28:40.944 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:28:40.950 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:28:40.954 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:28:40.955 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:28:40.955 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.8529ms
2025-06-11 22:28:40.957 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:28:40.958 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:40.959 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.9022ms
2025-06-11 22:28:40.960 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:40.961 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:28:40.961 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.9555ms
2025-06-11 22:28:40.962 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:40.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.861ms
2025-06-11 22:28:41.447 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:28:41.451 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:41.453 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:41.453 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:28:41.456 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:28:41.460 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:28:41.462 +07:00 [INF] Executed ViewResult - view Index executed in 1.7656ms.
2025-06-11 22:28:41.463 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.3793ms
2025-06-11 22:28:41.464 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:41.465 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:41.466 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.8113ms
2025-06-11 22:28:41.469 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:41.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:41.471 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9585ms
2025-06-11 22:28:41.477 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5242ms
2025-06-11 22:28:41.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:28:41.522 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:28:41.525 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:41.527 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:41.528 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:41.529 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:28:41.530 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:28:41.531 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:28:41.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:28:41.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:28:41.539 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:28:41.541 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:28:41.542 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.2897ms
2025-06-11 22:28:41.543 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.2106ms
2025-06-11 22:28:41.544 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:41.545 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:28:41.546 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:41.547 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:41.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.3591ms
2025-06-11 22:28:41.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.9574ms
2025-06-11 22:28:50.447 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 22:28:50.450 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:28:50.451 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:28:50.452 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:28:50.455 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:28:50.460 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 22:28:50.461 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 22:28:50.462 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 22:28:50.463 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:28:50.464 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.1865ms
2025-06-11 22:28:50.465 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:28:50.466 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.9832ms
2025-06-11 22:28:50.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:28:50.471 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:50.472 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:50.473 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:28:50.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:28:50.480 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:28:50.481 +07:00 [INF] Executed ViewResult - view Index executed in 1.5092ms.
2025-06-11 22:28:50.482 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.8118ms
2025-06-11 22:28:50.483 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:50.484 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:50.485 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.7309ms
2025-06-11 22:28:50.489 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:50.489 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:50.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3445ms
2025-06-11 22:28:50.497 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.759ms
2025-06-11 22:28:51.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:28:51.706 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:51.707 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:28:51.708 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:28:51.710 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:28:51.712 +07:00 [INF] Executed ViewResult - view Login executed in 1.8955ms.
2025-06-11 22:28:51.713 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.3013ms
2025-06-11 22:28:51.714 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:28:51.715 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:51.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.0445ms
2025-06-11 22:28:51.719 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:51.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.902ms
2025-06-11 22:28:51.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:51.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.0312ms
2025-06-11 22:28:54.011 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 22:28:54.014 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:28:54.015 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:28:54.016 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:28:54.017 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:28:54.023 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:28:54.026 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:28:54.094 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:28:54.097 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:28:54.100 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:28:54.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:28:54.104 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:28:54.105 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:28:54.106 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 88.0738ms
2025-06-11 22:28:54.107 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:28:54.108 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 97.4951ms
2025-06-11 22:28:54.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:28:54.114 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:54.114 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:54.115 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:28:54.118 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:28:54.122 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:28:54.124 +07:00 [INF] Executed ViewResult - view Index executed in 1.8103ms.
2025-06-11 22:28:54.125 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.8784ms
2025-06-11 22:28:54.127 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:28:54.128 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:54.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.7528ms
2025-06-11 22:28:54.131 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:28:54.131 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:28:54.137 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9258ms
2025-06-11 22:28:54.138 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1358ms
2025-06-11 22:28:54.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:28:54.170 +07:00 [INF] No cached response available for this request.
2025-06-11 22:28:54.171 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:54.173 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:28:54.177 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:28:54.181 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:28:54.182 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.6549ms
2025-06-11 22:28:54.184 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:28:54.185 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:28:54.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.2608ms
2025-06-11 22:29:03.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:29:03.130 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:03.132 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:29:03.133 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:29:03.134 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:29:03.136 +07:00 [INF] Executed ViewResult - view About executed in 1.9226ms.
2025-06-11 22:29:03.138 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.165ms
2025-06-11 22:29:03.139 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:29:03.139 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:03.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.6621ms
2025-06-11 22:29:03.147 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:03.147 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:03.149 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6043ms
2025-06-11 22:29:03.156 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4552ms
2025-06-11 22:29:03.885 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 22:29:03.888 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:03.890 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:29:03.891 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 22:29:03.895 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 22:29:03.898 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 22:29:03.903 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 22:29:03.905 +07:00 [INF] Executed ViewResult - view AllReviews executed in 2.0552ms.
2025-06-11 22:29:03.906 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 13.6413ms
2025-06-11 22:29:03.907 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 22:29:03.908 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:03.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 24.8675ms
2025-06-11 22:29:03.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:03.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:03.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4465ms
2025-06-11 22:29:03.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.7583ms
2025-06-11 22:29:04.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:29:04.681 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:04.682 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:29:04.683 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:29:04.685 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:29:04.687 +07:00 [INF] Executed ViewResult - view About executed in 1.3811ms.
2025-06-11 22:29:04.688 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.8381ms
2025-06-11 22:29:04.689 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:29:04.690 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:04.691 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.7849ms
2025-06-11 22:29:04.699 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:04.701 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:04.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.329ms
2025-06-11 22:29:04.709 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.685ms
2025-06-11 22:29:05.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:29:05.243 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:05.244 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:29:05.245 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:29:05.248 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:29:05.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:29:05.255 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:29:05.258 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:29:05.260 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:29:05.262 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:29:05.264 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:29:05.266 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:29:05.269 +07:00 [INF] Executed ViewResult - view Index executed in 2.7518ms.
2025-06-11 22:29:05.270 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 23.8552ms
2025-06-11 22:29:05.271 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:29:05.272 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:05.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 33.8633ms
2025-06-11 22:29:05.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:05.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:05.281 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5897ms
2025-06-11 22:29:05.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8688ms
2025-06-11 22:29:05.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:05.304 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:05.305 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:05.306 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:05.309 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:05.312 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:05.313 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.8391ms
2025-06-11 22:29:05.314 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:05.315 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:05.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.0247ms
2025-06-11 22:29:07.308 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 22:29:07.313 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:29:07.313 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:29:07.314 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:29:07.315 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:29:07.317 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 22:29:07.318 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 22:29:07.319 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 22:29:07.320 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:29:07.320 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 3.8253ms
2025-06-11 22:29:07.321 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:29:07.322 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 14.509ms
2025-06-11 22:29:07.325 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:29:07.327 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:07.328 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:29:07.329 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:29:07.331 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:29:07.336 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:29:07.337 +07:00 [INF] Executed ViewResult - view Index executed in 1.4916ms.
2025-06-11 22:29:07.338 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.0838ms
2025-06-11 22:29:07.339 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:29:07.340 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:07.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 16.2108ms
2025-06-11 22:29:07.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:07.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:07.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3468ms
2025-06-11 22:29:07.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6348ms
2025-06-11 22:29:09.718 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:29:09.722 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:09.723 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:29:09.724 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:29:09.726 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:29:09.727 +07:00 [INF] Executed ViewResult - view Login executed in 1.6262ms.
2025-06-11 22:29:09.729 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.2358ms
2025-06-11 22:29:09.730 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:29:09.731 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:09.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.6106ms
2025-06-11 22:29:09.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:09.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:09.737 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1104ms
2025-06-11 22:29:09.743 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9272ms
2025-06-11 22:29:11.973 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 22:29:11.977 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:29:11.977 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:29:11.978 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:29:11.979 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:29:11.982 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:29:11.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:29:12.049 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:29:12.052 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:29:12.055 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:29:12.057 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:29:12.059 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:29:12.060 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:29:12.061 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 80.5506ms
2025-06-11 22:29:12.062 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:29:12.063 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 89.8514ms
2025-06-11 22:29:12.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:29:12.069 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:12.070 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:29:12.071 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:29:12.073 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:29:12.077 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:29:12.079 +07:00 [INF] Executed ViewResult - view Index executed in 2.1603ms.
2025-06-11 22:29:12.080 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.117ms
2025-06-11 22:29:12.081 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:29:12.083 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:12.084 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.6668ms
2025-06-11 22:29:12.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:12.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:12.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0362ms
2025-06-11 22:29:12.095 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3504ms
2025-06-11 22:29:12.104 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:12.106 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:12.107 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:12.108 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:12.112 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:12.115 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:12.117 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.8693ms
2025-06-11 22:29:12.118 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:12.119 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:12.120 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.0709ms
2025-06-11 22:29:22.151 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 22:29:22.154 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:22.155 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:29:22.158 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:22.168 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:22.186 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:29:22.208 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:22.222 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:29:22.231 +07:00 [INF] Executed ViewResult - view Bookings executed in 9.8917ms.
2025-06-11 22:29:22.233 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 73.2929ms
2025-06-11 22:29:22.234 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:29:22.235 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:22.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 84.9053ms
2025-06-11 22:29:22.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:22.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:22.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.693ms
2025-06-11 22:29:22.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6176ms
2025-06-11 22:29:22.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:22.267 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:22.268 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:22.269 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:22.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:22.276 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:22.277 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.1216ms
2025-06-11 22:29:22.278 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:22.279 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:22.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.2966ms
2025-06-11 22:29:31.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 22:29:31.673 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:31.675 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 22:29:31.678 +07:00 [INF] Route matched with {action = "Create", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:29:31.682 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:29:31.687 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 22:29:31.754 +07:00 [INF] Executed ViewResult - view Create executed in 67.5895ms.
2025-06-11 22:29:31.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:31.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:31.758 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Create (WebHS) in 77.881ms
2025-06-11 22:29:31.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6145ms
2025-06-11 22:29:31.764 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Create (WebHS)'
2025-06-11 22:29:31.766 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2883ms
2025-06-11 22:29:31.769 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:31.771 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 200 null text/html; charset=utf-8 101.7084ms
2025-06-11 22:29:32.988 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:29:32.991 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:32.994 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:32.997 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:33.007 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:29:33.018 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:33.023 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:33.036 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:33.049 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:29:33.059 +07:00 [INF] Executed ViewResult - view Dashboard executed in 9.6465ms.
2025-06-11 22:29:33.061 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 61.9768ms
2025-06-11 22:29:33.062 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:33.063 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:33.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 76.1568ms
2025-06-11 22:29:33.067 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:33.068 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:33.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6142ms
2025-06-11 22:29:33.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7068ms
2025-06-11 22:29:33.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:33.114 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:33.115 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:33.116 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:33.120 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:33.123 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:33.124 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.7315ms
2025-06-11 22:29:33.125 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:33.126 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:33.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.1078ms
2025-06-11 22:29:35.693 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:29:35.697 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:35.699 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:35.703 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:35.712 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:35.734 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:35.746 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:29:35.748 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8141ms.
2025-06-11 22:29:35.749 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 45.1949ms
2025-06-11 22:29:35.751 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:35.752 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:35.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 59.24ms
2025-06-11 22:29:35.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:35.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:35.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0586ms
2025-06-11 22:29:35.766 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6737ms
2025-06-11 22:29:35.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:35.797 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:35.798 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:35.799 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:35.807 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:35.810 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:35.811 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5379ms
2025-06-11 22:29:35.813 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:35.814 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:35.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.2511ms
2025-06-11 22:29:39.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:29:39.658 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:39.659 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:39.660 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:39.674 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:39.678 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:39.692 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:39.699 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:29:39.701 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.7297ms.
2025-06-11 22:29:39.702 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 41.1321ms
2025-06-11 22:29:39.703 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:39.704 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:39.705 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 50.7941ms
2025-06-11 22:29:39.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:39.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8474ms
2025-06-11 22:29:39.754 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:39.757 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:39.758 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:39.759 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:39.764 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:39.766 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:39.767 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.9565ms
2025-06-11 22:29:39.768 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:39.769 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:39.770 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.7983ms
2025-06-11 22:29:41.236 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:29:41.240 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:41.241 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:41.242 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:41.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:41.249 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:41.257 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:29:41.259 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6927ms.
2025-06-11 22:29:41.260 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 17.0332ms
2025-06-11 22:29:41.261 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:41.262 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:41.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 26.9939ms
2025-06-11 22:29:41.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:41.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:41.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8911ms
2025-06-11 22:29:41.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.466ms
2025-06-11 22:29:41.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:41.295 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:41.296 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:41.297 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:41.300 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:41.304 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:41.305 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1119ms
2025-06-11 22:29:41.306 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:41.307 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:41.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.438ms
2025-06-11 22:29:43.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:29:43.835 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:43.837 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:43.837 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:43.840 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:43.844 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:43.847 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:43.856 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:29:43.858 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.4449ms.
2025-06-11 22:29:43.860 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.8087ms
2025-06-11 22:29:43.861 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:43.862 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:43.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.8766ms
2025-06-11 22:29:43.866 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:43.868 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0744ms
2025-06-11 22:29:43.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:43.907 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:43.908 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:43.909 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:43.912 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:43.915 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:43.916 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.7195ms
2025-06-11 22:29:43.917 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:43.918 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:43.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.5701ms
2025-06-11 22:29:47.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:29:47.528 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:47.529 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:47.532 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:47.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:47.540 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:29:47.544 +07:00 [INF] Executed ViewResult - view Homestays executed in 5.2082ms.
2025-06-11 22:29:47.545 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 11.9533ms
2025-06-11 22:29:47.546 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:47.547 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:47.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 23.2866ms
2025-06-11 22:29:47.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:47.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:47.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4337ms
2025-06-11 22:29:47.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6465ms
2025-06-11 22:29:48.907 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:29:48.910 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:48.911 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:48.912 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:48.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:48.919 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:48.924 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:48.932 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:29:48.934 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.399ms.
2025-06-11 22:29:48.935 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.2594ms
2025-06-11 22:29:48.936 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:48.937 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:48.938 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.169ms
2025-06-11 22:29:48.941 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:48.943 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9172ms
2025-06-11 22:29:48.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:48.977 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:48.978 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:48.979 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:48.982 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:48.985 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:48.986 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.6767ms
2025-06-11 22:29:48.988 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:48.989 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:48.990 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.2643ms
2025-06-11 22:29:49.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:29:49.929 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:49.930 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:49.931 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:49.935 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:49.938 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:29:49.940 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.7181ms.
2025-06-11 22:29:49.941 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.085ms
2025-06-11 22:29:49.942 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:49.943 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:49.944 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 17.6472ms
2025-06-11 22:29:49.946 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:49.946 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:49.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.2996ms
2025-06-11 22:29:49.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5052ms
2025-06-11 22:29:50.629 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:29:50.633 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:50.635 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:29:50.638 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:29:50.657 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:29:50.682 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:29:50.685 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:29:50.686 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 45.9144ms
2025-06-11 22:29:50.687 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:29:50.688 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:50.689 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 59.8142ms
2025-06-11 22:29:55.586 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:29:55.590 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:55.591 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:29:55.592 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:29:55.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:29:55.598 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:29:55.599 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 5.957ms
2025-06-11 22:29:55.600 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:29:55.602 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:55.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 17.2646ms
2025-06-11 22:29:57.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:29:57.270 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:57.271 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:57.272 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:57.275 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:57.278 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:29:57.280 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.5989ms.
2025-06-11 22:29:57.281 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.8439ms
2025-06-11 22:29:57.282 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:29:57.283 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:57.284 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.5577ms
2025-06-11 22:29:57.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:57.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5726ms
2025-06-11 22:29:58.849 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:29:58.855 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:58.856 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:58.857 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:58.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:29:58.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:58.867 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:58.878 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:29:58.879 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.7578ms.
2025-06-11 22:29:58.881 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 22.6213ms
2025-06-11 22:29:58.882 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:29:58.883 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:58.884 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 34.8772ms
2025-06-11 22:29:58.888 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:58.891 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7727ms
2025-06-11 22:29:58.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:29:58.968 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:58.970 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:58.971 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:29:58.975 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:29:58.978 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:29:58.980 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.4075ms
2025-06-11 22:29:58.981 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:29:58.982 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:58.983 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.8083ms
2025-06-11 22:29:59.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:29:59.961 +07:00 [INF] No cached response available for this request.
2025-06-11 22:29:59.962 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:59.963 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:29:59.965 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:29:59.971 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:29:59.979 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:29:59.980 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.2745ms.
2025-06-11 22:29:59.981 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 17.2975ms
2025-06-11 22:29:59.982 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:29:59.983 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:29:59.984 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 26.8622ms
2025-06-11 22:29:59.987 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:29:59.987 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:29:59.992 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.2786ms
2025-06-11 22:29:59.993 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5244ms
2025-06-11 22:30:00.027 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:30:00.035 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:30:00.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 429 null null 10.2614ms
2025-06-11 22:30:03.207 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:30:03.216 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:30:03.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 429 null null 15.2885ms
2025-06-11 22:30:04.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Create - null null
2025-06-11 22:30:04.807 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 22:30:04.808 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Create - 429 null null 4.3038ms
2025-06-11 22:30:19.903 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:30:21.065 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:30:21.102 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:30:21.115 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:30:21.120 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:30:21.141 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:30:21.163 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:30:21.185 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:30:21.407 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:30:21.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:30:21.451 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:30:21.464 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.519 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.528 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.531 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:21.535 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:30:21.537 +07:00 [INF] Starting data seeding...
2025-06-11 22:30:21.552 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:30:21.555 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:30:21.561 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:30:21.563 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:30:21.568 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:30:21.570 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:30:21.576 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:30:21.578 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:30:21.594 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:30:21.602 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:30:21.604 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:30:21.604 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:30:21.605 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:30:21.606 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:30:21.628 +07:00 [INF] Background Job Service started
2025-06-11 22:30:21.661 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:30:21.679 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:30:21.806 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:30:21.841 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:30:21.847 +07:00 [INF] Hosting environment: Development
2025-06-11 22:30:21.847 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 22:30:22.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:30:22.436 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:22.444 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:30:22.492 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:30:22.508 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:30:22.641 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:30:22.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:30:22.769 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:30:22.866 +07:00 [INF] Executed ViewResult - view Index executed in 98.3214ms.
2025-06-11 22:30:22.870 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 359.6094ms
2025-06-11 22:30:22.872 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:30:22.876 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:22.883 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 624.6718ms
2025-06-11 22:30:22.886 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:22.887 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:22.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7887ms
2025-06-11 22:30:22.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.1596ms
2025-06-11 22:30:24.557 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:30:24.567 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:24.571 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:30:24.579 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:30:24.588 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:30:24.616 +07:00 [INF] Executed ViewResult - view Login executed in 29.0106ms.
2025-06-11 22:30:24.619 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 38.6725ms
2025-06-11 22:30:24.620 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:30:24.622 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:24.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 66.0489ms
2025-06-11 22:30:24.626 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:24.627 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:24.629 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.842ms
2025-06-11 22:30:24.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.8305ms
2025-06-11 22:30:27.049 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 22:30:27.055 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:30:27.056 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:30:27.062 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:30:27.067 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:30:27.090 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:30:27.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:30:27.188 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:30:27.207 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:27.212 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:30:27.219 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:30:27.226 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:30:27.228 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:30:27.229 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 161.3608ms
2025-06-11 22:30:27.230 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:30:27.232 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 182.1187ms
2025-06-11 22:30:27.234 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:30:27.237 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:27.240 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:30:27.242 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:30:27.246 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:30:27.252 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:30:27.259 +07:00 [INF] Executed ViewResult - view Index executed in 7.5365ms.
2025-06-11 22:30:27.261 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.348ms
2025-06-11 22:30:27.262 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:30:27.263 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:27.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 29.6541ms
2025-06-11 22:30:27.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:27.267 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:27.271 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.7966ms
2025-06-11 22:30:27.281 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.3852ms
2025-06-11 22:30:27.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:30:27.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:30:27.302 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:27.305 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:27.315 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:27.320 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:27.321 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:27.328 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:27.344 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:30:27.363 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:30:27.369 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:27.372 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:27.374 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 51.6835ms
2025-06-11 22:30:27.376 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:27.377 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:27.378 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 78.5712ms
2025-06-11 22:30:27.428 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 97.5084ms
2025-06-11 22:30:27.430 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:27.431 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:27.432 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 132.1086ms
2025-06-11 22:30:29.118 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:30:29.122 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:29.124 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:29.130 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:30:29.146 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:30:29.154 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:30:29.159 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.165 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.167 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.169 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.174 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.178 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:29.205 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:30:29.219 +07:00 [INF] Executed ViewResult - view Users executed in 15.2353ms.
2025-06-11 22:30:29.222 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 90.6357ms
2025-06-11 22:30:29.224 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:29.225 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:29.226 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 108.3634ms
2025-06-11 22:30:29.227 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:29.229 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:29.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1157ms
2025-06-11 22:30:29.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5702ms
2025-06-11 22:30:29.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:30:29.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:30:29.264 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:29.267 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:29.269 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:29.269 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:29.270 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:29.271 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:29.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:30:29.279 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:30:29.281 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:29.283 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:29.284 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.16ms
2025-06-11 22:30:29.285 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.445ms
2025-06-11 22:30:29.286 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:29.287 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:29.288 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:29.288 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:29.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.6508ms
2025-06-11 22:30:29.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.258ms
2025-06-11 22:30:30.998 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 22:30:31.002 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:31.005 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:30:31.009 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:30:31.023 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:30:31.027 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:31.032 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:30:31.046 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:30:31.052 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:30:31.076 +07:00 [INF] Executed ViewResult - view UserDetail executed in 24.2493ms.
2025-06-11 22:30:31.078 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 67.5594ms
2025-06-11 22:30:31.079 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:30:31.080 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:31.081 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 200 null text/html; charset=utf-8 82.2693ms
2025-06-11 22:30:31.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:31.083 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:31.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.2327ms
2025-06-11 22:30:31.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4525ms
2025-06-11 22:30:32.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:30:32.744 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:32.745 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:32.746 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:30:32.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:30:32.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:30:32.754 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.760 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.762 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.764 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.767 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.769 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.771 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:32.773 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:30:32.776 +07:00 [INF] Executed ViewResult - view Users executed in 2.6555ms.
2025-06-11 22:30:32.777 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 30.3343ms
2025-06-11 22:30:32.779 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:32.780 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:32.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 43.2508ms
2025-06-11 22:30:32.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:32.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3632ms
2025-06-11 22:30:32.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:30:32.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:30:32.820 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:32.822 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:32.823 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:32.824 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:32.824 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:32.825 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:32.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:30:32.834 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:30:32.834 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:32.836 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:32.837 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.0751ms
2025-06-11 22:30:32.838 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.551ms
2025-06-11 22:30:32.839 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:32.840 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:32.841 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:32.842 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:32.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.8613ms
2025-06-11 22:30:32.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.4458ms
2025-06-11 22:30:37.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - null null
2025-06-11 22:30:37.330 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:37.332 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:30:37.333 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:30:37.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:30:37.341 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:37.343 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:30:37.348 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:30:37.349 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:30:37.351 +07:00 [INF] Executed ViewResult - view UserDetail executed in 2.0697ms.
2025-06-11 22:30:37.353 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 18.8238ms
2025-06-11 22:30:37.354 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:30:37.355 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:37.356 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - 200 null text/html; charset=utf-8 29.3151ms
2025-06-11 22:30:37.359 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:30:37.359 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:37.366 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.0891ms
2025-06-11 22:30:37.367 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4893ms
2025-06-11 22:30:52.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:30:52.914 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:52.916 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:52.917 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:30:52.927 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:30:52.930 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:30:52.934 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.936 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.939 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.941 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.943 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.946 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.948 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:30:52.952 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:30:52.954 +07:00 [INF] Executed ViewResult - view Users executed in 2.0184ms.
2025-06-11 22:30:52.955 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 37.1372ms
2025-06-11 22:30:52.956 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:30:52.957 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:52.958 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 47.3689ms
2025-06-11 22:30:52.961 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:30:52.963 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9344ms
2025-06-11 22:30:52.988 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:30:52.988 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:30:52.990 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:52.992 +07:00 [INF] No cached response available for this request.
2025-06-11 22:30:52.994 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:52.994 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:52.995 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:52.996 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:30:53.004 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:30:53.005 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:30:53.007 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:53.008 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:30:53.009 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.2574ms
2025-06-11 22:30:53.010 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.2483ms
2025-06-11 22:30:53.011 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:30:53.012 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:30:53.013 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:53.013 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:30:53.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.6976ms
2025-06-11 22:30:53.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.5168ms
2025-06-11 22:31:00.886 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - null null
2025-06-11 22:31:00.889 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:00.891 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:00.892 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:00.896 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:00.900 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:00.903 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:00.909 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:00.911 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:00.913 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.7847ms.
2025-06-11 22:31:00.914 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 20.9108ms
2025-06-11 22:31:00.916 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:00.917 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:00.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - 200 null text/html; charset=utf-8 32.1983ms
2025-06-11 22:31:00.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:00.921 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:00.925 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.429ms
2025-06-11 22:31:00.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.2388ms
2025-06-11 22:31:04.269 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:31:04.273 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:04.274 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:04.275 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:04.278 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:31:04.281 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:31:04.284 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.286 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.291 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.293 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.295 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:04.302 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:31:04.304 +07:00 [INF] Executed ViewResult - view Users executed in 1.5569ms.
2025-06-11 22:31:04.305 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 28.7401ms
2025-06-11 22:31:04.306 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:04.307 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:04.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 38.3801ms
2025-06-11 22:31:04.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:04.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3364ms
2025-06-11 22:31:04.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:31:04.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:31:04.351 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:04.353 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:04.355 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:04.356 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:04.357 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:04.358 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:04.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:31:04.369 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:31:04.371 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:04.373 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:04.374 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.813ms
2025-06-11 22:31:04.375 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.9865ms
2025-06-11 22:31:04.376 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:04.377 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:04.377 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:04.378 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:04.379 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 31.0981ms
2025-06-11 22:31:04.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.926ms
2025-06-11 22:31:11.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/809251c8-550a-46ae-b5c3-aaffa53041d5 - null null
2025-06-11 22:31:11.706 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:11.707 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:11.708 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:11.711 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:11.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:11.717 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:11.720 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:11.722 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:11.723 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.4448ms.
2025-06-11 22:31:11.724 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 15.2803ms
2025-06-11 22:31:11.725 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:11.726 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:11.727 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/809251c8-550a-46ae-b5c3-aaffa53041d5 - 200 null text/html; charset=utf-8 25.3409ms
2025-06-11 22:31:11.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:11.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:11.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8901ms
2025-06-11 22:31:11.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.641ms
2025-06-11 22:31:28.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:31:28.378 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:28.379 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:28.380 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:28.382 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:31:28.386 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:31:28.388 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.391 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.393 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.395 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.397 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.399 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.401 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.403 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:28.405 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:31:28.407 +07:00 [INF] Executed ViewResult - view Users executed in 1.8716ms.
2025-06-11 22:31:28.408 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 27.3339ms
2025-06-11 22:31:28.410 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:28.410 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:28.411 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 38.0951ms
2025-06-11 22:31:28.414 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:28.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0663ms
2025-06-11 22:31:28.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:31:28.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:31:28.444 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:28.447 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:28.448 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:28.448 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:28.449 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:28.450 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:28.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:31:28.457 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:31:28.459 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:28.461 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:28.462 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.222ms
2025-06-11 22:31:28.462 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.9525ms
2025-06-11 22:31:28.463 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:28.465 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:28.466 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:28.466 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:28.467 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.7724ms
2025-06-11 22:31:28.468 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.4683ms
2025-06-11 22:31:33.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 22:31:33.913 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:33.914 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:33.915 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:33.918 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:33.923 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:33.925 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:33.927 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:33.929 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:33.930 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.2909ms.
2025-06-11 22:31:33.931 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 14.2833ms
2025-06-11 22:31:33.932 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:33.933 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:33.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 200 null text/html; charset=utf-8 24.6943ms
2025-06-11 22:31:33.936 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:33.937 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:33.942 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8146ms
2025-06-11 22:31:33.942 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.2766ms
2025-06-11 22:31:38.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:31:38.098 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:38.099 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:38.100 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:38.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:31:38.106 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:31:38.108 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.110 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.113 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.115 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.117 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.120 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.123 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.125 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:38.126 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:31:38.128 +07:00 [INF] Executed ViewResult - view Users executed in 1.5471ms.
2025-06-11 22:31:38.129 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 28.0867ms
2025-06-11 22:31:38.130 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:38.131 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:38.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 38.0718ms
2025-06-11 22:31:38.135 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:38.137 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3312ms
2025-06-11 22:31:38.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:31:38.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:31:38.169 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:38.171 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:38.172 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:38.173 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:38.174 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:38.175 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:38.179 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:31:38.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:31:38.184 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:38.186 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:38.187 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.0762ms
2025-06-11 22:31:38.188 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.4984ms
2025-06-11 22:31:38.189 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:38.190 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:38.191 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:38.192 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:38.192 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.8426ms
2025-06-11 22:31:38.193 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.0708ms
2025-06-11 22:31:41.396 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/6a64425a-4abd-447a-8868-e574987d2f5a - null null
2025-06-11 22:31:41.400 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:41.401 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:41.403 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:41.406 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:41.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:41.413 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:41.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:41.422 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:41.424 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.7685ms.
2025-06-11 22:31:41.425 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 20.9935ms
2025-06-11 22:31:41.426 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:41.427 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:41.428 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/6a64425a-4abd-447a-8868-e574987d2f5a - 200 null text/html; charset=utf-8 31.6771ms
2025-06-11 22:31:41.431 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:41.431 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:41.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7156ms
2025-06-11 22:31:41.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9536ms
2025-06-11 22:31:45.181 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:31:45.186 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:45.188 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:45.189 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:45.194 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:31:45.198 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:31:45.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.205 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.208 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.213 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.215 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.218 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:45.223 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:31:45.224 +07:00 [INF] Executed ViewResult - view Users executed in 1.5596ms.
2025-06-11 22:31:45.225 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 34.6146ms
2025-06-11 22:31:45.226 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:45.227 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:45.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 47.0899ms
2025-06-11 22:31:45.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:45.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1521ms
2025-06-11 22:31:45.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:31:45.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:31:45.268 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:45.270 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:45.271 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:45.272 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:45.273 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:45.274 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:45.278 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:31:45.283 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:45.285 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.4071ms
2025-06-11 22:31:45.285 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:31:45.286 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:45.288 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:45.288 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:45.289 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.4613ms
2025-06-11 22:31:45.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.9449ms
2025-06-11 22:31:45.291 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:45.294 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:45.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 29.8805ms
2025-06-11 22:31:47.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/61bf32c2-3b90-4cb3-9200-56deb9019e7d - null null
2025-06-11 22:31:47.311 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:47.312 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:47.313 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:47.318 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:47.321 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:47.325 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:47.331 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:47.333 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:47.335 +07:00 [INF] Executed ViewResult - view UserDetail executed in 2.3706ms.
2025-06-11 22:31:47.336 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 21.8844ms
2025-06-11 22:31:47.337 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:47.338 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:47.339 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/61bf32c2-3b90-4cb3-9200-56deb9019e7d - 200 null text/html; charset=utf-8 31.7145ms
2025-06-11 22:31:47.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:47.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:47.347 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7043ms
2025-06-11 22:31:47.347 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3007ms
2025-06-11 22:31:54.878 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 22:31:54.883 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:54.884 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:54.884 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:54.888 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:31:54.892 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 22:31:54.894 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.897 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.900 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.902 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.904 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.906 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.908 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.911 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:54.912 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 22:31:54.914 +07:00 [INF] Executed ViewResult - view Users executed in 1.4907ms.
2025-06-11 22:31:54.915 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 29.0465ms
2025-06-11 22:31:54.916 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 22:31:54.917 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:54.917 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 39.1704ms
2025-06-11 22:31:54.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:54.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9326ms
2025-06-11 22:31:54.948 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:31:54.948 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:31:54.950 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:54.952 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:54.954 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:54.955 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:54.955 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:54.956 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:31:54.960 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:31:54.964 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:54.964 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:31:54.965 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.6869ms
2025-06-11 22:31:54.967 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType33`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:31:54.968 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:31:54.968 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.222ms
2025-06-11 22:31:54.969 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:54.970 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:31:54.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.1892ms
2025-06-11 22:31:54.972 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:54.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.4063ms
2025-06-11 22:31:57.636 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - null null
2025-06-11 22:31:57.640 +07:00 [INF] No cached response available for this request.
2025-06-11 22:31:57.641 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:57.642 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:31:57.646 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:31:57.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:31:57.653 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 22:31:57.658 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:31:57.660 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 22:31:57.662 +07:00 [INF] Executed ViewResult - view UserDetail executed in 1.381ms.
2025-06-11 22:31:57.663 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 19.7186ms
2025-06-11 22:31:57.665 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 22:31:57.666 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:31:57.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/b29da83a-69f8-442a-a756-b16470ea4ed7 - 200 null text/html; charset=utf-8 30.7748ms
2025-06-11 22:31:57.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:31:57.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:31:57.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0153ms
2025-06-11 22:31:57.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9469ms
2025-06-11 22:32:38.990 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:32:39.000 +07:00 [INF] No cached response available for this request.
2025-06-11 22:32:39.002 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:32:39.005 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:32:39.012 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:32:39.028 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:32:39.034 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:32:39.055 +07:00 [INF] Executed ViewResult - view Homestays executed in 21.3401ms.
2025-06-11 22:32:39.057 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 50.5883ms
2025-06-11 22:32:39.058 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:32:39.060 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:32:39.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 70.7278ms
2025-06-11 22:32:39.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:32:39.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:32:39.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.6099ms
2025-06-11 22:32:39.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.1827ms
2025-06-11 22:32:40.506 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - null null
2025-06-11 22:32:40.511 +07:00 [INF] No cached response available for this request.
2025-06-11 22:32:40.512 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:32:40.518 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:32:40.544 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:32:40.565 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:32:40.571 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 22:32:40.576 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 5.9538ms.
2025-06-11 22:32:40.578 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 57.2481ms
2025-06-11 22:32:40.579 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:32:40.580 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:32:40.581 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - 200 null text/html; charset=utf-8 75.3027ms
2025-06-11 22:32:40.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:32:40.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:32:40.596 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5438ms
2025-06-11 22:32:40.604 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.9394ms
2025-06-11 22:32:52.251 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - null null
2025-06-11 22:32:52.256 +07:00 [INF] No cached response available for this request.
2025-06-11 22:32:52.257 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:32:52.259 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:32:52.280 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:32:52.298 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 22:32:52.301 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 3.2531ms.
2025-06-11 22:32:52.303 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 41.8552ms
2025-06-11 22:32:52.304 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:32:52.305 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:32:52.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - 200 null text/html; charset=utf-8 54.4877ms
2025-06-11 22:32:52.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:32:52.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:32:52.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9799ms
2025-06-11 22:32:52.333 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7418ms
2025-06-11 22:33:01.885 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 22:33:01.889 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:01.890 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:33:01.891 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:33:01.894 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 22:33:01.899 +07:00 [INF] Executed ViewResult - view About executed in 5.4326ms.
2025-06-11 22:33:01.900 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 6.9009ms
2025-06-11 22:33:01.901 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 22:33:01.902 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:01.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 17.7448ms
2025-06-11 22:33:01.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:33:01.910 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:33:01.912 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0838ms
2025-06-11 22:33:01.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4175ms
2025-06-11 22:33:03.636 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:33:03.640 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:03.641 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:03.646 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:33:03.659 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:33:03.680 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:33:03.685 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:33:03.695 +07:00 [INF] Executed ViewResult - view Bookings executed in 10.8185ms.
2025-06-11 22:33:03.698 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 50.1757ms
2025-06-11 22:33:03.699 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:03.700 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:03.701 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 64.405ms
2025-06-11 22:33:03.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:33:03.703 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:33:03.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0904ms
2025-06-11 22:33:03.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.742ms
2025-06-11 22:33:05.078 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:33:05.082 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:05.083 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:33:05.086 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:33:05.107 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:33:05.113 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:33:05.114 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 25.8538ms
2025-06-11 22:33:05.115 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:33:05.116 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:05.116 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 38.0179ms
2025-06-11 22:33:08.815 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:33:08.819 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:08.821 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:08.822 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:33:08.825 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:33:08.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:33:08.833 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:33:08.835 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8292ms.
2025-06-11 22:33:08.836 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.5923ms
2025-06-11 22:33:08.837 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:08.838 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:08.839 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 23.8066ms
2025-06-11 22:33:08.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:33:08.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5741ms
2025-06-11 22:33:39.213 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:33:39.217 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:39.223 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:33:39.223 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:33:39.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:33:39.230 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:33:39.231 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 6.5984ms
2025-06-11 22:33:39.232 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:33:39.233 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:39.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 21.0469ms
2025-06-11 22:33:42.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:33:42.091 +07:00 [INF] No cached response available for this request.
2025-06-11 22:33:42.092 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:42.093 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:33:42.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:33:42.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:33:42.104 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:33:42.106 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.9385ms.
2025-06-11 22:33:42.107 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.4607ms
2025-06-11 22:33:42.108 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:33:42.109 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:33:42.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 23.2981ms
2025-06-11 22:33:42.115 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:33:42.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6945ms
2025-06-11 22:34:56.375 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 22:34:56.387 +07:00 [INF] No cached response available for this request.
2025-06-11 22:34:56.388 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:34:56.391 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:34:56.407 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:34:56.412 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:34:56.428 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 22:34:56.435 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 22:34:56.447 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 22:34:56.472 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] IN (2, 3))
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] IN (2, 3)) DESC
2025-06-11 22:34:56.476 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 22:34:56.499 +07:00 [INF] Executed ViewResult - view Reports executed in 23.9799ms.
2025-06-11 22:34:56.501 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 107.8916ms
2025-06-11 22:34:56.502 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 22:34:56.503 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:34:56.503 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 127.9896ms
2025-06-11 22:34:56.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:34:56.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:34:56.512 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5285ms
2025-06-11 22:34:56.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.3585ms
2025-06-11 22:34:57.632 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 22:34:57.636 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:34:57.636 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:34:57.638 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:34:57.641 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:34:57.645 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 22:34:57.647 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 22:34:57.648 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 22:34:57.649 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:34:57.650 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 7.084ms
2025-06-11 22:34:57.651 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:34:57.651 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 19.9473ms
2025-06-11 22:34:57.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:34:57.657 +07:00 [INF] No cached response available for this request.
2025-06-11 22:34:57.658 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:34:57.659 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:34:57.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:34:57.666 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:34:57.668 +07:00 [INF] Executed ViewResult - view Index executed in 1.9508ms.
2025-06-11 22:34:57.669 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.5122ms
2025-06-11 22:34:57.670 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:34:57.671 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:34:57.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.8675ms
2025-06-11 22:34:57.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:34:57.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:34:57.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4952ms
2025-06-11 22:34:57.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9318ms
2025-06-11 22:34:58.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:34:58.960 +07:00 [INF] No cached response available for this request.
2025-06-11 22:34:58.961 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:34:58.962 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:34:58.964 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:34:58.967 +07:00 [INF] Executed ViewResult - view Login executed in 2.4936ms.
2025-06-11 22:34:58.968 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.8627ms
2025-06-11 22:34:58.969 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:34:58.970 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:34:58.970 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.4884ms
2025-06-11 22:34:58.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:34:58.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0452ms
2025-06-11 22:34:58.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:34:58.984 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7381ms
2025-06-11 22:35:00.994 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 22:35:00.997 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:35:00.998 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:35:00.999 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:35:01.000 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:35:01.005 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:35:01.009 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:35:01.073 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:35:01.076 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:35:01.078 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:35:01.081 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:35:01.083 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:35:01.084 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:35:01.085 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 83.9812ms
2025-06-11 22:35:01.086 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:35:01.087 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 92.9896ms
2025-06-11 22:35:01.090 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:35:01.093 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:01.094 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:35:01.095 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:35:01.098 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:35:01.102 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:35:01.106 +07:00 [INF] Executed ViewResult - view Index executed in 3.1874ms.
2025-06-11 22:35:01.107 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.5634ms
2025-06-11 22:35:01.108 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:35:01.109 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:01.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 20.442ms
2025-06-11 22:35:01.113 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:01.113 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:01.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2416ms
2025-06-11 22:35:01.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1278ms
2025-06-11 22:35:01.147 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:01.150 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:01.151 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:01.152 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:01.157 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:01.160 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:01.161 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.5597ms
2025-06-11 22:35:01.163 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:01.164 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:01.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.7413ms
2025-06-11 22:35:05.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:35:05.464 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:05.465 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:05.468 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:05.482 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:35:05.499 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:05.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:35:05.529 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:35:05.556 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:35:05.579 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:35:05.597 +07:00 [INF] Executed ViewResult - view Dashboard executed in 18.1337ms.
2025-06-11 22:35:05.599 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 128.4124ms
2025-06-11 22:35:05.601 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:05.602 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:05.605 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 144.9689ms
2025-06-11 22:35:05.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:05.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:05.618 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.9216ms
2025-06-11 22:35:05.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.8306ms
2025-06-11 22:35:05.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:05.674 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:05.676 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:05.678 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:05.687 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:05.690 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:05.692 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.7328ms
2025-06-11 22:35:05.694 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:05.696 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:05.697 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.7789ms
2025-06-11 22:35:07.837 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:35:07.840 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:07.843 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:07.846 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:07.861 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:07.865 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:35:07.870 +07:00 [INF] Executed ViewResult - view Homestays executed in 6.2964ms.
2025-06-11 22:35:07.872 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 23.7324ms
2025-06-11 22:35:07.873 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:07.874 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:07.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 37.2118ms
2025-06-11 22:35:07.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:07.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:07.882 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5441ms
2025-06-11 22:35:07.883 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5259ms
2025-06-11 22:35:09.883 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:35:09.887 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:09.888 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:09.891 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:35:09.909 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:35:09.930 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:35:09.932 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:35:09.932 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 39.9604ms
2025-06-11 22:35:09.933 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:09.934 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:09.935 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 52.3536ms
2025-06-11 22:35:11.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:35:11.401 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:11.403 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:11.404 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:11.421 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:11.426 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:35:11.427 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.6423ms.
2025-06-11 22:35:11.428 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 23.1944ms
2025-06-11 22:35:11.430 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:11.431 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:11.432 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 34.5356ms
2025-06-11 22:35:11.461 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:11.463 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1807ms
2025-06-11 22:35:13.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:35:13.853 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:13.854 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:13.855 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:13.857 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:13.862 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:35:13.875 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:35:13.884 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:35:13.886 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.0223ms.
2025-06-11 22:35:13.887 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 30.6566ms
2025-06-11 22:35:13.888 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:13.889 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:13.889 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 41.2424ms
2025-06-11 22:35:13.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:13.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0308ms
2025-06-11 22:35:13.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:13.965 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:13.966 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:13.967 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:13.972 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:13.974 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:13.975 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.4275ms
2025-06-11 22:35:13.976 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:13.977 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:13.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.5736ms
2025-06-11 22:35:15.861 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:35:15.865 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:15.866 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:35:15.870 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:15.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:35:15.877 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:35:15.888 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:35:15.896 +07:00 [INF] Executed ViewResult - view Bookings executed in 8.2715ms.
2025-06-11 22:35:15.897 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 26.2014ms
2025-06-11 22:35:15.898 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:35:15.899 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:15.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 200 null text/html; charset=utf-8 39.3537ms
2025-06-11 22:35:15.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:15.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:15.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9991ms
2025-06-11 22:35:15.911 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6968ms
2025-06-11 22:35:15.934 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:15.937 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:15.938 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:15.939 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:15.942 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:15.945 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:15.946 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.4503ms
2025-06-11 22:35:15.947 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:15.948 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:15.949 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.2114ms
2025-06-11 22:35:42.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:35:42.120 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:42.124 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:42.125 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:42.128 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:42.132 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:35:42.136 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:35:42.149 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:35:42.151 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.901ms.
2025-06-11 22:35:42.152 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 25.7442ms
2025-06-11 22:35:42.153 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:35:42.154 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:42.155 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 38.9744ms
2025-06-11 22:35:42.159 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:42.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:42.161 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2422ms
2025-06-11 22:35:42.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2294ms
2025-06-11 22:35:42.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:42.257 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:42.260 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:42.261 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:42.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:42.278 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:42.282 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 18.425ms
2025-06-11 22:35:42.285 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:42.290 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:42.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 42.1254ms
2025-06-11 22:35:47.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:35:47.049 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:47.050 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:47.051 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:47.055 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:47.059 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:35:47.060 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.5797ms.
2025-06-11 22:35:47.061 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 8.746ms
2025-06-11 22:35:47.062 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:47.063 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:47.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 19.0087ms
2025-06-11 22:35:47.067 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:47.067 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:47.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3561ms
2025-06-11 22:35:47.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0004ms
2025-06-11 22:35:48.354 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:35:48.358 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:48.360 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:48.360 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:35:48.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:35:48.366 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:35:48.367 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 5.3992ms
2025-06-11 22:35:48.368 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:48.369 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:48.369 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 15.3952ms
2025-06-11 22:35:50.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:35:50.060 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:50.061 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:50.062 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:50.065 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:50.069 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:35:50.070 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.4986ms.
2025-06-11 22:35:50.071 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.7063ms
2025-06-11 22:35:50.073 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:50.074 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:50.075 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 19.3251ms
2025-06-11 22:35:50.104 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:50.107 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7297ms
2025-06-11 22:35:51.819 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 22:35:51.822 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:51.824 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:51.825 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:35:51.829 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:35:51.840 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:35:51.842 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 22:35:51.868 +07:00 [INF] Executed ViewResult - view Details executed in 26.5067ms.
2025-06-11 22:35:51.872 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 46.0411ms
2025-06-11 22:35:51.874 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:51.875 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:51.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 56.7891ms
2025-06-11 22:35:51.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:51.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:35:51.911 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6663ms
2025-06-11 22:35:51.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7279ms
2025-06-11 22:35:51.929 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 22:35:51.929 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 22:35:51.931 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:51.933 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:51.934 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:35:51.934 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:35:51.937 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:35:51.938 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:35:51.942 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 22:35:51.945 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:51.946 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:35:51.950 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:35:51.956 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:35:51.958 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:35:51.958 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:51.960 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 18.57ms
2025-06-11 22:35:51.962 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:35:51.964 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:51.965 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 22:35:51.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 36.354ms
2025-06-11 22:35:52.032 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 22:35:52.048 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 22:35:52.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:35:52.049 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:52.053 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:35:52.092 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:52.094 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:52.095 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:35:52.097 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:52.097 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 144.6288ms
2025-06-11 22:35:52.099 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:35:52.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:35:52.100 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:35:52.103 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 22:35:52.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:35:52.106 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:52.109 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:35:52.110 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:52.111 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 168.3988ms
2025-06-11 22:35:52.114 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:35:52.115 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:35:52.114 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.916ms
2025-06-11 22:35:52.119 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:52.121 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:35:52.122 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:35:52.125 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 185.6333ms
2025-06-11 22:35:52.126 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:52.127 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:35:52.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 79.47ms
2025-06-11 22:35:52.128 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:52.134 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 204.7596ms
2025-06-11 22:35:52.295 +07:00 [INF] Received HTTP response headers after 168.5361ms - 401
2025-06-11 22:35:52.297 +07:00 [INF] End processing HTTP request after 184.8029ms - 401
2025-06-11 22:35:52.299 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 22:35:52.303 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:35:52.305 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 197.6595ms
2025-06-11 22:35:52.307 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:35:52.308 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:52.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 276.5694ms
2025-06-11 22:35:55.813 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:35:55.817 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:55.818 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:55.819 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:35:55.822 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:35:55.825 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:35:55.827 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.1725ms.
2025-06-11 22:35:55.828 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.1221ms
2025-06-11 22:35:55.829 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:35:55.829 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:55.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 16.8595ms
2025-06-11 22:35:55.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:35:55.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9607ms
2025-06-11 22:35:57.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:35:57.344 +07:00 [INF] No cached response available for this request.
2025-06-11 22:35:57.346 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:57.346 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:35:57.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:35:57.352 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:35:57.353 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 5.6917ms
2025-06-11 22:35:57.355 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:35:57.356 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:35:57.356 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 15.5357ms
2025-06-11 22:36:00.183 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:36:00.187 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:00.189 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:00.189 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:00.192 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:00.196 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:36:00.197 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.3111ms.
2025-06-11 22:36:00.198 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.5698ms
2025-06-11 22:36:00.200 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:00.201 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:00.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 18.3264ms
2025-06-11 22:36:00.226 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:00.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3753ms
2025-06-11 22:36:01.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 22:36:01.026 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.027 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:36:01.028 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:36:01.032 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:36:01.043 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:36:01.045 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 22:36:01.049 +07:00 [INF] Executed ViewResult - view Details executed in 3.2446ms.
2025-06-11 22:36:01.050 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 20.0741ms
2025-06-11 22:36:01.052 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:36:01.053 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.054 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 33.6141ms
2025-06-11 22:36:01.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:01.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:36:01.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1484ms
2025-06-11 22:36:01.066 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7427ms
2025-06-11 22:36:01.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 22:36:01.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 22:36:01.130 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.132 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.133 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:36:01.134 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:36:01.135 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:36:01.136 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:36:01.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 22:36:01.143 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:36:01.139 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 22:36:01.146 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.148 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:01.151 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:36:01.151 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:36:01.152 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 10.9875ms
2025-06-11 22:36:01.153 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:36:01.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:36:01.172 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 22:36:01.185 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 22:36:01.157 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:36:01.186 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:36:01.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:01.198 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:01.198 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.192 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.204 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:36:01.205 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:01.206 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 47.1507ms
2025-06-11 22:36:01.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 79.4449ms
2025-06-11 22:36:01.210 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:36:01.211 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:01.213 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:01.214 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:36:01.219 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 22:36:01.221 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 83.5191ms
2025-06-11 22:36:01.223 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:01.224 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.228 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:36:01.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 91.9564ms
2025-06-11 22:36:01.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:01.227 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:36:01.234 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.240 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:01.241 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:36:01.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 114.0373ms
2025-06-11 22:36:01.242 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.2839ms
2025-06-11 22:36:01.249 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:01.250 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.251 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 64.732ms
2025-06-11 22:36:01.278 +07:00 [INF] Received HTTP response headers after 34.4136ms - 401
2025-06-11 22:36:01.279 +07:00 [INF] End processing HTTP request after 51.9743ms - 401
2025-06-11 22:36:01.280 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 22:36:01.281 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:01.282 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 55.5891ms
2025-06-11 22:36:01.283 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:36:01.284 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:01.284 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 112.0084ms
2025-06-11 22:36:07.695 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:36:07.699 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:07.700 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:07.701 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:07.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:07.707 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:36:07.708 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.1793ms.
2025-06-11 22:36:07.709 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 6.9678ms
2025-06-11 22:36:07.710 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:07.711 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:07.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 17.5339ms
2025-06-11 22:36:07.715 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:07.717 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0683ms
2025-06-11 22:36:10.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:10.257 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:10.258 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:10.259 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:10.271 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:10.274 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:10.287 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:10.294 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:10.296 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3411ms.
2025-06-11 22:36:10.297 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 36.9041ms
2025-06-11 22:36:10.298 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:10.299 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:10.300 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 46.9147ms
2025-06-11 22:36:10.303 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:10.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0781ms
2025-06-11 22:36:10.350 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:10.352 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:10.354 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:10.355 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:10.359 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:10.362 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:10.363 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.0272ms
2025-06-11 22:36:10.364 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:10.365 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:10.366 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.1807ms
2025-06-11 22:36:21.429 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:36:21.433 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:21.434 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:21.435 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:21.449 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:21.452 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:36:21.453 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.1614ms.
2025-06-11 22:36:21.454 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 17.7825ms
2025-06-11 22:36:21.455 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:36:21.456 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:21.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 27.4532ms
2025-06-11 22:36:21.459 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:21.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:36:21.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0796ms
2025-06-11 22:36:21.468 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0263ms
2025-06-11 22:36:22.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:22.598 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:22.599 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:22.600 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:22.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:22.607 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:22.621 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:22.630 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:22.631 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5104ms.
2025-06-11 22:36:22.632 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 31.1065ms
2025-06-11 22:36:22.633 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:22.634 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:22.635 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 41.1404ms
2025-06-11 22:36:22.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:22.640 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9372ms
2025-06-11 22:36:22.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:22.677 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:22.678 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:22.679 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:22.684 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:22.686 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:22.688 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.741ms
2025-06-11 22:36:22.689 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:22.690 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:22.691 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.16ms
2025-06-11 22:36:23.451 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 22:36:23.455 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:23.456 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:36:23.458 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:23.463 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:23.468 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:23.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:23.484 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 22:36:23.496 +07:00 [INF] Executed ViewResult - view Revenue executed in 12.7041ms.
2025-06-11 22:36:23.497 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 37.423ms
2025-06-11 22:36:23.498 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:36:23.499 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:23.500 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 48.7118ms
2025-06-11 22:36:23.502 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:36:23.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:23.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6698ms
2025-06-11 22:36:23.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.726ms
2025-06-11 22:36:25.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:25.487 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:25.488 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:25.488 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:25.491 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:25.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:25.499 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:25.506 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:25.508 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4039ms.
2025-06-11 22:36:25.509 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 18.9513ms
2025-06-11 22:36:25.510 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:25.511 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:25.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 28.0176ms
2025-06-11 22:36:25.515 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:25.517 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.941ms
2025-06-11 22:36:25.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:25.548 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:25.549 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:25.550 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:25.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:25.556 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:25.557 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.6789ms
2025-06-11 22:36:25.558 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:25.559 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:25.560 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.4877ms
2025-06-11 22:36:26.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 22:36:26.673 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:26.674 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:36:26.678 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 22:36:26.690 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:36:26.700 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 22:36:26.701 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:36:26.702 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 22.9109ms
2025-06-11 22:36:26.703 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:36:26.704 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:26.704 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 34.6997ms
2025-06-11 22:36:27.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:27.898 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:27.899 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:27.900 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:27.903 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:27.908 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:27.912 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:27.920 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:27.922 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3859ms.
2025-06-11 22:36:27.923 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 21.1283ms
2025-06-11 22:36:27.924 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:27.925 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:27.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.2774ms
2025-06-11 22:36:27.946 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:27.948 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7382ms
2025-06-11 22:36:28.072 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:28.075 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:28.076 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:28.077 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:28.080 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:28.083 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:28.084 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.5204ms
2025-06-11 22:36:28.085 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:28.086 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:28.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 14.7915ms
2025-06-11 22:36:32.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Profile - null null
2025-06-11 22:36:32.907 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:32.907 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 22:36:32.909 +07:00 [INF] Route matched with {action = "Profile", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:32.911 +07:00 [INF] Executing RedirectResult, redirecting to /Account/Profile.
2025-06-11 22:36:32.912 +07:00 [INF] Executed action WebHS.Controllers.HostController.Profile (WebHS) in 0.9726ms
2025-06-11 22:36:32.913 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Profile (WebHS)'
2025-06-11 22:36:32.913 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:32.914 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Profile - 302 0 null 10.8735ms
2025-06-11 22:36:32.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 22:36:32.919 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:32.920 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 22:36:32.930 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:36:32.935 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 22:36:32.938 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 22:36:32.943 +07:00 [INF] Executed ViewResult - view Profile executed in 5.6756ms.
2025-06-11 22:36:32.949 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 16.9657ms
2025-06-11 22:36:32.950 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 22:36:32.951 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:32.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 40.4575ms
2025-06-11 22:36:32.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:36:32.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:32.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7453ms
2025-06-11 22:36:32.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5229ms
2025-06-11 22:36:33.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:33.006 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:33.008 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:33.009 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:33.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:33.018 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:33.019 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.014ms
2025-06-11 22:36:33.028 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:33.029 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:33.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.1318ms
2025-06-11 22:36:34.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:34.247 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:34.248 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:34.249 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:34.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:34.256 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:34.261 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:34.269 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:34.270 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3527ms.
2025-06-11 22:36:34.272 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.9495ms
2025-06-11 22:36:34.273 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:34.274 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:34.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 33.9975ms
2025-06-11 22:36:34.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:34.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.022ms
2025-06-11 22:36:34.320 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:34.322 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:34.323 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:34.325 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:34.328 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:34.332 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:34.333 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.2469ms
2025-06-11 22:36:34.334 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:34.335 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:34.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.8ms
2025-06-11 22:36:35.155 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - null null
2025-06-11 22:36:35.159 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:35.161 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:36:35.162 +07:00 [INF] Route matched with {action = "Calendar", controller = "Pricing"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(Int32, Int32, Int32) on controller WebHS.Controllers.PricingController (WebHS).
2025-06-11 22:36:35.165 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[CreatedAt], [h0].[Date], [h0].[HomestayId], [h0].[Note], [h0].[PricePerNight], [h0].[UpdatedAt], [b].[Id], [b].[CreatedAt], [b].[Date], [b].[HomestayId], [b].[Reason], [b0].[Id], [b0].[CheckInDate], [b0].[CheckOutDate], [b0].[CreatedAt], [b0].[DiscountAmount], [b0].[FinalAmount], [b0].[HomestayId], [b0].[Notes], [b0].[NumberOfGuests], [b0].[PromotionId], [b0].[ReviewComment], [b0].[ReviewCreatedAt], [b0].[ReviewIsActive], [b0].[ReviewRating], [b0].[ReviewUpdatedAt], [b0].[Status], [b0].[TotalAmount], [b0].[UpdatedAt], [b0].[UserId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayPricings] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [BlockedDates] AS [b] ON [t].[Id] = [b].[HomestayId]
LEFT JOIN [Bookings] AS [b0] ON [t].[Id] = [b0].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [b].[Id]
2025-06-11 22:36:35.167 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:36:35.168 +07:00 [INF] Executed action WebHS.Controllers.PricingController.Calendar (WebHS) in 5.0757ms
2025-06-11 22:36:35.169 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PricingController.Calendar (WebHS)'
2025-06-11 22:36:35.170 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:35.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Pricing/Calendar/0 - 404 0 null 15.6059ms
2025-06-11 22:36:36.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:36:36.675 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:36.676 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:36.677 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:36:36.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:36:36.685 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:36:36.689 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:36:36.699 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:36:36.701 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.4992ms.
2025-06-11 22:36:36.702 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 22.6028ms
2025-06-11 22:36:36.703 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:36:36.704 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:36.705 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 34.4132ms
2025-06-11 22:36:36.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:36:36.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.1799ms
2025-06-11 22:36:36.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:36:36.867 +07:00 [INF] No cached response available for this request.
2025-06-11 22:36:36.868 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:36.869 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:36:36.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:36:36.878 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:36:36.879 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.8441ms
2025-06-11 22:36:36.880 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:36:36.882 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:36:36.882 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.8147ms
2025-06-11 22:37:07.734 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:37:07.741 +07:00 [INF] No cached response available for this request.
2025-06-11 22:37:07.742 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:37:07.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:37:07.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:37:07.748 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:37:07.749 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.3726ms
2025-06-11 22:37:07.750 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:37:07.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:37:07.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.1211ms
2025-06-11 22:37:37.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:37:37.726 +07:00 [INF] No cached response available for this request.
2025-06-11 22:37:37.727 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:37:37.728 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:37:37.745 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:37:37.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:37:37.748 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 18.5241ms
2025-06-11 22:37:37.749 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:37:37.750 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:37:37.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.5318ms
2025-06-11 22:38:07.732 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:38:07.736 +07:00 [INF] No cached response available for this request.
2025-06-11 22:38:07.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:38:07.737 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:38:07.741 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:38:07.746 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:38:07.747 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0339ms
2025-06-11 22:38:07.748 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:38:07.749 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:38:07.749 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.7204ms
2025-06-11 22:38:37.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:38:37.724 +07:00 [INF] No cached response available for this request.
2025-06-11 22:38:37.725 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:38:37.726 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:38:37.734 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:38:37.736 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:38:37.737 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5817ms
2025-06-11 22:38:37.739 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:38:37.740 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:38:37.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.357ms
2025-06-11 22:39:07.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:39:07.731 +07:00 [INF] No cached response available for this request.
2025-06-11 22:39:07.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:39:07.734 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:39:07.739 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:39:07.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:39:07.748 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.3519ms
2025-06-11 22:39:07.750 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:39:07.751 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:39:07.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.8399ms
2025-06-11 22:40:25.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:40:25.729 +07:00 [INF] No cached response available for this request.
2025-06-11 22:40:25.731 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:40:25.732 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:40:25.743 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:40:25.745 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:40:25.747 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.6064ms
2025-06-11 22:40:25.748 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:40:25.749 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:40:25.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.3868ms
2025-06-11 22:41:25.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:41:25.751 +07:00 [INF] No cached response available for this request.
2025-06-11 22:41:25.752 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:41:25.754 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:41:25.763 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:41:25.766 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:41:25.767 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.2925ms
2025-06-11 22:41:25.769 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:41:25.770 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:41:25.772 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.9108ms
2025-06-11 22:42:25.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:42:25.740 +07:00 [INF] No cached response available for this request.
2025-06-11 22:42:25.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:42:25.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:42:25.753 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:42:25.755 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:42:25.755 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.8837ms
2025-06-11 22:42:25.756 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:42:25.757 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:42:25.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.1495ms
2025-06-11 22:43:25.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:43:25.740 +07:00 [INF] No cached response available for this request.
2025-06-11 22:43:25.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:43:25.742 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:43:25.749 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:43:25.751 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:43:25.751 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.1907ms
2025-06-11 22:43:25.753 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:43:25.754 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:43:25.754 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.3064ms
2025-06-11 22:44:25.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:44:25.736 +07:00 [INF] No cached response available for this request.
2025-06-11 22:44:25.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:44:25.739 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:44:25.750 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:44:25.752 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:44:25.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.0375ms
2025-06-11 22:44:25.755 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:44:25.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:44:25.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.2443ms
2025-06-11 22:45:25.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:45:25.746 +07:00 [INF] No cached response available for this request.
2025-06-11 22:45:25.747 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:45:25.748 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:45:25.755 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:45:25.757 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:45:25.758 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0486ms
2025-06-11 22:45:25.759 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:45:25.760 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:45:25.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.2277ms
2025-06-11 22:46:25.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:46:25.749 +07:00 [INF] No cached response available for this request.
2025-06-11 22:46:25.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:46:25.752 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:46:25.759 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:46:25.760 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:46:25.761 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.9114ms
2025-06-11 22:46:25.762 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:46:25.763 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:46:25.763 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.5106ms
2025-06-11 22:47:25.747 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:47:25.761 +07:00 [INF] No cached response available for this request.
2025-06-11 22:47:25.762 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:47:25.762 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:47:25.769 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:47:25.771 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:47:25.773 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.9099ms
2025-06-11 22:47:25.774 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:47:25.775 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:47:25.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.6588ms
2025-06-11 22:48:25.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:48:25.742 +07:00 [INF] No cached response available for this request.
2025-06-11 22:48:25.743 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:48:25.744 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:48:25.756 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:48:25.758 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:48:25.758 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.9134ms
2025-06-11 22:48:25.760 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:48:25.760 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:48:25.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.5457ms
2025-06-11 22:49:25.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:49:25.737 +07:00 [INF] No cached response available for this request.
2025-06-11 22:49:25.738 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:49:25.739 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:49:25.747 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:49:25.749 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType31`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:49:25.750 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.6385ms
2025-06-11 22:49:25.751 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:49:25.752 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:49:25.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.2275ms
2025-06-11 22:52:51.011 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:52:52.649 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:52:52.692 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:52:52.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:52:52.701 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:52:52.719 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:52:52.740 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:52:52.759 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:52:53.023 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:52:53.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:52:53.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:52:53.078 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.133 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.137 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.139 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.143 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.145 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.148 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:52:53.150 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:52:53.151 +07:00 [INF] Starting data seeding...
2025-06-11 22:52:53.167 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:52:53.169 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:52:53.175 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:52:53.177 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:52:53.183 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:52:53.186 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:52:53.192 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:52:53.194 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:52:53.210 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:52:53.219 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:52:53.221 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:52:53.221 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:52:53.222 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:52:53.223 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:52:53.245 +07:00 [INF] Background Job Service started
2025-06-11 22:52:53.280 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:52:53.298 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:52:53.366 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:52:53.402 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:52:53.408 +07:00 [INF] Hosting environment: Development
2025-06-11 22:52:53.409 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 22:52:53.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:52:53.813 +07:00 [INF] No cached response available for this request.
2025-06-11 22:52:53.824 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:52:53.873 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:52:53.886 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:52:54.020 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:52:54.033 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:52:54.144 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:52:54.242 +07:00 [INF] Executed ViewResult - view Index executed in 99.3086ms.
2025-06-11 22:52:54.247 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 358.113ms
2025-06-11 22:52:54.249 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:52:54.251 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:52:54.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 623.7438ms
2025-06-11 22:52:54.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:52:54.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:52:54.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.1227ms
2025-06-11 22:52:54.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.5703ms
2025-06-11 22:53:02.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 22:53:02.629 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:02.634 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:53:02.645 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:53:02.688 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 22:53:02.708 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:53:02.727 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 22:53:02.751 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:53:02.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:53:02.759 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:53:02.763 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 22:53:02.771 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 22:53:02.783 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:53:02.821 +07:00 [INF] Executed ViewResult - view Index executed in 38.8213ms.
2025-06-11 22:53:02.823 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 176.841ms
2025-06-11 22:53:02.825 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 22:53:02.826 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:02.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 209.5208ms
2025-06-11 22:53:02.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:02.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:02.837 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6732ms
2025-06-11 22:53:02.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.5213ms
2025-06-11 22:53:03.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:53:03.957 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:03.961 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:53:03.963 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:53:03.971 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:53:03.993 +07:00 [INF] Executed ViewResult - view Login executed in 22.0033ms.
2025-06-11 22:53:03.995 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 30.5166ms
2025-06-11 22:53:03.996 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:53:03.998 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:03.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 47.2779ms
2025-06-11 22:53:04.002 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:04.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:04.004 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2822ms
2025-06-11 22:53:04.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.2012ms
2025-06-11 22:53:05.402 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 22:53:05.407 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:53:05.408 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:53:05.412 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:53:05.415 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:53:05.429 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:53:05.438 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:53:05.531 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:53:05.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:53:05.552 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:53:05.559 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:53:05.565 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:53:05.568 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:53:05.569 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 152.0606ms
2025-06-11 22:53:05.570 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:53:05.571 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 168.8581ms
2025-06-11 22:53:05.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:53:05.578 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:05.582 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:53:05.583 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:53:05.588 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:53:05.594 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:53:05.599 +07:00 [INF] Executed ViewResult - view Index executed in 5.6756ms.
2025-06-11 22:53:05.600 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 16.5317ms
2025-06-11 22:53:05.601 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:53:05.602 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:05.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 29.2171ms
2025-06-11 22:53:05.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:05.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:05.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9928ms
2025-06-11 22:53:05.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0413ms
2025-06-11 22:53:05.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:53:05.644 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:05.651 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:05.657 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:53:05.669 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:53:05.674 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:05.681 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 22.1735ms
2025-06-11 22:53:05.682 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:05.683 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:05.684 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 43.1514ms
2025-06-11 22:53:09.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:53:09.959 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:09.966 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:53:09.969 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:53:09.982 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:53:09.990 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:53:10.002 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:53:10.027 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:53:10.049 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:53:10.075 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:53:10.090 +07:00 [INF] Executed ViewResult - view Dashboard executed in 16.0655ms.
2025-06-11 22:53:10.093 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 122.605ms
2025-06-11 22:53:10.094 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:53:10.096 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:10.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 143.2059ms
2025-06-11 22:53:10.100 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:10.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:10.102 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3611ms
2025-06-11 22:53:10.109 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1639ms
2025-06-11 22:53:10.173 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:53:10.176 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:10.181 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:10.182 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:53:10.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:53:10.189 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:10.190 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.7675ms
2025-06-11 22:53:10.192 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:10.193 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:10.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.6785ms
2025-06-11 22:53:11.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:53:11.880 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:11.883 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:53:11.886 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:53:11.891 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:53:11.895 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:53:11.930 +07:00 [INF] Executed ViewResult - view Homestays executed in 35.1998ms.
2025-06-11 22:53:11.933 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 45.1375ms
2025-06-11 22:53:11.934 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:53:11.935 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:11.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 60.9311ms
2025-06-11 22:53:11.937 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:11.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:11.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8458ms
2025-06-11 22:53:11.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5447ms
2025-06-11 22:53:13.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - null null
2025-06-11 22:53:13.270 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:13.271 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:53:13.274 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:53:13.299 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:53:13.319 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:53:13.325 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:53:13.326 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 50.0702ms
2025-06-11 22:53:13.327 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:53:13.328 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:13.329 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/5 - 404 0 null 63.4815ms
2025-06-11 22:53:14.477 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:53:14.481 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:14.482 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:53:14.483 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:53:14.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:53:14.491 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:53:14.494 +07:00 [INF] Executed ViewResult - view Homestays executed in 2.841ms.
2025-06-11 22:53:14.495 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 10.3781ms
2025-06-11 22:53:14.497 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:53:14.498 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:14.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 21.8435ms
2025-06-11 22:53:14.537 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:14.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.7185ms
2025-06-11 22:53:19.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - null null
2025-06-11 22:53:19.976 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:19.980 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:53:19.982 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:53:19.989 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:53:20.016 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:53:20.021 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 22:53:20.057 +07:00 [INF] Executed ViewResult - view Details executed in 36.2287ms.
2025-06-11 22:53:20.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:53:20.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:53:20.061 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 76.4104ms
2025-06-11 22:53:20.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5756ms
2025-06-11 22:53:20.070 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 22:53:20.075 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.0313ms
2025-06-11 22:53:20.081 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/3 - 200 null text/html; charset=utf-8 117.9094ms
2025-06-11 22:53:20.155 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 22:53:20.155 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 22:53:20.162 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:20.164 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:20.165 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:53:20.167 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:53:20.173 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 22:53:20.174 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:53:20.183 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - null null
2025-06-11 22:53:20.194 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:20.199 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:53:20.201 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:53:20.203 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:20.204 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:53:20.207 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:53:20.207 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 28.8305ms
2025-06-11 22:53:20.215 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 22:53:20.219 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.220 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 22:53:20.223 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 67.2388ms
2025-06-11 22:53:20.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - null null
2025-06-11 22:53:20.236 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:20.238 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:53:20.352 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 22:53:20.352 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:53:20.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:53:20.370 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 22:53:20.416 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:20.422 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:20.426 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:53:20.429 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:20.430 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 220.4887ms
2025-06-11 22:53:20.433 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:53:20.434 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 22:53:20.443 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:53:20.446 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.435 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:53:20.459 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:20.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/3 - 200 null application/json; charset=utf-8 277.3515ms
2025-06-11 22:53:20.466 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 22:53:20.467 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=12.2388&lon=109.1967&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 22:53:20.467 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 30.7336ms
2025-06-11 22:53:20.478 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 22:53:20.480 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:20.485 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:20.485 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.496 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 143.8784ms
2025-06-11 22:53:20.500 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 324.1844ms
2025-06-11 22:53:20.502 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 22:53:20.504 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.506 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=3&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 350.5946ms
2025-06-11 22:53:20.646 +07:00 [INF] Received HTTP response headers after 165.3357ms - 401
2025-06-11 22:53:20.649 +07:00 [INF] End processing HTTP request after 217.4612ms - 401
2025-06-11 22:53:20.652 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 22:53:20.658 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:20.662 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 236.9515ms
2025-06-11 22:53:20.663 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 22:53:20.665 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:20.665 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=12.2388&longitude=109.1967 - 200 null application/json; charset=utf-8 434.1869ms
2025-06-11 22:53:50.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:53:50.749 +07:00 [INF] No cached response available for this request.
2025-06-11 22:53:50.750 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:50.751 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:53:50.759 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:53:50.761 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:53:50.762 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.5758ms
2025-06-11 22:53:50.763 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:53:50.764 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:53:50.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.1518ms
2025-06-11 22:53:58.835 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:53:59.957 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:54:00.002 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:54:00.011 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:54:00.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:54:00.032 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:54:00.050 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:54:00.068 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:54:00.282 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:54:00.321 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:54:00.325 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:54:00.337 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.392 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.395 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.401 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.406 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:00.408 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:54:00.409 +07:00 [INF] Starting data seeding...
2025-06-11 22:54:00.425 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:54:00.428 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:54:00.434 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:54:00.436 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:54:00.443 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:54:00.445 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:54:00.451 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:54:00.453 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:54:00.469 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:54:00.477 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:54:00.479 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:54:00.480 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:54:00.480 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:54:00.481 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:54:00.504 +07:00 [INF] Background Job Service started
2025-06-11 22:54:00.540 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:54:00.559 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:54:00.634 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:54:00.671 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:54:00.673 +07:00 [INF] Hosting environment: Development
2025-06-11 22:54:00.673 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 22:54:00.936 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:54:01.100 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:01.108 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 22:54:01.155 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:01.169 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:54:01.339 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:54:01.352 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:54:01.466 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:54:01.565 +07:00 [INF] Executed ViewResult - view Index executed in 99.9606ms.
2025-06-11 22:54:01.569 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 396.1437ms
2025-06-11 22:54:01.571 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:01.574 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:01.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 655.4734ms
2025-06-11 22:54:01.586 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:01.587 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:01.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5084ms
2025-06-11 22:54:01.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4282ms
2025-06-11 22:54:18.100 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:54:18.111 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:18.116 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:54:18.124 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:54:18.135 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:54:18.164 +07:00 [INF] Executed ViewResult - view Login executed in 30.5565ms.
2025-06-11 22:54:18.167 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 41.1272ms
2025-06-11 22:54:18.168 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:54:18.170 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:18.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 70.6669ms
2025-06-11 22:54:18.174 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:18.175 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:18.177 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6762ms
2025-06-11 22:54:18.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.331ms
2025-06-11 22:54:19.315 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 22:54:19.322 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:54:19.323 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:54:19.328 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:54:19.333 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:54:19.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:54:19.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:54:19.453 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:54:19.475 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:54:19.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:54:19.486 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:54:19.492 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:54:19.494 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:54:19.495 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 160.7821ms
2025-06-11 22:54:19.496 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:54:19.497 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 182.8682ms
2025-06-11 22:54:19.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:54:19.504 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:19.507 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:19.508 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:54:19.512 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:54:19.518 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:54:19.525 +07:00 [INF] Executed ViewResult - view Index executed in 7.0521ms.
2025-06-11 22:54:19.526 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 16.3235ms
2025-06-11 22:54:19.527 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:19.528 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:19.529 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 28.8199ms
2025-06-11 22:54:19.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:19.532 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:19.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4398ms
2025-06-11 22:54:19.545 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.035ms
2025-06-11 22:54:19.572 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:19.576 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:19.592 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:19.605 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:19.695 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:19.716 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:19.733 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 116.6204ms
2025-06-11 22:54:19.735 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:19.737 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:19.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 165.7158ms
2025-06-11 22:54:21.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:54:21.052 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:21.064 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:21.070 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:21.096 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:54:21.111 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:21.131 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:21.175 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:54:21.205 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:21.253 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:54:21.382 +07:00 [INF] Executed ViewResult - view Dashboard executed in 129.897ms.
2025-06-11 22:54:21.385 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 311.8709ms
2025-06-11 22:54:21.387 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:21.392 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:21.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 348.3892ms
2025-06-11 22:54:21.394 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:21.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:21.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.2155ms
2025-06-11 22:54:21.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.8661ms
2025-06-11 22:54:21.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:21.519 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:21.527 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:21.529 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:21.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:21.538 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:21.540 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.6217ms
2025-06-11 22:54:21.542 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:21.543 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:21.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 32.7708ms
2025-06-11 22:54:22.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:54:22.469 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:22.473 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:54:22.475 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:22.478 +07:00 [INF] Executing RedirectResult, redirecting to /Host/ManageBookings?status=all&page=1.
2025-06-11 22:54:22.479 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 2.0459ms
2025-06-11 22:54:22.480 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:54:22.481 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:22.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 302 0 null 17.8069ms
2025-06-11 22:54:22.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings?status=all&page=1 - null null
2025-06-11 22:54:22.489 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:22.490 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:54:22.493 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:22.509 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:22.516 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:22.557 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:54:22.577 +07:00 [INF] Executed ViewResult - view Bookings executed in 20.4982ms.
2025-06-11 22:54:22.579 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 83.5736ms
2025-06-11 22:54:22.580 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:54:22.581 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:22.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings?status=all&page=1 - 200 null text/html; charset=utf-8 97.3443ms
2025-06-11 22:54:22.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:22.585 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:22.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5398ms
2025-06-11 22:54:22.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8231ms
2025-06-11 22:54:22.617 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:22.620 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:22.622 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:22.623 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:22.627 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:22.631 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:22.633 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.8937ms
2025-06-11 22:54:22.634 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:22.635 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:22.636 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.5279ms
2025-06-11 22:54:34.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-11 22:54:34.421 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:34.429 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:34.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 12.0307ms
2025-06-11 22:54:34.436 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-11 22:54:44.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:54:44.870 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:44.873 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:44.874 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:44.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:44.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:44.886 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:44.895 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:54:44.897 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.2357ms.
2025-06-11 22:54:44.898 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 22.4369ms
2025-06-11 22:54:44.899 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:44.900 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:44.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 36.1352ms
2025-06-11 22:54:44.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:44.914 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8156ms
2025-06-11 22:54:44.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:44.969 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:44.970 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:44.972 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:44.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:44.980 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:44.982 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.9335ms
2025-06-11 22:54:44.983 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:44.985 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:44.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.8227ms
2025-06-11 22:54:47.409 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:54:47.412 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:47.414 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:54:47.417 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:47.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:47.425 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:54:47.442 +07:00 [INF] Executed ViewResult - view Homestays executed in 17.7673ms.
2025-06-11 22:54:47.444 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 25.4018ms
2025-06-11 22:54:47.445 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:54:47.446 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:47.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 38.2515ms
2025-06-11 22:54:47.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:47.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:47.459 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0675ms
2025-06-11 22:54:47.459 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1423ms
2025-06-11 22:54:48.545 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:54:48.549 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:48.550 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:48.551 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:48.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:48.558 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:48.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:48.570 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:54:48.572 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9354ms.
2025-06-11 22:54:48.573 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.953ms
2025-06-11 22:54:48.574 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:48.575 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:48.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 31.5396ms
2025-06-11 22:54:48.580 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:48.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.8072ms
2025-06-11 22:54:48.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:48.624 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:48.626 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:48.627 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:48.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:48.634 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:48.635 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.6817ms
2025-06-11 22:54:48.636 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:48.637 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:48.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.0048ms
2025-06-11 22:54:49.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Bookings - null null
2025-06-11 22:54:49.356 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:49.357 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:54:49.358 +07:00 [INF] Route matched with {action = "Bookings", controller = "Host"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Bookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:49.361 +07:00 [INF] Executing RedirectResult, redirecting to /Host/ManageBookings?status=all&page=1.
2025-06-11 22:54:49.362 +07:00 [INF] Executed action WebHS.Controllers.HostController.Bookings (WebHS) in 1.3157ms
2025-06-11 22:54:49.363 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Bookings (WebHS)'
2025-06-11 22:54:49.364 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:49.364 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Bookings - 302 0 null 11.5497ms
2025-06-11 22:54:49.367 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings?status=all&page=1 - null null
2025-06-11 22:54:49.370 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:49.371 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:54:49.372 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:49.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:49.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:49.388 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:54:49.390 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.9011ms.
2025-06-11 22:54:49.391 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 17.9436ms
2025-06-11 22:54:49.392 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 22:54:49.394 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:49.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings?status=all&page=1 - 200 null text/html; charset=utf-8 27.5714ms
2025-06-11 22:54:49.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:49.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:49.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.0924ms
2025-06-11 22:54:49.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3043ms
2025-06-11 22:54:49.422 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:49.425 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:49.426 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:49.427 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:49.432 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:49.435 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:49.436 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.9019ms
2025-06-11 22:54:49.437 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:49.438 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:49.439 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.9237ms
2025-06-11 22:54:52.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:54:52.109 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:52.110 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:52.111 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:52.124 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:52.128 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:52.141 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:52.149 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:54:52.151 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5812ms.
2025-06-11 22:54:52.152 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 39.3408ms
2025-06-11 22:54:52.153 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:52.154 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:52.155 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 50.049ms
2025-06-11 22:54:52.158 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:52.161 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4087ms
2025-06-11 22:54:52.204 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:52.207 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:52.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:52.211 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:52.217 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:52.220 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:52.222 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0202ms
2025-06-11 22:54:52.223 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:52.224 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:52.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.2011ms
2025-06-11 22:54:54.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Revenue - null null
2025-06-11 22:54:54.733 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:54.734 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:54:54.737 +07:00 [INF] Route matched with {action = "Revenue", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Revenue() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:54.751 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:54.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:54.767 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:54.779 +07:00 [INF] Executing ViewResult, running view Revenue.
2025-06-11 22:54:54.787 +07:00 [INF] Executed ViewResult - view Revenue executed in 8.4205ms.
2025-06-11 22:54:54.788 +07:00 [INF] Executed action WebHS.Controllers.HostController.Revenue (WebHS) in 49.1206ms
2025-06-11 22:54:54.789 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Revenue (WebHS)'
2025-06-11 22:54:54.789 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:54.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Revenue - 200 null text/html; charset=utf-8 61.5861ms
2025-06-11 22:54:54.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:54.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:54.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.2235ms
2025-06-11 22:54:54.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3235ms
2025-06-11 22:54:55.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Dashboard - null null
2025-06-11 22:54:55.861 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:55.862 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:55.863 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:55.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:55.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 22:54:55.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 22:54:55.882 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-06-11 22:54:55.883 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5962ms.
2025-06-11 22:54:55.884 +07:00 [INF] Executed action WebHS.Controllers.HostController.Dashboard (WebHS) in 20.4241ms
2025-06-11 22:54:55.885 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Dashboard (WebHS)'
2025-06-11 22:54:55.886 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:55.887 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Dashboard - 200 null text/html; charset=utf-8 30.6103ms
2025-06-11 22:54:55.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:55.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2084ms
2025-06-11 22:54:55.925 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:54:55.928 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:55.930 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:55.932 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:54:55.937 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:54:55.939 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:54:55.940 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.8674ms
2025-06-11 22:54:55.942 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:54:55.943 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:55.944 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.9273ms
2025-06-11 22:54:56.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/Homestays - null null
2025-06-11 22:54:56.709 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:56.710 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:54:56.711 +07:00 [INF] Route matched with {action = "Homestays", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays() on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 22:54:56.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [Bookings] AS [b] ON [h].[Id] = [b].[HomestayId]
WHERE [h].[HostId] = @__hostId_0
ORDER BY [h].[CreatedAt] DESC, [h].[Id], [h0].[Id]
2025-06-11 22:54:56.718 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:54:56.719 +07:00 [INF] Executed ViewResult - view Homestays executed in 1.6131ms.
2025-06-11 22:54:56.721 +07:00 [INF] Executed action WebHS.Controllers.HostController.Homestays (WebHS) in 7.8898ms
2025-06-11 22:54:56.722 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.Homestays (WebHS)'
2025-06-11 22:54:56.722 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:56.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/Homestays - 200 null text/html; charset=utf-8 19.3201ms
2025-06-11 22:54:56.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:56.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:56.729 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9291ms
2025-06-11 22:54:56.734 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0172ms
2025-06-11 22:54:59.912 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 22:54:59.916 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:54:59.917 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:54:59.918 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:54:59.921 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:54:59.925 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 22:54:59.926 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 22:54:59.927 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 22:54:59.928 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:54:59.928 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.3972ms
2025-06-11 22:54:59.929 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 22:54:59.930 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 17.8521ms
2025-06-11 22:54:59.933 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:54:59.935 +07:00 [INF] No cached response available for this request.
2025-06-11 22:54:59.936 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:59.937 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:54:59.941 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:54:59.945 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:54:59.947 +07:00 [INF] Executed ViewResult - view Index executed in 2.1523ms.
2025-06-11 22:54:59.949 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.3876ms
2025-06-11 22:54:59.950 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:54:59.951 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:54:59.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.0225ms
2025-06-11 22:54:59.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:54:59.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:54:59.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2345ms
2025-06-11 22:54:59.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.025ms
2025-06-11 22:55:01.193 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 22:55:01.197 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:01.198 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:55:01.199 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:55:01.200 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 22:55:01.202 +07:00 [INF] Executed ViewResult - view Login executed in 2.2625ms.
2025-06-11 22:55:01.204 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.5716ms
2025-06-11 22:55:01.204 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:55:01.206 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:01.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.5853ms
2025-06-11 22:55:01.211 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:01.213 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3082ms
2025-06-11 22:55:01.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:01.224 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0984ms
2025-06-11 22:55:03.179 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 22:55:03.182 +07:00 [INF] CORS policy execution failed.
2025-06-11 22:55:03.183 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 22:55:03.184 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:55:03.185 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 22:55:03.191 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:55:03.193 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 22:55:03.258 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 22:55:03.262 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 22:55:03.264 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:55:03.267 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 22:55:03.269 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 22:55:03.270 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 22:55:03.271 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 84.1956ms
2025-06-11 22:55:03.272 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 22:55:03.273 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 94.7057ms
2025-06-11 22:55:03.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 22:55:03.278 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:03.279 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:55:03.280 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 22:55:03.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 22:55:03.287 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:55:03.291 +07:00 [INF] Executed ViewResult - view Index executed in 4.4961ms.
2025-06-11 22:55:03.292 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.7487ms
2025-06-11 22:55:03.293 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 22:55:03.294 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:03.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.3827ms
2025-06-11 22:55:03.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:03.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:03.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6875ms
2025-06-11 22:55:03.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4723ms
2025-06-11 22:55:03.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:55:03.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:55:03.331 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:03.334 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:03.335 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:03.336 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:03.336 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:03.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:55:03.344 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:03.346 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:03.349 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.6823ms
2025-06-11 22:55:03.350 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:03.351 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:03.352 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.6565ms
2025-06-11 22:55:03.360 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:55:03.380 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:03.430 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 82.2298ms
2025-06-11 22:55:03.432 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:03.433 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:03.433 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 104.814ms
2025-06-11 22:55:06.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:55:06.556 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:06.558 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:06.561 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:06.568 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:55:06.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:55:06.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:06.592 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:55:06.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:55:06.604 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:55:06.618 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:06.642 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:55:06.646 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:55:06.658 +07:00 [INF] Executed ViewResult - view Index executed in 12.1446ms.
2025-06-11 22:55:06.659 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 97.182ms
2025-06-11 22:55:06.660 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:06.661 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:06.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 109.9077ms
2025-06-11 22:55:06.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:06.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:06.670 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4423ms
2025-06-11 22:55:06.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8809ms
2025-06-11 22:55:06.715 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:55:06.715 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:55:06.717 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:06.719 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:06.720 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:06.722 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:06.722 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:06.723 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:06.726 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:55:06.734 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:06.735 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.7044ms
2025-06-11 22:55:06.736 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:06.737 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:06.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 23.8293ms
2025-06-11 22:55:06.741 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:55:06.745 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:06.746 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 18.2142ms
2025-06-11 22:55:06.747 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:06.748 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:06.748 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 33.5851ms
2025-06-11 22:55:08.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 22:55:08.052 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:08.054 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:55:08.057 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:08.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:55:08.078 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 22:55:08.082 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 22:55:08.093 +07:00 [INF] Executed ViewResult - view Homestays executed in 10.9769ms.
2025-06-11 22:55:08.095 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 36.1765ms
2025-06-11 22:55:08.096 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 22:55:08.097 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:08.098 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 49.8235ms
2025-06-11 22:55:08.100 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:08.101 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:08.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.6017ms
2025-06-11 22:55:08.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3897ms
2025-06-11 22:55:09.199 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - null null
2025-06-11 22:55:09.203 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:09.208 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:55:09.213 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:09.236 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 22:55:09.256 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 22:55:09.260 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 22:55:09.266 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 5.5954ms.
2025-06-11 22:55:09.267 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 51.8988ms
2025-06-11 22:55:09.269 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 22:55:09.270 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:09.271 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/5 - 200 null text/html; charset=utf-8 71.9427ms
2025-06-11 22:55:09.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:09.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:09.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.144ms
2025-06-11 22:55:09.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3945ms
2025-06-11 22:55:12.937 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:55:12.943 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:12.944 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:12.946 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:12.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:55:12.954 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:55:12.957 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:12.960 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:55:12.963 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:55:12.965 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:55:12.967 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:12.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:55:12.974 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:55:12.976 +07:00 [INF] Executed ViewResult - view Index executed in 2.0949ms.
2025-06-11 22:55:12.977 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 29.5561ms
2025-06-11 22:55:12.979 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:12.980 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:12.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 43.3496ms
2025-06-11 22:55:12.984 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:12.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3776ms
2025-06-11 22:55:13.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:55:13.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:55:13.024 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:13.026 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:13.027 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:13.028 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:13.029 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:13.030 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:13.033 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:55:13.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:55:13.039 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:13.042 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:13.043 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.2331ms
2025-06-11 22:55:13.044 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.7634ms
2025-06-11 22:55:13.045 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:13.046 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:13.047 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:13.048 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:13.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.8033ms
2025-06-11 22:55:13.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.1991ms
2025-06-11 22:55:14.449 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:14.453 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:14.454 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:14.457 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:14.462 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:14.478 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:14.483 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:14.492 +07:00 [INF] Executed ViewResult - view Bookings executed in 9.2601ms.
2025-06-11 22:55:14.493 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 34.8344ms
2025-06-11 22:55:14.494 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:14.495 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:14.496 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 47.1937ms
2025-06-11 22:55:14.498 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:14.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:14.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3626ms
2025-06-11 22:55:14.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2682ms
2025-06-11 22:55:15.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:55:15.893 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:15.895 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:15.898 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:55:15.918 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:55:15.923 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:55:15.923 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 24.0128ms
2025-06-11 22:55:15.924 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:15.925 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:15.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 35.6426ms
2025-06-11 22:55:17.996 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:18.001 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:18.002 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:18.003 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:18.006 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:18.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:18.014 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:18.016 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8988ms.
2025-06-11 22:55:18.017 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.6625ms
2025-06-11 22:55:18.019 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:18.020 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:18.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 24.428ms
2025-06-11 22:55:18.026 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:18.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5165ms
2025-06-11 22:55:19.905 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - null null
2025-06-11 22:55:19.909 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:19.912 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:19.913 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:55:19.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:55:19.919 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:55:19.920 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 6.0562ms
2025-06-11 22:55:19.921 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:19.922 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:19.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - 404 0 null 17.231ms
2025-06-11 22:55:21.002 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:21.007 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:21.008 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:21.009 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:21.012 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:21.016 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:21.021 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:21.023 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.9708ms.
2025-06-11 22:55:21.025 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.9627ms
2025-06-11 22:55:21.026 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:21.028 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:21.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 26.5085ms
2025-06-11 22:55:21.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:21.037 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.318ms
2025-06-11 22:55:25.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-11 22:55:25.742 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:25.743 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:25.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 4.7348ms
2025-06-11 22:55:25.748 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-11 22:55:28.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:55:28.520 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:28.529 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:28.534 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:28.547 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:55:28.575 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:55:28.601 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:28.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:55:28.608 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:55:28.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:55:28.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:28.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:55:28.625 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:55:28.627 +07:00 [INF] Executed ViewResult - view Index executed in 2.1941ms.
2025-06-11 22:55:28.629 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 91.5817ms
2025-06-11 22:55:28.631 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:28.633 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:28.635 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 147.582ms
2025-06-11 22:55:28.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:28.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.7212ms
2025-06-11 22:55:28.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:55:28.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:55:28.769 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:28.772 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:28.773 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:28.774 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:28.775 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:28.776 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:28.781 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:55:28.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:55:28.789 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:28.791 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:28.793 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.9616ms
2025-06-11 22:55:28.794 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.2759ms
2025-06-11 22:55:28.796 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:28.798 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:28.799 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:28.801 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:28.802 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 36.2866ms
2025-06-11 22:55:28.803 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 37.3965ms
2025-06-11 22:55:29.871 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:29.875 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:29.876 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:29.877 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:29.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:29.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:29.888 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:29.889 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6066ms.
2025-06-11 22:55:29.891 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.2306ms
2025-06-11 22:55:29.892 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:29.893 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:29.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 22.7394ms
2025-06-11 22:55:29.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:29.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:29.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3855ms
2025-06-11 22:55:29.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.9056ms
2025-06-11 22:55:33.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 22:55:33.574 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:33.575 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:33.576 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:33.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 22:55:33.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 22:55:33.584 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:33.586 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 22:55:33.588 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 22:55:33.590 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 22:55:33.607 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:33.611 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 22:55:33.613 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 22:55:33.615 +07:00 [INF] Executed ViewResult - view Index executed in 1.4453ms.
2025-06-11 22:55:33.616 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 38.5447ms
2025-06-11 22:55:33.617 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 22:55:33.618 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:33.619 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 48.0562ms
2025-06-11 22:55:33.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:33.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9809ms
2025-06-11 22:55:33.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 22:55:33.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 22:55:33.664 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:33.666 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:33.667 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:33.668 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:33.668 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:33.669 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 22:55:33.672 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 22:55:33.676 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 22:55:33.678 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:33.681 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 22:55:33.682 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.4835ms
2025-06-11 22:55:33.683 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.3634ms
2025-06-11 22:55:33.684 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 22:55:33.685 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 22:55:33.686 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:33.686 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:33.687 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.6188ms
2025-06-11 22:55:33.688 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.1193ms
2025-06-11 22:55:46.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:46.396 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:46.397 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:46.398 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:46.401 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:46.404 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:46.408 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:46.410 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.9631ms.
2025-06-11 22:55:46.411 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.0672ms
2025-06-11 22:55:46.412 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:46.413 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:46.414 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 21.4399ms
2025-06-11 22:55:46.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 22:55:46.417 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:46.422 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.3213ms
2025-06-11 22:55:46.423 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.566ms
2025-06-11 22:55:47.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:55:47.781 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:47.782 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:47.783 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:55:47.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:55:47.790 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:55:47.791 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 5.7029ms
2025-06-11 22:55:47.792 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:47.793 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:47.793 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 16.4769ms
2025-06-11 22:55:49.370 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:55:49.374 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:49.375 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:49.376 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:55:49.379 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:55:49.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:55:49.387 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:55:49.388 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.5183ms.
2025-06-11 22:55:49.390 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 11.9705ms
2025-06-11 22:55:49.391 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:55:49.392 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:49.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 23.3117ms
2025-06-11 22:55:49.399 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:55:49.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0362ms
2025-06-11 22:55:59.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 22:55:59.396 +07:00 [INF] No cached response available for this request.
2025-06-11 22:55:59.398 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:59.399 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 22:55:59.411 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 22:55:59.413 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 22:55:59.414 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 13.7524ms
2025-06-11 22:55:59.415 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 22:55:59.416 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:55:59.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 24.515ms
2025-06-11 22:56:07.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 22:56:07.417 +07:00 [INF] No cached response available for this request.
2025-06-11 22:56:07.418 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:56:07.419 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 22:56:07.424 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 22:56:07.432 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 22:56:07.437 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 22:56:07.438 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.648ms.
2025-06-11 22:56:07.439 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 18.7469ms
2025-06-11 22:56:07.441 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 22:56:07.442 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:56:07.442 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 32.2973ms
2025-06-11 22:56:07.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 22:56:07.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6306ms
2025-06-11 22:57:17.065 +07:00 [INF] Starting database basic initialization...
2025-06-11 22:57:18.157 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:57:18.201 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:57:18.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 22:57:18.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 22:57:18.232 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 22:57:18.248 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 22:57:18.258 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 22:57:18.496 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:57:18.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:57:18.538 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 22:57:18.553 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.610 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.614 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.617 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.621 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.624 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.626 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 22:57:18.628 +07:00 [INF] Starting sample data seeding...
2025-06-11 22:57:18.630 +07:00 [INF] Starting data seeding...
2025-06-11 22:57:18.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:57:18.644 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 22:57:18.652 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:57:18.654 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 22:57:18.661 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:57:18.664 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 22:57:18.671 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:57:18.673 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 22:57:18.688 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 22:57:18.697 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 22:57:18.700 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 22:57:18.701 +07:00 [INF] Data seeding completed successfully
2025-06-11 22:57:18.701 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 22:57:18.702 +07:00 [INF] Database initialization completed successfully.
2025-06-11 22:57:18.725 +07:00 [INF] Background Job Service started
2025-06-11 22:57:18.760 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 22:57:18.770 +07:00 [INF] Processed 0 expired payments
2025-06-11 22:57:18.826 +07:00 [WRN] The ASP.NET Core developer certificate is not trusted. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert.
2025-06-11 22:57:18.865 +07:00 [INF] Now listening on: https://localhost:5001
2025-06-11 22:57:18.867 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 22:57:18.867 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 22:57:18.868 +07:00 [INF] Hosting environment: Development
2025-06-11 22:57:18.869 +07:00 [INF] Content root path: d:\WebHS
2025-06-11 22:57:56.258 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749657476131 - null null
2025-06-11 22:57:56.296 +07:00 [INF] No cached response available for this request.
2025-06-11 22:57:56.304 +07:00 [INF] The response could not be cached for this request.
2025-06-11 22:57:56.307 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749657476131 - 307 0 null 53.1203ms
2025-06-11 23:02:56.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:02:56.063 +07:00 [INF] No cached response available for this request.
2025-06-11 23:02:56.065 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:02:56.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 307 0 null 15.2684ms
2025-06-11 23:03:32.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:03:32.238 +07:00 [INF] No cached response available for this request.
2025-06-11 23:03:32.240 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:03:32.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 307 0 null 9.564ms
2025-06-11 23:04:35.275 +07:00 [INF] Application is shutting down...
