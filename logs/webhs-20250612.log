2025-06-12 00:00:26.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-12 00:00:26.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:00:26.733 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:26.735 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:26.736 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:00:26.737 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:00:26.737 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:00:26.738 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:00:26.746 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:00:26.747 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-12 00:00:26.753 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:00:26.755 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:00:26.755 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.8156ms
2025-06-12 00:00:26.756 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 13.7993ms
2025-06-12 00:00:26.757 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:00:26.758 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:00:26.759 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:26.760 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:26.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 38.8505ms
2025-06-12 00:00:26.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 39.4805ms
2025-06-12 00:00:54.071 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-12 00:00:54.076 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:00:54.081 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:00:54.084 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:00:54.087 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:00:54.092 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-12 00:00:54.093 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-12 00:00:54.095 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-12 00:00:54.096 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:00:54.097 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 8.1455ms
2025-06-12 00:00:54.099 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:00:54.100 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 29.0272ms
2025-06-12 00:00:54.104 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:00:54.108 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:54.109 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:00:54.110 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:00:54.119 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:00:54.124 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:00:54.128 +07:00 [INF] Executed ViewResult - view Index executed in 3.4359ms.
2025-06-12 00:00:54.129 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.7429ms
2025-06-12 00:00:54.131 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:00:54.133 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:54.134 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 30.0228ms
2025-06-12 00:00:54.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:00:54.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:00:54.141 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1436ms
2025-06-12 00:00:54.153 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.029ms
2025-06-12 00:00:54.949 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:00:54.953 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:54.954 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:00:54.955 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:00:54.956 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:00:54.959 +07:00 [INF] Executed ViewResult - view Login executed in 2.4946ms.
2025-06-12 00:00:54.960 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.8453ms
2025-06-12 00:00:54.961 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:00:54.962 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:54.963 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.5642ms
2025-06-12 00:00:54.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:00:54.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:00:54.972 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.2868ms
2025-06-12 00:00:54.972 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.2819ms
2025-06-12 00:00:57.321 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-12 00:00:57.324 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:00:57.325 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:00:57.326 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:00:57.328 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:00:57.342 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:00:57.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:00:57.419 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:00:57.427 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:00:57.429 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:00:57.434 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:00:57.435 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:00:57.436 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:00:57.437 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 107.6619ms
2025-06-12 00:00:57.438 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:00:57.439 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 118.4925ms
2025-06-12 00:00:57.442 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:00:57.445 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:57.446 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:00:57.447 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:00:57.451 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:00:57.454 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:00:57.456 +07:00 [INF] Executed ViewResult - view Index executed in 1.7871ms.
2025-06-12 00:00:57.457 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.8461ms
2025-06-12 00:00:57.458 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:00:57.459 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:57.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.2221ms
2025-06-12 00:00:57.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:00:57.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:00:57.466 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4152ms
2025-06-12 00:00:57.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.2947ms
2025-06-12 00:00:57.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:00:57.502 +07:00 [INF] No cached response available for this request.
2025-06-12 00:00:57.504 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:00:57.506 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:00:57.516 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:00:57.520 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:00:57.522 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.0228ms
2025-06-12 00:00:57.524 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:00:57.525 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:00:57.526 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.9445ms
2025-06-12 00:01:00.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-12 00:01:00.831 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:00.832 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-12 00:01:00.836 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-12 00:01:00.846 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-12 00:01:00.875 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-12 00:01:00.889 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-12 00:01:00.921 +07:00 [INF] Executed ViewResult - view AllReviews executed in 32.1817ms.
2025-06-12 00:01:00.923 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 85.5441ms
2025-06-12 00:01:00.924 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-12 00:01:00.926 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:00.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 99.8156ms
2025-06-12 00:01:00.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:00.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:00.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9718ms
2025-06-12 00:01:00.937 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5442ms
2025-06-12 00:01:01.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-12 00:01:01.821 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:01.823 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-12 00:01:01.824 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:01:01.826 +07:00 [INF] Executing ViewResult, running view About.
2025-06-12 00:01:01.832 +07:00 [INF] Executed ViewResult - view About executed in 6.3964ms.
2025-06-12 00:01:01.833 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 7.653ms
2025-06-12 00:01:01.834 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-12 00:01:01.835 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:01.836 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 17.9794ms
2025-06-12 00:01:01.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:01.843 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:01.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8332ms
2025-06-12 00:01:01.851 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.0957ms
2025-06-12 00:01:04.170 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-12 00:01:04.174 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:01:04.175 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:01:04.176 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:01:04.177 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:01:04.179 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-12 00:01:04.180 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-12 00:01:04.181 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-12 00:01:04.181 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:01:04.182 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 3.6004ms
2025-06-12 00:01:04.183 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:01:04.184 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 14.2212ms
2025-06-12 00:01:04.187 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:01:04.191 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:04.191 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:01:04.192 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:01:04.196 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:01:04.200 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:01:04.202 +07:00 [INF] Executed ViewResult - view Index executed in 1.7435ms.
2025-06-12 00:01:04.203 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.8772ms
2025-06-12 00:01:04.204 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:01:04.205 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:04.206 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 18.4212ms
2025-06-12 00:01:04.209 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:04.209 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:04.211 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3884ms
2025-06-12 00:01:04.216 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7676ms
2025-06-12 00:01:06.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:01:06.831 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:06.832 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:01:06.833 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:01:06.835 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:01:06.837 +07:00 [INF] Executed ViewResult - view Login executed in 1.9104ms.
2025-06-12 00:01:06.838 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.3223ms
2025-06-12 00:01:06.839 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:01:06.840 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:06.841 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 12.946ms
2025-06-12 00:01:06.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:06.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:06.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1534ms
2025-06-12 00:01:06.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8107ms
2025-06-12 00:01:07.917 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-12 00:01:07.921 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:01:07.922 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:01:07.923 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:01:07.924 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:01:07.929 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:01:07.933 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:01:07.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:01:07.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:01:08.001 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:01:08.003 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:01:08.005 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:01:08.006 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:01:08.007 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 80.719ms
2025-06-12 00:01:08.008 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:01:08.009 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 91.8801ms
2025-06-12 00:01:08.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:01:08.015 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:08.016 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:01:08.017 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:01:08.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:01:08.024 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:01:08.025 +07:00 [INF] Executed ViewResult - view Index executed in 1.7005ms.
2025-06-12 00:01:08.027 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.4796ms
2025-06-12 00:01:08.028 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:01:08.029 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:08.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.6326ms
2025-06-12 00:01:08.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:08.033 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:08.035 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0045ms
2025-06-12 00:01:08.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7573ms
2025-06-12 00:01:08.064 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:01:08.066 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:08.067 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:08.069 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:01:08.073 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:01:08.076 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:08.077 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.636ms
2025-06-12 00:01:08.079 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:08.080 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:08.082 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.9393ms
2025-06-12 00:01:09.365 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-12 00:01:09.368 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:09.369 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:01:09.373 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:01:09.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-12 00:01:09.397 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:01:09.409 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-12 00:01:09.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:01:09.424 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:01:09.428 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:01:09.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:01:09.438 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-12 00:01:09.449 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:01:09.472 +07:00 [INF] Executed ViewResult - view Index executed in 23.8545ms.
2025-06-12 00:01:09.474 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 99.1956ms
2025-06-12 00:01:09.475 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:01:09.477 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:09.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 112.8228ms
2025-06-12 00:01:09.480 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:09.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:09.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.716ms
2025-06-12 00:01:09.487 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.3236ms
2025-06-12 00:01:09.513 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:01:09.515 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:09.517 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:09.518 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:01:09.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:01:09.525 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:09.526 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.2783ms
2025-06-12 00:01:09.527 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:09.529 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:09.530 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.2385ms
2025-06-12 00:01:10.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - null null
2025-06-12 00:01:10.691 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:10.695 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:01:10.706 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:01:10.732 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:01:10.753 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-12 00:01:10.768 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:10.771 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-12 00:01:10.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:10.794 +07:00 [INF] Executed ViewResult - view Details executed in 22.9485ms.
2025-06-12 00:01:10.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.8177ms
2025-06-12 00:01:10.796 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:10.799 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 90.2508ms
2025-06-12 00:01:10.806 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:01:10.807 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.3039ms
2025-06-12 00:01:10.808 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:10.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - 200 null text/html; charset=utf-8 127.3889ms
2025-06-12 00:01:10.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-12 00:01:10.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-12 00:01:10.848 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:10.851 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:10.853 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:01:10.853 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:01:10.857 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:01:10.858 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:01:10.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - null null
2025-06-12 00:01:10.864 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:10.866 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:10.866 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:01:10.867 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:10.868 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 6.3375ms
2025-06-12 00:01:10.870 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 10.5068ms
2025-06-12 00:01:10.870 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:01:10.871 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:01:10.872 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:01:10.873 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:10.876 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:10.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 32.2013ms
2025-06-12 00:01:10.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 33.017ms
2025-06-12 00:01:10.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:01:10.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - null null
2025-06-12 00:01:10.971 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-12 00:01:10.976 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:10.973 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:11.015 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:11.017 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:01:11.018 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:11.019 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 144.8028ms
2025-06-12 00:01:11.020 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:01:11.021 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:01:11.022 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-12 00:01:11.023 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:11.023 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:01:11.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - 200 null application/json; charset=utf-8 167.9429ms
2025-06-12 00:01:11.029 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:11.032 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.4714ms
2025-06-12 00:01:11.033 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:01:11.034 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:11.035 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:01:11.036 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:11.037 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 81.5725ms
2025-06-12 00:01:11.195 +07:00 [INF] Received HTTP response headers after 157.3115ms - 401
2025-06-12 00:01:11.198 +07:00 [INF] End processing HTTP request after 167.3846ms - 401
2025-06-12 00:01:11.200 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-12 00:01:11.203 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:11.205 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 178.2076ms
2025-06-12 00:01:11.206 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:01:11.207 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:11.208 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - 200 null application/json; charset=utf-8 252.2835ms
2025-06-12 00:01:13.150 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-12&checkOut=2025-06-13&promotionCode= - null null
2025-06-12 00:01:13.152 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:13.153 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:01:13.154 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:01:13.155 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-12&checkOut=2025-06-13 - null null
2025-06-12 00:01:13.158 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:13.159 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:01:13.160 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:01:13.163 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:01:13.166 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:13.172 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-12 00:01:13.174 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:13.177 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:13.178 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 16.3852ms
2025-06-12 00:01:13.179 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:01:13.179 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:13.180 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-12&checkOut=2025-06-13 - 200 null application/json; charset=utf-8 25.5865ms
2025-06-12 00:01:13.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:01:13.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:01:13.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:01:13.199 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:01:13.201 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:13.204 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 48.2562ms
2025-06-12 00:01:13.205 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:01:13.206 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:13.206 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-12&checkOut=2025-06-13&promotionCode= - 200 null application/json; charset=utf-8 56.4019ms
2025-06-12 00:01:26.379 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Booking/Create - application/x-www-form-urlencoded 324
2025-06-12 00:01:26.383 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:01:26.385 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:01:26.387 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:01:26.393 +07:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(WebHS.ViewModels.BookingViewModel) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:01:26.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:26.407 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:26.423 +07:00 [INF] Creating booking for user 6a64425a-4abd-447a-8868-e574987d2f5a, homestay 4
2025-06-12 00:01:26.427 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:26.430 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:01:26.445 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_HomestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__model_HomestayId_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0]
2025-06-12 00:01:26.449 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:01:26.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:01:26.500 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-12 00:01:26.506 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 1000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 1000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-06-12 00:01:26.516 +07:00 [INF] Booking 27 created successfully for user 6a64425a-4abd-447a-8868-e574987d2f5a
2025-06-12 00:01:26.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-12 00:01:26.712 +07:00 [INF] Confirmation email sent for booking 27
2025-06-12 00:01:26.716 +07:00 [INF] Executing RedirectResult, redirecting to /Payment/Checkout?bookingId=27.
2025-06-12 00:01:26.717 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Create (WebHS) in 321.9731ms
2025-06-12 00:01:26.718 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:01:26.719 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Booking/Create - 302 0 null 340.5979ms
2025-06-12 00:01:26.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=27 - null null
2025-06-12 00:01:26.727 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:26.728 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:01:26.732 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:01:26.744 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:01:26.748 +07:00 [INF] Executing ViewResult, running view Checkout.
2025-06-12 00:01:26.761 +07:00 [INF] Executed ViewResult - view Checkout executed in 14.3682ms.
2025-06-12 00:01:26.763 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 29.9923ms
2025-06-12 00:01:26.764 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:01:26.766 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:26.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=27 - 200 null text/html; charset=utf-8 43.002ms
2025-06-12 00:01:26.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:01:26.775 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:01:26.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5464ms
2025-06-12 00:01:26.783 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.5084ms
2025-06-12 00:01:26.813 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:01:26.814 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - null null
2025-06-12 00:01:26.816 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:26.818 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:26.819 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:26.820 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:26.821 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:01:26.825 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:01:26.826 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:01:26.831 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:26.832 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0371ms
2025-06-12 00:01:26.833 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:01:26.834 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:26.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.7641ms
2025-06-12 00:01:26.849 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:01:26.851 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:01:26.856 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 26.9483ms
2025-06-12 00:01:26.857 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:26.858 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:26.859 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - 200 null application/json; charset=utf-8 44.9773ms
2025-06-12 00:01:36.583 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - null null
2025-06-12 00:01:36.588 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:36.589 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:36.590 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:01:36.593 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:01:36.596 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:01:36.597 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 5.4794ms
2025-06-12 00:01:36.598 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:36.599 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:36.599 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - 200 null application/json; charset=utf-8 16.2023ms
2025-06-12 00:01:38.636 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - application/x-www-form-urlencoded; charset=UTF-8 34
2025-06-12 00:01:38.637 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:01:38.638 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:01:38.639 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:01:38.642 +07:00 [INF] Route matched with {action = "ValidatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidatePromotion(System.String, System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:01:38.656 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE LOWER([p].[Code]) = @__ToLower_0
2025-06-12 00:01:38.659 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType45`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType46`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:01:38.661 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.ValidatePromotion (WebHS) in 17.5604ms
2025-06-12 00:01:38.662 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:01:38.663 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - 200 null application/json; charset=utf-8 27.409ms
2025-06-12 00:01:45.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - null null
2025-06-12 00:01:45.337 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:45.338 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:45.339 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:01:45.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:01:45.345 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:01:45.346 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 5.453ms
2025-06-12 00:01:45.347 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:01:45.348 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:45.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - 200 null application/json; charset=utf-8 14.0315ms
2025-06-12 00:01:53.802 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - application/x-www-form-urlencoded 486
2025-06-12 00:01:53.806 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:01:53.807 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:01:53.809 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-12 00:01:53.814 +07:00 [INF] Route matched with {action = "ProcessPayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessPayment(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Decimal]) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:01:53.831 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:01:53.837 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__promotionId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE [p].[Id] = @__promotionId_Value_0 AND [p].[IsActive] = CAST(1 AS bit)
2025-06-12 00:01:53.852 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [DiscountAmount] = @p0, [FinalAmount] = @p1, [PromotionId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Promotions] SET [UsedCount] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-06-12 00:01:53.870 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[BookingId] = @__bookingId_0 AND [p].[Status] = 0
2025-06-12 00:01:53.939 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [BookingId], [CompletedAt], [CreatedAt], [Notes], [PaymentMethod], [Status], [TransactionId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-06-12 00:01:53.969 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p5='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [Status] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Payments] SET [CompletedAt] = @p2, [Status] = @p3, [TransactionId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-06-12 00:01:53.977 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType36`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:01:53.979 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.ProcessPayment (WebHS) in 163.9193ms
2025-06-12 00:01:53.981 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-12 00:01:53.983 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - 200 null application/json; charset=utf-8 180.4085ms
2025-06-12 00:01:59.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - null null
2025-06-12 00:01:59.657 +07:00 [INF] No cached response available for this request.
2025-06-12 00:01:59.661 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:01:59.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 7.2248ms
2025-06-12 00:01:59.666 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-06-12 00:02:07.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=27 - null null
2025-06-12 00:02:07.778 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:07.779 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:02:07.779 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:02:07.793 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:02:07.795 +07:00 [INF] Executing RedirectResult, redirecting to /Booking/Details/27.
2025-06-12 00:02:07.796 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 15.5649ms
2025-06-12 00:02:07.798 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:02:07.798 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:07.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=27 - 302 0 null 27.8381ms
2025-06-12 00:02:07.802 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/27 - null null
2025-06-12 00:02:07.805 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:07.807 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-12 00:02:07.810 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:02:07.831 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-12 00:02:07.835 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-12 00:02:07.843 +07:00 [INF] Executed ViewResult - view Details executed in 8.9371ms.
2025-06-12 00:02:07.845 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 33.3473ms
2025-06-12 00:02:07.846 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-12 00:02:07.847 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:07.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/27 - 200 null text/html; charset=utf-8 45.6477ms
2025-06-12 00:02:07.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:02:07.860 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.269ms
2025-06-12 00:02:26.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - null null
2025-06-12 00:02:26.613 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.614 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:02:26.615 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:02:26.633 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-12 00:02:26.641 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:26.643 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-12 00:02:26.646 +07:00 [INF] Executed ViewResult - view Details executed in 3.4802ms.
2025-06-12 00:02:26.648 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 31.545ms
2025-06-12 00:02:26.649 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:02:26.651 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.652 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - 200 null text/html; charset=utf-8 42.3502ms
2025-06-12 00:02:26.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:02:26.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8537ms
2025-06-12 00:02:26.664 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:02:26.673 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.5233ms
2025-06-12 00:02:26.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-12 00:02:26.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-12 00:02:26.702 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - null null
2025-06-12 00:02:26.704 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.706 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.709 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.710 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:02:26.711 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:02:26.714 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - null null
2025-06-12 00:02:26.714 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:02:26.719 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:02:26.722 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.712 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:02:26.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:02:26.729 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:26.731 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:26.734 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:02:26.735 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:02:26.737 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:26.739 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 9.9471ms
2025-06-12 00:02:26.741 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 9.3835ms
2025-06-12 00:02:26.744 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-12 00:02:26.761 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:02:26.746 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:02:26.773 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-12 00:02:26.774 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:02:26.776 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:02:26.777 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.777 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:02:26.782 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:26.782 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.783 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:02:26.790 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 89.9826ms
2025-06-12 00:02:26.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 84.0174ms
2025-06-12 00:02:26.788 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 45.3143ms
2025-06-12 00:02:26.790 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:02:26.807 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:02:26.809 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:26.811 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.812 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 25.6973ms
2025-06-12 00:02:26.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - 200 null application/json; charset=utf-8 110.6937ms
2025-06-12 00:02:26.815 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:02:26.820 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.821 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 97.7139ms
2025-06-12 00:02:26.876 +07:00 [INF] Received HTTP response headers after 81.459ms - 401
2025-06-12 00:02:26.878 +07:00 [INF] End processing HTTP request after 101.9553ms - 401
2025-06-12 00:02:26.879 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-12 00:02:26.880 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:26.882 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 106.3271ms
2025-06-12 00:02:26.883 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:02:26.885 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:26.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - 200 null application/json; charset=utf-8 171.412ms
2025-06-12 00:02:30.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - null null
2025-06-12 00:02:30.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-28&checkOut=2025-06-29 - null null
2025-06-12 00:02:30.204 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:30.206 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:30.207 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:02:30.208 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:02:30.208 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:02:30.209 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:02:30.214 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-12 00:02:30.217 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:30.219 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:02:30.221 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:30.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:02:30.224 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:30.226 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:02:30.226 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 13.2212ms
2025-06-12 00:02:30.229 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:02:30.229 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:02:30.231 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:30.232 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:30.233 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 22.129ms
2025-06-12 00:02:30.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-28&checkOut=2025-06-29 - 200 null application/json; charset=utf-8 31.6997ms
2025-06-12 00:02:30.234 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:02:30.237 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:30.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - 200 null application/json; charset=utf-8 36.5119ms
2025-06-12 00:02:31.374 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Booking/Create - application/x-www-form-urlencoded 324
2025-06-12 00:02:31.377 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:02:31.378 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:02:31.379 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:02:31.380 +07:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(WebHS.ViewModels.BookingViewModel) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:02:31.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:31.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:31.393 +07:00 [INF] Creating booking for user 6a64425a-4abd-447a-8868-e574987d2f5a, homestay 4
2025-06-12 00:02:31.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:31.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:02:31.403 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_HomestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__model_HomestayId_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0]
2025-06-12 00:02:31.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:02:31.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:02:31.411 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-12 00:02:31.416 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 1000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 1000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-06-12 00:02:31.418 +07:00 [INF] Booking 28 created successfully for user 6a64425a-4abd-447a-8868-e574987d2f5a
2025-06-12 00:02:31.421 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-12 00:02:31.423 +07:00 [INF] Confirmation email sent for booking 28
2025-06-12 00:02:31.424 +07:00 [INF] Executing RedirectResult, redirecting to /Payment/Checkout?bookingId=28.
2025-06-12 00:02:31.424 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Create (WebHS) in 43.1162ms
2025-06-12 00:02:31.425 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:02:31.426 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Booking/Create - 302 0 null 52.5866ms
2025-06-12 00:02:31.429 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=28 - null null
2025-06-12 00:02:31.432 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:31.433 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:02:31.434 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:02:31.437 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:02:31.440 +07:00 [INF] Executing ViewResult, running view Checkout.
2025-06-12 00:02:31.442 +07:00 [INF] Executed ViewResult - view Checkout executed in 2.0546ms.
2025-06-12 00:02:31.443 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 7.7464ms
2025-06-12 00:02:31.444 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:02:31.445 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:31.446 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=28 - 200 null text/html; charset=utf-8 17.0007ms
2025-06-12 00:02:31.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:02:31.454 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:02:31.455 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0529ms
2025-06-12 00:02:31.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4715ms
2025-06-12 00:02:31.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:02:31.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - null null
2025-06-12 00:02:31.480 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:31.483 +07:00 [INF] No cached response available for this request.
2025-06-12 00:02:31.484 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:02:31.485 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:02:31.486 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:02:31.486 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:02:31.490 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:02:31.496 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:02:31.496 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:02:31.497 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.9133ms
2025-06-12 00:02:31.499 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:02:31.501 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:02:31.502 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 10.0894ms
2025-06-12 00:02:31.503 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:31.504 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:02:31.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.9696ms
2025-06-12 00:02:31.506 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:02:31.509 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=2800000 - 200 null application/json; charset=utf-8 30.2826ms
2025-06-12 00:03:01.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:03:01.733 +07:00 [INF] No cached response available for this request.
2025-06-12 00:03:01.734 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:03:01.735 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:03:01.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:03:01.744 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:03:01.745 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.5621ms
2025-06-12 00:03:01.746 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:03:01.747 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:03:01.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 19.1591ms
2025-06-12 00:06:24.366 +07:00 [INF] Starting database basic initialization...
2025-06-12 00:06:25.980 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-12 00:06:26.064 +07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-12 00:06:26.073 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-12 00:06:26.079 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-12 00:06:26.114 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-12 00:06:26.135 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-12 00:06:26.164 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-12 00:06:26.515 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:06:26.584 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:06:26.589 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:06:26.614 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.697 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.705 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.712 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.725 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:26.728 +07:00 [INF] Starting sample data seeding...
2025-06-12 00:06:26.732 +07:00 [INF] Starting data seeding...
2025-06-12 00:06:26.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:26.756 +07:00 [INF] Amenities already exist, skipping seed
2025-06-12 00:06:26.767 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:26.770 +07:00 [INF] Homestays already exist, skipping seed
2025-06-12 00:06:26.779 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:26.782 +07:00 [INF] Promotions already exist, skipping seed
2025-06-12 00:06:26.793 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:26.797 +07:00 [INF] Bookings already exist, skipping seed
2025-06-12 00:06:26.819 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-12 00:06:26.830 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:26.832 +07:00 [INF] Payments already exist, skipping seed
2025-06-12 00:06:26.833 +07:00 [INF] Data seeding completed successfully
2025-06-12 00:06:26.834 +07:00 [INF] Sample data seeding completed successfully.
2025-06-12 00:06:26.835 +07:00 [INF] Database initialization completed successfully.
2025-06-12 00:06:26.864 +07:00 [INF] Background Job Service started
2025-06-12 00:06:26.905 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-12 00:06:26.927 +07:00 [INF] Processed 0 expired payments
2025-06-12 00:06:27.015 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-12 00:06:27.053 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 00:06:27.057 +07:00 [INF] Hosting environment: Development
2025-06-12 00:06:27.058 +07:00 [INF] Content root path: D:\WebHS
2025-06-12 00:06:27.389 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:06:27.571 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:27.584 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-12 00:06:27.649 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:06:27.666 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:06:27.810 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:06:27.825 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:06:27.951 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:06:28.070 +07:00 [INF] Executed ViewResult - view Index executed in 120.8747ms.
2025-06-12 00:06:28.075 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 405.0378ms
2025-06-12 00:06:28.078 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:06:28.078 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-12 00:06:28.079 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - null null
2025-06-12 00:06:28.088 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:28.087 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:28.095 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:28.100 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:28.100 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:28.105 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 15.6966ms
2025-06-12 00:06:28.113 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-12 00:06:28.113 +07:00 [INF] The file /images/placeholder-homestay.svg was not modified
2025-06-12 00:06:28.122 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:28.122 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:28.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 729.2176ms
2025-06-12 00:06:28.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 45.9689ms
2025-06-12 00:06:28.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/placeholder-homestay.svg - 304 null image/svg+xml 45.5288ms
2025-06-12 00:06:28.142 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.2726ms
2025-06-12 00:06:31.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:06:31.964 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:31.968 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:06:31.975 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:06:31.985 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:06:32.014 +07:00 [INF] Executed ViewResult - view Login executed in 30.1808ms.
2025-06-12 00:06:32.017 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 39.9737ms
2025-06-12 00:06:32.019 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:06:32.020 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:32.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 63.4912ms
2025-06-12 00:06:32.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:32.025 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:32.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5176ms
2025-06-12 00:06:32.043 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.3953ms
2025-06-12 00:06:33.315 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-12 00:06:33.320 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:06:33.321 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:06:33.327 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:06:33.333 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:06:33.359 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:06:33.367 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:06:33.456 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:06:33.474 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:06:33.478 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:06:33.485 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:06:33.492 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:06:33.494 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:06:33.495 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 160.6093ms
2025-06-12 00:06:33.496 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:06:33.497 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 181.73ms
2025-06-12 00:06:33.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:06:33.502 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:33.506 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:06:33.507 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:06:33.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:06:33.517 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:06:33.523 +07:00 [INF] Executed ViewResult - view Index executed in 5.6952ms.
2025-06-12 00:06:33.524 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.4146ms
2025-06-12 00:06:33.525 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:06:33.526 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:33.527 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 27.7264ms
2025-06-12 00:06:33.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:33.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:33.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.6125ms
2025-06-12 00:06:33.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.4754ms
2025-06-12 00:06:33.569 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:06:33.573 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:33.581 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:33.585 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:06:33.616 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:06:33.624 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:33.630 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 42.9052ms
2025-06-12 00:06:33.632 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:33.632 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:33.633 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 64.2189ms
2025-06-12 00:06:36.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-12 00:06:36.198 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:36.203 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:06:36.209 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:06:36.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-12 00:06:36.237 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:06:36.250 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-12 00:06:36.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:06:36.268 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:06:36.270 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:06:36.274 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:06:36.280 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-12 00:06:36.291 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:06:36.322 +07:00 [INF] Executed ViewResult - view Index executed in 32.0395ms.
2025-06-12 00:06:36.325 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 114.7725ms
2025-06-12 00:06:36.327 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:06:36.328 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:36.329 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 134.9304ms
2025-06-12 00:06:36.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:36.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:36.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.975ms
2025-06-12 00:06:36.337 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4697ms
2025-06-12 00:06:36.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:06:36.372 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:36.377 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:36.379 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:06:36.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:06:36.387 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:36.388 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.0744ms
2025-06-12 00:06:36.389 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:36.390 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:36.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.5037ms
2025-06-12 00:06:37.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/2 - null null
2025-06-12 00:06:37.726 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:37.728 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:06:37.731 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:06:37.756 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:06:37.778 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-12 00:06:37.796 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:37.800 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-12 00:06:37.811 +07:00 [INF] Executed ViewResult - view Details executed in 11.9172ms.
2025-06-12 00:06:37.812 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 80.1566ms
2025-06-12 00:06:37.814 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-12 00:06:37.815 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:37.816 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/2 - 200 null text/html; charset=utf-8 93.5142ms
2025-06-12 00:06:37.819 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:37.821 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5061ms
2025-06-12 00:06:37.825 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:37.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.322ms
2025-06-12 00:06:37.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-12 00:06:37.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-12 00:06:37.884 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:37.886 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:37.889 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:06:37.890 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:06:37.892 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:06:37.893 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:06:37.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/2 - null null
2025-06-12 00:06:37.899 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:37.901 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:06:37.902 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:37.903 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:37.907 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:06:37.907 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 11.7893ms
2025-06-12 00:06:37.907 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 13.4753ms
2025-06-12 00:06:37.910 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:06:37.911 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:06:37.912 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:37.913 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:37.914 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 32.1553ms
2025-06-12 00:06:37.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 33.0099ms
2025-06-12 00:06:37.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:06:37.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.7769&longitude=106.7009 - null null
2025-06-12 00:06:37.990 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-12 00:06:37.992 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:37.994 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:38.023 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:38.024 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:38.026 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:06:38.027 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:06:38.028 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 119.226ms
2025-06-12 00:06:38.030 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-12 00:06:38.032 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:06:38.033 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:38.034 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-12 00:06:38.035 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:38.036 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/2 - 200 null application/json; charset=utf-8 138.9948ms
2025-06-12 00:06:38.039 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.6396ms
2025-06-12 00:06:38.043 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:38.044 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:38.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 74.2969ms
2025-06-12 00:06:38.044 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.7769&lon=106.7009&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:06:38.049 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.7769&lon=106.7009&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-12 00:06:38.202 +07:00 [INF] Received HTTP response headers after 150.7547ms - 401
2025-06-12 00:06:38.205 +07:00 [INF] End processing HTTP request after 162.7671ms - 401
2025-06-12 00:06:38.207 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-12 00:06:38.211 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:38.213 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 175.3905ms
2025-06-12 00:06:38.214 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-12 00:06:38.215 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:38.215 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.7769&longitude=106.7009 - 200 null application/json; charset=utf-8 245.1251ms
2025-06-12 00:06:39.964 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-14&checkOut=2025-06-15 - null null
2025-06-12 00:06:39.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-14&checkOut=2025-06-15&promotionCode= - null null
2025-06-12 00:06:39.968 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:39.971 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:39.973 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:06:39.973 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:06:39.974 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:06:39.976 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:06:39.985 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:39.989 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:06:39.991 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:39.993 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:39.994 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 15.901ms
2025-06-12 00:06:39.997 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-12 00:06:39.997 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-12 00:06:39.998 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:40.000 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-14&checkOut=2025-06-15 - 200 null application/json; charset=utf-8 35.6103ms
2025-06-12 00:06:40.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:06:40.017 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:06:40.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:06:40.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:06:40.029 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:40.035 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 55.2119ms
2025-06-12 00:06:40.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-12 00:06:40.037 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:40.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-14&checkOut=2025-06-15&promotionCode= - 200 null application/json; charset=utf-8 73.1774ms
2025-06-12 00:06:42.543 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Booking/Create - application/x-www-form-urlencoded 324
2025-06-12 00:06:42.548 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:06:42.549 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:06:42.550 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:06:42.555 +07:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(WebHS.ViewModels.BookingViewModel) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:06:42.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:42.567 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:42.580 +07:00 [INF] Creating booking for user 6a64425a-4abd-447a-8868-e574987d2f5a, homestay 2
2025-06-12 00:06:42.583 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:42.586 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:06:42.599 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_HomestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__model_HomestayId_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0]
2025-06-12 00:06:42.602 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-12 00:06:42.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-12 00:06:42.713 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-12 00:06:42.725 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 1000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 1000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-06-12 00:06:42.749 +07:00 [INF] Booking 29 created successfully for user 6a64425a-4abd-447a-8868-e574987d2f5a
2025-06-12 00:06:42.760 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-12 00:06:42.770 +07:00 [INF] Confirmation email sent for booking 29
2025-06-12 00:06:42.773 +07:00 [INF] Executing RedirectResult, redirecting to /Payment/Checkout?bookingId=29.
2025-06-12 00:06:42.774 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Create (WebHS) in 218.3192ms
2025-06-12 00:06:42.775 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Create (WebHS)'
2025-06-12 00:06:42.776 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Booking/Create - 302 0 null 232.7914ms
2025-06-12 00:06:42.779 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=29 - null null
2025-06-12 00:06:42.781 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:42.783 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:06:42.786 +07:00 [INF] Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(Int32) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:06:42.796 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:06:42.799 +07:00 [INF] Executing ViewResult, running view Checkout.
2025-06-12 00:06:42.815 +07:00 [INF] Executed ViewResult - view Checkout executed in 16.0057ms.
2025-06-12 00:06:42.817 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Checkout (WebHS) in 29.3985ms
2025-06-12 00:06:42.818 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Checkout (WebHS)'
2025-06-12 00:06:42.819 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:42.820 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Checkout?bookingId=29 - 200 null text/html; charset=utf-8 41.3345ms
2025-06-12 00:06:42.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:42.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:42.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2604ms
2025-06-12 00:06:42.836 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.241ms
2025-06-12 00:06:42.867 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:06:42.867 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=1800000 - null null
2025-06-12 00:06:42.870 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:42.872 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:42.873 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:42.874 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:06:42.874 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:06:42.877 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:06:42.880 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:42.881 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:06:42.881 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 5.9742ms
2025-06-12 00:06:42.884 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:42.885 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:42.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.9458ms
2025-06-12 00:06:42.898 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:06:42.900 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:06:42.908 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 25.3302ms
2025-06-12 00:06:42.909 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:06:42.910 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:42.911 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=1800000 - 200 null application/json; charset=utf-8 43.8433ms
2025-06-12 00:06:48.508 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=1800000 - null null
2025-06-12 00:06:48.511 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:48.513 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:06:48.514 +07:00 [INF] Route matched with {action = "GetAvailablePromotions", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailablePromotions(System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:06:48.519 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__orderAmount_1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @__currentDateTime_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Code], [p].[Name], [p].[Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], CASE
    WHEN [p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
FROM [Promotions] AS [p]
WHERE [p].[IsActive] = CAST(1 AS bit) AND [p].[StartDate] <= @__currentDateTime_0 AND [p].[EndDate] >= @__currentDateTime_0 AND ([p].[MinOrderAmount] IS NULL OR [p].[MinOrderAmount] <= @__orderAmount_1) AND ([p].[UsageLimit] IS NULL OR [p].[UsedCount] < [p].[UsageLimit])
2025-06-12 00:06:48.522 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType43`9[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:06:48.523 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS) in 7.2248ms
2025-06-12 00:06:48.524 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.GetAvailablePromotions (WebHS)'
2025-06-12 00:06:48.525 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:48.526 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/GetAvailablePromotions?orderAmount=1800000 - 200 null application/json; charset=utf-8 17.4724ms
2025-06-12 00:06:49.438 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - application/x-www-form-urlencoded; charset=UTF-8 34
2025-06-12 00:06:49.440 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:06:49.440 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:06:49.442 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:06:49.444 +07:00 [INF] Route matched with {action = "ValidatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidatePromotion(System.String, System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:06:49.455 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE LOWER([p].[Code]) = @__ToLower_0
2025-06-12 00:06:49.475 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType45`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType46`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:06:49.478 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.ValidatePromotion (WebHS) in 32.743ms
2025-06-12 00:06:49.480 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:06:49.481 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - 200 null application/json; charset=utf-8 42.8301ms
2025-06-12 00:06:50.548 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - application/x-www-form-urlencoded; charset=UTF-8 34
2025-06-12 00:06:50.551 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:06:50.552 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:06:50.553 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:06:50.554 +07:00 [INF] Route matched with {action = "ValidatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidatePromotion(System.String, System.Decimal) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:06:50.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE LOWER([p].[Code]) = @__ToLower_0
2025-06-12 00:06:50.560 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType45`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType46`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-12 00:06:50.561 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.ValidatePromotion (WebHS) in 5.6264ms
2025-06-12 00:06:50.562 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.ValidatePromotion (WebHS)'
2025-06-12 00:06:50.563 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Promotion/ValidatePromotion - 200 null application/json; charset=utf-8 14.8364ms
2025-06-12 00:06:53.179 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - application/x-www-form-urlencoded; charset=UTF-8 67
2025-06-12 00:06:53.181 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:06:53.182 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:06:53.184 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-12 00:06:53.188 +07:00 [INF] Route matched with {action = "ProcessPayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessPayment(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Decimal]) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:06:53.209 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__bookingId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
WHERE [b].[Id] = @__bookingId_0 AND [b].[UserId] = @__userId_1
2025-06-12 00:06:53.215 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__promotionId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE [p].[Id] = @__promotionId_Value_0 AND [p].[IsActive] = CAST(1 AS bit)
2025-06-12 00:06:53.240 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [DiscountAmount] = @p0, [FinalAmount] = @p1, [PromotionId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Promotions] SET [UsedCount] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-06-12 00:06:53.251 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__bookingId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[BookingId] = @__bookingId_0 AND [p].[Status] = 0
2025-06-12 00:06:53.280 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 500), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [BookingId], [CompletedAt], [CreatedAt], [Notes], [PaymentMethod], [Status], [TransactionId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-06-12 00:06:53.294 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p5='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [Status] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Payments] SET [CompletedAt] = @p2, [Status] = @p3, [TransactionId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-06-12 00:06:53.299 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType36`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:53.301 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.ProcessPayment (WebHS) in 112.2153ms
2025-06-12 00:06:53.303 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.ProcessPayment (WebHS)'
2025-06-12 00:06:53.304 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Payment/ProcessPayment - 200 null application/json; charset=utf-8 124.3453ms
2025-06-12 00:06:53.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Payment/Result?transactionId=FREE_23_1749661613 - null null
2025-06-12 00:06:53.313 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:53.314 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PaymentController.Result (WebHS)'
2025-06-12 00:06:53.318 +07:00 [INF] Route matched with {action = "Result", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Result(System.String) on controller WebHS.Controllers.PaymentController (WebHS).
2025-06-12 00:06:53.336 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__transactionId_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Payments] AS [p]
INNER JOIN [Bookings] AS [b] ON [p].[BookingId] = [b].[Id]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [p].[TransactionId] = @__transactionId_0
2025-06-12 00:06:53.339 +07:00 [INF] Executing ViewResult, running view Result.
2025-06-12 00:06:53.344 +07:00 [INF] Executed ViewResult - view Result executed in 4.5006ms.
2025-06-12 00:06:53.345 +07:00 [INF] Executed action WebHS.Controllers.PaymentController.Result (WebHS) in 24.9994ms
2025-06-12 00:06:53.346 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PaymentController.Result (WebHS)'
2025-06-12 00:06:53.347 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:53.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Payment/Result?transactionId=FREE_23_1749661613 - 200 null text/html; charset=utf-8 37.6308ms
2025-06-12 00:06:53.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:06:53.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:06:53.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9919ms
2025-06-12 00:06:53.358 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1343ms
2025-06-12 00:06:53.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:06:53.389 +07:00 [INF] No cached response available for this request.
2025-06-12 00:06:53.390 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:53.392 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:06:53.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:06:53.400 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:06:53.402 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.0429ms
2025-06-12 00:06:53.404 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:06:53.405 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:06:53.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.9683ms
2025-06-12 00:07:07.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/29 - null null
2025-06-12 00:07:07.973 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:07.975 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-12 00:07:07.979 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:07:08.001 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-12 00:07:08.004 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-12 00:07:08.012 +07:00 [INF] Executed ViewResult - view Details executed in 8.091ms.
2025-06-12 00:07:08.014 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 32.9439ms
2025-06-12 00:07:08.015 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-12 00:07:08.016 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:08.017 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/29 - 200 null text/html; charset=utf-8 47.3984ms
2025-06-12 00:07:08.020 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:08.020 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:08.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1888ms
2025-06-12 00:07:08.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.5606ms
2025-06-12 00:07:08.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:08.062 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:08.064 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:08.065 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:08.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:08.074 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:08.075 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.5785ms
2025-06-12 00:07:08.077 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:08.079 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:08.080 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 21.6981ms
2025-06-12 00:07:12.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking - null null
2025-06-12 00:07:12.070 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:12.071 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-12 00:07:12.074 +07:00 [INF] Route matched with {action = "Index", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-12 00:07:12.082 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-12 00:07:12.099 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:07:12.121 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-12 00:07:12.135 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:12.143 +07:00 [INF] Executed ViewResult - view Index executed in 8.0156ms.
2025-06-12 00:07:12.145 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Index (WebHS) in 68.8144ms
2025-06-12 00:07:12.146 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Index (WebHS)'
2025-06-12 00:07:12.147 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:12.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking - 200 null text/html; charset=utf-8 81.8995ms
2025-06-12 00:07:12.150 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:12.151 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:12.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2791ms
2025-06-12 00:07:12.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.6194ms
2025-06-12 00:07:12.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:12.183 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:12.184 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:12.185 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:12.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:12.192 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:12.193 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1631ms
2025-06-12 00:07:12.195 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:12.196 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:12.197 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.6441ms
2025-06-12 00:07:13.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-12 00:07:13.453 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:13.454 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:07:13.455 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-12 00:07:13.458 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-12 00:07:13.463 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-12 00:07:13.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:07:13.469 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:07:13.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:07:13.473 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-12 00:07:13.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-12 00:07:13.478 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:13.480 +07:00 [INF] Executed ViewResult - view Index executed in 2.2862ms.
2025-06-12 00:07:13.481 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 24.821ms
2025-06-12 00:07:13.482 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-12 00:07:13.483 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:13.484 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 34.6471ms
2025-06-12 00:07:13.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:13.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:13.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4465ms
2025-06-12 00:07:13.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1843ms
2025-06-12 00:07:13.520 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:13.523 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:13.524 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:13.525 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:13.529 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:13.533 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:13.535 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.6202ms
2025-06-12 00:07:13.536 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:13.537 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:13.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.7668ms
2025-06-12 00:07:18.033 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-12 00:07:18.036 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:07:18.037 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:07:18.039 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:07:18.041 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:18.045 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-12 00:07:18.047 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-12 00:07:18.047 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-12 00:07:18.048 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:07:18.049 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 5.6129ms
2025-06-12 00:07:18.050 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:07:18.051 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 17.9791ms
2025-06-12 00:07:18.053 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:07:18.056 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:18.057 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:18.058 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:07:18.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:07:18.065 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:18.067 +07:00 [INF] Executed ViewResult - view Index executed in 1.9275ms.
2025-06-12 00:07:18.068 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.4178ms
2025-06-12 00:07:18.069 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:18.070 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:18.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.8199ms
2025-06-12 00:07:18.074 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:18.074 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:18.080 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1687ms
2025-06-12 00:07:18.080 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5933ms
2025-06-12 00:07:18.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:07:18.741 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:18.742 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:18.743 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:18.745 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:07:18.747 +07:00 [INF] Executed ViewResult - view Login executed in 2.4785ms.
2025-06-12 00:07:18.748 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 4.082ms
2025-06-12 00:07:18.749 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:18.750 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:18.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.3083ms
2025-06-12 00:07:18.754 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:18.754 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:18.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.9137ms
2025-06-12 00:07:18.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5141ms
2025-06-12 00:07:21.046 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-12 00:07:21.050 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:07:21.051 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:07:21.052 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:21.052 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:21.056 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:07:21.060 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:07:21.125 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:07:21.129 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:21.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:07:21.136 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:07:21.137 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:07:21.138 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:07:21.139 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 85.2732ms
2025-06-12 00:07:21.140 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:21.142 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 95.1984ms
2025-06-12 00:07:21.144 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:07:21.147 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:21.148 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:21.149 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:07:21.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:07:21.156 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:21.159 +07:00 [INF] Executed ViewResult - view Index executed in 3.3855ms.
2025-06-12 00:07:21.161 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.97ms
2025-06-12 00:07:21.162 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:21.163 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:21.164 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.0718ms
2025-06-12 00:07:21.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:21.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:21.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7491ms
2025-06-12 00:07:21.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8785ms
2025-06-12 00:07:21.204 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:21.209 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:21.210 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:21.212 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:21.216 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:21.221 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:21.222 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.9739ms
2025-06-12 00:07:21.224 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:21.226 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:21.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 22.432ms
2025-06-12 00:07:23.667 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-12 00:07:23.670 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:23.672 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-12 00:07:23.676 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-12 00:07:23.690 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-12 00:07:23.706 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:07:23.734 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-12 00:07:23.769 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-12 00:07:23.790 +07:00 [INF] Executed ViewResult - view Bookings executed in 21.2228ms.
2025-06-12 00:07:23.793 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 114.6402ms
2025-06-12 00:07:23.795 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-12 00:07:23.796 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:23.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 129.786ms
2025-06-12 00:07:23.797 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:23.799 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:23.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0938ms
2025-06-12 00:07:23.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.835ms
2025-06-12 00:07:23.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:23.833 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:23.834 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:23.835 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:23.840 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:23.843 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:23.845 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.6701ms
2025-06-12 00:07:23.846 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:23.848 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:23.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.2884ms
2025-06-12 00:07:30.029 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-12 00:07:30.033 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:07:30.033 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:07:30.035 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:07:30.036 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:30.037 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-12 00:07:30.038 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-12 00:07:30.039 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-12 00:07:30.040 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:07:30.041 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 4.1394ms
2025-06-12 00:07:30.042 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-12 00:07:30.043 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 14.0035ms
2025-06-12 00:07:30.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:07:30.049 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:30.049 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:30.050 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:07:30.058 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:07:30.062 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:30.063 +07:00 [INF] Executed ViewResult - view Index executed in 1.8737ms.
2025-06-12 00:07:30.065 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 13.0823ms
2025-06-12 00:07:30.066 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:30.067 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:30.068 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 22.548ms
2025-06-12 00:07:30.073 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:30.073 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:30.076 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7145ms
2025-06-12 00:07:30.084 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.1791ms
2025-06-12 00:07:31.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:07:31.109 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:31.110 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:31.111 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:31.113 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:07:31.115 +07:00 [INF] Executed ViewResult - view Login executed in 2.1182ms.
2025-06-12 00:07:31.116 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.6349ms
2025-06-12 00:07:31.118 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:31.119 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:31.120 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 14.2302ms
2025-06-12 00:07:31.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:31.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:31.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5084ms
2025-06-12 00:07:31.134 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.772ms
2025-06-12 00:07:33.260 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-12 00:07:33.264 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:07:33.265 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:07:33.266 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:33.267 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:07:33.281 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:07:33.284 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:07:33.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:07:33.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:33.362 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:07:33.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:07:33.366 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:07:33.367 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:07:33.368 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 98.9553ms
2025-06-12 00:07:33.369 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:07:33.370 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 110.2593ms
2025-06-12 00:07:33.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:07:33.376 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:33.377 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:33.378 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:07:33.382 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:07:33.384 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:33.389 +07:00 [INF] Executed ViewResult - view Index executed in 4.6396ms.
2025-06-12 00:07:33.390 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 11.292ms
2025-06-12 00:07:33.391 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:07:33.392 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:33.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.9475ms
2025-06-12 00:07:33.396 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:33.396 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:33.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3357ms
2025-06-12 00:07:33.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7865ms
2025-06-12 00:07:33.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:33.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-12 00:07:33.438 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:33.440 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:33.442 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:33.443 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:33.444 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:33.447 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:33.450 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:33.455 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:33.457 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.0697ms
2025-06-12 00:07:33.459 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:33.460 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:33.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.3251ms
2025-06-12 00:07:33.467 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-12 00:07:33.489 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:33.536 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 84.0288ms
2025-06-12 00:07:33.538 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:33.540 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:33.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 106.3379ms
2025-06-12 00:07:38.114 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion - null null
2025-06-12 00:07:38.118 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:38.120 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-12 00:07:38.125 +07:00 [INF] Route matched with {action = "Index", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(Int32, System.String) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-12 00:07:38.133 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Promotions] AS [p]
2025-06-12 00:07:38.142 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Code], COALESCE([p].[Description], N'') AS [Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], [p].[UsageLimit], [p].[UsedCount], [p].[StartDate], [p].[EndDate], [p].[IsActive], [p].[CreatedAt]
FROM [Promotions] AS [p]
ORDER BY [p].[CreatedAt] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-12 00:07:38.147 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:07:38.158 +07:00 [INF] Executed ViewResult - view Index executed in 11.8696ms.
2025-06-12 00:07:38.160 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.Index (WebHS) in 32.6942ms
2025-06-12 00:07:38.161 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-12 00:07:38.161 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:38.162 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion - 200 null text/html; charset=utf-8 48.0126ms
2025-06-12 00:07:38.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:38.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:38.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1023ms
2025-06-12 00:07:38.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4476ms
2025-06-12 00:07:38.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:38.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-12 00:07:38.197 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:38.199 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:38.200 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:38.200 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:38.201 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:38.202 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:38.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:38.214 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:38.215 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.3236ms
2025-06-12 00:07:38.216 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:38.217 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:38.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.1994ms
2025-06-12 00:07:38.222 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-12 00:07:38.226 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:38.226 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 19.3227ms
2025-06-12 00:07:38.228 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:38.228 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:38.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 34.6567ms
2025-06-12 00:07:41.234 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-12 00:07:41.239 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:41.240 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-12 00:07:41.243 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:07:41.249 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-12 00:07:41.262 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-12 00:07:41.269 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-12 00:07:41.293 +07:00 [INF] Executed ViewResult - view Bookings executed in 25.4289ms.
2025-06-12 00:07:41.295 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 50.5789ms
2025-06-12 00:07:41.296 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-12 00:07:41.297 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:41.298 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 63.7122ms
2025-06-12 00:07:41.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:41.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:41.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0392ms
2025-06-12 00:07:41.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.505ms
2025-06-12 00:07:43.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-12 00:07:43.373 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:43.376 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-12 00:07:43.379 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:07:43.387 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-12 00:07:43.393 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-12 00:07:43.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.398 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.401 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.407 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.412 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.414 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:07:43.420 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-12 00:07:43.429 +07:00 [INF] Executed ViewResult - view Users executed in 9.3642ms.
2025-06-12 00:07:43.430 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 49.7516ms
2025-06-12 00:07:43.431 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-12 00:07:43.432 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:43.433 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 64.1121ms
2025-06-12 00:07:43.436 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:43.436 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:43.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9268ms
2025-06-12 00:07:43.444 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.562ms
2025-06-12 00:07:43.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:07:43.466 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-12 00:07:43.468 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:43.470 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:43.472 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:43.473 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:43.474 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:43.475 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:07:43.478 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:07:43.482 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-12 00:07:43.485 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:43.487 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:07:43.487 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.8408ms
2025-06-12 00:07:43.488 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.2376ms
2025-06-12 00:07:43.489 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:07:43.490 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:07:43.491 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:43.492 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:43.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.3051ms
2025-06-12 00:07:43.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.7942ms
2025-06-12 00:07:43.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-12 00:07:43.917 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:43.919 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-12 00:07:43.921 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:07:43.923 +07:00 [INF] Executing ViewResult, running view About.
2025-06-12 00:07:43.928 +07:00 [INF] Executed ViewResult - view About executed in 5.3401ms.
2025-06-12 00:07:43.929 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 6.7964ms
2025-06-12 00:07:43.930 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-12 00:07:43.931 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:43.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 18.8535ms
2025-06-12 00:07:43.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:43.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:43.942 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0808ms
2025-06-12 00:07:43.949 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0177ms
2025-06-12 00:07:45.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-12 00:07:45.578 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:45.579 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-12 00:07:45.582 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:07:45.589 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-12 00:07:45.603 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-12 00:07:45.607 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-12 00:07:45.615 +07:00 [INF] Executed ViewResult - view Homestays executed in 8.3552ms.
2025-06-12 00:07:45.617 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 32.6798ms
2025-06-12 00:07:45.618 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-12 00:07:45.619 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:45.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 46.2746ms
2025-06-12 00:07:45.623 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:07:45.623 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - null null
2025-06-12 00:07:45.623 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:07:45.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0333ms
2025-06-12 00:07:45.627 +07:00 [INF] No cached response available for this request.
2025-06-12 00:07:45.632 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4129ms
2025-06-12 00:07:45.635 +07:00 [INF] The file /uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png was not modified
2025-06-12 00:07:45.638 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:07:45.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/uploads/homestays/8c5cfe91-3594-42a8-97db-0cc58579245c.png - 304 null image/png 15.4702ms
2025-06-12 00:53:50.478 +07:00 [INF] Starting database basic initialization...
2025-06-12 00:53:51.911 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-12 00:53:51.957 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-12 00:53:51.963 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-12 00:53:51.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-12 00:53:51.988 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-12 00:53:52.009 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-12 00:53:52.034 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-12 00:53:52.377 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:53:52.444 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:53:52.448 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:53:52.464 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.528 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:52.543 +07:00 [INF] Starting sample data seeding...
2025-06-12 00:53:52.545 +07:00 [INF] Starting data seeding...
2025-06-12 00:53:52.559 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:53:52.562 +07:00 [INF] Amenities already exist, skipping seed
2025-06-12 00:53:52.570 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:53:52.573 +07:00 [INF] Homestays already exist, skipping seed
2025-06-12 00:53:52.578 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:53:52.580 +07:00 [INF] Promotions already exist, skipping seed
2025-06-12 00:53:52.588 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:53:52.590 +07:00 [INF] Bookings already exist, skipping seed
2025-06-12 00:53:52.609 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-12 00:53:52.619 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-12 00:53:52.621 +07:00 [INF] Payments already exist, skipping seed
2025-06-12 00:53:52.622 +07:00 [INF] Data seeding completed successfully
2025-06-12 00:53:52.623 +07:00 [INF] Sample data seeding completed successfully.
2025-06-12 00:53:52.623 +07:00 [INF] Database initialization completed successfully.
2025-06-12 00:53:52.656 +07:00 [INF] Background Job Service started
2025-06-12 00:53:52.692 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-12 00:53:52.715 +07:00 [INF] Processed 0 expired payments
2025-06-12 00:53:52.825 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-12 00:53:52.864 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 00:53:52.870 +07:00 [INF] Hosting environment: Development
2025-06-12 00:53:52.871 +07:00 [INF] Content root path: D:\WebHS
2025-06-12 00:53:53.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:53:53.773 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:53.783 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-12 00:53:53.839 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:53:53.853 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:53:54.002 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-12 00:53:54.013 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:53:54.144 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:53:54.267 +07:00 [INF] Executed ViewResult - view Index executed in 125.1758ms.
2025-06-12 00:53:54.271 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 414.433ms
2025-06-12 00:53:54.274 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:53:54.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-12 00:53:54.279 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:54.285 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:54.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 768.7926ms
2025-06-12 00:53:54.291 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-12 00:53:54.298 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:54.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:53:54.300 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 24.3988ms
2025-06-12 00:53:54.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:53:54.307 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.4365ms
2025-06-12 00:53:54.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.2319ms
2025-06-12 00:53:56.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-12 00:53:56.555 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:56.560 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:53:56.566 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:53:56.578 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-12 00:53:56.609 +07:00 [INF] Executed ViewResult - view Login executed in 31.644ms.
2025-06-12 00:53:56.612 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 43.2387ms
2025-06-12 00:53:56.613 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:53:56.614 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:56.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 69.535ms
2025-06-12 00:53:56.616 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:53:56.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:53:56.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7424ms
2025-06-12 00:53:56.641 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.1665ms
2025-06-12 00:53:57.691 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-12 00:53:57.696 +07:00 [INF] CORS policy execution failed.
2025-06-12 00:53:57.697 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-12 00:53:57.704 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:53:57.709 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-12 00:53:57.735 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-12 00:53:57.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-12 00:53:57.835 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 00:53:57.857 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 00:53:57.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 00:53:57.868 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 00:53:57.875 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-12 00:53:57.877 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-12 00:53:57.878 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 167.7249ms
2025-06-12 00:53:57.879 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-12 00:53:57.881 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 189.7241ms
2025-06-12 00:53:57.885 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-12 00:53:57.889 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:57.892 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:53:57.893 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-12 00:53:57.897 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-12 00:53:57.904 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-12 00:53:57.911 +07:00 [INF] Executed ViewResult - view Index executed in 7.3727ms.
2025-06-12 00:53:57.912 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.0851ms
2025-06-12 00:53:57.914 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-12 00:53:57.915 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:57.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 31.0788ms
2025-06-12 00:53:57.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:53:57.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:53:57.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4073ms
2025-06-12 00:53:57.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.9656ms
2025-06-12 00:53:57.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-12 00:53:57.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-12 00:53:57.958 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:57.961 +07:00 [INF] No cached response available for this request.
2025-06-12 00:53:57.971 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:53:57.976 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:53:57.976 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:53:57.984 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-12 00:53:57.999 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-12 00:53:58.030 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-12 00:53:58.031 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:53:58.035 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 00:53:58.039 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 52.1789ms
2025-06-12 00:53:58.040 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-12 00:53:58.041 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:58.042 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 86.7448ms
2025-06-12 00:53:58.086 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 107.4754ms
2025-06-12 00:53:58.088 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-12 00:53:58.089 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:53:58.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 134.4254ms
2025-06-12 00:54:00.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-12 00:54:00.470 +07:00 [INF] No cached response available for this request.
2025-06-12 00:54:00.472 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-12 00:54:00.475 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:54:00.775 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-12 00:54:00.798 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-12 00:54:00.835 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-12 00:54:00.879 +07:00 [INF] Executed ViewResult - view Homestays executed in 44.4743ms.
2025-06-12 00:54:00.883 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 406.0959ms
2025-06-12 00:54:00.884 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-12 00:54:00.886 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:54:00.888 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 422.5046ms
2025-06-12 00:54:00.889 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:54:00.891 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:54:00.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.8864ms
2025-06-12 00:54:00.902 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.7801ms
2025-06-12 00:54:03.443 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-12 00:54:03.447 +07:00 [INF] No cached response available for this request.
2025-06-12 00:54:03.451 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-12 00:54:03.454 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:54:03.462 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-12 00:54:03.477 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-12 00:54:03.484 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-12 00:54:03.493 +07:00 [INF] Executed ViewResult - view Bookings executed in 9.8003ms.
2025-06-12 00:54:03.495 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 39.0431ms
2025-06-12 00:54:03.496 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-12 00:54:03.497 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:54:03.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 55.8604ms
2025-06-12 00:54:03.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-12 00:54:03.502 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 00:54:03.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6047ms
2025-06-12 00:54:03.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4239ms
2025-06-12 00:54:05.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/ExportBookingsToExcel - null null
2025-06-12 00:54:05.843 +07:00 [INF] No cached response available for this request.
2025-06-12 00:54:05.845 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS)'
2025-06-12 00:54:05.848 +07:00 [INF] Route matched with {action = "ExportBookingsToExcel", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportBookingsToExcel() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 00:54:05.862 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
2025-06-12 00:54:07.031 +07:00 [INF] Executing FileContentResult, sending file with download name 'QuanLyDatPhong_20250612_005407.xlsx' ...
2025-06-12 00:54:07.036 +07:00 [INF] Executed action WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS) in 1186.304ms
2025-06-12 00:54:07.037 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS)'
2025-06-12 00:54:07.038 +07:00 [INF] The response could not be cached for this request.
2025-06-12 00:54:07.039 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/ExportBookingsToExcel - 200 5672 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 1199.7548ms
2025-06-12 02:04:49.121 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/ExportBookingsToExcel - null null
2025-06-12 02:04:49.137 +07:00 [INF] No cached response available for this request.
2025-06-12 02:04:49.176 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-12 02:04:49.182 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-12 02:04:49.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-12 02:04:49.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-12 02:04:49.197 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-12 02:04:49.201 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS)'
2025-06-12 02:04:49.201 +07:00 [INF] Route matched with {action = "ExportBookingsToExcel", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportBookingsToExcel() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-12 02:04:49.208 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Bookings] AS [b]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
2025-06-12 02:04:49.249 +07:00 [INF] Executing FileContentResult, sending file with download name 'QuanLyDatPhong_20250612_020449.xlsx' ...
2025-06-12 02:04:49.251 +07:00 [INF] Executed action WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS) in 48.4314ms
2025-06-12 02:04:49.253 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.ExportBookingsToExcel (WebHS)'
2025-06-12 02:04:49.253 +07:00 [INF] The response could not be cached for this request.
2025-06-12 02:04:49.254 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/ExportBookingsToExcel - 200 5672 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 133.5097ms
