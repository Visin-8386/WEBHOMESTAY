2025-06-11 23:02:57.128 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:02:58.358 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:02:58.405 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:02:58.409 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:02:58.412 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:02:58.427 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:02:58.443 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:02:58.463 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:02:58.712 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:02:58.756 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:02:58.761 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:02:58.774 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.827 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.830 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.832 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.841 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:02:58.843 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:02:58.845 +07:00 [INF] Starting data seeding...
2025-06-11 23:02:58.861 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:02:58.864 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:02:58.870 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:02:58.873 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:02:58.880 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:02:58.883 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:02:58.891 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:02:58.893 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:02:58.910 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:02:58.918 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:02:58.920 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:02:58.921 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:02:58.922 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:02:58.922 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:02:58.946 +07:00 [INF] Background Job Service started
2025-06-11 23:02:58.980 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:02:58.998 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:02:59.064 +07:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-11 23:03:32.959 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:03:34.206 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:03:34.245 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:03:34.252 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:03:34.255 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:03:34.270 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:03:34.287 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:03:34.305 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:03:34.528 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:03:34.572 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:03:34.575 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:03:34.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.651 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.654 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.660 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.663 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.665 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:03:34.667 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:03:34.668 +07:00 [INF] Starting data seeding...
2025-06-11 23:03:34.679 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:03:34.682 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:03:34.686 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:03:34.688 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:03:34.692 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:03:34.694 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:03:34.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:03:34.704 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:03:34.729 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:03:34.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:03:34.744 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:03:34.745 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:03:34.746 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:03:34.747 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:03:34.782 +07:00 [INF] Background Job Service started
2025-06-11 23:03:34.822 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:03:34.842 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:03:34.906 +07:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-11 23:04:57.452 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:04:58.594 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:04:58.642 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:04:58.646 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:04:58.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:04:58.664 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:04:58.680 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:04:58.700 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:04:58.927 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:04:58.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:04:58.969 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:04:58.982 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.041 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.044 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:04:59.054 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:04:59.056 +07:00 [INF] Starting data seeding...
2025-06-11 23:04:59.067 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:04:59.070 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:04:59.077 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:04:59.079 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:04:59.085 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:04:59.087 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:04:59.093 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:04:59.095 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:04:59.111 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:04:59.119 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:04:59.121 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:04:59.121 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:04:59.122 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:04:59.123 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:04:59.145 +07:00 [INF] Background Job Service started
2025-06-11 23:04:59.177 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:04:59.197 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:04:59.268 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:04:59.304 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:04:59.306 +07:00 [INF] Hosting environment: Development
2025-06-11 23:04:59.307 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:04:59.855 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:04:59.997 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:00.004 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:05:00.047 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:05:00.060 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:05:00.188 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:05:00.198 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:05:00.314 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:05:00.421 +07:00 [INF] Executed ViewResult - view Index executed in 108.234ms.
2025-06-11 23:05:00.426 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 363.5985ms
2025-06-11 23:05:00.429 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:05:00.432 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:00.440 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 592.3238ms
2025-06-11 23:05:00.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:05:00.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:05:00.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.9774ms
2025-06-11 23:05:00.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.7798ms
2025-06-11 23:05:48.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:05:48.520 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:48.527 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:05:48.534 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:05:48.545 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:05:48.574 +07:00 [INF] Executed ViewResult - view Login executed in 29.9602ms.
2025-06-11 23:05:48.577 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 40.7207ms
2025-06-11 23:05:48.578 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:05:48.580 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:48.581 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 78.2113ms
2025-06-11 23:05:48.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:05:48.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:05:48.586 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.4866ms
2025-06-11 23:05:48.606 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.7486ms
2025-06-11 23:05:49.675 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:05:49.681 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:05:49.682 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:05:49.688 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:05:49.693 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:05:49.718 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:05:49.727 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:05:49.818 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:05:49.840 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:05:49.844 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:05:49.851 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:05:49.857 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:05:49.859 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:05:49.860 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 166.0305ms
2025-06-11 23:05:49.861 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:05:49.862 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 187.3913ms
2025-06-11 23:05:49.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:05:49.869 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:49.872 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:05:49.873 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:05:49.877 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:05:49.883 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:05:49.891 +07:00 [INF] Executed ViewResult - view Index executed in 7.4271ms.
2025-06-11 23:05:49.892 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.1868ms
2025-06-11 23:05:49.893 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:05:49.894 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:49.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 29.57ms
2025-06-11 23:05:49.897 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:05:49.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:05:49.905 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.6303ms
2025-06-11 23:05:49.908 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.1604ms
2025-06-11 23:05:49.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:05:49.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:05:49.933 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:49.935 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:49.944 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:05:49.950 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:05:49.952 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:05:49.957 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:05:49.976 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:05:50.042 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:05:50.049 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:05:50.054 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:05:50.057 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 103.6525ms
2025-06-11 23:05:50.058 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:05:50.059 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:50.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 129.7646ms
2025-06-11 23:05:50.109 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 148.9544ms
2025-06-11 23:05:50.111 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:05:50.112 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:50.113 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 182.6397ms
2025-06-11 23:05:53.479 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:05:53.484 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:53.486 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:05:53.490 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:05:53.513 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:05:53.548 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:05:53.594 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:05:53.643 +07:00 [INF] Executed ViewResult - view Bookings executed in 50.1251ms.
2025-06-11 23:05:53.645 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 153.4402ms
2025-06-11 23:05:53.646 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:05:53.648 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:53.649 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 170.7537ms
2025-06-11 23:05:53.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:05:53.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:05:53.659 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2898ms
2025-06-11 23:05:53.659 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5176ms
2025-06-11 23:05:55.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 23:05:55.244 +07:00 [INF] No cached response available for this request.
2025-06-11 23:05:55.245 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:05:55.249 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:05:55.280 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:05:55.285 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:05:55.286 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 35.3511ms
2025-06-11 23:05:55.288 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:05:55.288 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:05:55.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 50.1921ms
2025-06-11 23:06:03.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:03.303 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:03.307 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:03.308 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:03.313 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:03.324 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:03.329 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:03.332 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.8992ms.
2025-06-11 23:06:03.333 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 23.7095ms
2025-06-11 23:06:03.334 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:03.335 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:03.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 36.9305ms
2025-06-11 23:06:03.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:03.344 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5512ms
2025-06-11 23:06:05.280 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/14 - null null
2025-06-11 23:06:05.283 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:05.286 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:05.287 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:06:05.294 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:06:05.297 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:06:05.298 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 9.9816ms
2025-06-11 23:06:05.299 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:05.300 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:05.300 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/14 - 404 0 null 20.9355ms
2025-06-11 23:06:06.402 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:06.406 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:06.408 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:06.409 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:06.413 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:06.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:06.420 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:06.422 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.2037ms.
2025-06-11 23:06:06.424 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.3254ms
2025-06-11 23:06:06.425 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:06.426 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:06.427 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.0235ms
2025-06-11 23:06:06.432 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:06.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4677ms
2025-06-11 23:06:07.287 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - null null
2025-06-11 23:06:07.291 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:07.292 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:07.293 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:06:07.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:06:07.301 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:06:07.302 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 7.0666ms
2025-06-11 23:06:07.303 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:07.303 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:07.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - 404 0 null 17.0665ms
2025-06-11 23:06:08.255 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:08.259 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:08.261 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:08.262 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:08.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:08.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:08.273 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:08.275 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.0686ms.
2025-06-11 23:06:08.277 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.4312ms
2025-06-11 23:06:08.278 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:08.279 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:08.281 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.4974ms
2025-06-11 23:06:08.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:08.287 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1708ms
2025-06-11 23:06:10.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/6 - null null
2025-06-11 23:06:10.013 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:10.014 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:10.015 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:06:10.018 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:06:10.021 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:06:10.022 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 5.4078ms
2025-06-11 23:06:10.023 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:10.024 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:10.024 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/6 - 404 0 null 15.8434ms
2025-06-11 23:06:11.187 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:11.191 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:11.193 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:11.194 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:11.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:11.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:11.206 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:11.208 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.1194ms.
2025-06-11 23:06:11.210 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 13.9945ms
2025-06-11 23:06:11.211 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:11.212 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:11.213 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.9446ms
2025-06-11 23:06:11.218 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:11.221 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7339ms
2025-06-11 23:06:13.438 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 23:06:13.442 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:13.444 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:13.444 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:06:13.448 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:06:13.451 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:06:13.452 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 5.7049ms
2025-06-11 23:06:13.453 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:06:13.453 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:13.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 15.5253ms
2025-06-11 23:06:14.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:14.742 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:14.743 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:14.744 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:14.747 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:14.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:14.755 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:14.756 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.6927ms.
2025-06-11 23:06:14.758 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 12.0099ms
2025-06-11 23:06:14.759 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:14.760 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:14.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 24.2037ms
2025-06-11 23:06:14.766 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:14.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2625ms
2025-06-11 23:06:25.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Homestays - null null
2025-06-11 23:06:25.929 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:25.931 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 23:06:25.934 +07:00 [INF] Route matched with {action = "Homestays", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Homestays(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:25.943 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:06:25.960 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [a].[Id]
2025-06-11 23:06:25.965 +07:00 [INF] Executing ViewResult, running view Homestays.
2025-06-11 23:06:25.975 +07:00 [INF] Executed ViewResult - view Homestays executed in 10.5366ms.
2025-06-11 23:06:25.977 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Homestays (WebHS) in 40.6835ms
2025-06-11 23:06:25.978 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Homestays (WebHS)'
2025-06-11 23:06:25.979 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:25.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Homestays - 200 null text/html; charset=utf-8 55ms
2025-06-11 23:06:25.985 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:25.985 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:25.987 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.6023ms
2025-06-11 23:06:25.995 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.5013ms
2025-06-11 23:06:28.137 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - null null
2025-06-11 23:06:28.142 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:28.144 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 23:06:28.150 +07:00 [INF] Route matched with {action = "HomestayDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HomestayDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:28.201 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:06:28.235 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 23:06:28.260 +07:00 [INF] Executing ViewResult, running view HomestayDetails.
2025-06-11 23:06:28.268 +07:00 [INF] Executed ViewResult - view HomestayDetails executed in 8.6077ms.
2025-06-11 23:06:28.270 +07:00 [INF] Executed action WebHS.Controllers.AdminController.HomestayDetails (WebHS) in 112.6382ms
2025-06-11 23:06:28.272 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.HomestayDetails (WebHS)'
2025-06-11 23:06:28.274 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:28.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/HomestayDetails/4 - 200 null text/html; charset=utf-8 138.056ms
2025-06-11 23:06:28.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:28.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:28.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.5496ms
2025-06-11 23:06:28.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.141ms
2025-06-11 23:06:38.771 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:38.775 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:38.776 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:38.777 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:38.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:38.784 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:38.787 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:38.789 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.642ms.
2025-06-11 23:06:38.790 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 11.7814ms
2025-06-11 23:06:38.791 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:38.792 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:38.793 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 22.2178ms
2025-06-11 23:06:38.796 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:38.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0235ms
2025-06-11 23:06:42.617 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 23:06:42.621 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:42.622 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:06:42.626 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 23:06:42.635 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 23:06:42.657 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 23:06:42.667 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 23:06:42.684 +07:00 [INF] Executed ViewResult - view AllReviews executed in 16.6297ms.
2025-06-11 23:06:42.686 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 58.7894ms
2025-06-11 23:06:42.689 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:06:42.690 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:42.691 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 73.8795ms
2025-06-11 23:06:42.692 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:42.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:42.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.4716ms
2025-06-11 23:06:42.704 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.5579ms
2025-06-11 23:06:43.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:06:43.348 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:43.349 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:06:43.354 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:06:43.366 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:06:43.376 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:06:43.388 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:06:43.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:06:43.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:06:43.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:06:43.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:06:43.417 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:06:43.420 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:06:43.444 +07:00 [INF] Executed ViewResult - view Index executed in 24.4564ms.
2025-06-11 23:06:43.446 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 90.5883ms
2025-06-11 23:06:43.447 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:06:43.448 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:43.449 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 105.3947ms
2025-06-11 23:06:43.451 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:43.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:43.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7243ms
2025-06-11 23:06:43.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8504ms
2025-06-11 23:06:43.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:06:43.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:06:43.519 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:43.522 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:43.523 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:06:43.524 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:06:43.525 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:06:43.529 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:06:43.544 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:06:43.561 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:06:43.561 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:06:43.564 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 29.9607ms
2025-06-11 23:06:43.578 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:06:43.576 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:06:43.580 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:43.584 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 45.5251ms
2025-06-11 23:06:43.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 73.981ms
2025-06-11 23:06:43.589 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:06:43.603 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:43.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 95.9005ms
2025-06-11 23:06:48.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:06:48.313 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:48.314 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:48.315 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:06:48.318 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:06:48.322 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:06:48.325 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:48.327 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.5204ms.
2025-06-11 23:06:48.328 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 11.2549ms
2025-06-11 23:06:48.329 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:06:48.330 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:48.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 22.0518ms
2025-06-11 23:06:48.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:48.334 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:48.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.998ms
2025-06-11 23:06:48.342 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3723ms
2025-06-11 23:06:53.486 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 23:06:53.490 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:06:53.491 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:06:53.492 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 23:06:53.495 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:06:53.499 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 23:06:53.500 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 23:06:53.501 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 23:06:53.502 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:06:53.503 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 5.8634ms
2025-06-11 23:06:53.504 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 23:06:53.505 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.2484ms
2025-06-11 23:06:53.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:06:53.510 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:53.511 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:06:53.511 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:06:53.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:06:53.519 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:06:53.521 +07:00 [INF] Executed ViewResult - view Index executed in 1.91ms.
2025-06-11 23:06:53.522 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.0272ms
2025-06-11 23:06:53.523 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:06:53.524 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:53.525 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.9201ms
2025-06-11 23:06:53.528 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:53.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:53.531 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.9275ms
2025-06-11 23:06:53.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.9221ms
2025-06-11 23:06:54.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:06:54.944 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:54.945 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:06:54.946 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:06:54.948 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:06:54.950 +07:00 [INF] Executed ViewResult - view Login executed in 2.4564ms.
2025-06-11 23:06:54.951 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.7248ms
2025-06-11 23:06:54.952 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:06:54.953 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:54.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.5886ms
2025-06-11 23:06:54.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:54.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1335ms
2025-06-11 23:06:54.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:54.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8045ms
2025-06-11 23:06:57.420 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 23:06:57.424 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:06:57.425 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:06:57.426 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:06:57.427 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:06:57.433 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:06:57.435 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:06:57.500 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:06:57.508 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:06:57.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:06:57.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:06:57.517 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:06:57.518 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:06:57.519 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 90.2029ms
2025-06-11 23:06:57.520 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:06:57.521 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 101.3079ms
2025-06-11 23:06:57.523 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:06:57.526 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:57.527 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:06:57.529 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:06:57.532 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:06:57.536 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:06:57.539 +07:00 [INF] Executed ViewResult - view Index executed in 2.491ms.
2025-06-11 23:06:57.540 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 9.0272ms
2025-06-11 23:06:57.541 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:06:57.542 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:57.542 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 19.1867ms
2025-06-11 23:06:57.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:57.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:57.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.1923ms
2025-06-11 23:06:57.553 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0416ms
2025-06-11 23:06:57.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:06:57.577 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:57.579 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:06:57.580 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:06:57.584 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:06:57.588 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:06:57.589 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.336ms
2025-06-11 23:06:57.591 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:06:57.592 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:57.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.5013ms
2025-06-11 23:06:59.870 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 23:06:59.874 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:59.875 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 23:06:59.879 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 23:06:59.889 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 23:06:59.910 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:06:59.935 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:06:59.951 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:06:59.959 +07:00 [INF] Executed ViewResult - view Bookings executed in 9.1524ms.
2025-06-11 23:06:59.961 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 80.5745ms
2025-06-11 23:06:59.963 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 23:06:59.964 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:06:59.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 94.0888ms
2025-06-11 23:06:59.967 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:06:59.967 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:06:59.972 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6248ms
2025-06-11 23:06:59.973 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.444ms
2025-06-11 23:06:59.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:06:59.997 +07:00 [INF] No cached response available for this request.
2025-06-11 23:06:59.998 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:06:59.999 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:07:00.003 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:07:00.006 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:07:00.007 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.1738ms
2025-06-11 23:07:00.008 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:00.009 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:00.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.8715ms
2025-06-11 23:07:01.420 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/BookingDetail/21 - null null
2025-06-11 23:07:01.427 +07:00 [INF] No cached response available for this request.
2025-06-11 23:07:01.430 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.BookingDetail (WebHS)'
2025-06-11 23:07:01.433 +07:00 [INF] Route matched with {action = "BookingDetail", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BookingDetail(Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 23:07:01.459 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [h].[HostId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:07:01.463 +07:00 [INF] Executing ViewResult, running view BookingDetail.
2025-06-11 23:07:01.469 +07:00 [INF] Executed ViewResult - view BookingDetail executed in 6.1693ms.
2025-06-11 23:07:01.470 +07:00 [INF] Executed action WebHS.Controllers.HostController.BookingDetail (WebHS) in 35.5293ms
2025-06-11 23:07:01.471 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.BookingDetail (WebHS)'
2025-06-11 23:07:01.472 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:01.473 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/BookingDetail/21 - 200 null text/html; charset=utf-8 52.976ms
2025-06-11 23:07:01.476 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:07:01.476 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:07:01.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.6102ms
2025-06-11 23:07:01.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7202ms
2025-06-11 23:07:01.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:07:01.511 +07:00 [INF] No cached response available for this request.
2025-06-11 23:07:01.512 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:01.514 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:07:01.520 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:07:01.523 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:07:01.524 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.5296ms
2025-06-11 23:07:01.525 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:01.527 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:01.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.461ms
2025-06-11 23:07:22.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - null null
2025-06-11 23:07:22.084 +07:00 [INF] No cached response available for this request.
2025-06-11 23:07:22.085 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 23:07:22.086 +07:00 [INF] Route matched with {action = "ManageBookings", controller = "Host"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ManageBookings(System.String, Int32) on controller WebHS.Controllers.HostController (WebHS).
2025-06-11 23:07:22.099 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__hostId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
WHERE [h].[HostId] = @__hostId_0
2025-06-11 23:07:22.116 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__hostId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], COALESCE([a].[Email], N''), COALESCE([a].[PhoneNumber], N''), CASE
    WHEN [t].[Status] = 0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    WHERE [h].[HostId] = @__hostId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [t].[Id0] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [t].[Id0] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [t].[Id0], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:07:22.125 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:07:22.127 +07:00 [INF] Executed ViewResult - view Bookings executed in 1.8916ms.
2025-06-11 23:07:22.128 +07:00 [INF] Executed action WebHS.Controllers.HostController.ManageBookings (WebHS) in 40.6558ms
2025-06-11 23:07:22.129 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HostController.ManageBookings (WebHS)'
2025-06-11 23:07:22.130 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:22.131 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Host/ManageBookings - 200 null text/html; charset=utf-8 51.2811ms
2025-06-11 23:07:22.134 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:07:22.136 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3686ms
2025-06-11 23:07:22.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:07:22.165 +07:00 [INF] No cached response available for this request.
2025-06-11 23:07:22.166 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:22.167 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:07:22.172 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:07:22.174 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:07:22.175 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 6.3022ms
2025-06-11 23:07:22.176 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:22.177 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:22.178 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 15.8078ms
2025-06-11 23:07:52.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:07:52.729 +07:00 [INF] No cached response available for this request.
2025-06-11 23:07:52.730 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:52.731 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:07:52.734 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:07:52.739 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:07:52.740 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.1212ms
2025-06-11 23:07:52.741 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:07:52.742 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:07:52.743 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 17.4397ms
2025-06-11 23:08:22.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:08:22.741 +07:00 [INF] No cached response available for this request.
2025-06-11 23:08:22.746 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:08:22.747 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:08:22.758 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:08:22.759 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:08:22.760 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.8912ms
2025-06-11 23:08:22.761 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:08:22.762 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:08:22.763 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.7954ms
2025-06-11 23:08:52.731 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:08:52.749 +07:00 [INF] No cached response available for this request.
2025-06-11 23:08:52.751 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:08:52.751 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:08:52.755 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:08:52.761 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:08:52.762 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.8348ms
2025-06-11 23:08:52.763 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:08:52.764 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:08:52.764 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 33.2827ms
2025-06-11 23:13:38.441 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:13:39.605 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:13:39.651 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:13:39.655 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:13:39.657 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:13:39.672 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:13:39.686 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:13:39.704 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:13:39.921 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:13:39.963 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:13:39.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:13:39.979 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.031 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.037 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.040 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.042 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.045 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:13:40.047 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:13:40.048 +07:00 [INF] Starting data seeding...
2025-06-11 23:13:40.064 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:13:40.067 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:13:40.073 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:13:40.074 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:13:40.080 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:13:40.082 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:13:40.089 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:13:40.090 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:13:40.108 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:13:40.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:13:40.118 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:13:40.119 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:13:40.119 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:13:40.120 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:13:40.143 +07:00 [INF] Background Job Service started
2025-06-11 23:13:40.175 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:13:40.193 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:13:40.262 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:13:40.296 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:13:40.301 +07:00 [INF] Hosting environment: Development
2025-06-11 23:13:40.302 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:13:40.462 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:13:40.620 +07:00 [INF] No cached response available for this request.
2025-06-11 23:13:40.635 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:13:40.690 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:13:40.703 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:13:40.829 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:13:40.842 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:13:40.988 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:13:41.092 +07:00 [INF] Executed ViewResult - view Index executed in 105.0806ms.
2025-06-11 23:13:41.096 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 390.2625ms
2025-06-11 23:13:41.098 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:13:41.102 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:13:41.111 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 656.3537ms
2025-06-11 23:13:41.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:13:41.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:13:41.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.3227ms
2025-06-11 23:13:41.154 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.7204ms
2025-06-11 23:14:10.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:14:10.503 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:10.514 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:14:10.525 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:14:10.535 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:14:10.568 +07:00 [INF] Executed ViewResult - view Login executed in 33.9677ms.
2025-06-11 23:14:10.570 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 43.2875ms
2025-06-11 23:14:10.571 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:14:10.572 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:10.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 87.9994ms
2025-06-11 23:14:10.578 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:10.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:14:10.581 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.1505ms
2025-06-11 23:14:10.596 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.6317ms
2025-06-11 23:14:13.250 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:14:13.255 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:14:13.256 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:14:13.263 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:14:13.268 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:14:13.293 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:14:13.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:14:13.390 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:14:13.413 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:14:13.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:14:13.424 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:14:13.430 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:14:13.432 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:14:13.433 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 163.9394ms
2025-06-11 23:14:13.434 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:14:13.436 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 185.7793ms
2025-06-11 23:14:13.439 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:14:13.443 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:13.446 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:14:13.447 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:14:13.451 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:14:13.457 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:14:13.465 +07:00 [INF] Executed ViewResult - view Index executed in 7.7754ms.
2025-06-11 23:14:13.466 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 17.4682ms
2025-06-11 23:14:13.467 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:14:13.468 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:13.469 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 30.2652ms
2025-06-11 23:14:13.472 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:14:13.472 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:13.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.3069ms
2025-06-11 23:14:13.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.1012ms
2025-06-11 23:14:13.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:14:13.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:14:13.514 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:13.516 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:13.524 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:14:13.530 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:14:13.531 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:14:13.537 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:14:13.601 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:14:13.638 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:14:13.645 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:14:13.651 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 118.7552ms
2025-06-11 23:14:13.652 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:14:13.653 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:14:13.656 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:13.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 153.2031ms
2025-06-11 23:14:13.767 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 217.4396ms
2025-06-11 23:14:13.769 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:14:13.770 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:13.772 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 261.1953ms
2025-06-11 23:14:15.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:14:15.569 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:15.571 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:14:15.575 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:14:15.586 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:14:15.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:14:15.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:14:15.613 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:14:15.618 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:14:15.628 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:14:15.649 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:14:15.679 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:14:15.685 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:14:15.708 +07:00 [INF] Executed ViewResult - view Index executed in 23.2578ms.
2025-06-11 23:14:15.709 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 133.0324ms
2025-06-11 23:14:15.710 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:14:15.711 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:15.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 148.2282ms
2025-06-11 23:14:15.715 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:15.718 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:14:15.718 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3123ms
2025-06-11 23:14:15.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7718ms
2025-06-11 23:14:15.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:14:15.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:14:15.785 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:15.787 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:15.789 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:14:15.790 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:14:15.790 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:14:15.792 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:14:15.798 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:14:15.800 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:14:15.803 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:14:15.805 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:14:15.806 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.7501ms
2025-06-11 23:14:15.808 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.7466ms
2025-06-11 23:14:15.809 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:14:15.810 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:14:15.811 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:15.812 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:15.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.2012ms
2025-06-11 23:14:15.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 30.8771ms
2025-06-11 23:14:18.109 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:14:18.113 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:18.115 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:18.118 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:14:18.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:14:18.149 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:14:18.180 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:14:18.216 +07:00 [INF] Executed ViewResult - view Bookings executed in 36.114ms.
2025-06-11 23:14:18.218 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 98.8106ms
2025-06-11 23:14:18.219 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:18.221 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:18.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 112.5097ms
2025-06-11 23:14:18.223 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:14:18.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:18.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.4353ms
2025-06-11 23:14:18.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.2501ms
2025-06-11 23:14:19.797 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 23:14:19.802 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:19.803 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:19.806 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:14:19.828 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:14:19.832 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:14:19.833 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 24.9852ms
2025-06-11 23:14:19.834 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:19.835 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:19.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 37.7623ms
2025-06-11 23:14:22.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - null null
2025-06-11 23:14:22.619 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:22.622 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:22.623 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:14:22.627 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:14:22.630 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:14:22.631 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 6.0727ms
2025-06-11 23:14:22.632 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:22.633 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:22.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/21 - 404 0 null 18.6467ms
2025-06-11 23:14:23.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:14:23.787 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:23.790 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:23.792 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:14:23.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:14:23.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:14:23.803 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:14:23.806 +07:00 [INF] Executed ViewResult - view Bookings executed in 3.4055ms.
2025-06-11 23:14:23.808 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 14.9177ms
2025-06-11 23:14:23.809 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:23.810 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:23.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 28.4749ms
2025-06-11 23:14:23.816 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:23.818 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.4656ms
2025-06-11 23:14:25.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - null null
2025-06-11 23:14:25.289 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:25.290 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:25.291 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:14:25.296 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:14:25.299 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:14:25.300 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 6.9391ms
2025-06-11 23:14:25.300 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:25.301 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:25.302 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/20 - 404 0 null 17.8532ms
2025-06-11 23:14:26.473 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:14:26.477 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:26.478 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:26.479 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:14:26.482 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:14:26.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:14:26.491 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:14:26.493 +07:00 [INF] Executed ViewResult - view Bookings executed in 2.1081ms.
2025-06-11 23:14:26.495 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 14.0274ms
2025-06-11 23:14:26.496 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:14:26.497 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:26.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 25.4603ms
2025-06-11 23:14:26.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:14:26.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.8846ms
2025-06-11 23:14:27.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/Details/18 - null null
2025-06-11 23:14:27.910 +07:00 [INF] No cached response available for this request.
2025-06-11 23:14:27.913 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:27.980 +07:00 [INF] Route matched with {action = "Details", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:14:28.029 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [t].[Id0], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt0], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt0], [t].[Ward], [t].[ZipCode], [t].[Id1], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [h].[Id] AS [Id0], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt] AS [CreatedAt0], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt] AS [UpdatedAt0], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id1], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt1], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt1], [a].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[UserId] = @__userId_1
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id0] = [h0].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-06-11 23:14:28.097 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 404
2025-06-11 23:14:28.099 +07:00 [INF] Executed action WebHS.Controllers.BookingController.Details (WebHS) in 99.5611ms
2025-06-11 23:14:28.105 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.Details (WebHS)'
2025-06-11 23:14:28.107 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:14:28.108 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/Details/18 - 404 0 null 210.6882ms
2025-06-11 23:16:55.839 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:16:57.127 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:16:57.170 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:16:57.176 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:16:57.179 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:16:57.194 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:16:57.214 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:16:57.239 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:16:57.474 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:16:57.540 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:16:57.563 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:16:57.603 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.712 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.716 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.722 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.728 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.737 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:16:57.740 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:16:57.743 +07:00 [INF] Starting data seeding...
2025-06-11 23:16:57.761 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:16:57.767 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:16:57.776 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:16:57.778 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:16:57.785 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:16:57.787 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:16:57.795 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:16:57.797 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:16:57.823 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:16:57.837 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:16:57.840 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:16:57.841 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:16:57.841 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:16:57.842 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:16:57.872 +07:00 [INF] Background Job Service started
2025-06-11 23:16:57.930 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:16:57.955 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:16:58.028 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:16:58.071 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:16:58.092 +07:00 [INF] Hosting environment: Development
2025-06-11 23:16:58.094 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:16:58.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:16:58.513 +07:00 [INF] No cached response available for this request.
2025-06-11 23:16:58.527 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:16:58.585 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:16:58.603 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:16:58.860 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:16:58.877 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:16:59.011 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:16:59.142 +07:00 [INF] Executed ViewResult - view Index executed in 134.1295ms.
2025-06-11 23:16:59.146 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 539.9565ms
2025-06-11 23:16:59.149 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:16:59.153 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:16:59.164 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 857.1828ms
2025-06-11 23:16:59.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:16:59.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:16:59.178 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.3895ms
2025-06-11 23:16:59.212 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.2606ms
2025-06-11 23:17:00.067 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:17:00.077 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:00.081 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:00.089 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:17:00.098 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:17:00.135 +07:00 [INF] Executed ViewResult - view Login executed in 37.685ms.
2025-06-11 23:17:00.138 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 47.7228ms
2025-06-11 23:17:00.140 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:00.142 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:00.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 78.7002ms
2025-06-11 23:17:00.151 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:00.152 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:00.154 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.6762ms
2025-06-11 23:17:00.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.0281ms
2025-06-11 23:17:01.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 23:17:01.026 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:01.030 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:17:01.032 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:17:01.040 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 23:17:01.059 +07:00 [INF] Executed ViewResult - view About executed in 23.9115ms.
2025-06-11 23:17:01.061 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 27.1508ms
2025-06-11 23:17:01.062 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:17:01.063 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:01.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 43.3074ms
2025-06-11 23:17:01.070 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:01.070 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:01.073 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7633ms
2025-06-11 23:17:01.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.2629ms
2025-06-11 23:17:02.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:17:02.120 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:02.123 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:02.124 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:17:02.131 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:17:02.134 +07:00 [INF] Executed ViewResult - view Login executed in 3.2486ms.
2025-06-11 23:17:02.136 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 10.6632ms
2025-06-11 23:17:02.137 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:02.139 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:02.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 23.7501ms
2025-06-11 23:17:02.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:02.142 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:02.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8547ms
2025-06-11 23:17:02.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5498ms
2025-06-11 23:17:03.044 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:17:03.049 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:17:03.050 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:17:03.052 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:03.058 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:17:03.090 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:17:03.098 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:17:03.189 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:17:03.211 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:03.215 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:17:03.223 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:17:03.229 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:17:03.231 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:17:03.232 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 172.7132ms
2025-06-11 23:17:03.233 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:17:03.234 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 189.9416ms
2025-06-11 23:17:03.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:17:03.240 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:03.244 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:17:03.245 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:17:03.251 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:17:03.257 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:17:03.264 +07:00 [INF] Executed ViewResult - view Index executed in 7.3405ms.
2025-06-11 23:17:03.265 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 19.1907ms
2025-06-11 23:17:03.266 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:17:03.267 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:03.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 31.4795ms
2025-06-11 23:17:03.272 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:03.272 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:03.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.7787ms
2025-06-11 23:17:03.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.1862ms
2025-06-11 23:17:03.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:17:03.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:17:03.310 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:03.313 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:03.323 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:03.324 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:03.329 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:03.330 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:03.351 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:17:03.383 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:17:03.385 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:03.388 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:03.392 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 59.158ms
2025-06-11 23:17:03.393 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:03.394 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:03.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 88.3623ms
2025-06-11 23:17:03.443 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 107.7411ms
2025-06-11 23:17:03.445 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:03.446 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:03.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 139.8847ms
2025-06-11 23:17:05.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:17:05.530 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:05.532 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:17:05.536 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:17:05.546 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:17:05.550 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:17:05.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:17:05.572 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:17:05.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:17:05.588 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:17:05.610 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:17:05.640 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:17:05.646 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:17:05.666 +07:00 [INF] Executed ViewResult - view Index executed in 20.7845ms.
2025-06-11 23:17:05.668 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 130.9417ms
2025-06-11 23:17:05.671 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:17:05.672 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:05.673 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 147.2913ms
2025-06-11 23:17:05.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:05.677 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:05.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.181ms
2025-06-11 23:17:05.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1466ms
2025-06-11 23:17:05.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:17:05.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:17:05.743 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:05.745 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:05.746 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:05.747 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:05.747 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:05.748 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:05.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:17:05.755 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:17:05.758 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:05.760 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:05.761 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.3746ms
2025-06-11 23:17:05.762 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.6313ms
2025-06-11 23:17:05.763 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:05.764 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:05.765 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:05.766 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:05.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.1005ms
2025-06-11 23:17:05.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.9262ms
2025-06-11 23:17:08.379 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:17:08.383 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:08.385 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:17:08.388 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:17:08.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:17:08.423 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:17:08.455 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:17:08.479 +07:00 [INF] Executed ViewResult - view Bookings executed in 24.4067ms.
2025-06-11 23:17:08.481 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 91.6301ms
2025-06-11 23:17:08.483 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:17:08.484 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:08.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 106.5333ms
2025-06-11 23:17:08.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:08.489 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:08.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9163ms
2025-06-11 23:17:08.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.177ms
2025-06-11 23:17:09.675 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/BookingDetails/21 - null null
2025-06-11 23:17:09.737 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:09.741 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.BookingDetails (WebHS)'
2025-06-11 23:17:09.745 +07:00 [INF] Route matched with {action = "BookingDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BookingDetails(Int32) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:17:09.762 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM [Bookings] AS [b]
INNER JOIN [AspNetUsers] AS [a] ON [b].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [b].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
WHERE [b].[Id] = @__id_0
2025-06-11 23:17:09.765 +07:00 [INF] Executing ViewResult, running view BookingDetails.
2025-06-11 23:17:09.776 +07:00 [INF] Executed ViewResult - view BookingDetails executed in 10.7588ms.
2025-06-11 23:17:09.777 +07:00 [INF] Executed action WebHS.Controllers.AdminController.BookingDetails (WebHS) in 30.3082ms
2025-06-11 23:17:09.778 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.BookingDetails (WebHS)'
2025-06-11 23:17:09.779 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:09.780 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/BookingDetails/21 - 200 null text/html; charset=utf-8 104.8303ms
2025-06-11 23:17:09.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:09.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:09.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.3117ms
2025-06-11 23:17:09.788 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.5286ms
2025-06-11 23:17:28.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Profile - null null
2025-06-11 23:17:28.547 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:28.549 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 23:17:28.553 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:17:28.572 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 23:17:28.576 +07:00 [INF] Executing ViewResult, running view Profile.
2025-06-11 23:17:28.582 +07:00 [INF] Executed ViewResult - view Profile executed in 7.2018ms.
2025-06-11 23:17:28.584 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Profile (WebHS) in 29.0743ms
2025-06-11 23:17:28.585 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Profile (WebHS)'
2025-06-11 23:17:28.587 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:28.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Profile - 200 null text/html; charset=utf-8 47.2061ms
2025-06-11 23:17:28.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:28.592 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:28.601 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.4528ms
2025-06-11 23:17:28.601 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8631ms
2025-06-11 23:17:28.625 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:17:28.626 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:17:28.630 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:28.634 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:28.636 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:28.639 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:28.640 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:28.642 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:28.647 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:17:28.653 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:17:28.654 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:28.656 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:28.657 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.7384ms
2025-06-11 23:17:28.659 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.854ms
2025-06-11 23:17:28.660 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:28.662 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:28.663 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:28.664 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:28.665 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 39.7204ms
2025-06-11 23:17:28.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 40.1776ms
2025-06-11 23:17:34.983 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 23:17:34.986 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:34.988 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:17:34.994 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:17:34.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:17:35.006 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 23:17:35.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.022 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:35.032 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 23:17:35.043 +07:00 [INF] Executed ViewResult - view Users executed in 10.7343ms.
2025-06-11 23:17:35.044 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 48.3811ms
2025-06-11 23:17:35.045 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:17:35.046 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:35.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 64.2678ms
2025-06-11 23:17:35.049 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:35.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:35.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7369ms
2025-06-11 23:17:35.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.3001ms
2025-06-11 23:17:35.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:17:35.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:17:35.082 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:35.085 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:35.086 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:35.087 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:35.088 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:35.089 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:17:35.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:17:35.097 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:17:35.098 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:35.100 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:17:35.100 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.2673ms
2025-06-11 23:17:35.101 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.5746ms
2025-06-11 23:17:35.102 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:17:35.103 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:17:35.104 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:35.105 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:35.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.5114ms
2025-06-11 23:17:35.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.9611ms
2025-06-11 23:17:46.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/69b5406e-d4db-4155-8b73-75ac6a5427e9 - null null
2025-06-11 23:17:46.401 +07:00 [INF] No cached response available for this request.
2025-06-11 23:17:46.402 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 23:17:46.406 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:17:46.412 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 23:17:46.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:17:46.422 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 23:17:46.432 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:17:46.438 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 23:17:46.447 +07:00 [INF] Executed ViewResult - view UserDetail executed in 9.7661ms.
2025-06-11 23:17:46.448 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 39.8708ms
2025-06-11 23:17:46.449 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 23:17:46.450 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:17:46.451 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/69b5406e-d4db-4155-8b73-75ac6a5427e9 - 200 null text/html; charset=utf-8 53.4253ms
2025-06-11 23:17:46.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:17:46.454 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:17:46.459 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1706ms
2025-06-11 23:17:46.459 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7457ms
2025-06-11 23:18:02.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 23:18:02.132 +07:00 [INF] No cached response available for this request.
2025-06-11 23:18:02.133 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:18:02.134 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:18:02.140 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:18:02.143 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 23:18:02.146 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.148 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.151 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.153 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.158 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.160 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.162 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:02.164 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 23:18:02.166 +07:00 [INF] Executed ViewResult - view Users executed in 2.2774ms.
2025-06-11 23:18:02.168 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 32.1011ms
2025-06-11 23:18:02.169 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:18:02.170 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:18:02.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 43.0093ms
2025-06-11 23:18:02.173 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:18:02.175 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9992ms
2025-06-11 23:18:02.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:18:02.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:18:02.205 +07:00 [INF] No cached response available for this request.
2025-06-11 23:18:02.208 +07:00 [INF] No cached response available for this request.
2025-06-11 23:18:02.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:18:02.209 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:18:02.210 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:18:02.211 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:18:02.217 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:18:02.218 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:18:02.221 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:18:02.222 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:18:02.223 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.379ms
2025-06-11 23:18:02.224 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.8334ms
2025-06-11 23:18:02.225 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:18:02.226 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:18:02.227 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:18:02.227 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:18:02.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.0097ms
2025-06-11 23:18:02.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.6883ms
2025-06-11 23:18:25.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - null null
2025-06-11 23:18:25.476 +07:00 [INF] No cached response available for this request.
2025-06-11 23:18:25.481 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 23:18:25.482 +07:00 [INF] Route matched with {action = "UserDetail", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetail(System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:18:25.492 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-11 23:18:25.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:18:25.500 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[HostId] = @__id_0
2025-06-11 23:18:25.506 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_1) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__id_0
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:18:25.508 +07:00 [INF] Executing ViewResult, running view UserDetail.
2025-06-11 23:18:25.510 +07:00 [INF] Executed ViewResult - view UserDetail executed in 2.3921ms.
2025-06-11 23:18:25.511 +07:00 [INF] Executed action WebHS.Controllers.AdminController.UserDetail (WebHS) in 28.573ms
2025-06-11 23:18:25.512 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.UserDetail (WebHS)'
2025-06-11 23:18:25.513 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:18:25.514 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/UserDetail/c1d32589-c80e-443c-9d6a-b13513b418ec - 200 null text/html; charset=utf-8 46.1945ms
2025-06-11 23:18:25.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:18:25.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:18:25.523 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.366ms
2025-06-11 23:18:25.526 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.6834ms
2025-06-11 23:29:08.557 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:29:09.737 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:29:09.792 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:29:09.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:29:09.800 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:29:09.816 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:29:09.834 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:29:09.855 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:29:10.074 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:29:10.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:29:10.121 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:29:10.134 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.191 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.196 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.205 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:10.207 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:29:10.208 +07:00 [INF] Starting data seeding...
2025-06-11 23:29:10.224 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:29:10.227 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:29:10.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:29:10.234 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:29:10.241 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:29:10.243 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:29:10.250 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:29:10.252 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:29:10.268 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:29:10.276 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:29:10.278 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:29:10.279 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:29:10.279 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:29:10.280 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:29:10.303 +07:00 [INF] Background Job Service started
2025-06-11 23:29:10.340 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:29:10.359 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:29:10.432 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:29:10.470 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:29:10.475 +07:00 [INF] Hosting environment: Development
2025-06-11 23:29:10.476 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:29:10.860 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:29:11.053 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:11.064 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:29:11.112 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:11.126 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:29:11.258 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:29:11.266 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:29:11.381 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:29:11.487 +07:00 [INF] Executed ViewResult - view Index executed in 107.7865ms.
2025-06-11 23:29:11.492 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 363.0395ms
2025-06-11 23:29:11.494 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:11.498 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:11.507 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 654.2247ms
2025-06-11 23:29:11.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:11.511 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:11.516 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.0075ms
2025-06-11 23:29:11.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1687ms
2025-06-11 23:29:33.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:29:33.778 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:33.791 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:29:33.800 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:29:33.813 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:29:33.856 +07:00 [INF] Executed ViewResult - view Login executed in 45.2529ms.
2025-06-11 23:29:33.859 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 56.2854ms
2025-06-11 23:29:33.860 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:29:33.862 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:33.864 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 107.216ms
2025-06-11 23:29:33.870 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:33.873 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:33.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.2009ms
2025-06-11 23:29:33.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.9676ms
2025-06-11 23:29:35.352 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:29:35.359 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:29:35.360 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:29:35.366 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:29:35.372 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:29:35.401 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:29:35.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:29:35.512 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:29:35.532 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:29:35.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:29:35.546 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:29:35.554 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:29:35.556 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:29:35.558 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 184.1739ms
2025-06-11 23:29:35.559 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:29:35.560 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 207.8414ms
2025-06-11 23:29:35.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:29:35.569 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:35.572 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:35.573 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:29:35.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:29:35.585 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:29:35.594 +07:00 [INF] Executed ViewResult - view Index executed in 8.8686ms.
2025-06-11 23:29:35.596 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 20.6069ms
2025-06-11 23:29:35.597 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:35.599 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:35.600 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 35.1234ms
2025-06-11 23:29:35.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:35.604 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:35.613 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.0758ms
2025-06-11 23:29:35.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.546ms
2025-06-11 23:29:35.643 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:29:35.643 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:29:35.647 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:35.652 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:35.662 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:35.669 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:35.671 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:35.680 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:35.703 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:29:35.732 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:29:35.742 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:35.747 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:35.752 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 79.3344ms
2025-06-11 23:29:35.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:35.756 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:35.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 114.1428ms
2025-06-11 23:29:35.824 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 140.0513ms
2025-06-11 23:29:35.826 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:35.827 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:35.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 184.7363ms
2025-06-11 23:29:41.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:29:41.057 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:41.059 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:41.062 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:29:41.069 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:29:41.075 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:29:41.080 +07:00 [INF] Executed ViewResult - view Index executed in 4.7488ms.
2025-06-11 23:29:41.082 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 18.2062ms
2025-06-11 23:29:41.083 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:29:41.085 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:41.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 34.6117ms
2025-06-11 23:29:41.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:41.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:41.099 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 10.3928ms
2025-06-11 23:29:41.107 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.8879ms
2025-06-11 23:29:41.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:29:41.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:29:41.129 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:41.132 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:41.136 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:41.136 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:41.137 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:41.139 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:41.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:29:41.149 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:29:41.151 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:41.152 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:41.153 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.6ms
2025-06-11 23:29:41.154 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.3488ms
2025-06-11 23:29:41.155 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:41.156 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:41.157 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:41.158 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:41.159 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 33.8275ms
2025-06-11 23:29:41.160 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 35.1999ms
2025-06-11 23:29:42.681 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:29:42.686 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:42.687 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:29:42.691 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:29:42.701 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:29:42.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:29:42.712 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:29:42.731 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:29:42.738 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:29:42.748 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:29:42.773 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:29:42.812 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:29:42.820 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:29:42.844 +07:00 [INF] Executed ViewResult - view Index executed in 25.2466ms.
2025-06-11 23:29:42.847 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 155.3047ms
2025-06-11 23:29:42.849 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:29:42.850 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:42.852 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 170.4246ms
2025-06-11 23:29:42.856 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:42.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:42.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.513ms
2025-06-11 23:29:42.866 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3738ms
2025-06-11 23:29:42.941 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:29:42.941 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:29:42.945 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:42.948 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:42.950 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:42.950 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:42.951 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:42.952 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:42.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:29:42.962 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:29:42.964 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:42.966 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:42.968 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.2034ms
2025-06-11 23:29:42.969 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.7953ms
2025-06-11 23:29:42.970 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:42.972 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:42.973 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:42.974 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:42.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 33.7283ms
2025-06-11 23:29:42.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 35.2057ms
2025-06-11 23:29:47.909 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Admin/CreateRevenueTestData - application/json 0
2025-06-11 23:29:47.914 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:29:47.915 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:29:47.917 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.CreateRevenueTestData (WebHS)'
2025-06-11 23:29:47.920 +07:00 [INF] Route matched with {action = "CreateRevenueTestData", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRevenueTestData() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:29:47.926 +07:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-06-11 23:29:47.931 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
2025-06-11 23:29:47.934 +07:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-06-11 23:29:47.937 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
2025-06-11 23:29:47.951 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Notes] IS NOT NULL AND [b].[Notes] LIKE N'%REVENUE\_TEST%' ESCAPE N'\'
2025-06-11 23:29:48.117 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (Size = 1000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 1000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = DateTime2), @p17='?' (Size = 450), @p18='?' (DbType = DateTime2), @p19='?' (DbType = DateTime2), @p20='?' (DbType = DateTime2), @p21='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p22='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (Size = 1000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 1000), @p28='?' (DbType = DateTime2), @p29='?' (DbType = Boolean), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = DateTime2), @p35='?' (Size = 450), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p40='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (Size = 1000), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (Size = 1000), @p46='?' (DbType = DateTime2), @p47='?' (DbType = Boolean), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p52='?' (DbType = DateTime2), @p53='?' (Size = 450), @p54='?' (DbType = DateTime2), @p55='?' (DbType = DateTime2), @p56='?' (DbType = DateTime2), @p57='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p58='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (Size = 1000), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Size = 1000), @p64='?' (DbType = DateTime2), @p65='?' (DbType = Boolean), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = DateTime2), @p71='?' (Size = 450), @p72='?' (DbType = DateTime2), @p73='?' (DbType = DateTime2), @p74='?' (DbType = DateTime2), @p75='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p76='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (Size = 1000), @p79='?' (DbType = Int32), @p80='?' (DbType = Int32), @p81='?' (Size = 1000), @p82='?' (DbType = DateTime2), @p83='?' (DbType = Boolean), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p88='?' (DbType = DateTime2), @p89='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Bookings] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, 2),
(@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 3),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, 4)) AS i ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CheckInDate], [CheckOutDate], [CreatedAt], [DiscountAmount], [FinalAmount], [HomestayId], [Notes], [NumberOfGuests], [PromotionId], [ReviewComment], [ReviewCreatedAt], [ReviewIsActive], [ReviewRating], [ReviewUpdatedAt], [Status], [TotalAmount], [UpdatedAt], [UserId])
VALUES (i.[CheckInDate], i.[CheckOutDate], i.[CreatedAt], i.[DiscountAmount], i.[FinalAmount], i.[HomestayId], i.[Notes], i.[NumberOfGuests], i.[PromotionId], i.[ReviewComment], i.[ReviewCreatedAt], i.[ReviewIsActive], i.[ReviewRating], i.[ReviewUpdatedAt], i.[Status], i.[TotalAmount], i.[UpdatedAt], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-06-11 23:29:48.138 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:29:48.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 23:29:48.146 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType9`4[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:48.149 +07:00 [INF] Executed action WebHS.Controllers.AdminController.CreateRevenueTestData (WebHS) in 227.8646ms
2025-06-11 23:29:48.151 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.CreateRevenueTestData (WebHS)'
2025-06-11 23:29:48.151 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Admin/CreateRevenueTestData - 200 null application/json; charset=utf-8 242.5728ms
2025-06-11 23:29:54.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:29:54.318 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:54.320 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:29:54.321 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:29:54.326 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:29:54.329 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:29:54.331 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:29:54.333 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:29:54.336 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:29:54.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:29:54.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:29:54.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:29:54.347 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:29:54.349 +07:00 [INF] Executed ViewResult - view Index executed in 2.0437ms.
2025-06-11 23:29:54.350 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 26.5169ms
2025-06-11 23:29:54.351 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:29:54.352 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:54.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 54.243ms
2025-06-11 23:29:54.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:54.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:54.362 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5414ms
2025-06-11 23:29:54.362 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.0504ms
2025-06-11 23:29:54.392 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:29:54.392 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:29:54.394 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:54.397 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:54.398 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:54.398 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:54.399 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:54.400 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:29:54.402 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/favicon.ico - null null
2025-06-11 23:29:54.414 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:29:54.409 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:29:54.415 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:54.417 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:54.419 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:29:54.420 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.9639ms
2025-06-11 23:29:54.421 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 15.5672ms
2025-06-11 23:29:54.424 +07:00 [INF] The file /favicon.ico was not modified
2025-06-11 23:29:54.423 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:29:54.424 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:29:54.426 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:54.426 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:54.427 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:54.428 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/favicon.ico - 304 null image/x-icon 25.5776ms
2025-06-11 23:29:54.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 36.4554ms
2025-06-11 23:29:54.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 37.4569ms
2025-06-11 23:29:55.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 23:29:55.525 +07:00 [INF] No cached response available for this request.
2025-06-11 23:29:55.528 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 23:29:55.531 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:29:55.541 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 23:29:55.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 23:29:55.549 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 23:29:55.553 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 23:29:55.564 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 23:29:55.587 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] IN (2, 3))
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] IN (2, 3)) DESC
2025-06-11 23:29:55.592 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 23:29:55.665 +07:00 [INF] Executed ViewResult - view Reports executed in 73.4672ms.
2025-06-11 23:29:55.667 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 134.2515ms
2025-06-11 23:29:55.669 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 23:29:55.670 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:29:55.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:29:55.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:29:55.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 150.2391ms
2025-06-11 23:29:55.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9059ms
2025-06-11 23:29:55.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.115ms
2025-06-11 23:30:00.964 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Bookings - null null
2025-06-11 23:30:00.968 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:00.969 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:30:00.973 +07:00 [INF] Route matched with {action = "Bookings", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Bookings(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:30:00.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:30:00.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:30:01.005 +07:00 [INF] Executing ViewResult, running view Bookings.
2025-06-11 23:30:01.016 +07:00 [INF] Executed ViewResult - view Bookings executed in 11.8074ms.
2025-06-11 23:30:01.018 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Bookings (WebHS) in 42.8811ms
2025-06-11 23:30:01.019 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Bookings (WebHS)'
2025-06-11 23:30:01.020 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:01.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Bookings - 200 null text/html; charset=utf-8 56.8986ms
2025-06-11 23:30:01.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:01.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:01.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2037ms
2025-06-11 23:30:01.032 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8805ms
2025-06-11 23:30:03.516 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Reports - null null
2025-06-11 23:30:03.520 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:03.521 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 23:30:03.522 +07:00 [INF] Route matched with {action = "Reports", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Reports() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:30:03.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 23:30:03.528 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 23:30:03.530 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thisMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__thisMonth_0
2025-06-11 23:30:03.532 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__lastMonth_0='?' (DbType = DateTime2), @__thisMonth_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__lastMonth_0 AND [b].[CreatedAt] < @__thisMonth_1
2025-06-11 23:30:03.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [h].[Name], (
    SELECT COUNT(*)
    FROM [Bookings] AS [b0]
    WHERE [h].[Id] = [b0].[HomestayId]) AS [BookingCount]
FROM [Homestays] AS [h]
ORDER BY (
    SELECT COUNT(*)
    FROM [Bookings] AS [b]
    WHERE [h].[Id] = [b].[HomestayId]) DESC
2025-06-11 23:30:03.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[FirstName], [a].[LastName], (
    SELECT COALESCE(SUM([b0].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h1]
    INNER JOIN [Bookings] AS [b0] ON [h1].[Id] = [b0].[HomestayId]
    WHERE [a].[Id] = [h1].[HostId] AND [b0].[Status] IN (2, 3))
FROM [AspNetUsers] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [Homestays] AS [h]
    WHERE [a].[Id] = [h].[HostId])
ORDER BY (
    SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
    FROM [Homestays] AS [h0]
    INNER JOIN [Bookings] AS [b] ON [h0].[Id] = [b].[HomestayId]
    WHERE [a].[Id] = [h0].[HostId] AND [b].[Status] IN (2, 3)) DESC
2025-06-11 23:30:03.540 +07:00 [INF] Executing ViewResult, running view Reports.
2025-06-11 23:30:03.542 +07:00 [INF] Executed ViewResult - view Reports executed in 1.8717ms.
2025-06-11 23:30:03.543 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Reports (WebHS) in 19.4586ms
2025-06-11 23:30:03.544 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Reports (WebHS)'
2025-06-11 23:30:03.545 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:03.546 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Reports - 200 null text/html; charset=utf-8 30.1196ms
2025-06-11 23:30:03.548 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:03.550 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9709ms
2025-06-11 23:30:04.497 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin/Users - null null
2025-06-11 23:30:04.502 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:04.504 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:30:04.508 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users(System.String, Int32, System.String) on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:30:04.519 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:30:04.527 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[Email]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 23:30:04.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.551 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:04.556 +07:00 [INF] Executing ViewResult, running view Users.
2025-06-11 23:30:04.567 +07:00 [INF] Executed ViewResult - view Users executed in 11.6199ms.
2025-06-11 23:30:04.569 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Users (WebHS) in 59.3078ms
2025-06-11 23:30:04.571 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Users (WebHS)'
2025-06-11 23:30:04.573 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:04.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin/Users - 200 null text/html; charset=utf-8 77.1882ms
2025-06-11 23:30:04.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:04.577 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:04.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5812ms
2025-06-11 23:30:04.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7963ms
2025-06-11 23:30:04.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:04.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:04.619 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:04.622 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:04.623 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:04.625 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:04.625 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:04.626 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:04.631 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:04.637 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:04.637 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:04.638 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.2804ms
2025-06-11 23:30:04.643 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:04.646 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:04.650 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 18.1266ms
2025-06-11 23:30:04.652 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:04.656 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:04.661 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:04.658 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 42.8724ms
2025-06-11 23:30:04.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 47.1421ms
2025-06-11 23:30:10.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:10.556 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:10.557 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:10.562 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:10.580 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:10.589 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:30:10.604 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:10.610 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:10.613 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:10.615 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:10.618 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:10.626 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:10.637 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:10.662 +07:00 [INF] Executed ViewResult - view Index executed in 26.3804ms.
2025-06-11 23:30:10.665 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 101.0743ms
2025-06-11 23:30:10.666 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:10.667 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:10.669 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 116.2644ms
2025-06-11 23:30:10.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:10.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:10.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.6855ms
2025-06-11 23:30:10.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.7149ms
2025-06-11 23:30:10.708 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:10.709 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:10.710 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:10.713 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:10.714 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:10.714 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:10.715 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:10.716 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:10.722 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:10.727 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:10.727 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:10.728 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.7368ms
2025-06-11 23:30:10.730 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:10.731 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:10.732 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 10.2609ms
2025-06-11 23:30:10.733 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:10.735 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:10.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.5711ms
2025-06-11 23:30:10.736 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:10.740 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.1999ms
2025-06-11 23:30:13.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - null null
2025-06-11 23:30:13.015 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.017 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 23:30:13.021 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:13.042 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:30:13.065 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 23:30:13.081 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:30:13.085 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 23:30:13.107 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:13.108 +07:00 [INF] Executed ViewResult - view Details executed in 22.9963ms.
2025-06-11 23:30:13.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5926ms
2025-06-11 23:30:13.112 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 89.7188ms
2025-06-11 23:30:13.114 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:13.115 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 23:30:13.119 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.2586ms
2025-06-11 23:30:13.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/4 - 200 null text/html; charset=utf-8 110.428ms
2025-06-11 23:30:13.168 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 23:30:13.168 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 23:30:13.171 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.172 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - null null
2025-06-11 23:30:13.173 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.174 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:30:13.176 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.178 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:30:13.179 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 23:30:13.180 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:13.182 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:13.183 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:13.196 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:30:13.200 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:30:13.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - null null
2025-06-11 23:30:13.286 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 23:30:13.290 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 23:30:13.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:13.207 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:30:13.286 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.287 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:13.325 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.329 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:30:13.331 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.332 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 23:30:13.338 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:13.341 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:13.341 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 154.7776ms
2025-06-11 23:30:13.343 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 161.1318ms
2025-06-11 23:30:13.345 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:13.346 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:13.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:30:13.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:13.347 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 23:30:13.348 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:30:13.348 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 23:30:13.348 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:13.356 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:13.364 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.5483ms
2025-06-11 23:30:13.357 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.358 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:30:13.368 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.369 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:13.369 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/4 - 200 null application/json; charset=utf-8 197.6961ms
2025-06-11 23:30:13.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 202.1724ms
2025-06-11 23:30:13.370 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 23:30:13.373 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:30:13.374 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.9093ms
2025-06-11 23:30:13.375 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.382 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.2899&lon=103.984&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 23:30:13.384 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.385 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:13.385 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 99.6821ms
2025-06-11 23:30:13.388 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.390 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 205.3078ms
2025-06-11 23:30:13.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 107.5293ms
2025-06-11 23:30:13.396 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:30:13.399 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.400 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=4&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 232.2449ms
2025-06-11 23:30:13.506 +07:00 [INF] Received HTTP response headers after 117.68ms - 401
2025-06-11 23:30:13.508 +07:00 [INF] End processing HTTP request after 140.2939ms - 401
2025-06-11 23:30:13.510 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 23:30:13.513 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:13.516 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 156.804ms
2025-06-11 23:30:13.518 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 23:30:13.518 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:13.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.2899&longitude=103.984 - 200 null application/json; charset=utf-8 316.3636ms
2025-06-11 23:30:21.473 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:30:21.478 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:21.480 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:21.482 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:21.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:30:21.492 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:21.494 +07:00 [INF] Executed ViewResult - view Index executed in 1.986ms.
2025-06-11 23:30:21.496 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 10.9631ms
2025-06-11 23:30:21.497 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:21.498 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:21.500 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 26.6719ms
2025-06-11 23:30:21.504 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:21.504 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:21.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5317ms
2025-06-11 23:30:21.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.5468ms
2025-06-11 23:30:21.538 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:21.538 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:21.541 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:21.544 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:21.546 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:21.547 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:21.548 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:21.549 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:21.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:21.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:21.559 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:21.561 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:21.562 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.8376ms
2025-06-11 23:30:21.563 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.913ms
2025-06-11 23:30:21.564 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:21.566 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:21.567 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:21.568 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:21.568 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 30.5046ms
2025-06-11 23:30:21.569 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.0761ms
2025-06-11 23:30:22.992 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:30:22.998 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.003 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:23.006 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:23.019 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:30:23.037 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:23.044 +07:00 [INF] Executed ViewResult - view Index executed in 6.9908ms.
2025-06-11 23:30:23.048 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 36.1386ms
2025-06-11 23:30:23.051 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:23.053 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.054 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 61.9856ms
2025-06-11 23:30:23.055 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:23.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:23.066 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 9.2613ms
2025-06-11 23:30:23.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.0308ms
2025-06-11 23:30:23.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:23.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:23.098 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.101 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.103 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:23.104 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:23.105 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:23.106 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:23.109 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:23.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:23.118 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:23.121 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:23.122 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.5702ms
2025-06-11 23:30:23.123 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.2715ms
2025-06-11 23:30:23.125 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:23.126 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:23.127 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.128 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 34.9664ms
2025-06-11 23:30:23.130 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 35.5925ms
2025-06-11 23:30:23.601 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:23.604 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.605 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:23.606 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:23.609 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:23.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:23.616 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:23.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:23.621 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:23.628 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:23.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:23.632 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:23.635 +07:00 [INF] Executed ViewResult - view Index executed in 2.5164ms.
2025-06-11 23:30:23.636 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 28.9253ms
2025-06-11 23:30:23.637 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:23.638 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.639 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 38.2273ms
2025-06-11 23:30:23.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:23.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:23.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.0479ms
2025-06-11 23:30:23.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1186ms
2025-06-11 23:30:23.668 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:23.669 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:23.670 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.673 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:23.675 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:23.676 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:23.676 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:23.677 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:23.680 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:23.685 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:23.687 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:23.689 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:23.690 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.2311ms
2025-06-11 23:30:23.691 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.2824ms
2025-06-11 23:30:23.692 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:23.693 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:23.694 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.695 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:23.695 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 27.4617ms
2025-06-11 23:30:23.696 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.921ms
2025-06-11 23:30:24.224 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 23:30:24.228 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:24.229 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:30:24.233 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 23:30:24.246 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 23:30:24.268 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 23:30:24.275 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 23:30:24.289 +07:00 [INF] Executed ViewResult - view AllReviews executed in 14.308ms.
2025-06-11 23:30:24.292 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 56.6876ms
2025-06-11 23:30:24.293 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:30:24.294 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:24.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 70.7768ms
2025-06-11 23:30:24.296 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:24.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:24.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9047ms
2025-06-11 23:30:24.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.7919ms
2025-06-11 23:30:27.259 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:27.263 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:27.264 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:27.265 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:27.268 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:27.272 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:27.275 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:27.277 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:27.280 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:27.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:27.285 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:27.287 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:27.289 +07:00 [INF] Executed ViewResult - view Index executed in 2.1952ms.
2025-06-11 23:30:27.290 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 24.1199ms
2025-06-11 23:30:27.292 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:27.292 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:27.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 34.4073ms
2025-06-11 23:30:27.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:27.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:27.302 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.7651ms
2025-06-11 23:30:27.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1117ms
2025-06-11 23:30:27.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:27.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:27.329 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:27.332 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:27.333 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:27.334 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:27.335 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:27.336 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:27.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:27.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:27.346 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:27.348 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:27.349 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.5519ms
2025-06-11 23:30:27.350 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.7228ms
2025-06-11 23:30:27.351 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:27.352 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:27.353 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:27.354 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:27.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 28.3343ms
2025-06-11 23:30:27.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 28.7908ms
2025-06-11 23:30:28.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 23:30:28.303 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:28.305 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:30:28.306 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 23:30:28.309 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 23:30:28.313 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 23:30:28.317 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 23:30:28.319 +07:00 [INF] Executed ViewResult - view AllReviews executed in 1.8251ms.
2025-06-11 23:30:28.320 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 12.7526ms
2025-06-11 23:30:28.321 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:30:28.322 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:28.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 23.187ms
2025-06-11 23:30:28.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:28.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:28.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3259ms
2025-06-11 23:30:28.334 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3951ms
2025-06-11 23:30:32.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 23:30:32.902 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:32.903 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:32.905 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:32.907 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 23:30:32.912 +07:00 [INF] Executed ViewResult - view About executed in 5.4896ms.
2025-06-11 23:30:32.914 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 7.1097ms
2025-06-11 23:30:32.915 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:32.916 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:32.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 18.7101ms
2025-06-11 23:30:32.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:32.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:32.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.5717ms
2025-06-11 23:30:32.933 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.6672ms
2025-06-11 23:30:34.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:34.861 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:34.862 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:34.863 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:34.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:34.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:34.873 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:34.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:34.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:34.881 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:34.883 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:34.885 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:34.886 +07:00 [INF] Executed ViewResult - view Index executed in 1.6174ms.
2025-06-11 23:30:34.887 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 22.88ms
2025-06-11 23:30:34.888 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:34.889 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:34.890 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 33.0757ms
2025-06-11 23:30:34.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:34.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:34.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6233ms
2025-06-11 23:30:34.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.8573ms
2025-06-11 23:30:34.921 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:34.921 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:34.923 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:34.925 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:34.927 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:34.927 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:34.928 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:34.929 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:34.932 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:34.937 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:34.938 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:34.940 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:34.941 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.3561ms
2025-06-11 23:30:34.942 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 7.0516ms
2025-06-11 23:30:34.943 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:34.944 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:34.945 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:34.946 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:34.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.1592ms
2025-06-11 23:30:34.947 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.7098ms
2025-06-11 23:30:37.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 23:30:37.334 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:37.335 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:37.336 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:37.338 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 23:30:37.339 +07:00 [INF] Executed ViewResult - view About executed in 1.496ms.
2025-06-11 23:30:37.340 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 2.652ms
2025-06-11 23:30:37.341 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:37.342 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:37.343 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 13.3727ms
2025-06-11 23:30:37.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:37.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:37.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.3543ms
2025-06-11 23:30:37.360 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.342ms
2025-06-11 23:30:38.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:38.478 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:38.479 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:38.480 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:38.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:38.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:38.490 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:38.493 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:38.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:38.498 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:38.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:38.502 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:38.504 +07:00 [INF] Executed ViewResult - view Index executed in 1.7665ms.
2025-06-11 23:30:38.505 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 23.4496ms
2025-06-11 23:30:38.506 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:38.507 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:38.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 34.5803ms
2025-06-11 23:30:38.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:38.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:38.514 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9906ms
2025-06-11 23:30:38.520 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9926ms
2025-06-11 23:30:38.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:38.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:38.543 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:38.545 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:38.546 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:38.546 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:38.547 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:38.548 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:38.551 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:38.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:38.557 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:38.559 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:38.560 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.1411ms
2025-06-11 23:30:38.561 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.1284ms
2025-06-11 23:30:38.562 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:38.563 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:38.564 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:38.565 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:38.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.7846ms
2025-06-11 23:30:38.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 25.4067ms
2025-06-11 23:30:40.104 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging - null null
2025-06-11 23:30:40.108 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:40.109 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 23:30:40.113 +07:00 [INF] Route matched with {action = "Index", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:40.158 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[BookingId], [c].[CreatedAt], [c].[HomestayId], [c].[IsArchived], [c].[LastMessage], [c].[LastMessageAt], [c].[LastMessageSenderId], [c].[User1Id], [c].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [a1].[Id], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt], [a1].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Conversations] AS [c]
INNER JOIN [AspNetUsers] AS [a] ON [c].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [c].[User2Id] = [a0].[Id]
LEFT JOIN [AspNetUsers] AS [a1] ON [c].[LastMessageSenderId] = [a1].[Id]
LEFT JOIN [Homestays] AS [h] ON [c].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [c].[BookingId] = [b].[Id]
WHERE ([c].[User1Id] = @__userId_0 OR [c].[User2Id] = @__userId_0) AND [c].[IsArchived] = CAST(0 AS bit)
ORDER BY [c].[LastMessageAt] DESC
2025-06-11 23:30:40.178 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:30:40.184 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 450), @__conversation_User1Id_1='?' (Size = 450), @__conversation_User2Id_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__8__locals1_userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit) AND (([m].[SenderId] = @__conversation_User1Id_1 AND [m].[ReceiverId] = @__conversation_User2Id_2) OR ([m].[SenderId] = @__conversation_User2Id_2 AND [m].[ReceiverId] = @__conversation_User1Id_1))
2025-06-11 23:30:40.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:40.196 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__currentUserId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Conversations] AS [c]
        WHERE [c].[Id] = @__conversationId_0 AND ([c].[User1Id] = @__currentUserId_1 OR [c].[User2Id] = @__currentUserId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:30:40.224 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttachmentFileName], [t].[AttachmentUrl], [t].[BookingId], [t].[Content], [t].[ConversationId], [t].[HomestayId], [t].[IsDeleted], [t].[IsRead], [t].[ReadAt], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [t].[Type], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM (
    SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[ConversationId] = @__conversationId_0
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[SenderId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [t].[ReceiverId] = [a0].[Id]
LEFT JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
LEFT JOIN [Bookings] AS [b] ON [t].[BookingId] = [b].[Id]
ORDER BY [t].[SentAt] DESC
2025-06-11 23:30:40.232 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[ConversationId] = @__conversationId_0 AND [m].[ReceiverId] = @__userId_1 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:40.234 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:40.243 +07:00 [INF] Executed ViewResult - view Index executed in 9.4725ms.
2025-06-11 23:30:40.244 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.Index (WebHS) in 130.2224ms
2025-06-11 23:30:40.245 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.Index (WebHS)'
2025-06-11 23:30:40.246 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:40.247 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging - 200 null text/html; charset=utf-8 143.027ms
2025-06-11 23:30:40.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - null null
2025-06-11 23:30:40.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:40.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:40.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.409ms
2025-06-11 23:30:40.252 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:40.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.5318ms
2025-06-11 23:30:40.264 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:40.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/images/default-avatar.png - 404 0 null 16.1985ms
2025-06-11 23:30:40.270 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/images/default-avatar.png, Response status code: 404
2025-06-11 23:30:40.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:40.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:40.278 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - application/x-www-form-urlencoded; charset=UTF-8 16
2025-06-11 23:30:40.280 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:40.283 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:40.285 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:30:40.286 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:40.287 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:40.287 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:30:40.288 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:40.289 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:40.291 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 23:30:40.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:40.299 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:40.302 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:40.303 +07:00 [INF] Route matched with {action = "MarkAsRead", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int32) on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:40.304 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:40.305 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.687ms
2025-06-11 23:30:40.308 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.4999ms
2025-06-11 23:30:40.309 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:40.310 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:40.311 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:40.312 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:40.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='?' (DbType = Int32), @__userId_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AttachmentFileName], [m].[AttachmentUrl], [m].[BookingId], [m].[Content], [m].[ConversationId], [m].[HomestayId], [m].[IsDeleted], [m].[IsRead], [m].[ReadAt], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__messageId_0 AND [m].[ReceiverId] = @__userId_1
2025-06-11 23:30:40.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 36.6908ms
2025-06-11 23:30:40.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 37.9726ms
2025-06-11 23:30:40.318 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType29`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:40.324 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.MarkAsRead (WebHS) in 18.0792ms
2025-06-11 23:30:40.326 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.MarkAsRead (WebHS)'
2025-06-11 23:30:40.327 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Messaging/MarkAsRead - 200 null application/json; charset=utf-8 48.838ms
2025-06-11 23:30:42.313 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:30:42.316 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:42.317 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:42.318 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:30:42.320 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:30:42.325 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:30:42.328 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:42.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:42.333 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:42.335 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:30:42.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:30:42.339 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:42.341 +07:00 [INF] Executed ViewResult - view Index executed in 1.9524ms.
2025-06-11 23:30:42.345 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 25.6825ms
2025-06-11 23:30:42.346 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:30:42.347 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:42.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 35.3846ms
2025-06-11 23:30:42.349 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:42.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:42.356 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4754ms
2025-06-11 23:30:42.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.4394ms
2025-06-11 23:30:42.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:42.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:42.380 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:42.383 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:42.385 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:42.385 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:42.386 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:42.386 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:42.389 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:42.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:42.396 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:42.398 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:42.399 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.7564ms
2025-06-11 23:30:42.400 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.0171ms
2025-06-11 23:30:42.401 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:42.402 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:42.403 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:42.404 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:42.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.7443ms
2025-06-11 23:30:42.405 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 27.3274ms
2025-06-11 23:30:43.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 23:30:43.076 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:43.077 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:43.078 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:43.080 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 23:30:43.081 +07:00 [INF] Executed ViewResult - view About executed in 1.707ms.
2025-06-11 23:30:43.083 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 3.167ms
2025-06-11 23:30:43.084 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:30:43.085 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:43.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 14.3925ms
2025-06-11 23:30:43.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:43.096 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:43.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0553ms
2025-06-11 23:30:43.104 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.6913ms
2025-06-11 23:30:44.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:30:44.285 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:44.286 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:30:44.287 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:30:44.291 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:30:44.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:30:44.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:30:44.301 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:30:44.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:30:44.308 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:30:44.313 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:30:44.318 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:30:44.320 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:44.322 +07:00 [INF] Executed ViewResult - view Index executed in 2.0727ms.
2025-06-11 23:30:44.324 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 35.5295ms
2025-06-11 23:30:44.325 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:30:44.326 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:44.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 45.1133ms
2025-06-11 23:30:44.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:44.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:44.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0417ms
2025-06-11 23:30:44.338 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.786ms
2025-06-11 23:30:44.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:44.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:44.371 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:44.374 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:44.375 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:44.375 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:44.376 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:44.377 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:44.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:44.384 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:44.386 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:44.388 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:44.389 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 10.1034ms
2025-06-11 23:30:44.390 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.174ms
2025-06-11 23:30:44.391 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:44.393 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:44.394 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:44.394 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:44.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.2465ms
2025-06-11 23:30:44.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.9602ms
2025-06-11 23:30:52.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - null null
2025-06-11 23:30:52.128 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:52.129 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:52.132 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:52.141 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0
2025-06-11 23:30:52.158 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:30:52.176 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:30:52.183 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 23:30:52.212 +07:00 [INF] Executed ViewResult - view MyBookings executed in 29.248ms.
2025-06-11 23:30:52.213 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 79.2853ms
2025-06-11 23:30:52.214 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:52.215 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:52.216 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings - 200 null text/html; charset=utf-8 92.5753ms
2025-06-11 23:30:52.218 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:52.219 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:52.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.549ms
2025-06-11 23:30:52.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.1892ms
2025-06-11 23:30:52.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:52.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:52.243 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:52.246 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:52.248 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:52.249 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:52.250 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:52.251 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:52.255 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:52.260 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:52.263 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:52.264 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:52.265 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.1046ms
2025-06-11 23:30:52.266 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.8295ms
2025-06-11 23:30:52.267 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:52.268 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:52.269 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:52.270 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:52.270 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 29.749ms
2025-06-11 23:30:52.271 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.5039ms
2025-06-11 23:30:54.617 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=pending - null null
2025-06-11 23:30:54.621 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:54.622 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:54.623 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:54.630 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 23:30:54.642 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:30:54.660 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:30:54.662 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 23:30:54.664 +07:00 [INF] Executed ViewResult - view MyBookings executed in 1.7573ms.
2025-06-11 23:30:54.666 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 41.0441ms
2025-06-11 23:30:54.667 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:54.668 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:54.669 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=pending - 200 null text/html; charset=utf-8 51.7873ms
2025-06-11 23:30:54.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:54.672 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:54.677 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1857ms
2025-06-11 23:30:54.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.891ms
2025-06-11 23:30:54.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:54.695 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:54.697 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:54.699 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:54.700 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:54.700 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:54.701 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:54.702 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:54.705 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:54.710 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:54.712 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:54.714 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:54.714 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.2105ms
2025-06-11 23:30:54.715 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.1495ms
2025-06-11 23:30:54.716 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:54.717 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:54.718 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:54.719 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:54.720 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 25.5945ms
2025-06-11 23:30:54.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 26.3558ms
2025-06-11 23:30:55.362 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=confirmed - null null
2025-06-11 23:30:55.367 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.370 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:55.371 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:55.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 23:30:55.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:30:55.384 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 23:30:55.385 +07:00 [INF] Executed ViewResult - view MyBookings executed in 1.8274ms.
2025-06-11 23:30:55.387 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 13.6219ms
2025-06-11 23:30:55.388 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:55.390 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=confirmed - 200 null text/html; charset=utf-8 28.9814ms
2025-06-11 23:30:55.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:55.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:55.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.2304ms
2025-06-11 23:30:55.414 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:55.414 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:55.418 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.421 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.422 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:55.424 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:55.423 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:55.429 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:55.426 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.0739ms
2025-06-11 23:30:55.429 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:55.433 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:55.441 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:55.443 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 16.1724ms
2025-06-11 23:30:55.446 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:55.447 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:55.448 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.6329ms
2025-06-11 23:30:55.450 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.451 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:55.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 37.6542ms
2025-06-11 23:30:55.453 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 43.2045ms
2025-06-11 23:30:55.745 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=completed - null null
2025-06-11 23:30:55.749 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.750 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:55.751 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:55.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 23:30:55.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:30:55.761 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 23:30:55.762 +07:00 [INF] Executed ViewResult - view MyBookings executed in 1.3497ms.
2025-06-11 23:30:55.763 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 10.5833ms
2025-06-11 23:30:55.764 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:55.765 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.766 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=completed - 200 null text/html; charset=utf-8 21.0445ms
2025-06-11 23:30:55.769 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:55.770 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:55.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0705ms
2025-06-11 23:30:55.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.0953ms
2025-06-11 23:30:55.795 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:55.796 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:55.798 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.801 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:55.802 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:55.803 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:55.804 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:55.805 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:55.809 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:55.813 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:55.816 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:55.818 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:55.819 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 12.4975ms
2025-06-11 23:30:55.821 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 9.4926ms
2025-06-11 23:30:55.822 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:55.824 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:55.825 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.826 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:55.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 31.4822ms
2025-06-11 23:30:55.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 32.1672ms
2025-06-11 23:30:56.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=cancelled - null null
2025-06-11 23:30:56.045 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:56.046 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:56.047 +07:00 [INF] Route matched with {action = "MyBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MyBookings(System.String, Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:30:56.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
2025-06-11 23:30:56.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookingStatus_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[NumberOfGuests], [t].[FinalAmount], [t].[Status], [t].[TotalAmount], [t].[DiscountAmount], [t].[CreatedAt], [t].[HomestayId], [t].[Notes], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[UpdatedAt], [t].[UserId], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h1].[Id], [h1].[Caption], [h1].[CreatedAt], [h1].[HomestayId], [h1].[ImageUrl], [h1].[IsPrimary], [h1].[Order], CASE
    WHEN [t].[Status] = 3 AND [t].[ReviewRating] IS NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, CASE
    WHEN [t].[Status] IN (0, 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [h2].[Id], [h2].[Caption], [h2].[CreatedAt], [h2].[HomestayId], [h2].[ImageUrl], [h2].[IsPrimary], [h2].[Order]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[UserId] = @__userId_0 AND [b].[Status] = @__bookingStatus_1
    ORDER BY [b].[CreatedAt] DESC
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayImages] AS [h1] ON [h].[Id] = [h1].[HomestayId]
LEFT JOIN [HomestayImages] AS [h2] ON [h].[Id] = [h2].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h].[Id], [a].[Id], [h0].[Id], [h1].[Id]
2025-06-11 23:30:56.056 +07:00 [INF] Executing ViewResult, running view MyBookings.
2025-06-11 23:30:56.058 +07:00 [INF] Executed ViewResult - view MyBookings executed in 1.4269ms.
2025-06-11 23:30:56.059 +07:00 [INF] Executed action WebHS.Controllers.BookingController.MyBookings (WebHS) in 10.5271ms
2025-06-11 23:30:56.060 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.MyBookings (WebHS)'
2025-06-11 23:30:56.061 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:56.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/MyBookings?status=cancelled - 200 null text/html; charset=utf-8 20.3378ms
2025-06-11 23:30:56.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:56.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:56.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4183ms
2025-06-11 23:30:56.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.633ms
2025-06-11 23:30:56.090 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:30:56.090 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:30:56.093 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:56.096 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:56.098 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:56.098 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:56.099 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:56.101 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:30:56.106 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:30:56.110 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:30:56.112 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:56.114 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:30:56.115 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.822ms
2025-06-11 23:30:56.116 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 8.2387ms
2025-06-11 23:30:56.117 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:30:56.118 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:30:56.120 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:56.121 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:56.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 32.3889ms
2025-06-11 23:30:56.123 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 32.8799ms
2025-06-11 23:30:58.926 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Logout - application/x-www-form-urlencoded 225
2025-06-11 23:30:58.929 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:30:58.930 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:30:58.931 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 23:30:58.934 +07:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:30:58.939 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-06-11 23:30:58.940 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-06-11 23:30:58.941 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-06-11 23:30:58.942 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:30:58.943 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Logout (WebHS) in 6.319ms
2025-06-11 23:30:58.944 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Logout (WebHS)'
2025-06-11 23:30:58.944 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Logout - 302 0 null 18.3208ms
2025-06-11 23:30:58.947 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:30:58.950 +07:00 [INF] No cached response available for this request.
2025-06-11 23:30:58.950 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:58.951 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:30:58.955 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:30:58.959 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:30:58.961 +07:00 [INF] Executed ViewResult - view Index executed in 1.5024ms.
2025-06-11 23:30:58.962 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 8.2931ms
2025-06-11 23:30:58.963 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:30:58.964 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:30:58.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.7861ms
2025-06-11 23:30:58.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:30:58.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:30:58.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7185ms
2025-06-11 23:30:58.977 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3702ms
2025-06-11 23:31:00.431 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:31:00.435 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:00.436 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:31:00.437 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:31:00.438 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:31:00.441 +07:00 [INF] Executed ViewResult - view Login executed in 2.3701ms.
2025-06-11 23:31:00.442 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 3.6765ms
2025-06-11 23:31:00.443 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:31:00.444 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:00.445 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 13.4313ms
2025-06-11 23:31:00.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:31:00.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:31:00.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9628ms
2025-06-11 23:31:00.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.5854ms
2025-06-11 23:31:02.624 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 250
2025-06-11 23:31:02.627 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:31:02.628 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:31:02.629 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:31:02.630 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:31:02.635 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:31:02.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:31:02.700 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:31:02.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:31:02.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:31:02.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:31:02.711 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:31:02.712 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:31:02.713 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 81.6784ms
2025-06-11 23:31:02.714 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:31:02.715 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 90.9336ms
2025-06-11 23:31:02.718 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:31:02.721 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:02.722 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:31:02.723 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:31:02.725 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:31:02.729 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:31:02.731 +07:00 [INF] Executed ViewResult - view Index executed in 1.4258ms.
2025-06-11 23:31:02.732 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 7.5963ms
2025-06-11 23:31:02.733 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:31:02.734 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:02.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 17.0087ms
2025-06-11 23:31:02.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:31:02.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:31:02.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0575ms
2025-06-11 23:31:02.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9412ms
2025-06-11 23:31:02.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:31:02.776 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:02.777 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:02.778 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:31:02.782 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:31:02.786 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:02.787 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.0614ms
2025-06-11 23:31:02.789 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:02.790 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:02.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 18.9865ms
2025-06-11 23:31:06.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:31:06.301 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:06.302 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:31:06.304 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:31:06.307 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:31:06.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:31:06.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:31:06.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:31:06.320 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:31:06.322 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:31:06.324 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:31:06.326 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:31:06.328 +07:00 [INF] Executed ViewResult - view Index executed in 1.5319ms.
2025-06-11 23:31:06.329 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 23.5906ms
2025-06-11 23:31:06.330 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:31:06.331 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:06.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 35.0883ms
2025-06-11 23:31:06.335 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:31:06.335 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:31:06.337 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.2382ms
2025-06-11 23:31:06.344 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0458ms
2025-06-11 23:31:06.371 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:31:06.375 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:06.376 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:06.377 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:31:06.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:31:06.386 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:06.387 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 7.2553ms
2025-06-11 23:31:06.388 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:06.390 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:06.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.1732ms
2025-06-11 23:31:08.017 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/Details/2 - null null
2025-06-11 23:31:08.020 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.021 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 23:31:08.022 +07:00 [INF] Route matched with {action = "Details", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:31:08.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [t].[Id0], [t].[AccessFailedCount], [t].[Address0], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[IsActive0], [t].[IsHost], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[ProfilePicture], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t0].[CreatedAt], [t0].[Description], [t0].[Icon], [t0].[IsActive], [t0].[Name], [t1].[Id], [t1].[CheckInDate], [t1].[CheckOutDate], [t1].[CreatedAt], [t1].[DiscountAmount], [t1].[FinalAmount], [t1].[HomestayId], [t1].[Notes], [t1].[NumberOfGuests], [t1].[PromotionId], [t1].[ReviewComment], [t1].[ReviewCreatedAt], [t1].[ReviewIsActive], [t1].[ReviewRating], [t1].[ReviewUpdatedAt], [t1].[Status], [t1].[TotalAmount], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id0], [t1].[AccessFailedCount], [t1].[Address], [t1].[Bio], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[FirstName], [t1].[IsActive], [t1].[IsHost], [t1].[LastName], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[ProfilePicture], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[Address] AS [Address0], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive] AS [IsActive0], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt] AS [UpdatedAt0], [a].[UserName]
    FROM [Homestays] AS [h]
    INNER JOIN [AspNetUsers] AS [a] ON [h].[HostId] = [a].[Id]
    WHERE [h].[Id] = @__id_0 AND [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [h1].[HomestayId], [h1].[AmenityId], [a0].[Id], [a0].[CreatedAt], [a0].[Description], [a0].[Icon], [a0].[IsActive], [a0].[Name]
    FROM [HomestayAmenities] AS [h1]
    INNER JOIN [Amenities] AS [a0] ON [h1].[AmenityId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId], [a1].[Id] AS [Id0], [a1].[AccessFailedCount], [a1].[Address], [a1].[Bio], [a1].[ConcurrencyStamp], [a1].[CreatedAt] AS [CreatedAt0], [a1].[Email], [a1].[EmailConfirmed], [a1].[FirstName], [a1].[IsActive], [a1].[IsHost], [a1].[LastName], [a1].[LockoutEnabled], [a1].[LockoutEnd], [a1].[NormalizedEmail], [a1].[NormalizedUserName], [a1].[PasswordHash], [a1].[PhoneNumber], [a1].[PhoneNumberConfirmed], [a1].[ProfilePicture], [a1].[SecurityStamp], [a1].[TwoFactorEnabled], [a1].[UpdatedAt] AS [UpdatedAt0], [a1].[UserName]
    FROM [Bookings] AS [b]
    INNER JOIN [AspNetUsers] AS [a1] ON [b].[UserId] = [a1].[Id]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t1] ON [t].[Id] = [t1].[HomestayId]
ORDER BY [t].[Id], [t].[Id0], [h0].[Id], [t0].[HomestayId], [t0].[AmenityId], [t0].[Id], [t1].[Id]
2025-06-11 23:31:08.030 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[UserId] = @__userId_0 AND [b].[HomestayId] = @__id_1 AND [b].[Status] = 3 AND [b].[ReviewRating] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:31:08.032 +07:00 [INF] Executing ViewResult, running view Details.
2025-06-11 23:31:08.034 +07:00 [INF] Executed ViewResult - view Details executed in 2.3571ms.
2025-06-11 23:31:08.035 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Details (WebHS) in 11.6987ms
2025-06-11 23:31:08.036 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Details (WebHS)'
2025-06-11 23:31:08.037 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.038 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/Details/2 - 200 null text/html; charset=utf-8 20.734ms
2025-06-11 23:31:08.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:31:08.041 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:31:08.043 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.0251ms
2025-06-11 23:31:08.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3868ms
2025-06-11 23:31:08.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - null null
2025-06-11 23:31:08.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12 - null null
2025-06-11 23:31:08.073 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/2 - null null
2025-06-11 23:31:08.074 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.076 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.078 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.079 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:31:08.079 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:31:08.080 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 23:31:08.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.7769&longitude=106.7009 - null null
2025-06-11 23:31:08.081 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:31:08.082 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:31:08.089 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 23:31:08.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:31:08.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:31:08.086 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.101 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:08.084 +07:00 [INF] Route matched with {action = "GetBookedDates", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookedDates(Int32) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:31:08.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:31:08.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:31:08.107 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:08.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:31:08.107 +07:00 [INF] Executing endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 23:31:08.153 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:31:08.148 +07:00 [ERR] Error retrieving booked dates for homestay 0
System.InvalidOperationException: The LINQ expression 'b => Enumerable.Range(
    start: 0, 
    count: (b.CheckOutDate.Date - b.CheckInDate.Date).Days)
    .AsQueryable()
    .Select(offset => b.CheckInDate.Date.AddDays((double)offset))' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessSelectMany(NavigationExpansionExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebHS.Services.BookingService.GetBookedDatesAsync(Int32 homestayId) in D:\WebHS\Services\BookingService.cs:line 478
2025-06-11 23:31:08.156 +07:00 [INF] Route matched with {action = "GetWeatherByCoordinates", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByCoordinates(Double, Double) on controller WebHS.Controllers.WeatherController (WebHS).
2025-06-11 23:31:08.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:31:08.112 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:08.155 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:31:08.163 +07:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:08.166 +07:00 [INF] Start processing HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.7769&lon=106.7009&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 23:31:08.167 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:08.168 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 76.1905ms
2025-06-11 23:31:08.170 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:08.170 +07:00 [INF] Executed action WebHS.Controllers.BookingController.GetBookedDates (WebHS) in 61.9122ms
2025-06-11 23:31:08.171 +07:00 [INF] Sending HTTP request GET https://api.openweathermap.org/data/2.5/weather?lat=10.7769&lon=106.7009&appid=your-openweathermap-api-key&units=metric&lang=vi
2025-06-11 23:31:08.172 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 15.2884ms
2025-06-11 23:31:08.175 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.GetBookedDates (WebHS)'
2025-06-11 23:31:08.173 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:31:08.174 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 86.2677ms
2025-06-11 23:31:08.178 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:08.179 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.180 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.181 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:31:08.182 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.183 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/GetBookedDates/2 - 200 null application/json; charset=utf-8 109.7241ms
2025-06-11 23:31:08.183 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12 - 200 null application/json; charset=utf-8 112.1027ms
2025-06-11 23:31:08.184 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.185 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 95.76ms
2025-06-11 23:31:08.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-11&checkOut=2025-06-12&promotionCode= - 200 null application/json; charset=utf-8 119.2039ms
2025-06-11 23:31:08.200 +07:00 [INF] Received HTTP response headers after 24.1117ms - 401
2025-06-11 23:31:08.201 +07:00 [INF] End processing HTTP request after 35.8046ms - 401
2025-06-11 23:31:08.202 +07:00 [WRN] Weather API request failed with status code: "Unauthorized"
2025-06-11 23:31:08.203 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:08.205 +07:00 [INF] Executed action WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS) in 39.8411ms
2025-06-11 23:31:08.206 +07:00 [INF] Executed endpoint 'WebHS.Controllers.WeatherController.GetWeatherByCoordinates (WebHS)'
2025-06-11 23:31:08.206 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:08.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Weather/coordinates?latitude=10.7769&longitude=106.7009 - 200 null application/json; charset=utf-8 126.59ms
2025-06-11 23:31:09.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - null null
2025-06-11 23:31:09.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-28&checkOut=2025-06-29 - null null
2025-06-11 23:31:09.925 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:09.927 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:09.927 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:31:09.928 +07:00 [INF] Executing endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:31:09.929 +07:00 [INF] Route matched with {action = "CalculatePrice", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CalculatePrice(Int32, System.DateTime, System.DateTime, System.String) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:31:09.929 +07:00 [INF] Route matched with {action = "CheckAvailability", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckAvailability(Int32, System.DateTime, System.DateTime) on controller WebHS.Controllers.BookingController (WebHS).
2025-06-11 23:31:09.939 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [h1].[HomestayId], [h1].[AmenityId]
FROM (
    SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[Id] = @__id_0
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN [HomestayAmenities] AS [h1] ON [t].[Id] = [h1].[HomestayId]
ORDER BY [t].[Id], [h0].[Id], [h1].[HomestayId]
2025-06-11 23:31:09.940 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = DateTime2), @__checkOut_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Status] IN (1, 2, 3) AND @__checkIn_1 < [b].[CheckOutDate] AND @__checkOut_2 > [b].[CheckInDate]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:31:09.942 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:31:09.946 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__checkIn_1='?' (DbType = Date), @__checkOut_2='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [BlockedDates] AS [b]
        WHERE [b].[HomestayId] = @__homestayId_0 AND [b].[Date] >= @__checkIn_1 AND [b].[Date] < @__checkOut_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:31:09.946 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:31:09.947 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType13`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:09.951 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32), @__date_Date_1='?' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[CreatedAt], [h].[Date], [h].[HomestayId], [h].[Note], [h].[PricePerNight], [h].[UpdatedAt]
FROM [HomestayPricings] AS [h]
WHERE [h].[HomestayId] = @__homestayId_0 AND CONVERT(date, [h].[Date]) = @__date_Date_1
2025-06-11 23:31:09.951 +07:00 [INF] Executed action WebHS.Controllers.BookingController.CheckAvailability (WebHS) in 16.4873ms
2025-06-11 23:31:09.953 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__homestayId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM [Homestays] AS [h]
WHERE [h].[Id] = @__homestayId_0
2025-06-11 23:31:09.954 +07:00 [INF] Executed endpoint 'WebHS.Controllers.BookingController.CheckAvailability (WebHS)'
2025-06-11 23:31:09.955 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType23`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:09.956 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:09.957 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.CalculatePrice (WebHS) in 25.966ms
2025-06-11 23:31:09.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Booking/CheckAvailability?homestayId=2&checkIn=2025-06-28&checkOut=2025-06-29 - 200 null application/json; charset=utf-8 34.7715ms
2025-06-11 23:31:09.958 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.CalculatePrice (WebHS)'
2025-06-11 23:31:09.961 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:09.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay/CalculatePrice?homestayId=2&checkIn=2025-06-28&checkOut=2025-06-29&promotionCode= - 200 null application/json; charset=utf-8 39.392ms
2025-06-11 23:31:38.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:31:38.738 +07:00 [INF] No cached response available for this request.
2025-06-11 23:31:38.739 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:38.740 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:31:38.751 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:31:38.752 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:31:38.753 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.6524ms
2025-06-11 23:31:38.754 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:31:38.755 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:31:38.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 20.2812ms
2025-06-11 23:32:08.722 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:32:08.724 +07:00 [INF] No cached response available for this request.
2025-06-11 23:32:08.725 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:32:08.726 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:32:08.730 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:32:08.735 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:32:08.736 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 8.2564ms
2025-06-11 23:32:08.737 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:32:08.737 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:32:08.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 16.0774ms
2025-06-11 23:32:38.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:32:38.743 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 23:32:38.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 429 null null 9.5066ms
2025-06-11 23:33:08.097 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:33:08.111 +07:00 [WRN] Rate limit exceeded for client: ip_::1
2025-06-11 23:33:08.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 429 null null 17.2362ms
2025-06-11 23:38:13.640 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:38:14.828 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:38:14.889 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:38:14.897 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:38:14.902 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:38:14.921 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:38:14.938 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:38:14.948 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:38:15.160 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:38:15.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:38:15.201 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:38:15.215 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.267 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.271 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.273 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.276 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.278 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.282 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:38:15.284 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:38:15.285 +07:00 [INF] Starting data seeding...
2025-06-11 23:38:15.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:38:15.300 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:38:15.307 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:38:15.309 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:38:15.315 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:38:15.318 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:38:15.324 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:38:15.326 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:38:15.341 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:38:15.350 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:38:15.352 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:38:15.353 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:38:15.353 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:38:15.354 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:38:15.376 +07:00 [INF] Background Job Service started
2025-06-11 23:38:15.412 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:38:15.424 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:38:15.445 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:38:15.447 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:38:15.448 +07:00 [INF] Hosting environment: Development
2025-06-11 23:38:15.449 +07:00 [INF] Content root path: d:\WebHS
2025-06-11 23:38:34.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749659914882 - null null
2025-06-11 23:38:34.944 +07:00 [INF] No cached response available for this request.
2025-06-11 23:38:34.947 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:38:34.982 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:38:34.993 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:38:35.106 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:38:35.120 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:38:35.242 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:38:35.325 +07:00 [INF] Executed ViewResult - view Index executed in 83.6868ms.
2025-06-11 23:38:35.329 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 332.5877ms
2025-06-11 23:38:35.332 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:38:35.335 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:38:35.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749659914882 - 200 null text/html; charset=utf-8 428.0989ms
2025-06-11 23:38:58.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749659938783 - null null
2025-06-11 23:38:58.797 +07:00 [INF] No cached response available for this request.
2025-06-11 23:38:58.804 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-06-11 23:38:58.808 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-06-11 23:38:58.809 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:38:58.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion?id=e530a789-92c9-430b-8a07-39f39881f411&vscodeBrowserReqId=1749659938783 - 302 0 null 19.0383ms
2025-06-11 23:38:58.815 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login?ReturnUrl=%2FPromotion%3Fid%3De530a789-92c9-430b-8a07-39f39881f411%26vscodeBrowserReqId%3D1749659938783 - null null
2025-06-11 23:38:58.819 +07:00 [INF] No cached response available for this request.
2025-06-11 23:38:58.823 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:38:58.829 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:38:58.842 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:38:58.873 +07:00 [INF] Executed ViewResult - view Login executed in 32.0581ms.
2025-06-11 23:38:58.876 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 45.1267ms
2025-06-11 23:38:58.878 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:38:58.880 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:38:58.881 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login?ReturnUrl=%2FPromotion%3Fid%3De530a789-92c9-430b-8a07-39f39881f411%26vscodeBrowserReqId%3D1749659938783 - 200 null text/html; charset=utf-8 65.8699ms
2025-06-11 23:45:20.604 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:45:22.179 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:45:22.239 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:45:22.247 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:45:22.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:45:22.273 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:45:22.293 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:45:22.320 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:45:22.588 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:45:22.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:45:22.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:45:22.662 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.730 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.735 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.740 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:22.760 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:45:22.768 +07:00 [INF] Starting data seeding...
2025-06-11 23:45:22.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:45:22.792 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:45:22.803 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:45:22.806 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:45:22.816 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:45:22.820 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:45:22.832 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:45:22.835 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:45:22.860 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:45:22.872 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:45:22.876 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:45:22.877 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:45:22.879 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:45:22.879 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:45:22.915 +07:00 [INF] Background Job Service started
2025-06-11 23:45:22.968 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:45:23.001 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:45:23.111 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:45:23.150 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:45:23.155 +07:00 [INF] Hosting environment: Development
2025-06-11 23:45:23.156 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:45:23.396 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:45:23.632 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:23.643 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:45:23.706 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:23.725 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:45:23.901 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:45:23.912 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:45:24.067 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:45:24.195 +07:00 [INF] Executed ViewResult - view Index executed in 128.5297ms.
2025-06-11 23:45:24.200 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 469.388ms
2025-06-11 23:45:24.202 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:24.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 23:45:24.206 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:24.214 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:24.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 834.0759ms
2025-06-11 23:45:24.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:24.229 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:24.233 +07:00 [INF] Sending file. Request path: '/WebHS.styles.css'. Physical path: 'D:\WebHS\obj\Debug\net8.0\scopedcss\bundle\WebHS.styles.css'
2025-06-11 23:45:24.235 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 6.8532ms
2025-06-11 23:45:24.239 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:24.250 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 200 1123 text/css 47.8101ms
2025-06-11 23:45:24.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.3592ms
2025-06-11 23:45:27.133 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:45:27.148 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:27.155 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:45:27.171 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:45:27.189 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:45:27.238 +07:00 [INF] Executed ViewResult - view Login executed in 50.1628ms.
2025-06-11 23:45:27.241 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 66.1417ms
2025-06-11 23:45:27.244 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:45:27.246 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:27.247 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 114.1208ms
2025-06-11 23:45:27.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:27.255 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:27.255 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.3695ms
2025-06-11 23:45:27.286 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5272ms
2025-06-11 23:45:30.259 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:45:30.266 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:45:30.267 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:45:30.274 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:45:30.284 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:45:30.327 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:45:30.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:45:30.492 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:45:30.585 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:45:30.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:45:30.609 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:45:30.619 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:45:30.623 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:45:30.625 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 339.1154ms
2025-06-11 23:45:30.628 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:45:30.630 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 370.9279ms
2025-06-11 23:45:30.634 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:45:30.639 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:30.645 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:30.646 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:45:30.658 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:45:30.665 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:45:30.678 +07:00 [INF] Executed ViewResult - view Index executed in 12.9608ms.
2025-06-11 23:45:30.681 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 31.626ms
2025-06-11 23:45:30.682 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:30.684 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:30.686 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 51.5298ms
2025-06-11 23:45:30.688 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:30.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:30.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 8.802ms
2025-06-11 23:45:30.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.502ms
2025-06-11 23:45:30.749 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:45:30.749 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:45:30.753 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:30.756 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:30.769 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:30.778 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:30.779 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:30.784 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:30.812 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:45:30.859 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:45:30.862 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:30.866 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:30.940 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 153.5097ms
2025-06-11 23:45:30.944 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:30.946 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:30.947 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 197.9746ms
2025-06-11 23:45:30.948 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 165.935ms
2025-06-11 23:45:30.952 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:30.953 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:30.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 205.1884ms
2025-06-11 23:45:37.815 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Homestay - null null
2025-06-11 23:45:37.827 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:37.829 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:45:37.867 +07:00 [INF] Route matched with {action = "Index", controller = "Homestay"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(WebHS.ViewModels.HomestaySearchViewModel) on controller WebHS.Controllers.HomestayController (WebHS).
2025-06-11 23:45:37.921 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
2025-06-11 23:45:37.938 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:45:37.962 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__searchModel_Guests_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Bathrooms], [t].[Bedrooms], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Description], [t].[District], [t].[HostId], [t].[IsActive], [t].[IsApproved], [t].[Latitude], [t].[Longitude], [t].[MaxGuests], [t].[Name], [t].[PricePerNight], [t].[Rules], [t].[State], [t].[UpdatedAt], [t].[Ward], [t].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t0].[Id], [t0].[CheckInDate], [t0].[CheckOutDate], [t0].[CreatedAt], [t0].[DiscountAmount], [t0].[FinalAmount], [t0].[HomestayId], [t0].[Notes], [t0].[NumberOfGuests], [t0].[PromotionId], [t0].[ReviewComment], [t0].[ReviewCreatedAt], [t0].[ReviewIsActive], [t0].[ReviewRating], [t0].[ReviewUpdatedAt], [t0].[Status], [t0].[TotalAmount], [t0].[UpdatedAt], [t0].[UserId]
FROM (
    SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
    FROM [Homestays] AS [h]
    WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit) AND [h].[MaxGuests] >= @__searchModel_Guests_0
    ORDER BY [h].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [HomestayImages] AS [h0] ON [t].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t0] ON [t].[Id] = [t0].[HomestayId]
ORDER BY [t].[CreatedAt] DESC, [t].[Id], [h0].[Id]
2025-06-11 23:45:37.986 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:45:37.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:45:37.997 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:45:38.000 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__h_Id_0='?' (DbType = Int32), @__8__locals1_now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[HomestayId] = @__h_Id_0 AND [b].[Status] IN (1, 2) AND [b].[CheckOutDate] > @__8__locals1_now_1
ORDER BY [b].[CheckInDate]
2025-06-11 23:45:38.011 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CreatedAt], [a].[Description], [a].[Icon], [a].[IsActive], [a].[Name]
FROM [Amenities] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit)
ORDER BY [a].[Name]
2025-06-11 23:45:38.025 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:45:38.067 +07:00 [INF] Executed ViewResult - view Index executed in 42.5814ms.
2025-06-11 23:45:38.068 +07:00 [INF] Executed action WebHS.Controllers.HomestayController.Index (WebHS) in 196.9308ms
2025-06-11 23:45:38.070 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomestayController.Index (WebHS)'
2025-06-11 23:45:38.071 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Homestay - 200 null text/html; charset=utf-8 258.844ms
2025-06-11 23:45:38.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:38.078 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:38.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 11.221ms
2025-06-11 23:45:38.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.8401ms
2025-06-11 23:45:38.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:45:38.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:45:38.142 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:38.145 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:38.148 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:38.148 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:38.150 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:38.152 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:38.165 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:45:38.165 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:45:38.170 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:38.174 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:38.175 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 20.8398ms
2025-06-11 23:45:38.177 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 19.3094ms
2025-06-11 23:45:38.179 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:38.180 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:38.181 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.182 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.183 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 45.0857ms
2025-06-11 23:45:38.184 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 46.4212ms
2025-06-11 23:45:38.407 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:45:38.412 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:38.413 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:38.415 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:45:38.419 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:45:38.427 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:45:38.430 +07:00 [INF] Executed ViewResult - view Index executed in 2.969ms.
2025-06-11 23:45:38.432 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 15.6524ms
2025-06-11 23:45:38.433 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:45:38.435 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.436 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 29.4589ms
2025-06-11 23:45:38.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:38.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:38.448 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.722ms
2025-06-11 23:45:38.449 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.8248ms
2025-06-11 23:45:38.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:45:38.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:45:38.491 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:38.494 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:38.496 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:38.497 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:38.498 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:38.499 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:38.506 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:45:38.511 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:45:38.514 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:38.517 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:38.518 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 16.6501ms
2025-06-11 23:45:38.520 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.4264ms
2025-06-11 23:45:38.522 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:38.525 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:38.526 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.528 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:38.529 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 43.0675ms
2025-06-11 23:45:38.530 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 43.9723ms
2025-06-11 23:45:39.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Review/AllReviews - null null
2025-06-11 23:45:39.278 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:39.280 +07:00 [INF] Executing endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:45:39.285 +07:00 [INF] Route matched with {action = "AllReviews", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AllReviews(Int32, System.String, System.Nullable`1[System.Int32], System.String) on controller WebHS.Controllers.ReviewController (WebHS).
2025-06-11 23:45:39.301 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
2025-06-11 23:45:39.393 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [a0].[Id], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [a0].[AccessFailedCount], [a0].[Address], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[IsActive], [a0].[IsHost], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[ProfilePicture], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UpdatedAt], [a0].[UserName]
FROM (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL AND [b].[ReviewIsActive] = CAST(1 AS bit)
    ORDER BY [b].[ReviewCreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [h].[HostId] = [a0].[Id]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
ORDER BY [t].[ReviewCreatedAt] DESC, [t].[Id], [a].[Id], [h].[Id], [a0].[Id]
2025-06-11 23:45:39.421 +07:00 [INF] Executing ViewResult, running view AllReviews.
2025-06-11 23:45:39.499 +07:00 [INF] Executed ViewResult - view AllReviews executed in 80.034ms.
2025-06-11 23:45:39.501 +07:00 [INF] Executed action WebHS.Controllers.ReviewController.AllReviews (WebHS) in 214.5627ms
2025-06-11 23:45:39.503 +07:00 [INF] Executed endpoint 'WebHS.Controllers.ReviewController.AllReviews (WebHS)'
2025-06-11 23:45:39.510 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:39.512 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Review/AllReviews - 200 null text/html; charset=utf-8 240.8688ms
2025-06-11 23:45:39.514 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:39.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:39.546 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.6131ms
2025-06-11 23:45:39.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 31.0924ms
2025-06-11 23:45:39.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Home/About - null null
2025-06-11 23:45:39.853 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:39.855 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:45:39.858 +07:00 [INF] Route matched with {action = "About", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult About() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:45:39.861 +07:00 [INF] Executing ViewResult, running view About.
2025-06-11 23:45:39.868 +07:00 [INF] Executed ViewResult - view About executed in 7.2423ms.
2025-06-11 23:45:39.869 +07:00 [INF] Executed action WebHS.Controllers.HomeController.About (WebHS) in 9.141ms
2025-06-11 23:45:39.871 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.About (WebHS)'
2025-06-11 23:45:39.873 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:39.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Home/About - 200 null text/html; charset=utf-8 27.6517ms
2025-06-11 23:45:39.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:39.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:39.897 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.4346ms
2025-06-11 23:45:39.911 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.4391ms
2025-06-11 23:45:41.335 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Admin - null null
2025-06-11 23:45:41.350 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:41.364 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:45:41.385 +07:00 [INF] Route matched with {action = "Index", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.AdminController (WebHS).
2025-06-11 23:45:41.432 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-06-11 23:45:41.441 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
2025-06-11 23:45:41.449 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
2025-06-11 23:45:41.472 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([b].[FinalAmount]), 0.0)
FROM [Bookings] AS [b]
WHERE [b].[Status] IN (2, 3)
2025-06-11 23:45:41.485 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Homestays] AS [h]
WHERE [h].[IsApproved] = CAST(0 AS bit)
2025-06-11 23:45:41.501 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-06-11 23:45:41.566 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName], [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[CreatedAt] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
INNER JOIN [Homestays] AS [h] ON [t].[HomestayId] = [h].[Id]
ORDER BY [t].[CreatedAt] DESC
2025-06-11 23:45:41.602 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Month], [t].[Year], COALESCE(SUM([t].[FinalAmount]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[FinalAmount], DATEPART(year, [b].[CreatedAt]) AS [Year], DATEPART(month, [b].[CreatedAt]) AS [Month]
    FROM [Bookings] AS [b]
    WHERE [b].[Status] IN (2, 3) AND [b].[CreatedAt] >= @__sixMonthsAgo_0
) AS [t]
GROUP BY [t].[Year], [t].[Month]
ORDER BY [t].[Year], [t].[Month]
2025-06-11 23:45:41.611 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:45:41.636 +07:00 [INF] Executed ViewResult - view Index executed in 26.0365ms.
2025-06-11 23:45:41.638 +07:00 [INF] Executed action WebHS.Controllers.AdminController.Index (WebHS) in 241.0359ms
2025-06-11 23:45:41.640 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AdminController.Index (WebHS)'
2025-06-11 23:45:41.641 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:41.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Admin - 200 null text/html; charset=utf-8 307.4293ms
2025-06-11 23:45:41.647 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:45:41.650 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 3.0437ms
2025-06-11 23:45:41.656 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:45:41.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.062ms
2025-06-11 23:45:41.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:45:41.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:45:41.798 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:41.801 +07:00 [INF] No cached response available for this request.
2025-06-11 23:45:41.803 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:41.803 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:41.805 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:41.806 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:45:41.812 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:45:41.820 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:41.822 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:45:41.822 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 13.14ms
2025-06-11 23:45:41.825 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:45:41.826 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:45:41.827 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 13.0701ms
2025-06-11 23:45:41.828 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:41.830 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:45:41.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 36.5814ms
2025-06-11 23:45:41.831 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:45:41.836 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 41.8027ms
2025-06-11 23:58:20.251 +07:00 [INF] Starting database basic initialization...
2025-06-11 23:58:21.373 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:58:21.418 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:58:21.423 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-11 23:58:21.425 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-11 23:58:21.439 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-11 23:58:21.454 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-11 23:58:21.473 +07:00 [INF] User profile is available. Using 'C:\Users\84788\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-11 23:58:21.695 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:58:21.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:58:21.735 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:58:21.749 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.810 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.813 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.817 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.820 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:21.825 +07:00 [INF] Starting sample data seeding...
2025-06-11 23:58:21.827 +07:00 [INF] Starting data seeding...
2025-06-11 23:58:21.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Amenities] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:58:21.843 +07:00 [INF] Amenities already exist, skipping seed
2025-06-11 23:58:21.850 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Homestays] AS [h]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:58:21.852 +07:00 [INF] Homestays already exist, skipping seed
2025-06-11 23:58:21.857 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Promotions] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:58:21.859 +07:00 [INF] Promotions already exist, skipping seed
2025-06-11 23:58:21.865 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Bookings] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:58:21.868 +07:00 [INF] Bookings already exist, skipping seed
2025-06-11 23:58:21.885 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[Status] = 4 AND [b].[ReviewRating] IS NULL
2025-06-11 23:58:21.893 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Payments] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-11 23:58:21.895 +07:00 [INF] Payments already exist, skipping seed
2025-06-11 23:58:21.896 +07:00 [INF] Data seeding completed successfully
2025-06-11 23:58:21.897 +07:00 [INF] Sample data seeding completed successfully.
2025-06-11 23:58:21.898 +07:00 [INF] Database initialization completed successfully.
2025-06-11 23:58:21.926 +07:00 [INF] Background Job Service started
2025-06-11 23:58:21.964 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BookingId], [p].[CompletedAt], [p].[CreatedAt], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TransactionId], [p].[UpdatedAt], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Status] = 0 AND [p].[CreatedAt] < DATEADD(hour, CAST(-24.0E0 AS int), GETUTCDATE())
2025-06-11 23:58:21.986 +07:00 [INF] Processed 0 expired payments
2025-06-11 23:58:22.080 +07:00 [INF] Now listening on: http://localhost:5000
2025-06-11 23:58:22.120 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 23:58:22.126 +07:00 [INF] Hosting environment: Development
2025-06-11 23:58:22.127 +07:00 [INF] Content root path: D:\WebHS
2025-06-11 23:58:22.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:58:22.664 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:22.678 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-11 23:58:22.733 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:58:22.748 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:58:22.881 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-11 23:58:22.894 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:58:23.007 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:58:23.119 +07:00 [INF] Executed ViewResult - view Index executed in 113.4409ms.
2025-06-11 23:58:23.123 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 372.2727ms
2025-06-11 23:58:23.125 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:58:23.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - null null
2025-06-11 23:58:23.128 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:23.134 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:23.139 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 672.3514ms
2025-06-11 23:58:23.140 +07:00 [INF] The file /WebHS.styles.css was not modified
2025-06-11 23:58:23.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:58:23.143 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:58:23.145 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:23.153 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/WebHS.styles.css?v=4cUw_AF79P7rt-UFsUXUHCAeEp0KONQ6ADzcsctUyxM - 304 null text/css 26.7571ms
2025-06-11 23:58:23.156 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 12.7248ms
2025-06-11 23:58:23.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.7072ms
2025-06-11 23:58:24.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Account/Login - null null
2025-06-11 23:58:24.171 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:24.175 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:58:24.182 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:58:24.192 +07:00 [INF] Executing ViewResult, running view Login.
2025-06-11 23:58:24.225 +07:00 [INF] Executed ViewResult - view Login executed in 34.2446ms.
2025-06-11 23:58:24.228 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 44.2064ms
2025-06-11 23:58:24.230 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:58:24.232 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:24.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Account/Login - 200 null text/html; charset=utf-8 69.5191ms
2025-06-11 23:58:24.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:58:24.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:58:24.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 2.7648ms
2025-06-11 23:58:24.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.6296ms
2025-06-11 23:58:25.523 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login - application/x-www-form-urlencoded 252
2025-06-11 23:58:25.533 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:58:25.536 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:58:25.543 +07:00 [INF] Executing endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:58:25.553 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebHS.ViewModels.LoginViewModel, System.String) on controller WebHS.Controllers.AccountController (WebHS).
2025-06-11 23:58:25.608 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-11 23:58:25.630 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[IsHost], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-11 23:58:25.799 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-06-11 23:58:25.831 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-11 23:58:25.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-11 23:58:25.854 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-06-11 23:58:25.865 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-06-11 23:58:25.870 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-06-11 23:58:25.872 +07:00 [INF] Executed action WebHS.Controllers.AccountController.Login (WebHS) in 316.087ms
2025-06-11 23:58:25.875 +07:00 [INF] Executed endpoint 'WebHS.Controllers.AccountController.Login (WebHS)'
2025-06-11 23:58:25.881 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Account/Login - 302 0 null 358.0997ms
2025-06-11 23:58:25.889 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-06-11 23:58:25.899 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:25.905 +07:00 [INF] Executing endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:58:25.907 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller WebHS.Controllers.HomeController (WebHS).
2025-06-11 23:58:25.915 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[Bathrooms], [h].[Bedrooms], [h].[City], [h].[Country], [h].[CreatedAt], [h].[Description], [h].[District], [h].[HostId], [h].[IsActive], [h].[IsApproved], [h].[Latitude], [h].[Longitude], [h].[MaxGuests], [h].[Name], [h].[PricePerNight], [h].[Rules], [h].[State], [h].[UpdatedAt], [h].[Ward], [h].[ZipCode], [h0].[Id], [h0].[Caption], [h0].[CreatedAt], [h0].[HomestayId], [h0].[ImageUrl], [h0].[IsPrimary], [h0].[Order], [t].[Id], [t].[CheckInDate], [t].[CheckOutDate], [t].[CreatedAt], [t].[DiscountAmount], [t].[FinalAmount], [t].[HomestayId], [t].[Notes], [t].[NumberOfGuests], [t].[PromotionId], [t].[ReviewComment], [t].[ReviewCreatedAt], [t].[ReviewIsActive], [t].[ReviewRating], [t].[ReviewUpdatedAt], [t].[Status], [t].[TotalAmount], [t].[UpdatedAt], [t].[UserId]
FROM [Homestays] AS [h]
LEFT JOIN [HomestayImages] AS [h0] ON [h].[Id] = [h0].[HomestayId]
LEFT JOIN (
    SELECT [b].[Id], [b].[CheckInDate], [b].[CheckOutDate], [b].[CreatedAt], [b].[DiscountAmount], [b].[FinalAmount], [b].[HomestayId], [b].[Notes], [b].[NumberOfGuests], [b].[PromotionId], [b].[ReviewComment], [b].[ReviewCreatedAt], [b].[ReviewIsActive], [b].[ReviewRating], [b].[ReviewUpdatedAt], [b].[Status], [b].[TotalAmount], [b].[UpdatedAt], [b].[UserId]
    FROM [Bookings] AS [b]
    WHERE [b].[ReviewRating] IS NOT NULL
) AS [t] ON [h].[Id] = [t].[HomestayId]
WHERE [h].[IsActive] = CAST(1 AS bit) AND [h].[IsApproved] = CAST(1 AS bit)
ORDER BY [h].[Id], [h0].[Id]
2025-06-11 23:58:25.929 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:58:25.945 +07:00 [INF] Executed ViewResult - view Index executed in 16.3049ms.
2025-06-11 23:58:25.948 +07:00 [INF] Executed action WebHS.Controllers.HomeController.Index (WebHS) in 38.9183ms
2025-06-11 23:58:25.951 +07:00 [INF] Executed endpoint 'WebHS.Controllers.HomeController.Index (WebHS)'
2025-06-11 23:58:25.960 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:58:25.960 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:58:25.960 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:25.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 4.0594ms
2025-06-11 23:58:25.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 200 null text/html; charset=utf-8 80.1948ms
2025-06-11 23:58:25.985 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.0378ms
2025-06-11 23:58:26.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:58:26.013 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:58:26.017 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:26.023 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:26.032 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:26.040 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:26.043 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:26.051 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:26.094 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:58:26.114 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:58:26.125 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:26.129 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:26.195 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 151.3937ms
2025-06-11 23:58:26.197 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:26.199 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:26.200 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 146.2891ms
2025-06-11 23:58:26.201 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 188.7585ms
2025-06-11 23:58:26.203 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:26.208 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:26.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 196.4128ms
2025-06-11 23:58:31.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion - null null
2025-06-11 23:58:31.329 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:31.332 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-11 23:58:31.335 +07:00 [INF] Route matched with {action = "Index", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(Int32, System.String) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-11 23:58:31.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Promotions] AS [p]
2025-06-11 23:58:31.373 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Code], COALESCE([p].[Description], N'') AS [Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], [p].[UsageLimit], [p].[UsedCount], [p].[StartDate], [p].[EndDate], [p].[IsActive], [p].[CreatedAt]
FROM [Promotions] AS [p]
ORDER BY [p].[CreatedAt] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 23:58:31.404 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:58:31.438 +07:00 [INF] Executed ViewResult - view Index executed in 34.4502ms.
2025-06-11 23:58:31.439 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.Index (WebHS) in 102.8512ms
2025-06-11 23:58:31.440 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-11 23:58:31.441 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:31.443 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion - 200 null text/html; charset=utf-8 118.6203ms
2025-06-11 23:58:31.446 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:58:31.447 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:58:31.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1161ms
2025-06-11 23:58:31.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 5.984ms
2025-06-11 23:58:31.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:58:31.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:58:31.485 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:31.487 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:31.489 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:31.489 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:31.490 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:31.491 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:31.498 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:58:31.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:58:31.503 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:31.505 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:31.506 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.4657ms
2025-06-11 23:58:31.506 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 11.1061ms
2025-06-11 23:58:31.508 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:31.509 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:31.510 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:31.511 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:31.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 30.4173ms
2025-06-11 23:58:31.512 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 31.0883ms
2025-06-11 23:58:50.413 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion/Create - null null
2025-06-11 23:58:50.417 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:50.419 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.Create (WebHS)'
2025-06-11 23:58:50.421 +07:00 [INF] Route matched with {action = "Create", controller = "Promotion"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-11 23:58:50.424 +07:00 [INF] Executing ViewResult, running view Create.
2025-06-11 23:58:50.471 +07:00 [INF] Executed ViewResult - view Create executed in 47.704ms.
2025-06-11 23:58:50.473 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.Create (WebHS) in 50.109ms
2025-06-11 23:58:50.474 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.Create (WebHS)'
2025-06-11 23:58:50.475 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:50.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion/Create - 200 null text/html; charset=utf-8 62.798ms
2025-06-11 23:58:50.477 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:58:50.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:58:50.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 7.3876ms
2025-06-11 23:58:50.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.9828ms
2025-06-11 23:58:50.508 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:58:50.508 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:58:50.510 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:50.512 +07:00 [INF] No cached response available for this request.
2025-06-11 23:58:50.514 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:50.515 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:50.515 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:50.516 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:58:50.522 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:58:50.526 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:50.527 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.8653ms
2025-06-11 23:58:50.528 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:58:50.528 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:58:50.530 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:58:50.531 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:50.532 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.2128ms
2025-06-11 23:58:50.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 24.8608ms
2025-06-11 23:58:50.534 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:58:50.537 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:58:50.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 29.9734ms
2025-06-11 23:59:20.514 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:59:20.514 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:59:20.519 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:20.521 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:20.522 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:20.522 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:20.523 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:20.524 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:20.557 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:59:20.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:59:20.566 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:20.568 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:20.569 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 44.116ms
2025-06-11 23:59:20.570 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.0815ms
2025-06-11 23:59:20.571 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:20.572 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:20.572 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:20.573 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:20.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 60.1727ms
2025-06-11 23:59:20.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 60.7764ms
2025-06-11 23:59:50.520 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:59:50.520 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:59:50.527 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:50.532 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:50.533 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:50.534 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:50.535 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:50.535 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:50.546 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:59:50.548 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:59:50.548 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:50.551 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:50.551 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 14.636ms
2025-06-11 23:59:50.553 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 12.2048ms
2025-06-11 23:59:50.554 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:50.555 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:50.556 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:50.558 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:50.559 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 38.2625ms
2025-06-11 23:59:50.559 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 38.9686ms
2025-06-11 23:59:56.439 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Promotion/Create - application/x-www-form-urlencoded 526
2025-06-11 23:59:56.449 +07:00 [INF] CORS policy execution failed.
2025-06-11 23:59:56.450 +07:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2025-06-11 23:59:56.453 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.Create (WebHS)'
2025-06-11 23:59:56.458 +07:00 [INF] Route matched with {action = "Create", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(WebHS.ViewModels.CreatePromotionViewModel) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-11 23:59:56.486 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__model_Code_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Code], [p].[CreatedAt], [p].[CreatedByUserId], [p].[Description], [p].[EndDate], [p].[IsActive], [p].[MaxDiscountAmount], [p].[MinOrderAmount], [p].[Name], [p].[StartDate], [p].[Type], [p].[UpdatedAt], [p].[UsageLimit], [p].[UsedCount], [p].[Value]
FROM [Promotions] AS [p]
WHERE [p].[Code] = @__model_Code_0
2025-06-11 23:59:56.600 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 200), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Promotions] ([Code], [CreatedAt], [CreatedByUserId], [Description], [EndDate], [IsActive], [MaxDiscountAmount], [MinOrderAmount], [Name], [StartDate], [Type], [UpdatedAt], [UsageLimit], [UsedCount], [Value])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-11 23:59:56.621 +07:00 [INF] Executing RedirectResult, redirecting to /Promotion.
2025-06-11 23:59:56.623 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.Create (WebHS) in 163.8976ms
2025-06-11 23:59:56.624 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.Create (WebHS)'
2025-06-11 23:59:56.625 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Promotion/Create - 302 0 null 186.2478ms
2025-06-11 23:59:56.628 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Promotion - null null
2025-06-11 23:59:56.632 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:56.633 +07:00 [INF] Executing endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-11 23:59:56.634 +07:00 [INF] Route matched with {action = "Index", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(Int32, System.String) on controller WebHS.Controllers.PromotionController (WebHS).
2025-06-11 23:59:56.637 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Promotions] AS [p]
2025-06-11 23:59:56.642 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Code], COALESCE([p].[Description], N'') AS [Description], [p].[Type], [p].[Value], [p].[MinOrderAmount], [p].[MaxDiscountAmount], [p].[UsageLimit], [p].[UsedCount], [p].[StartDate], [p].[EndDate], [p].[IsActive], [p].[CreatedAt]
FROM [Promotions] AS [p]
ORDER BY [p].[CreatedAt] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-06-11 23:59:56.644 +07:00 [INF] Executing ViewResult, running view Index.
2025-06-11 23:59:56.647 +07:00 [INF] Executed ViewResult - view Index executed in 2.68ms.
2025-06-11 23:59:56.648 +07:00 [INF] Executed action WebHS.Controllers.PromotionController.Index (WebHS) in 12.3303ms
2025-06-11 23:59:56.649 +07:00 [INF] Executed endpoint 'WebHS.Controllers.PromotionController.Index (WebHS)'
2025-06-11 23:59:56.650 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:56.651 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Promotion - 200 null text/html; charset=utf-8 22.6511ms
2025-06-11 23:59:56.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 23:59:56.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - null null
2025-06-11 23:59:56.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 13746 application/javascript; charset=utf-8 1.9246ms
2025-06-11 23:59:56.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.6573ms
2025-06-11 23:59:56.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - null null
2025-06-11 23:59:56.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - null null
2025-06-11 23:59:56.687 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:56.690 +07:00 [INF] No cached response available for this request.
2025-06-11 23:59:56.692 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:56.692 +07:00 [INF] Executing endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:56.693 +07:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:56.694 +07:00 [INF] Route matched with {action = "GetAdminMessageRequests", controller = "Messaging"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminMessageRequests() on controller WebHS.Controllers.MessagingController (WebHS).
2025-06-11 23:59:56.698 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE [m].[ReceiverId] = @__userId_0 AND [m].[IsRead] = CAST(0 AS bit) AND [m].[IsDeleted] = CAST(0 AS bit)
2025-06-11 23:59:56.703 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType32`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:56.705 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetUnreadCount (WebHS) in 9.7736ms
2025-06-11 23:59:56.705 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AcceptedAt], [u].[AcceptedBy], [u].[ConversationId], [u].[CreatedAt], [u].[IsAccepted], [u].[IsRead], [u].[Message], [u].[RequesterEmail], [u].[RequesterId], [u].[RequesterName], [u].[Type], [u].[UserId]
FROM [UserNotifications] AS [u]
WHERE [u].[Type] = N'message_request' AND [u].[IsRead] = CAST(0 AS bit) AND [u].[IsAccepted] = CAST(0 AS bit)
ORDER BY [u].[CreatedAt] DESC
2025-06-11 23:59:56.706 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetUnreadCount (WebHS)'
2025-06-11 23:59:56.708 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType34`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WebHS.Models.UserNotification, WebHS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 23:59:56.709 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:56.710 +07:00 [INF] Executed action WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS) in 11.1139ms
2025-06-11 23:59:56.711 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetUnreadCount - 200 null application/json; charset=utf-8 26.066ms
2025-06-11 23:59:56.712 +07:00 [INF] Executed endpoint 'WebHS.Controllers.MessagingController.GetAdminMessageRequests (WebHS)'
2025-06-11 23:59:56.715 +07:00 [INF] The response could not be cached for this request.
2025-06-11 23:59:56.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Messaging/GetAdminMessageRequests - 200 null application/json; charset=utf-8 31.6438ms
